{"cache":{"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/configs/cfgHotkeys.js":{"source":"\"use strict\";\n\nmodule.exports = /*@ngInject*/function (hotkeysProvider) {\n\thotkeysProvider.includeCheatSheet = false;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbmZpZ3MvY2ZnSG90a2V5cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLGVBQWUsRUFBSztBQUNsRCxnQkFBZSxDQUFDLGlCQUFpQixHQUFHLEtBQUssQ0FBQztDQUMxQyxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbmZpZ3MvY2ZnSG90a2V5cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLyhob3RrZXlzUHJvdmlkZXIpID0+IHtcblx0aG90a2V5c1Byb3ZpZGVyLmluY2x1ZGVDaGVhdFNoZWV0ID0gZmFsc2U7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/configs/cfgNavigation.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($stateProvider, $urlRouterProvider, $locationProvider) {\n\t$locationProvider.html5Mode(true);\n\n\t// small hack - both routers(login && main app) work at the same time, so we need to troubleshot this\n\t$urlRouterProvider.otherwise(function ($injector, $location) {\n\t\tconsole.log('main router otherwise: window.loader.isMainApplication()', window.loader.isMainApplication(), $location);\n\t\tif (!window.loader.isMainApplication()) return undefined;\n\t\treturn '/label/Inbox';\n\t});\n\n\tvar primaryStates = {\n\t\t'empty': {\n\t\t\turl: '/'\n\t\t},\n\n\t\t'modal': {\n\t\t\turl: '/modal'\n\t\t},\n\n\t\t'main': {\n\t\t\tabstract: true,\n\n\t\t\tviews: {\n\t\t\t\t'left-view': {\n\t\t\t\t\ttemplateUrl: 'partials/navigation.html',\n\t\t\t\t\tcontroller: 'CtrlNavigation'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t'main.inbox': {\n\t\t\turl: '/label/:labelName',\n\t\t\tviews: {\n\t\t\t\t'main-view@': {\n\t\t\t\t\ttemplateUrl: 'partials/inbox.html'\n\t\t\t\t},\n\t\t\t\t'threads@main.inbox': {\n\t\t\t\t\ttemplateUrl: 'partials/inbox/threads.html',\n\t\t\t\t\tcontroller: 'CtrlThreadList'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t'main.inbox.label': {\n\t\t\turl: '/:threadId',\n\n\t\t\tviews: {\n\t\t\t\t'emails@main.inbox': {\n\t\t\t\t\ttemplateUrl: 'partials/inbox/emails.html',\n\t\t\t\t\tcontroller: 'CtrlEmailList'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t'main.contacts': {\n\t\t\turl: '/contacts',\n\t\t\tviews: {\n\t\t\t\t'main-view@': {\n\t\t\t\t\ttemplateUrl: 'partials/contacts.html'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t'main.contacts.profile': {\n\t\t\turl: '/profile/:contactId?email',\n\t\t\ttemplateUrl: 'partials/contacts/contacts.profile.html',\n\t\t\tcontroller: 'CtrlContactProfile'\n\t\t},\n\n\t\t'main.settings': {\n\t\t\turl: '/settings',\n\t\t\tviews: {\n\t\t\t\t'main-view@': {\n\t\t\t\t\ttemplateUrl: 'partials/settings.html'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t'main.settings.general': {\n\t\t\turl: '/general',\n\t\t\ttemplateUrl: 'partials/settings/settings.general.html'\n\t\t},\n\n\t\t'main.settings.profile': {\n\t\t\turl: '/profile',\n\t\t\ttemplateUrl: 'partials/settings/settings.profile.html'\n\t\t},\n\n\t\t'main.settings.security': {\n\t\t\turl: '/security',\n\t\t\ttemplateUrl: 'partials/settings/settings.security.html'\n\t\t},\n\n\t\t'main.settings.plan': {\n\t\t\turl: '/plan',\n\t\t\ttemplateUrl: 'partials/settings/settings.plan.html'\n\t\t}\n\t};\n\n\tfunction PopupAbstractState() {\n\t\tthis.abstract = true;\n\t}\n\n\tvar popupStates = {\n\t\t'compose': function compose() {\n\t\t\tthis.url = '/compose?replyThreadId&replyEmailId&isReplyAll&forwardEmailId&forwardThreadId&to&publicKey';\n\n\t\t\t// @ngInject\n\t\t\tthis.onEnter = function (router) {\n\t\t\t\trouter.createPopup({\n\t\t\t\t\ttemplateUrl: 'partials/compose.html',\n\t\t\t\t\tcontroller: 'CtrlCompose',\n\t\t\t\t\tbackdrop: 'static',\n\t\t\t\t\tsize: 'lg'\n\t\t\t\t});\n\t\t\t};\n\t\t},\n\t\t'hotkeys': function hotkeys() {\n\t\t\tthis.url = '/hotkeys';\n\n\t\t\t// @ngInject\n\t\t\tthis.onEnter = function (router) {\n\t\t\t\trouter.createPopup({\n\t\t\t\t\ttemplateUrl: 'partials/hotkeys.html',\n\t\t\t\t\tcontroller: 'CtrlHotkeys',\n\t\t\t\t\tbackdrop: 'static',\n\t\t\t\t\tsize: 'lg'\n\t\t\t\t});\n\t\t\t};\n\t\t},\n\t\t'download': function download() {\n\t\t\tthis.url = '/download/:emailId/:fileId';\n\n\t\t\t// @ngInject\n\t\t\tthis.onEnter = function (router) {\n\t\t\t\trouter.createPopup({\n\t\t\t\t\ttemplateUrl: 'partials/download.html',\n\t\t\t\t\tcontroller: 'CtrlDownload',\n\t\t\t\t\tbackdrop: 'static',\n\t\t\t\t\tsize: 'lg'\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t};\n\n\tvar declareState = function declareState(name, state) {\n\t\tconsole.log('creating state ', name);\n\t\t$stateProvider.state(name, state);\n\t};\n\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = Object.keys(primaryStates)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar stateName = _step.value;\n\n\t\t\tdeclareState(stateName, primaryStates[stateName]);\n\n\t\t\tif (!primaryStates[stateName].abstract) {\n\t\t\t\tdeclareState('' + stateName + '.popup', new PopupAbstractState());\n\t\t\t\tfor (var popupStateName in popupStates) {\n\t\t\t\t\tif (stateName.indexOf('main.') === 0) {\n\t\t\t\t\t\tdeclareState('' + stateName + '.popup.' + popupStateName, new popupStates[popupStateName]());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t_iterator['return']();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbmZpZ3MvY2ZnTmF2aWdhdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxpQkFBaUIsRUFBSztBQUN4RixrQkFBaUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7OztBQUdsQyxtQkFBa0IsQ0FBQyxTQUFTLENBQUMsVUFBQyxTQUFTLEVBQUUsU0FBUyxFQUFLO0FBQ3RELFNBQU8sQ0FBQyxHQUFHLENBQUMsMERBQTBELEVBQUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0FBQ3RILE1BQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLEVBQ3JDLE9BQU8sU0FBUyxDQUFDO0FBQ2xCLFNBQU8sY0FBYyxDQUFDO0VBQ3RCLENBQUMsQ0FBQzs7QUFFSCxLQUFNLGFBQWEsR0FBRztBQUNyQixTQUFPLEVBQUU7QUFDUixNQUFHLEVBQUUsR0FBRztHQUNSOztBQUVELFNBQU8sRUFBRztBQUNULE1BQUcsRUFBRSxRQUFRO0dBQ2I7O0FBRUQsUUFBTSxFQUFFO0FBQ1AsV0FBUSxFQUFFLElBQUk7O0FBRWQsUUFBSyxFQUFFO0FBQ04sZUFBVyxFQUFFO0FBQ1osZ0JBQVcsRUFBRSwwQkFBMEI7QUFDdkMsZUFBVSxFQUFFLGdCQUFnQjtLQUM1QjtJQUNEO0dBQ0Q7O0FBRUQsY0FBWSxFQUFFO0FBQ2IsTUFBRyxFQUFFLG1CQUFtQjtBQUN4QixRQUFLLEVBQUU7QUFDTixnQkFBWSxFQUFFO0FBQ2IsZ0JBQVcsRUFBRSxxQkFBcUI7S0FDbEM7QUFDRCx3QkFBb0IsRUFBRTtBQUNyQixnQkFBVyxFQUFFLDZCQUE2QjtBQUMxQyxlQUFVLEVBQUUsZ0JBQWdCO0tBQzVC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Uzs7QUFDaEIsZUFBWSxDQUFDLFNBQVMsRUFBRSxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQzs7QUFFbEQsT0FBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxRQUFRLEVBQUU7QUFDdkMsZ0JBQVksTUFBSSxTQUFTLGFBQVUsSUFBSSxrQkFBa0IsRUFBRSxDQUFDLENBQUM7QUFDN0QsU0FBSyxJQUFJLGNBQWMsSUFBSSxXQUFXO0FBQ3JDLFNBQUksU0FBUyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDckMsa0JBQVksTUFBSSxTQUFTLGVBQVUsY0FBYyxFQUFJLElBQUksV0FBVyxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQztNQUN4RjtLQUFBO0lBQ0Y7R0FDRDs7Ozs7Ozs7Ozs7Ozs7O0NBQ0QsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9jb25maWdzL2NmZ05hdmlnYXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpID0+IHtcclxuXHQkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XHJcblxyXG5cdC8vIHNtYWxsIGhhY2sgLSBib3RoIHJvdXRlcnMobG9naW4gJiYgbWFpbiBhcHApIHdvcmsgYXQgdGhlIHNhbWUgdGltZSwgc28gd2UgbmVlZCB0byB0cm91Ymxlc2hvdCB0aGlzXHJcblx0JHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgoJGluamVjdG9yLCAkbG9jYXRpb24pID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKCdtYWluIHJvdXRlciBvdGhlcndpc2U6IHdpbmRvdy5sb2FkZXIuaXNNYWluQXBwbGljYXRpb24oKScsIHdpbmRvdy5sb2FkZXIuaXNNYWluQXBwbGljYXRpb24oKSwgJGxvY2F0aW9uKTtcclxuXHRcdGlmICghd2luZG93LmxvYWRlci5pc01haW5BcHBsaWNhdGlvbigpKVxyXG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0cmV0dXJuICcvbGFiZWwvSW5ib3gnO1xyXG5cdH0pO1xyXG5cclxuXHRjb25zdCBwcmltYXJ5U3RhdGVzID0ge1xyXG5cdFx0J2VtcHR5Jzoge1xyXG5cdFx0XHR1cmw6ICcvJ1xyXG5cdFx0fSxcclxuXHJcblx0XHQnbW9kYWwnIDoge1xyXG5cdFx0XHR1cmw6ICcvbW9kYWwnXHJcblx0XHR9LFxyXG5cclxuXHRcdCdtYWluJzoge1xyXG5cdFx0XHRhYnN0cmFjdDogdHJ1ZSxcclxuXHJcblx0XHRcdHZpZXdzOiB7XHJcblx0XHRcdFx0J2xlZnQtdmlldyc6IHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvbmF2aWdhdGlvbi5odG1sJyxcclxuXHRcdFx0XHRcdGNvbnRyb2xsZXI6ICdDdHJsTmF2aWdhdGlvbidcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0J21haW4uaW5ib3gnOiB7XHJcblx0XHRcdHVybDogJy9sYWJlbC86bGFiZWxOYW1lJyxcclxuXHRcdFx0dmlld3M6IHtcclxuXHRcdFx0XHQnbWFpbi12aWV3QCc6IHtcclxuXHRcdFx0XHRcdHRlbXBsYXRlVXJsOiAncGFydGlhbHMvaW5ib3guaHRtbCdcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdCd0aHJlYWRzQG1haW4uaW5ib3gnOiB7XHJcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2luYm94L3RocmVhZHMuaHRtbCcsXHJcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ3RybFRocmVhZExpc3QnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdCdtYWluLmluYm94LmxhYmVsJzoge1xyXG5cdFx0XHR1cmw6ICcvOnRocmVhZElkJyxcclxuXHJcblx0XHRcdHZpZXdzOiB7XHJcblx0XHRcdFx0J2VtYWlsc0BtYWluLmluYm94Jzoge1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9pbmJveC9lbWFpbHMuaHRtbCcsXHJcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ3RybEVtYWlsTGlzdCdcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0J21haW4uY29udGFjdHMnIDoge1xyXG5cdFx0XHR1cmw6ICcvY29udGFjdHMnLFxyXG5cdFx0XHR2aWV3czoge1xyXG5cdFx0XHRcdCdtYWluLXZpZXdAJzoge1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9jb250YWN0cy5odG1sJ1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQnbWFpbi5jb250YWN0cy5wcm9maWxlJzoge1xyXG5cdFx0XHR1cmw6ICcvcHJvZmlsZS86Y29udGFjdElkP2VtYWlsJyxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9jb250YWN0cy9jb250YWN0cy5wcm9maWxlLmh0bWwnLFxyXG5cdFx0XHRjb250cm9sbGVyOiAnQ3RybENvbnRhY3RQcm9maWxlJ1xyXG5cdFx0fSxcclxuXHJcblx0XHQnbWFpbi5zZXR0aW5ncycgOiB7XHJcblx0XHRcdHVybDogJy9zZXR0aW5ncycsXHJcblx0XHRcdHZpZXdzOiB7XHJcblx0XHRcdFx0J21haW4tdmlld0AnOiB7XHJcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NldHRpbmdzLmh0bWwnXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdCdtYWluLnNldHRpbmdzLmdlbmVyYWwnOiB7XHJcblx0XHRcdHVybDogJy9nZW5lcmFsJyxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zZXR0aW5ncy9zZXR0aW5ncy5nZW5lcmFsLmh0bWwnXHJcblx0XHR9LFxyXG5cclxuXHRcdCdtYWluLnNldHRpbmdzLnByb2ZpbGUnOiB7XHJcblx0XHRcdHVybDogJy9wcm9maWxlJyxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zZXR0aW5ncy9zZXR0aW5ncy5wcm9maWxlLmh0bWwnXHJcblx0XHR9LFxyXG5cclxuXHRcdCdtYWluLnNldHRpbmdzLnNlY3VyaXR5Jzoge1xyXG5cdFx0XHR1cmw6ICcvc2VjdXJpdHknLFxyXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL3NldHRpbmdzL3NldHRpbmdzLnNlY3VyaXR5Lmh0bWwnXHJcblx0XHR9LFxyXG5cclxuXHRcdCdtYWluLnNldHRpbmdzLnBsYW4nOiB7XHJcblx0XHRcdHVybDogJy9wbGFuJyxcclxuXHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9zZXR0aW5ncy9zZXR0aW5ncy5wbGFuLmh0bWwnXHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0ZnVuY3Rpb24gUG9wdXBBYnN0cmFjdFN0YXRlICgpIHtcclxuXHRcdHRoaXMuYWJzdHJhY3QgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0Y29uc3QgcG9wdXBTdGF0ZXMgPSB7XHJcblx0XHQnY29tcG9zZSc6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dGhpcy51cmwgPSAgJy9jb21wb3NlP3JlcGx5VGhyZWFkSWQmcmVwbHlFbWFpbElkJmlzUmVwbHlBbGwmZm9yd2FyZEVtYWlsSWQmZm9yd2FyZFRocmVhZElkJnRvJnB1YmxpY0tleSc7XHJcblxyXG5cdFx0XHQvLyBAbmdJbmplY3RcclxuXHRcdFx0dGhpcy5vbkVudGVyID0gKHJvdXRlcikgPT4ge1xyXG5cdFx0XHRcdHJvdXRlci5jcmVhdGVQb3B1cCh7XHJcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2NvbXBvc2UuaHRtbCcsXHJcblx0XHRcdFx0XHRjb250cm9sbGVyOiAnQ3RybENvbXBvc2UnLFxyXG5cdFx0XHRcdFx0YmFja2Ryb3A6ICdzdGF0aWMnLFxyXG5cdFx0XHRcdFx0c2l6ZTogJ2xnJ1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHRcdCdob3RrZXlzJzogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHR0aGlzLnVybCA9ICAnL2hvdGtleXMnO1xyXG5cclxuXHRcdFx0Ly8gQG5nSW5qZWN0XHJcblx0XHRcdHRoaXMub25FbnRlciA9IChyb3V0ZXIpID0+IHtcclxuXHRcdFx0XHRyb3V0ZXIuY3JlYXRlUG9wdXAoe1xyXG5cdFx0XHRcdFx0dGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ob3RrZXlzLmh0bWwnLFxyXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ0N0cmxIb3RrZXlzJyxcclxuXHRcdFx0XHRcdGJhY2tkcm9wOiAnc3RhdGljJyxcclxuXHRcdFx0XHRcdHNpemU6ICdsZydcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblx0XHQnZG93bmxvYWQnOiBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdHRoaXMudXJsID0gICcvZG93bmxvYWQvOmVtYWlsSWQvOmZpbGVJZCc7XHJcblxyXG5cdFx0XHQvLyBAbmdJbmplY3RcclxuXHRcdFx0dGhpcy5vbkVudGVyID0gKHJvdXRlcikgPT4ge1xyXG5cdFx0XHRcdHJvdXRlci5jcmVhdGVQb3B1cCh7XHJcblx0XHRcdFx0XHR0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2Rvd25sb2FkLmh0bWwnLFxyXG5cdFx0XHRcdFx0Y29udHJvbGxlcjogJ0N0cmxEb3dubG9hZCcsXHJcblx0XHRcdFx0XHRiYWNrZHJvcDogJ3N0YXRpYycsXHJcblx0XHRcdFx0XHRzaXplOiAnbGcnXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Y29uc3QgZGVjbGFyZVN0YXRlID0gKG5hbWUsIHN0YXRlKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZygnY3JlYXRpbmcgc3RhdGUgJywgbmFtZSk7XHJcblx0XHQkc3RhdGVQcm92aWRlci5zdGF0ZShuYW1lLCBzdGF0ZSk7XHJcblx0fTtcclxuXHJcblx0Zm9yKGxldCBzdGF0ZU5hbWUgb2YgT2JqZWN0LmtleXMocHJpbWFyeVN0YXRlcykpIHtcclxuXHRcdGRlY2xhcmVTdGF0ZShzdGF0ZU5hbWUsIHByaW1hcnlTdGF0ZXNbc3RhdGVOYW1lXSk7XHJcblxyXG5cdFx0aWYgKCFwcmltYXJ5U3RhdGVzW3N0YXRlTmFtZV0uYWJzdHJhY3QpIHtcclxuXHRcdFx0ZGVjbGFyZVN0YXRlKGAke3N0YXRlTmFtZX0ucG9wdXBgLCBuZXcgUG9wdXBBYnN0cmFjdFN0YXRlKCkpO1xyXG5cdFx0XHRmb3IgKGxldCBwb3B1cFN0YXRlTmFtZSBpbiBwb3B1cFN0YXRlcylcclxuXHRcdFx0XHRpZiAoc3RhdGVOYW1lLmluZGV4T2YoJ21haW4uJykgPT09IDApIHtcclxuXHRcdFx0XHRcdGRlY2xhcmVTdGF0ZShgJHtzdGF0ZU5hbWV9LnBvcHVwLiR7cG9wdXBTdGF0ZU5hbWV9YCwgbmV3IHBvcHVwU3RhdGVzW3BvcHVwU3RhdGVOYW1lXSgpKTtcclxuXHRcdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG4iXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/CtrlThreadList.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $state, $timeout, $interval, $translate, co, utils, consts, hotkey, user, inbox) {\n\n\t$scope.labelName = $state.params.labelName;\n\t$scope.selectedTid = $state.params.threadId ? $state.params.threadId : inbox.selectedTidByLabelName[$scope.labelName] ? inbox.selectedTidByLabelName[$scope.labelName] : null;\n\n\t$scope.threads = {};\n\t$scope.threadsList = [];\n\t$scope.searchText = '';\n\n\t$scope.isLoading = false;\n\t$scope.isLoadingSign = false;\n\t$scope.isDisabledScroll = true;\n\t$scope.isThreads = false;\n\n\t$scope.offset = 0;\n\t$scope.limit = 15;\n\n\t$scope.status = {\n\t\tisSortOpened: false\n\t};\n\t$scope.sortedLabel = '';\n\t$scope.sortQuery = inbox.getSortQuery();\n\n\tconsole.log('CtrlThreadList is loading', $scope.labelName, $scope.selectedTid);\n\n\tvar setLoadingSignTimeout = null;\n\n\t{\n\t\t(function () {\n\t\t\tvar emailsSelectedTid = null;\n\n\t\t\t$scope.$watch('filteredThreadsList', function (o, n) {\n\t\t\t\tif (o == n) return;\n\n\t\t\t\tvar r = $scope.filteredThreadsList.find(function (t) {\n\t\t\t\t\treturn t.id == $scope.selectedTid;\n\t\t\t\t});\n\t\t\t\tif (!r) {\n\t\t\t\t\temailsSelectedTid = $scope.selectedTid;\n\t\t\t\t\t$rootScope.$broadcast('inbox-emails-clear');\n\t\t\t\t} else if ($scope.selectedTid == emailsSelectedTid) {\n\t\t\t\t\t$rootScope.$broadcast('inbox-emails-restore');\n\t\t\t\t}\n\t\t\t});\n\t\t})();\n\t}\n\n\tvar translations = {\n\t\tLB_SORT_BY_CREATION_DATE_DESC: '',\n\t\tLB_SORT_BY_CREATION_DATE_ASC: '',\n\t\tLB_SORT_BY_MODIFICATION_DATE_DESC: '',\n\t\tLB_SORT_BY_MODIFICATION_DATE_ASC: '',\n\t\tLB_SORTED_BY_CREATION_DATE_DESC: '',\n\t\tLB_SORTED_BY_CREATION_DATE_ASC: '',\n\t\tLB_SORTED_BY_MODIFICATION_DATE_DESC: '',\n\t\tLB_SORTED_BY_MODIFICATION_DATE_ASC: ''\n\t};\n\n\t$translate.bindAsObject(translations, 'INBOX', null, function () {\n\t\t$scope.sorts = [{\n\t\t\tquery: '-date_created',\n\t\t\tlabel: translations.LB_SORT_BY_CREATION_DATE_DESC,\n\t\t\tlabelSorted: translations.LB_SORTED_BY_CREATION_DATE_DESC\n\t\t}, {\n\t\t\tquery: '+date_created',\n\t\t\tlabel: translations.LB_SORT_BY_CREATION_DATE_ASC,\n\t\t\tlabelSorted: translations.LB_SORTED_BY_CREATION_DATE_ASC\n\t\t}, {\n\t\t\tquery: '-date_modified',\n\t\t\tlabel: translations.LB_SORT_BY_MODIFICATION_DATE_DESC,\n\t\t\tlabelSorted: translations.LB_SORTED_BY_MODIFICATION_DATE_DESC\n\t\t}, {\n\t\t\tquery: '+date_modified',\n\t\t\tlabel: translations.LB_SORT_BY_MODIFICATION_DATE_ASC,\n\t\t\tlabelSorted: translations.LB_SORTED_BY_MODIFICATION_DATE_ASC\n\t\t}];\n\n\t\tvar currentSort = $scope.sorts.find(function (s) {\n\t\t\treturn s.query == $scope.sortQuery;\n\t\t});\n\t\t$scope.sortedLabel = currentSort ? currentSort.labelSorted : '';\n\t});\n\n\tvar requestList = function requestList() {\n\t\tif ($scope.isLoading) return;\n\n\t\t$scope.isLoading = true;\n\t\tif ($scope.threadsList.length > 0) $scope.isLoadingSign = true;else setLoadingSignTimeout = $timeout(function () {\n\t\t\t$scope.isLoadingSign = true;\n\t\t}, consts.LOADER_SHOW_DELAY);\n\n\t\tvar labelName = $scope.labelName;\n\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar list;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.prev = 0;\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn inbox.requestList($scope.labelName, $scope.offset, $scope.limit);\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tlist = context$3$0.sent;\n\n\t\t\t\t\t\tif (labelName == $scope.labelName) {\n\t\t\t\t\t\t\t$scope.isDisabledScroll = list.length < 1;\n\t\t\t\t\t\t\t$scope.offset += list.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcontext$3$0.next = 11;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tcontext$3$0.prev = 7;\n\t\t\t\t\t\tcontext$3$0.t0 = context$3$0['catch'](0);\n\n\t\t\t\t\t\t$scope.isDisabledScroll = true;\n\t\t\t\t\t\tthrow context$3$0.t0;\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[0, 7]]);\n\t\t}));\n\t};\n\n\t$scope.sortThreads = function (sortQuery) {\n\t\t$scope.sortQuery = sortQuery;\n\t\tinbox.setSortQuery(sortQuery);\n\n\t\t$scope.offset = 0;\n\t\t$scope.limit = 15;\n\t\t$scope.threads = {};\n\t\t$scope.threadsList = [];\n\t\trequestList();\n\t};\n\n\t$scope.selectThread = function (tid) {\n\t\t$state.go('main.inbox.label', { threadId: tid });\n\t\t$scope.selectedTid = tid;\n\t};\n\n\t$scope.replyThread = function (event, tid) {\n\t\t$scope.showPopup('compose', { replyThreadId: tid });\n\t};\n\n\t$scope.searchFilter = function (thread) {\n\t\tvar searchText = $scope.searchText.toLowerCase();\n\t\treturn thread.subject.toLowerCase().includes(searchText) || thread.membersPretty.toLowerCase().includes(searchText);\n\t};\n\n\t$scope.$on('$stateChangeStart', function (e, toState, toParams) {\n\t\tif (toState.name == 'main.inbox.label') $scope.selectedTid = toParams.threadId ? toParams.threadId : null;\n\t});\n\n\t$scope.$on('inbox-threads', function (e, labelName) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar threadsList, selectedIndex;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tconsole.log('inbox-threads', labelName);\n\n\t\t\t\t\t\tcontext$3$0.prev = 1;\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn inbox.requestListDirect($scope.labelName, 0, $scope.offset + $scope.limit);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tthreadsList = context$3$0.sent;\n\t\t\t\t\t\tselectedIndex = $scope.threadsList && $scope.selectedTid !== null ? $scope.threadsList.findIndex(function (thread) {\n\t\t\t\t\t\t\treturn thread.id == $scope.selectedTid;\n\t\t\t\t\t\t}) : -1;\n\n\t\t\t\t\t\tconsole.log('inbox-threads selectedIndex 1: ', selectedIndex);\n\n\t\t\t\t\t\t$scope.threadsList = threadsList;\n\n\t\t\t\t\t\tif (!$scope.threadsList || $scope.threadsList.length < 1) $state.go('main.inbox.label', { labelName: $scope.labelName, threadId: null });else if (selectedIndex > -1 && $scope.threadsList.findIndex(function (thread) {\n\t\t\t\t\t\t\treturn thread.id == $scope.selectedTid;\n\t\t\t\t\t\t}) < 0) {\n\t\t\t\t\t\t\tselectedIndex = Math.min(Math.max(selectedIndex, 0), $scope.threadsList.length - 1);\n\t\t\t\t\t\t\t$scope.selectThread($scope.threadsList[selectedIndex].id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.log('inbox-threads selectedIndex 2: ', selectedIndex);\n\n\t\t\t\t\t\t$scope.threads = utils.toMap($scope.threadsList);\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tcontext$3$0.prev = 11;\n\n\t\t\t\t\t\tif (setLoadingSignTimeout) {\n\t\t\t\t\t\t\t$timeout.cancel(setLoadingSignTimeout);\n\t\t\t\t\t\t\tsetLoadingSignTimeout = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$scope.isLoading = false;\n\t\t\t\t\t\t$scope.isLoadingSign = false;\n\t\t\t\t\t\t$scope.isThreads = true;\n\t\t\t\t\t\treturn context$3$0.finish(11);\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[1,, 11, 17]]);\n\t\t}));\n\t});\n\n\t$scope.scroll = function () {\n\t\tconsole.log('scroll()', $scope.isLoading, $scope.isDisabledScroll);\n\t\tif ($scope.isLoading || $scope.isDisabledScroll) return;\n\n\t\trequestList();\n\t};\n\n\trequestList();\n\n\t// Add hotkeys\n\tvar addHotkeys = function addHotkeys() {\n\t\tvar moveThreads = function moveThreads(delta) {\n\t\t\tvar selectedIndex = $scope.threadsList && $scope.selectedTid !== null ? $scope.threadsList.findIndex(function (thread) {\n\t\t\t\treturn thread.id == $scope.selectedTid;\n\t\t\t}) : -1;\n\t\t\tif ($scope.selectedTid !== null) {\n\t\t\t\tselectedIndex = Math.min(Math.max(selectedIndex + delta, 0), $scope.threadsList.length - 1);\n\t\t\t\t$scope.selectedTid = $scope.threadsList[selectedIndex].id;\n\t\t\t\t$scope.selectThread($scope.selectedTid);\n\t\t\t}\n\t\t};\n\n\t\tvar moveUp = function moveUp(event, key) {\n\t\t\tevent.preventDefault();\n\t\t\tmoveThreads(-1);\n\t\t};\n\n\t\tvar moveDown = function moveDown(event, key) {\n\t\t\tevent.preventDefault();\n\t\t\tmoveThreads(1);\n\t\t};\n\n\t\thotkey.addHotkey({\n\t\t\tcombo: ['h', 'k', 'left', 'up'],\n\t\t\tdescription: 'HOTKEY.MOVE_UP',\n\t\t\tcallback: moveUp\n\t\t});\n\n\t\thotkey.addHotkey({\n\t\t\tcombo: ['j', 'l', 'right', 'down'],\n\t\t\tdescription: 'HOTKEY.MOVE_DOWN',\n\t\t\tcallback: moveDown\n\t\t});\n\n\t\thotkey.addHotkey({\n\t\t\tcombo: 'a',\n\t\t\tdescription: 'HOTKEY.ARCHIVE_EMAIL',\n\t\t\tcallback: function callback(event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t//$scope.archive($scope.selectedTid);\n\t\t\t}\n\t\t});\n\n\t\thotkey.addHotkey({\n\t\t\tcombo: 'd',\n\t\t\tdescription: 'HOTKEY.DELETE_EMAIL',\n\t\t\tcallback: function callback(event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$scope.deleteThread($scope.selectedTid);\n\t\t\t}\n\t\t});\n\n\t\thotkey.addHotkey({\n\t\t\tcombo: 'r',\n\t\t\tdescription: 'HOTKEY.REPLY_EMAIL',\n\t\t\tcallback: function callback(event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$scope.replyThread(event, $scope.selectedTid);\n\t\t\t}\n\t\t});\n\t};\n\n\taddHotkeys();\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL0N0cmxUaHJlYWRMaXN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQ2hGLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFLOztBQUVwRCxPQUFNLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQzNDLE9BQU0sQ0FBQyxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQ25FLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQzNDLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQzlDLElBQUksQUFDUCxDQUFDOztBQUVGLE9BQU0sQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ3BCLE9BQU0sQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO0FBQ3hCLE9BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDOztBQUV2QixPQUFNLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztBQUN6QixPQUFNLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztBQUM3QixPQUFNLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDO0FBQy9CLE9BQU0sQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDOztBQUV6QixPQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUNsQixPQUFNLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQzs7QUFFbEIsT0FBTSxDQUFDLE1B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O0FBRUgsUUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNoQixRQUFLLEVBQUUsR0FBRztBQUNWLGNBQVcsRUFBRSxxQkFBcUI7QUFDbEMsV0FBUSxFQUFFLGtCQUFDLEtBQUssRUFBRSxHQUFHLEVBQUs7QUFDekIsU0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBQ3ZCLFVBQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3hDO0dBQ0QsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxTQUFTLENBQUM7QUFDaEIsUUFBSyxFQUFFLEdBQUc7QUFDVixjQUFXLEVBQUUsb0JBQW9CO0FBQ2pDLFdBQVEsRUFBRSxrQkFBQyxLQUFLLEVBQUUsR0FBRyxFQUFLO0FBQ3pCLFNBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN2QixVQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDOUM7R0FDRCxDQUFDLENBQUM7RUFDSCxDQUFDOztBQUVGLFdBQVUsRUFBRSxDQUFDO0NBQ2IsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9jb250cm9sbGVycy9DdHJsVGhyZWFkTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkc2NvcGUsICRzdGF0ZSwgJHRpbWVvdXQsICRpbnRlcnZhbCwgJHRyYW5zbGF0ZSxcblx0XHRcdFx0XHRcdFx0ICAgY28sIHV0aWxzLCBjb25zdHMsIGhvdGtleSwgdXNlciwgaW5ib3gpID0+IHtcblxuXHQkc2NvcGUubGFiZWxOYW1lID0gJHN0YXRlLnBhcmFtcy5sYWJlbE5hbWU7XG5cdCRzY29wZS5zZWxlY3RlZFRpZCA9ICRzdGF0ZS5wYXJhbXMudGhyZWFkSWQgPyAkc3RhdGUucGFyYW1zLnRocmVhZElkIDogKFxuXHRcdGluYm94LnNlbGVjdGVkVGlkQnlMYWJlbE5hbWVbJHNjb3BlLmxhYmVsTmFtZV1cblx0XHRcdD8gaW5ib3guc2VsZWN0ZWRUaWRCeUxhYmVsTmFtZVskc2NvcGUubGFiZWxOYW1lXVxuXHRcdFx0OiBudWxsXG5cdCk7XG5cblx0JHNjb3BlLnRocmVhZHMgPSB7fTtcblx0JHNjb3BlLnRocmVhZHNMaXN0ID0gW107XG5cdCRzY29wZS5zZWFyY2hUZXh0ID0gJyc7XG5cblx0JHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuXHQkc2NvcGUuaXNMb2FkaW5nU2lnbiA9IGZhbHNlO1xuXHQkc2NvcGUuaXNEaXNhYmxlZFNjcm9sbCA9IHRydWU7XG5cdCRzY29wZS5pc1RocmVhZHMgPSBmYWxzZTtcblxuXHQkc2NvcGUub2Zmc2V0ID0gMDtcblx0JHNjb3BlLmxpbWl0ID0gMTU7XG5cblx0JHNjb3BlLnN0YXR1cyA9IHtcblx0XHRpc1NvcnRPcGVuZWQ6IGZhbHNlXG5cdH07XG5cdCRzY29wZS5zb3J0ZWRMYWJlbCA9ICcnO1xuXHQkc2NvcGUuc29ydFF1ZXJ5ID0gaW5ib3guZ2V0U29ydFF1ZXJ5KCk7XG5cblx0Y29uc29sZS5sb2coJ0N0cmxUaHJlYWRMaXN0IGlzIGxvYWRpbmcnLCAkc2NvcGUubGFiZWxOYW1lLCAkc2NvcGUuc2VsZWN0ZWRUaWQpO1xuXG5cdGxldCBzZXRMb2FkaW5nU2lnblRpbWVvdXQgPSBudWxsO1xuXG5cdHtcblx0XHRsZXQgZW1haWxzU2VsZWN0ZWRUaWQgPSBudWxsO1xuXG5cdFx0JHNjb3BlLiR3YXRjaCgnZmlsdGVyZWRUaHJlYWRzTGlzdCcsIChvLCBuKSA9PiB7XG5cdFx0XHRpZiAobyA9PSBuKVxuXHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdGNvbnN0IHIgPSAkc2NvcGUuZmlsdGVyZWRUaHJlYWRzTGlzdC5maW5kKHQgPT4gdC5pZCA9PSAkc2NvcGUuc2VsZWN0ZWRUaWQpO1xuXHRcdFx0aWYgKCFyKSB7XG5cdFx0XHRcdGVtYWlsc1NlbGVjdGVkVGlkID0gJHNjb3BlLnNlbGVjdGVkVGlkO1xuXHRcdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2luYm94LWVtYWlscy1jbGVhcicpO1xuXHRcdFx0fSBlbHNlIGlmICgkc2NvcGUuc2VsZWN0ZWRUaWQgPT0gZW1haWxzU2VsZWN0ZWRUaWQpIHtcblx0XHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdpbmJveC1lbWFpbHMtcmVzdG9yZScpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0Y29uc3QgdHJhbnNsYXRpb25zID0ge1xuXHRcdExCX1NPUlRfQllfQ1JFQVRJT05fREFURV9ERVNDIDogJycsXG5cdFx0TEJfU09SVF9CWV9DUkVBVElPTl9EQVRFX0FTQyA6ICcnLFxuXHRcdExCX1NPUlRfQllfTU9ESUZJQ0FUSU9OX0RBVEVfREVTQyA6ICcnLFxuXHRcdExCX1NPUlRfQllfTU9ESUZJQ0FUSU9OX0RBVEVfQVNDIDogJycsXG5cdFx0TEJfU09SVEVEX0JZX0NSRUFUSU9OX0RBVEVfREVTQyA6ICcnLFxuXHRcdExCX1NPUlRFRF9CWV9DUkVBVElPTl9EQVRFX0FTQyA6ICcnLFxuXHRcdExCX1NPUlRFRF9CWV9NT0RJRklDQVRJT05fREFURV9ERVNDIDogJycsXG5cdFx0TEJfU09SVEVEX0JZX01PRElGSUNBVElPTl9EQVRFX0FTQyA6ICcnXG5cdH07XG5cblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnSU5CT1gnLCBudWxsLCAoKSA9PiB7XG5cdFx0JHNjb3BlLnNvcnRzID0gW1xuXHRcdFx0e1xuXHRcdFx0XHRxdWVyeTogJy1kYXRlX2NyZWF0ZWQnLFxuXHRcdFx0XHRsYWJlbDogdHJhbnNsYXRpb25zLkxCX1NPUlRfQllfQ1JFQVRJT05fREFURV9ERVNDLFxuXHRcdFx0XHRsYWJlbFNvcnRlZDogdHJhbnNsYXRpb25zLkxCX1NPUlRFRF9CWV9DUkVBVElPTl9EQVRFX0RFU0Ncblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHF1ZXJ5OiAnK2RhdGVfY3JlYXRlZCcsXG5cdFx0XHRcdGxhYmVsOiB0cmFuc2xhdGlvbnMuTEJfU09SVF9CWV9DUkVBVElPTl9EQVRFX0FTQyxcblx0XHRcdFx0bGFiZWxTb3J0ZWQ6IHRyYW5zbGF0aW9ucy5MQl9TT1JURURfQllfQ1JFQVRJT05fREFURV9BU0Ncblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHF1ZXJ5OiAnLWRhdGVfbW9kaWZpZWQnLFxuXHRcdFx0XHRsYWJlbDogdHJhbnNsYXRpb25zLkxCX1NPUlRfQllfTU9ESUZJQ0FUSU9OX0RBVEVfREVTQyxcblx0XHRcdFx0bGFiZWxTb3J0ZWQ6IHRyYW5zbGF0aW9ucy5MQl9TT1JURURfQllfTU9ESUZJQ0FUSU9OX0RBVEVfREVTQ1xuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0cXVlcnk6ICcrZGF0ZV9tb2RpZmllZCcsXG5cdFx0XHRcdGxhYmVsOiB0cmFuc2xhdGlvbnMuTEJfU09SVF9CWV9NT0RJRklDQVRJT05fREFURV9BU0MsXG5cdFx0XHRcdGxhYmVsU29ydGVkOiB0cmFuc2xhdGlvbnMuTEJfU09SVEVEX0JZX01PRElGSUNBVElPTl9EQVRFX0FTQ1xuXHRcdFx0fVxuXHRcdF07XG5cblx0XHRjb25zdCBjdXJyZW50U29ydCA9ICRzY29wZS5zb3J0cy5maW5kKHMgPT4gcy5xdWVyeSA9PSAkc2NvcGUuc29ydFF1ZXJ5KTtcblx0XHQkc2NvcGUuc29ydGVkTGFiZWwgPSBjdXJyZW50U29ydCA/IGN1cnJlbnRTb3J0LmxhYmVsU29ydGVkIDogJyc7XG5cdH0pO1xuXG5cdGNvbnN0IHJlcXVlc3RMaXN0ID0gKCkgPT4ge1xuXHRcdGlmICgkc2NvcGUuaXNMb2FkaW5nKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0JHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XG5cdFx0aWYgKCRzY29wZS50aHJlYWRzTGlzdC5sZW5ndGggPiAwKVxuXHRcdFx0JHNjb3BlLmlzTG9hZGluZ1NpZ24gPSB0cnVlO1xuXHRcdGVsc2Vcblx0XHRcdHNldExvYWRpbmdTaWduVGltZW91dCA9ICR0aW1lb3V0KCgpID0+IHtcblx0XHRcdFx0JHNjb3BlLmlzTG9hZGluZ1NpZ24gPSB0cnVlO1xuXHRcdFx0fSwgY29uc3RzLkxPQURFUl9TSE9XX0RFTEFZKTtcblxuXHRcdGNvbnN0IGxhYmVsTmFtZSA9ICRzY29wZS5sYWJlbE5hbWU7XG5cblx0XHRyZXR1cm4gY28oZnVuY3Rpb24gKigpe1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgbGlzdCA9IHlpZWxkIGluYm94LnJlcXVlc3RMaXN0KCRzY29wZS5sYWJlbE5hbWUsICRzY29wZS5vZmZzZXQsICRzY29wZS5saW1pdCk7XG5cblx0XHRcdFx0aWYgKGxhYmVsTmFtZSA9PSAkc2NvcGUubGFiZWxOYW1lKSB7XG5cdFx0XHRcdFx0JHNjb3BlLmlzRGlzYWJsZWRTY3JvbGwgPSBsaXN0Lmxlbmd0aCA8IDE7XG5cdFx0XHRcdFx0JHNjb3BlLm9mZnNldCArPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdCRzY29wZS5pc0Rpc2FibGVkU2Nyb2xsID0gdHJ1ZTtcblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdCRzY29wZS5zb3J0VGhyZWFkcyA9IChzb3J0UXVlcnkpID0+IHtcblx0XHQkc2NvcGUuc29ydFF1ZXJ5ID0gc29ydFF1ZXJ5O1xuXHRcdGluYm94LnNldFNvcnRRdWVyeShzb3J0UXVlcnkpO1xuXG5cdFx0JHNjb3BlLm9mZnNldCA9IDA7XG5cdFx0JHNjb3BlLmxpbWl0ID0gMTU7XG5cdFx0JHNjb3BlLnRocmVhZHMgPSB7fTtcblx0XHQkc2NvcGUudGhyZWFkc0xpc3QgPSBbXTtcblx0XHRyZXF1ZXN0TGlzdCgpO1xuXHR9O1xuXG5cdCRzY29wZS5zZWxlY3RUaHJlYWQgPSAodGlkKSA9PiB7XG5cdFx0JHN0YXRlLmdvKCdtYWluLmluYm94LmxhYmVsJywge3RocmVhZElkOiB0aWR9KTtcblx0XHQkc2NvcGUuc2VsZWN0ZWRUaWQgPSB0aWQ7XG5cdH07XG5cblx0JHNjb3BlLnJlcGx5VGhyZWFkID0gKGV2ZW50LCB0aWQpID0+IHtcblx0XHQkc2NvcGUuc2hvd1BvcHVwKCdjb21wb3NlJywge3JlcGx5VGhyZWFkSWQ6IHRpZH0pO1xuXHR9O1xuXG5cdCRzY29wZS5zZWFyY2hGaWx0ZXIgPSAodGhyZWFkKSA9PiB7XG5cdFx0bGV0IHNlYXJjaFRleHQgPSAkc2NvcGUuc2VhcmNoVGV4dC50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiB0aHJlYWQuc3ViamVjdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRleHQpXG5cdFx0XHR8fCB0aHJlYWQubWVtYmVyc1ByZXR0eS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaFRleHQpO1xuXHR9O1xuXG5cdCRzY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgKGUsIHRvU3RhdGUsIHRvUGFyYW1zKSA9PiB7XG5cdFx0aWYgKHRvU3RhdGUubmFtZSA9PSAnbWFpbi5pbmJveC5sYWJlbCcpXG5cdFx0XHQkc2NvcGUuc2VsZWN0ZWRUaWQgPSB0b1BhcmFtcy50aHJlYWRJZCA/IHRvUGFyYW1zLnRocmVhZElkIDogbnVsbDtcblx0fSk7XG5cblx0JHNjb3BlLiRvbihgaW5ib3gtdGhyZWFkc2AsIChlLCBsYWJlbE5hbWUpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRjb25zb2xlLmxvZygnaW5ib3gtdGhyZWFkcycsIGxhYmVsTmFtZSk7XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgdGhyZWFkc0xpc3QgPSB5aWVsZCBpbmJveC5yZXF1ZXN0TGlzdERpcmVjdCgkc2NvcGUubGFiZWxOYW1lLCAwLCAkc2NvcGUub2Zmc2V0ICsgJHNjb3BlLmxpbWl0KTtcblxuXHRcdFx0bGV0IHNlbGVjdGVkSW5kZXggPSAkc2NvcGUudGhyZWFkc0xpc3QgJiYgJHNjb3BlLnNlbGVjdGVkVGlkICE9PSBudWxsXG5cdFx0XHRcdD8gJHNjb3BlLnRocmVhZHNMaXN0LmZpbmRJbmRleCh0aHJlYWQgPT4gdGhyZWFkLmlkID09ICRzY29wZS5zZWxlY3RlZFRpZClcblx0XHRcdFx0OiAtMTtcblxuXHRcdFx0Y29uc29sZS5sb2coJ2luYm94LXRocmVhZHMgc2VsZWN0ZWRJbmRleCAxOiAnLCBzZWxlY3RlZEluZGV4KTtcblxuXHRcdFx0JHNjb3BlLnRocmVhZHNMaXN0ID0gdGhyZWFkc0xpc3Q7XG5cblx0XHRcdGlmICghJHNjb3BlLnRocmVhZHNMaXN0IHx8ICRzY29wZS50aHJlYWRzTGlzdC5sZW5ndGggPCAxKVxuXHRcdFx0XHQkc3RhdGUuZ28oJ21haW4uaW5ib3gubGFiZWwnLCB7bGFiZWxOYW1lOiAkc2NvcGUubGFiZWxOYW1lLCB0aHJlYWRJZDogbnVsbH0pO1xuXHRcdFx0ZWxzZSBpZiAoc2VsZWN0ZWRJbmRleCA+IC0xICYmICRzY29wZS50aHJlYWRzTGlzdC5maW5kSW5kZXgodGhyZWFkID0+IHRocmVhZC5pZCA9PSAkc2NvcGUuc2VsZWN0ZWRUaWQpIDwgMCkge1xuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gTWF0aC5taW4oTWF0aC5tYXgoc2VsZWN0ZWRJbmRleCwgMCksICRzY29wZS50aHJlYWRzTGlzdC5sZW5ndGggLSAxKTtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdFRocmVhZCgkc2NvcGUudGhyZWFkc0xpc3Rbc2VsZWN0ZWRJbmRleF0uaWQpO1xuXHRcdFx0fVxuXG5cdFx0XHRjb25zb2xlLmxvZygnaW5ib3gtdGhyZWFkcyBzZWxlY3RlZEluZGV4IDI6ICcsIHNlbGVjdGVkSW5kZXgpO1xuXG5cdFx0XHQkc2NvcGUudGhyZWFkcyA9IHV0aWxzLnRvTWFwKCRzY29wZS50aHJlYWRzTGlzdCk7XG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdGlmIChzZXRMb2FkaW5nU2lnblRpbWVvdXQpIHtcblx0XHRcdFx0JHRpbWVvdXQuY2FuY2VsKHNldExvYWRpbmdTaWduVGltZW91dCk7XG5cdFx0XHRcdHNldExvYWRpbmdTaWduVGltZW91dCA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdCRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcblx0XHRcdCRzY29wZS5pc0xvYWRpbmdTaWduID0gZmFsc2U7XG5cdFx0XHQkc2NvcGUuaXNUaHJlYWRzID0gdHJ1ZTtcblx0XHR9XG5cdH0pKTtcblxuXHQkc2NvcGUuc2Nyb2xsID0gKCkgPT4ge1xuXHRcdGNvbnNvbGUubG9nKCdzY3JvbGwoKScsICRzY29wZS5pc0xvYWRpbmcsICRzY29wZS5pc0Rpc2FibGVkU2Nyb2xsKTtcblx0XHRpZiAoJHNjb3BlLmlzTG9hZGluZyB8fCAkc2NvcGUuaXNEaXNhYmxlZFNjcm9sbClcblx0XHRcdHJldHVybjtcblxuXHRcdHJlcXVlc3RMaXN0KCk7XG5cdH07XG5cblx0cmVxdWVzdExpc3QoKTtcblxuICAgIC8vIEFkZCBob3RrZXlzXG5cdGNvbnN0IGFkZEhvdGtleXMgPSAoKSA9PiB7XG5cdFx0Y29uc3QgbW92ZVRocmVhZHMgPSAoZGVsdGEpID0+IHtcblx0XHRcdGxldCBzZWxlY3RlZEluZGV4ID0gJHNjb3BlLnRocmVhZHNMaXN0ICYmICRzY29wZS5zZWxlY3RlZFRpZCAhPT0gbnVsbFxuXHRcdFx0XHQ/ICRzY29wZS50aHJlYWRzTGlzdC5maW5kSW5kZXgodGhyZWFkID0+IHRocmVhZC5pZCA9PSAkc2NvcGUuc2VsZWN0ZWRUaWQpXG5cdFx0XHRcdDogLTE7XG5cdFx0XHRpZiAoJHNjb3BlLnNlbGVjdGVkVGlkICE9PSBudWxsKSB7XG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSBNYXRoLm1pbihNYXRoLm1heChzZWxlY3RlZEluZGV4ICsgZGVsdGEsIDApLCAkc2NvcGUudGhyZWFkc0xpc3QubGVuZ3RoIC0gMSk7XG5cdFx0XHRcdCRzY29wZS5zZWxlY3RlZFRpZCA9ICRzY29wZS50aHJlYWRzTGlzdFtzZWxlY3RlZEluZGV4XS5pZDtcblx0XHRcdFx0JHNjb3BlLnNlbGVjdFRocmVhZCgkc2NvcGUuc2VsZWN0ZWRUaWQpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRjb25zdCBtb3ZlVXAgPSAoZXZlbnQsIGtleSkgPT4ge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1vdmVUaHJlYWRzKC0xKTtcblx0XHR9O1xuXG5cdFx0Y29uc3QgbW92ZURvd24gPSAoZXZlbnQsIGtleSkgPT4ge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdG1vdmVUaHJlYWRzKDEpO1xuXHRcdH07XG5cblx0XHRob3RrZXkuYWRkSG90a2V5KHtcblx0XHRcdGNvbWJvOiBbJ2gnLCAnaycsICdsZWZ0JywgJ3VwJ10sXG5cdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5NT1ZFX1VQJyxcblx0XHRcdGNhbGxiYWNrOiBtb3ZlVXBcblx0XHR9KTtcblxuXHRcdGhvdGtleS5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnaicsICdsJywgJ3JpZ2h0JywgJ2Rvd24nXSxcblx0XHRcdGRlc2NyaXB0aW9uOiAnSE9US0VZLk1PVkVfRE9XTicsXG5cdFx0XHRjYWxsYmFjazogbW92ZURvd25cblx0XHR9KTtcblxuXHRcdGhvdGtleS5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86ICdhJyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnSE9US0VZLkFSQ0hJVkVfRU1BSUwnLFxuXHRcdFx0Y2FsbGJhY2s6IChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdC8vJHNjb3BlLmFyY2hpdmUoJHNjb3BlLnNlbGVjdGVkVGlkKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGhvdGtleS5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86ICdkJyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnSE9US0VZLkRFTEVURV9FTUFJTCcsXG5cdFx0XHRjYWxsYmFjazogKGV2ZW50LCBrZXkpID0+IHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JHNjb3BlLmRlbGV0ZVRocmVhZCgkc2NvcGUuc2VsZWN0ZWRUaWQpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aG90a2V5LmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogJ3InLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuUkVQTFlfRU1BSUwnLFxuXHRcdFx0Y2FsbGJhY2s6IChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRzY29wZS5yZXBseVRocmVhZChldmVudCwgJHNjb3BlLnNlbGVjdGVkVGlkKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRhZGRIb3RrZXlzKCk7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlCompose.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $stateParams, $translate, utils, consts, co, router, composeHelpers, textAngularHelpers, crypto, user, contacts, inbox, Manifest, Contact, hotkey, ContactEmail, Email, Attachment) {\n\t$scope.toolbar = [['pre'], ['h1', 'h2', 'h3'], ['bold', 'italics', 'underline'], ['justifyLeft', 'justifyCenter', 'justifyRight'], ['ul', 'ol'], ['submit']];\n\t$scope.taggingTokens = 'SPACE|,|/';\n\n\t$scope.isWarning = false;\n\t$scope.isError = false;\n\t$scope.isXCC = false;\n\t$scope.isCC = false;\n\t$scope.isBCC = false;\n\t$scope.isSkipWarning = user.settings.isSkipComposeScreenWarning;\n\t$scope.attachments = [];\n\n\t$scope.isToolbarShown = false;\n\n\tvar hiddenContacts = {};\n\tvar replyThreadId = $stateParams.replyThreadId;\n\tvar replyEmailId = $stateParams.replyEmailId;\n\tvar isReplyAll = $stateParams.isReplyAll;\n\tvar forwardEmailId = $stateParams.forwardEmailId;\n\tvar forwardThreadId = $stateParams.forwardThreadId;\n\tvar toEmail = $stateParams.to;\n\tvar publicKey = $stateParams.publicKey ? crypto.getPublicKeyByFingerprint($stateParams.publicKey) : null;\n\n\tvar manifest = null;\n\tvar newHiddenContact = null;\n\n\tvar translations = {\n\t\tLB_ATTACHMENT_STATUS_READING: '',\n\t\tLB_ATTACHMENT_STATUS_READING_ERROR: '',\n\t\tLB_ATTACHMENT_STATUS_DELETING_ERROR: '',\n\t\tLB_ATTACHMENT_STATUS_ENCRYPTING: '',\n\t\tLB_ATTACHMENT_STATUS_ENCRYPTING_ERROR: '',\n\t\tLB_ATTACHMENT_STATUS_FORMATTING: '',\n\t\tLB_ATTACHMENT_STATUS_FORMATTING_ERROR: '',\n\t\tLB_ATTACHMENT_STATUS_UPLOADING: '',\n\t\tLB_ATTACHMENT_STATUS_UPLOADING_ERROR: '',\n\t\tLB_ATTACHMENT_STATUS_UPLOADED: '',\n\t\tLB_NO_SUBJECT: ''\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.COMPOSE');\n\n\tvar processAttachment = function processAttachment(attachmentStatus) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tattachmentStatus.status = translations.LB_ATTACHMENT_STATUS_READING;\n\t\t\t\t\t\tattachmentStatus.isCancelled = false;\n\n\t\t\t\t\t\tcontext$3$0.prev = 2;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn attachmentStatus.attachment.read();\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tcontext$3$0.next = 11;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tcontext$3$0.prev = 7;\n\t\t\t\t\t\tcontext$3$0.t1 = context$3$0['catch'](2);\n\n\t\t\t\t\t\tattachmentStatus.status = translations.LB_ATTACHMENT_STATUS_READING_ERROR;\n\t\t\t\t\t\tthrow context$3$0.t1;\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tcontext$3$0.prev = 11;\n\n\t\t\t\t\t\tif (!attachmentStatus.isCancelled) {\n\t\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow new Error('cancelled');\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\treturn context$3$0.finish(11);\n\n\t\t\t\t\tcase 15:\n\n\t\t\t\t\t\tattachmentStatus.status = '';\n\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tattachmentStatus.ext = attachmentStatus.attachment.type.split('/')[0];\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tattachmentStatus.ext = 'file';\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[2, 7, 11, 15]]);\n\t\t}));\n\t};\n\n\t$scope.onFileDrop = function (file) {\n\t\tif (file.type && file.type.startsWith('image')) return;\n\n\t\tvar attachmentStatus = {\n\t\t\tattachment: new Attachment(file)\n\t\t};\n\t\tattachmentStatus.processingPromise = processAttachment(attachmentStatus);\n\t\t$scope.attachments.push(attachmentStatus);\n\t};\n\n\t$scope.deleteAttachment = function (attachmentStatus, index) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tattachmentStatus.isCancelled = true;\n\n\t\t\t\t\t\tcontext$3$0.prev = 1;\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn attachmentStatus.processingPromise;\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.prev = 6;\n\t\t\t\t\t\tcontext$3$0.t2 = context$3$0['catch'](1);\n\n\t\t\t\t\t\tif (!(context$3$0.t2.message != 'cancelled')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow context$3$0.t2;\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tif (!attachmentStatus.id) {\n\t\t\t\t\t\t\tcontext$3$0.next = 20;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.prev = 11;\n\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\treturn inbox.deleteAttachment(attachmentStatus.id);\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tcontext$3$0.next = 20;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\tcontext$3$0.prev = 16;\n\t\t\t\t\t\tcontext$3$0.t3 = context$3$0['catch'](11);\n\n\t\t\t\t\t\tattachmentStatus.status = translations.LB_ATTACHMENT_STATUS_DELETING_ERROR;\n\t\t\t\t\t\tthrow context$3$0.t3;\n\n\t\t\t\t\tcase 20:\n\n\t\t\t\t\t\t$scope.attachments.splice(index, 1);\n\n\t\t\t\t\tcase 21:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[1, 6], [11, 16]]);\n\t\t}));\n\t};\n\n\t$scope.uploadAttachment = function (attachmentStatus, keys) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar isSecured, envelope, r;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tisSecured = Email.isSecuredKeys(keys);\n\t\t\t\t\t\tenvelope = undefined;\n\n\t\t\t\t\t\tattachmentStatus.status = isSecured ? translations.LB_ATTACHMENT_STATUS_ENCRYPTING : translations.LB_ATTACHMENT_STATUS_FORMATTING;\n\t\t\t\t\t\tcontext$3$0.prev = 3;\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn Attachment.toEnvelope(attachmentStatus.attachment, keys);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tenvelope = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 13;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tcontext$3$0.prev = 9;\n\t\t\t\t\t\tcontext$3$0.t4 = context$3$0['catch'](3);\n\n\t\t\t\t\t\tattachmentStatus.status = isSecured ? translations.LB_ATTACHMENT_STATUS_ENCRYPTING_ERROR : translations.LB_ATTACHMENT_STATUS_FORMATTING_ERROR;\n\t\t\t\t\t\tthrow context$3$0.t4;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tcontext$3$0.prev = 13;\n\n\t\t\t\t\t\tif (!attachmentStatus.isCancelled) {\n\t\t\t\t\t\t\tcontext$3$0.next = 16;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow new Error('cancelled');\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\treturn context$3$0.finish(13);\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\t\tr = undefined;\n\n\t\t\t\t\t\tattachmentStatus.status = translations.LB_ATTACHMENT_STATUS_UPLOADING;\n\t\t\t\t\t\tcontext$3$0.prev = 19;\n\t\t\t\t\t\tcontext$3$0.next = 22;\n\t\t\t\t\t\treturn inbox.uploadAttachment(envelope);\n\n\t\t\t\t\tcase 22:\n\t\t\t\t\t\tr = context$3$0.sent;\n\n\t\t\t\t\t\tattachmentStatus.id = r.body.file.id;\n\t\t\t\t\t\tattachmentStatus.status = translations.LB_ATTACHMENT_STATUS_UPLOADED;\n\t\t\t\t\t\tcontext$3$0.next = 31;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcontext$3$0.prev = 27;\n\t\t\t\t\t\tcontext$3$0.t5 = context$3$0['catch'](19);\n\n\t\t\t\t\t\tattachmentStatus.status = translations.LB_ATTACHMENT_STATUS_UPLOADING_ERROR;\n\t\t\t\t\t\tthrow context$3$0.t5;\n\n\t\t\t\t\tcase 31:\n\t\t\t\t\t\tcontext$3$0.prev = 31;\n\n\t\t\t\t\t\tif (!attachmentStatus.isCancelled) {\n\t\t\t\t\t\t\tcontext$3$0.next = 34;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow new Error('cancelled');\n\n\t\t\t\t\tcase 34:\n\t\t\t\t\t\treturn context$3$0.finish(31);\n\n\t\t\t\t\tcase 35:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[3, 9, 13, 17], [19, 27, 31, 35]]);\n\t\t}));\n\t};\n\n\t$scope.$watch('isSkipWarning', function (o, n) {\n\t\tif (o == n) return;\n\n\t\tuser.update({ isSkipComposeScreenWarning: $scope.isSkipWarning });\n\t});\n\n\t$scope.toggleIsSkipWarning = function (event) {\n\t\t$scope.isSkipWarning = !$scope.isSkipWarning;\n\t};\n\n\t$scope.isValid = function () {\n\t\treturn $scope.__form.$valid && $scope.form && $scope.form.selected.to.length > 0;\n\t};\n\n\t$scope.send = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar to, cc, bcc, keys, isSecured, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, attachmentStatus, body, sendStatus;\n\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif ($scope.isValid()) {\n\t\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\tif (!$scope.form.subject) $scope.form.subject = translations.LB_NO_SUBJECT;\n\n\t\t\t\t\t\t$scope.isError = false;\n\t\t\t\t\t\t$scope.isWarning = false;\n\n\t\t\t\t\t\tcontext$3$0.next = 7;\n\t\t\t\t\t\treturn $scope.attachments.map(function (a) {\n\t\t\t\t\t\t\treturn a.processingPromise;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tto = $scope.form.selected.to.map(function (e) {\n\t\t\t\t\t\t\treturn e.email;\n\t\t\t\t\t\t}), cc = $scope.form.selected.cc.map(function (e) {\n\t\t\t\t\t\t\treturn e.email;\n\t\t\t\t\t\t}), bcc = $scope.form.selected.bcc.map(function (e) {\n\t\t\t\t\t\t\treturn e.email;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\treturn [].concat(babelHelpers.toConsumableArray($scope.form.selected.to), babelHelpers.toConsumableArray($scope.form.selected.cc), babelHelpers.toConsumableArray($scope.form.selected.bcc)).reduce(function (a, e) {\n\t\t\t\t\t\t\ta[e.email] = co.transform(co.def(e.loadKey(), null), function (e) {\n\t\t\t\t\t\t\t\treturn e ? e.armor() : null;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}, {});\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tkeys = context$3$0.sent;\n\n\t\t\t\t\t\tconsole.log('compose: loaded keys for encryption', keys);\n\t\t\t\t\t\tconsole.log('to', $scope.form.selected.to);\n\t\t\t\t\t\tconsole.log('to', $scope.form.selected.cc);\n\t\t\t\t\t\tconsole.log('to', $scope.form.selected.bcc);\n\n\t\t\t\t\t\tisSecured = Email.isSecuredKeys(keys);\n\t\t\t\t\t\tcontext$3$0.next = 18;\n\t\t\t\t\t\treturn $scope.attachments.map(function (attachmentStatus) {\n\t\t\t\t\t\t\treturn $scope.uploadAttachment(attachmentStatus, keys);\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 18:\n\n\t\t\t\t\t\tmanifest = Manifest.create({\n\t\t\t\t\t\t\tfromEmail: user.email,\n\t\t\t\t\t\t\tto: to,\n\t\t\t\t\t\t\tcc: cc,\n\t\t\t\t\t\t\tbcc: bcc,\n\t\t\t\t\t\t\tsubject: $scope.form.subject\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tmanifest.setBody($scope.form.body, 'text/html');\n\t\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\t\tcontext$3$0.prev = 23;\n\t\t\t\t\t\tfor (_iterator = $scope.attachments[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\tattachmentStatus = _step.value;\n\n\t\t\t\t\t\t\tmanifest.addAttachment(attachmentStatus.attachment.id, attachmentStatus.attachment.getBodyAsBinaryString(), attachmentStatus.attachment.name, attachmentStatus.attachment.type);\n\t\t\t\t\t\t}context$3$0.next = 31;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\tcontext$3$0.prev = 27;\n\t\t\t\t\t\tcontext$3$0.t6 = context$3$0['catch'](23);\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = context$3$0.t6;\n\n\t\t\t\t\tcase 31:\n\t\t\t\t\t\tcontext$3$0.prev = 31;\n\t\t\t\t\t\tcontext$3$0.prev = 32;\n\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t\t\t_iterator['return']();\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 34:\n\t\t\t\t\t\tcontext$3$0.prev = 34;\n\n\t\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\t\tcontext$3$0.next = 37;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow _iteratorError;\n\n\t\t\t\t\tcase 37:\n\t\t\t\t\t\treturn context$3$0.finish(34);\n\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\treturn context$3$0.finish(31);\n\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\tcontext$3$0.prev = 39;\n\t\t\t\t\t\tbody = $scope.form.body;\n\t\t\t\t\t\tcontext$3$0.next = 43;\n\t\t\t\t\t\treturn inbox.send({\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\tattachmentIds: $scope.attachments.map(function (a) {\n\t\t\t\t\t\t\t\treturn a.id;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tthreadId: replyThreadId\n\t\t\t\t\t\t}, manifest, keys);\n\n\t\t\t\t\tcase 43:\n\t\t\t\t\t\tsendStatus = context$3$0.sent;\n\n\t\t\t\t\t\tconsole.log('compose send status', sendStatus);\n\n\t\t\t\t\t\tif (!isSecured) {\n\t\t\t\t\t\t\tcontext$3$0.next = 53;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$scope.form.body = inbox.getMumbledFormattedBody();\n\n\t\t\t\t\t\tcontext$3$0.next = 49;\n\t\t\t\t\t\treturn utils.sleep(consts.MUMBLE_SHOW_DELAY);\n\n\t\t\t\t\tcase 49:\n\t\t\t\t\t\tcontext$3$0.next = 51;\n\t\t\t\t\t\treturn $scope.confirm();\n\n\t\t\t\t\tcase 51:\n\t\t\t\t\t\tcontext$3$0.next = 59;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 53:\n\t\t\t\t\t\tif (!$scope.isSkipWarning) {\n\t\t\t\t\t\t\tcontext$3$0.next = 58;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 56;\n\t\t\t\t\t\treturn $scope.confirm();\n\n\t\t\t\t\tcase 56:\n\t\t\t\t\t\tcontext$3$0.next = 59;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 58:\n\t\t\t\t\t\t$scope.isWarning = true;\n\n\t\t\t\t\tcase 59:\n\t\t\t\t\t\tcontext$3$0.next = 65;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 61:\n\t\t\t\t\t\tcontext$3$0.prev = 61;\n\t\t\t\t\t\tcontext$3$0.t7 = context$3$0['catch'](39);\n\n\t\t\t\t\t\t$scope.isError = true;\n\t\t\t\t\t\tthrow context$3$0.t7;\n\n\t\t\t\t\tcase 65:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[23, 27, 31, 39], [32,, 34, 38], [39, 61]]);\n\t\t}));\n\t};\n\n\t$scope.confirm = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.prev = 0;\n\n\t\t\t\t\t\t$scope.isWarning = false;\n\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn inbox.confirmSend();\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn manifest.getDestinationEmails().filter(function (email) {\n\t\t\t\t\t\t\treturn !contacts.getContactByEmail(email);\n\t\t\t\t\t\t}).map(function (email) {\n\t\t\t\t\t\t\tvar contact = new Contact({ name: '$hidden' });\n\t\t\t\t\t\t\tcontact.hiddenEmail = hiddenContacts[email];\n\t\t\t\t\t\t\treturn contacts.createContact(contact);\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 6:\n\n\t\t\t\t\t\tmanifest = null;\n\n\t\t\t\t\t\trouter.hidePopup();\n\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tcontext$3$0.prev = 10;\n\t\t\t\t\t\tcontext$3$0.t8 = context$3$0['catch'](0);\n\n\t\t\t\t\t\t$scope.isError = true;\n\t\t\t\t\t\tthrow context$3$0.t8;\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[0, 10]]);\n\t\t}));\n\t};\n\n\t$scope.reject = function () {\n\t\t$scope.isWarning = false;\n\n\t\tinbox.rejectSend();\n\t\tmanifest = null;\n\t};\n\n\t$scope.$bind('contacts-changed', function () {\n\t\tvar toEmailContact = ContactEmail.transform(toEmail);\n\n\t\tvar people = [].concat(babelHelpers.toConsumableArray(contacts.people.values()));\n\t\tvar map = new Map();\n\n\t\tvar addHiddenEmails = function addHiddenEmails(checkEmail) {\n\t\t\tpeople.reduce(function (a, c) {\n\t\t\t\tif (c.hiddenEmail && c.hiddenEmail.email && checkEmail(c.hiddenEmail)) a.set(c.hiddenEmail.email, c.hiddenEmail);\n\n\t\t\t\treturn a;\n\t\t\t}, map);\n\t\t};\n\n\t\tvar addEmails = function addEmails(checkEmail) {\n\t\t\tpeople.reduce(function (a, c) {\n\t\t\t\tc.privateEmails.forEach(function (e) {\n\t\t\t\t\tif (e.email && checkEmail(e)) a.set(e.email, e);\n\t\t\t\t});\n\t\t\t\tc.businessEmails.forEach(function (e) {\n\t\t\t\t\tif (e.email && checkEmail(e)) a.set(e.email, e);\n\t\t\t\t});\n\n\t\t\t\treturn a;\n\t\t\t}, map);\n\t\t};\n\n\t\taddEmails(function (e) {\n\t\t\treturn e.isSecured() && e.isStar;\n\t\t});\n\t\taddEmails(function (e) {\n\t\t\treturn e.isSecured() && !e.isStar;\n\t\t});\n\t\taddEmails(function (e) {\n\t\t\treturn !e.isSecured() && e.isStar;\n\t\t});\n\t\taddEmails(function (e) {\n\t\t\treturn !e.isSecured() && !e.isStar;\n\t\t});\n\n\t\taddHiddenEmails(function (e) {\n\t\t\treturn e.isSecured();\n\t\t});\n\t\taddHiddenEmails(function (e) {\n\t\t\treturn !e.isSecured();\n\t\t});\n\n\t\tif (toEmailContact) map.set(toEmailContact.email, toEmailContact);\n\n\t\t$scope.people = [].concat(babelHelpers.toConsumableArray(map.values()));\n\t\tconsole.log('$scope.people', $scope.people);\n\n\t\tco(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar body, subject, signature, emails, email, thread, to, blob, attachmentStatus;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tbody = '<br/>';\n\t\t\t\t\t\tsubject = '';\n\t\t\t\t\t\tsignature = user.settings.isSignatureEnabled && user.settings.signatureHtml ? user.settings.signatureHtml : '';\n\n\t\t\t\t\t\tif (!forwardEmailId) {\n\t\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn inbox.getEmailById(forwardEmailId);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.t9 = context$3$0.sent;\n\t\t\t\t\t\temails = [context$3$0.t9];\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\treturn composeHelpers.buildForwardedTemplate(body, '', emails);\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tbody = context$3$0.sent;\n\n\t\t\t\t\t\tsubject = 'Fwd: ' + Email.getSubjectWithoutRe(emails[0].subject);\n\t\t\t\t\t\tcontext$3$0.next = 36;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tif (!forwardThreadId) {\n\t\t\t\t\t\t\tcontext$3$0.next = 24;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 17;\n\t\t\t\t\t\treturn inbox.getEmailsByThreadId(forwardThreadId);\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\t\temails = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 20;\n\t\t\t\t\t\treturn composeHelpers.buildForwardedTemplate(body, '', emails);\n\n\t\t\t\t\tcase 20:\n\t\t\t\t\t\tbody = context$3$0.sent;\n\n\t\t\t\t\t\tsubject = 'Fwd: ' + Email.getSubjectWithoutRe(emails[0].subject);\n\t\t\t\t\t\tcontext$3$0.next = 36;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 24:\n\t\t\t\t\t\tif (!replyEmailId) {\n\t\t\t\t\t\t\tcontext$3$0.next = 33;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 27;\n\t\t\t\t\t\treturn inbox.getEmailById(replyEmailId);\n\n\t\t\t\t\tcase 27:\n\t\t\t\t\t\temail = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 30;\n\t\t\t\t\t\treturn composeHelpers.buildRepliedTemplate(body, signature, [{\n\t\t\t\t\t\t\tdate: email.date,\n\t\t\t\t\t\t\tname: email.from[0].name,\n\t\t\t\t\t\t\taddress: email.from[0].address,\n\t\t\t\t\t\t\tbody: email.body.data\n\t\t\t\t\t\t}]);\n\n\t\t\t\t\tcase 30:\n\t\t\t\t\t\tbody = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 36;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 33:\n\t\t\t\t\t\tcontext$3$0.next = 35;\n\t\t\t\t\t\treturn composeHelpers.buildDirectTemplate(body, signature);\n\n\t\t\t\t\tcase 35:\n\t\t\t\t\t\tbody = context$3$0.sent;\n\n\t\t\t\t\tcase 36:\n\t\t\t\t\t\tif (!(replyThreadId && replyEmailId)) {\n\t\t\t\t\t\t\tcontext$3$0.next = 48;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 39;\n\t\t\t\t\t\treturn inbox.getThreadById(replyThreadId);\n\n\t\t\t\t\tcase 39:\n\t\t\t\t\t\tthread = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 42;\n\t\t\t\t\t\treturn inbox.getEmailById(replyEmailId);\n\n\t\t\t\t\tcase 42:\n\t\t\t\t\t\temail = context$3$0.sent;\n\t\t\t\t\t\tto = (isReplyAll ? thread.members : email.from).map(function (m) {\n\t\t\t\t\t\t\treturn ContactEmail.transform(m.address);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('reply to', to);\n\t\t\t\t\t\t$scope.form = {\n\t\t\t\t\t\t\tperson: {},\n\t\t\t\t\t\t\tselected: {\n\t\t\t\t\t\t\t\tto: to,\n\t\t\t\t\t\t\t\tcc: [],\n\t\t\t\t\t\t\t\tbcc: [],\n\t\t\t\t\t\t\t\tfrom: contacts.myself\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfromEmails: [contacts.myself],\n\t\t\t\t\t\t\tsubject: 'Re: ' + Email.getSubjectWithoutRe(thread.subject),\n\t\t\t\t\t\t\tbody: body\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcontext$3$0.next = 49;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 48:\n\t\t\t\t\t\t$scope.form = {\n\t\t\t\t\t\t\tperson: {},\n\t\t\t\t\t\t\tselected: {\n\t\t\t\t\t\t\t\tto: toEmailContact ? [toEmailContact] : [],\n\t\t\t\t\t\t\t\tcc: [],\n\t\t\t\t\t\t\t\tbcc: [],\n\t\t\t\t\t\t\t\tfrom: contacts.myself\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfromEmails: [contacts.myself],\n\t\t\t\t\t\t\tsubject: subject,\n\t\t\t\t\t\t\tbody: body\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 49:\n\n\t\t\t\t\t\tif (publicKey) {\n\t\t\t\t\t\t\tblob = new Blob([publicKey.armor()], { type: 'text/plain' });\n\n\t\t\t\t\t\t\tblob.lastModifiedDate = publicKey.primaryKey.created;\n\t\t\t\t\t\t\tblob.name = utils.getEmailFromAddressString(publicKey.users[0].userId.userid) + '.asc';\n\t\t\t\t\t\t\tattachmentStatus = {\n\t\t\t\t\t\t\t\tattachment: new Attachment(blob)\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tattachmentStatus.processingPromise = processAttachment(attachmentStatus);\n\t\t\t\t\t\t\t$scope.attachments.push(attachmentStatus);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.log('$scope.form', $scope.form);\n\n\t\t\t\t\tcase 51:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t});\n\n\t$scope.addAttachment = function (file) {\n\t\tvar attachmentStatus = {\n\t\t\tattachment: new Attachment(file)\n\t\t};\n\t\tattachmentStatus.processingPromise = processAttachment(attachmentStatus);\n\t\t$scope.attachments.push(attachmentStatus);\n\t};\n\n\t$scope.clearTo = function () {\n\t\treturn $scope.form.selected.to = [];\n\t};\n\t$scope.clearCC = function () {\n\t\treturn $scope.form.selected.cc = [];\n\t};\n\t$scope.clearBCC = function () {\n\t\treturn $scope.form.selected.bcc = [];\n\t};\n\n\t$scope.toggleCC = function () {\n\t\treturn $scope.isCC = !$scope.isCC;\n\t};\n\t$scope.toggleBCC = function () {\n\t\treturn $scope.isBCC = !$scope.isBCC;\n\t};\n\n\t$scope.toggleToolbar = function () {\n\t\treturn $scope.isToolbarShown = !$scope.isToolbarShown;\n\t};\n\n\t$scope.tagClicked = function (select, item, model) {\n\t\tvar index = model.findIndex(function (c) {\n\t\t\treturn c.email == item.email;\n\t\t});\n\t\tif (index > -1) {\n\t\t\tvar tag = item.getTag();\n\t\t\tif (tag) {\n\t\t\t\tmodel.splice(index, 1);\n\t\t\t\tselect.search = item.getTag();\n\t\t\t}\n\t\t}\n\t};\n\n\t$scope.tagTransform = function (newTag) {\n\t\tif (!newTag) return null;\n\n\t\tvar match = newTag.match(/<([^>]*)>/);\n\t\tvar emailInside = match ? match[1] : null;\n\t\tvar emailTemplate = emailInside ? emailInside : newTag;\n\n\t\tvar p = emailTemplate.split('@');\n\n\t\tvar name = undefined,\n\t\t    email = undefined;\n\n\t\tif (p.length > 1) {\n\t\t\t;\n\t\t\tvar _temp = [p[0].trim(), '' + p[0].trim() + '@' + p[1].trim()];\n\t\t\tname = _temp[0];\n\t\t\temail = _temp[1];\n\t\t\t_temp;\n\t\t} else {\n\t\t\tif (!user.settings.isUnknownContactsAutoComplete) return null;\n\n\t\t\tvar _temp2 = [emailTemplate.trim(), '' + emailTemplate.trim() + '@' + consts.ROOT_DOMAIN];\n\t\t\tname = _temp2[0];\n\t\t\temail = _temp2[1];\n\t\t\t_temp2;\n\t\t}\n\n\t\tif (newHiddenContact) {\n\t\t\tif (newHiddenContact.email == email) return newHiddenContact;\n\n\t\t\tnewHiddenContact.cancelKeyLoading();\n\t\t}\n\n\t\tif (hiddenContacts[email]) return hiddenContacts[email];\n\n\t\tif (contacts.getContactByEmail(email)) return null;\n\n\t\tnewHiddenContact = new ContactEmail(null, {\n\t\t\tisTag: true,\n\t\t\ttag: newTag,\n\t\t\tname: name,\n\t\t\temail: email,\n\t\t\tisNew: true\n\t\t}, 'hidden');\n\n\t\tnewHiddenContact.loadKey();\n\n\t\thiddenContacts[newHiddenContact.email] = newHiddenContact;\n\t\treturn newHiddenContact;\n\t};\n\n\t$scope.personFilter = function (text) {\n\t\treturn function (person) {\n\t\t\ttext = text.toLowerCase();\n\n\t\t\treturn person && (!$scope.form || !$scope.form.selected.to.some(function (e) {\n\t\t\t\treturn e.email == person.email;\n\t\t\t})) && (person.getDisplayName().toLowerCase().includes(text) || person.name.toLowerCase().includes(text) || person.email.toLowerCase().includes(text));\n\t\t};\n\t};\n\n\t$scope.formatPaste = function (html) {\n\t\treturn textAngularHelpers.formatPaste(html);\n\t};\n\n\thotkey.addHotkey({\n\t\tcombo: ['ctrl+enter', 'command+enter'],\n\t\tdescription: 'HOTKEY.SEND_EMAIL',\n\t\tcallback: function callback(event, key) {\n\t\t\tevent.preventDefault();\n\t\t\t$scope.send();\n\t\t}\n\t});\n\n\ttextAngularHelpers.ctrlEnterCallback = $scope.send;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb21wb3NlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUNqRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sRUFDckUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUs7QUFDL0YsT0FBTSxDQUFDLE9BQU8sR0FBRyxDQUNoQixDQUFDLEtBQUssQ0FBQyxFQUNQLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLENBQUMsRUFDbEIsQ0FBQyxNQUFNLEVBQUUsU0FBUyxFQUFFLFdBQVcsQ0FBQyxFQUNoQyxDQUFDLGFBQWEsRUFBRSxlQUFlLEVBQUUsY0FBYyxDQUFDLEVBQ2hELENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUNaLENBQUMsUUFBUSxDQUFDLENBQ1YsQ0FBQztBQUNGLE9BQU0sQ0FBQyxhQUFhLEdBQUcsV0FBVyxDQUFDOztBQUVuQyxPQUFNLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztBQUN6QixPQUFNLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztBQUN2QixPQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNyQixPQUFNLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztBQUNwQixPQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNyQixPQUFNLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsMEJBQTBCLENBQUM7QUFDaEUsT0FBTSxDQUFDLFdB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TixtQkFBa0IsQ0FBQyxpQkFBaUIsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0NBQ25ELENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybENvbXBvc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGVQYXJhbXMsICR0cmFuc2xhdGUsXHJcblx0XHRcdFx0XHRcdFx0ICAgdXRpbHMsIGNvbnN0cywgY28sIHJvdXRlciwgY29tcG9zZUhlbHBlcnMsIHRleHRBbmd1bGFySGVscGVycywgY3J5cHRvLFxyXG5cdFx0XHRcdFx0XHRcdCAgIHVzZXIsIGNvbnRhY3RzLCBpbmJveCwgTWFuaWZlc3QsIENvbnRhY3QsIGhvdGtleSwgQ29udGFjdEVtYWlsLCBFbWFpbCwgQXR0YWNobWVudCkgPT4ge1xyXG5cdCRzY29wZS50b29sYmFyID0gW1xyXG5cdFx0WydwcmUnXSxcclxuXHRcdFsnaDEnLCAnaDInLCAnaDMnXSxcclxuXHRcdFsnYm9sZCcsICdpdGFsaWNzJywgJ3VuZGVybGluZSddLFxyXG5cdFx0WydqdXN0aWZ5TGVmdCcsICdqdXN0aWZ5Q2VudGVyJywgJ2p1c3RpZnlSaWdodCddLFxyXG5cdFx0Wyd1bCcsICdvbCddLFxyXG5cdFx0WydzdWJtaXQnXVxyXG5cdF07XHJcblx0JHNjb3BlLnRhZ2dpbmdUb2tlbnMgPSAnU1BBQ0V8LHwvJztcclxuXHJcblx0JHNjb3BlLmlzV2FybmluZyA9IGZhbHNlO1xyXG5cdCRzY29wZS5pc0Vycm9yID0gZmFsc2U7XHJcblx0JHNjb3BlLmlzWENDID0gZmFsc2U7XHJcblx0JHNjb3BlLmlzQ0MgPSBmYWxzZTtcclxuXHQkc2NvcGUuaXNCQ0MgPSBmYWxzZTtcclxuXHQkc2NvcGUuaXNTa2lwV2FybmluZyA9IHVzZXIuc2V0dGluZ3MuaXNTa2lwQ29tcG9zZVNjcmVlbldhcm5pbmc7XHJcblx0JHNjb3BlLmF0dGFjaG1lbnRzID0gW107XHJcblxyXG5cdCRzY29wZS5pc1Rvb2xiYXJTaG93biA9IGZhbHNlO1xyXG5cclxuXHRjb25zdCBoaWRkZW5Db250YWN0cyA9IHt9O1xyXG5cdGNvbnN0IHJlcGx5VGhyZWFkSWQgPSAkc3RhdGVQYXJhbXMucmVwbHlUaHJlYWRJZDtcclxuXHRjb25zdCByZXBseUVtYWlsSWQgPSAkc3RhdGVQYXJhbXMucmVwbHlFbWFpbElkO1xyXG5cdGNvbnN0IGlzUmVwbHlBbGwgPSAkc3RhdGVQYXJhbXMuaXNSZXBseUFsbDtcclxuXHRjb25zdCBmb3J3YXJkRW1haWxJZCA9ICRzdGF0ZVBhcmFtcy5mb3J3YXJkRW1haWxJZDtcclxuXHRjb25zdCBmb3J3YXJkVGhyZWFkSWQgPSAkc3RhdGVQYXJhbXMuZm9yd2FyZFRocmVhZElkO1xyXG5cdGNvbnN0IHRvRW1haWwgPSAkc3RhdGVQYXJhbXMudG87XHJcblx0Y29uc3QgcHVibGljS2V5ID0gJHN0YXRlUGFyYW1zLnB1YmxpY0tleSA/IGNyeXB0by5nZXRQdWJsaWNLZXlCeUZpbmdlcnByaW50KCRzdGF0ZVBhcmFtcy5wdWJsaWNLZXkpIDogbnVsbDtcclxuXHJcblx0bGV0IG1hbmlmZXN0ID0gbnVsbDtcclxuXHRsZXQgbmV3SGlkZGVuQ29udGFjdCA9IG51bGw7XHJcblxyXG5cdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcclxuXHRcdExCX0FUVEFDSE1FTlRfU1RBVFVTX1JFQURJTkc6ICcnLFxyXG5cdFx0TEJfQVRUQUNITUVOVF9TVEFUVVNfUkVBRElOR19FUlJPUjogJycsXHJcblx0XHRMQl9BVFRBQ0hNRU5UX1NUQVRVU19ERUxFVElOR19FUlJPUjogJycsXHJcblx0XHRMQl9BVFRBQ0hNRU5UX1NUQVRVU19FTkNSWVBUSU5HOiAnJyxcclxuXHRcdExCX0FUVEFDSE1FTlRfU1RBVFVTX0VOQ1JZUFRJTkdfRVJST1I6ICcnLFxyXG5cdFx0TEJfQVRUQUNITUVOVF9TVEFUVVNfRk9STUFUVElORzogJycsXHJcblx0XHRMQl9BVFRBQ0hNRU5UX1NUQVRVU19GT1JNQVRUSU5HX0VSUk9SOiAnJyxcclxuXHRcdExCX0FUVEFDSE1FTlRfU1RBVFVTX1VQTE9BRElORzogJycsXHJcblx0XHRMQl9BVFRBQ0hNRU5UX1NUQVRVU19VUExPQURJTkdfRVJST1I6ICcnLFxyXG5cdFx0TEJfQVRUQUNITUVOVF9TVEFUVVNfVVBMT0FERUQ6ICcnLFxyXG5cdFx0TEJfTk9fU1VCSkVDVDogJydcclxuXHR9O1xyXG5cdCR0cmFuc2xhdGUuYmluZEFzT2JqZWN0KHRyYW5zbGF0aW9ucywgJ01BSU4uQ09NUE9TRScpO1xyXG5cclxuXHRjb25zdCBwcm9jZXNzQXR0YWNobWVudCA9IChhdHRhY2htZW50U3RhdHVzKSA9PiBjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0YXR0YWNobWVudFN0YXR1cy5zdGF0dXMgPSB0cmFuc2xhdGlvbnMuTEJfQVRUQUNITUVOVF9TVEFUVVNfUkVBRElORztcclxuXHRcdGF0dGFjaG1lbnRTdGF0dXMuaXNDYW5jZWxsZWQgPSBmYWxzZTtcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHR5aWVsZCBhdHRhY2htZW50U3RhdHVzLmF0dGFjaG1lbnQucmVhZCgpO1xyXG5cdFx0fSBjYXRjaCAoZXJyKSB7XHJcblx0XHRcdGF0dGFjaG1lbnRTdGF0dXMuc3RhdHVzID0gdHJhbnNsYXRpb25zLkxCX0FUVEFDSE1FTlRfU1RBVFVTX1JFQURJTkdfRVJST1I7XHJcblx0XHRcdHRocm93IGVycjtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGlmIChhdHRhY2htZW50U3RhdHVzLmlzQ2FuY2VsbGVkKVxyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignY2FuY2VsbGVkJyk7XHJcblx0XHR9XHJcblxyXG5cdFx0YXR0YWNobWVudFN0YXR1cy5zdGF0dXMgPSAnJztcclxuXHJcblx0XHR0cnkge1xyXG5cdFx0XHRhdHRhY2htZW50U3RhdHVzLmV4dCA9IGF0dGFjaG1lbnRTdGF0dXMuYXR0YWNobWVudC50eXBlLnNwbGl0KCcvJylbMF07XHJcblx0XHR9IGNhdGNoIChlcnIpIHtcclxuXHRcdFx0YXR0YWNobWVudFN0YXR1cy5leHQgPSAnZmlsZSc7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCRzY29wZS5vbkZpbGVEcm9wID0gKGZpbGUpID0+IHtcclxuXHRcdGlmIChmaWxlLnR5cGUgJiYgZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlJykpXHJcblx0XHRcdHJldHVybjtcclxuXHJcblx0XHRjb25zdCBhdHRhY2htZW50U3RhdHVzID0ge1xyXG5cdFx0XHRhdHRhY2htZW50OiBuZXcgQXR0YWNobWVudChmaWxlKVxyXG5cdFx0fTtcclxuXHRcdGF0dGFjaG1lbnRTdGF0dXMucHJvY2Vzc2luZ1Byb21pc2UgPSBwcm9jZXNzQXR0YWNobWVudChhdHRhY2htZW50U3RhdHVzKTtcclxuXHRcdCRzY29wZS5hdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnRTdGF0dXMpO1xyXG5cdH07XHJcblxyXG5cdCRzY29wZS5kZWxldGVBdHRhY2htZW50ID0gKGF0dGFjaG1lbnRTdGF0dXMsIGluZGV4KSA9PiBjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0YXR0YWNobWVudFN0YXR1cy5pc0NhbmNlbGxlZCA9IHRydWU7XHJcblxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0eWllbGQgYXR0YWNobWVudFN0YXR1cy5wcm9jZXNzaW5nUHJvbWlzZTtcclxuXHRcdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0XHRpZiAoZXJyLm1lc3NhZ2UgIT0gJ2NhbmNlbGxlZCcpXHJcblx0XHRcdFx0dGhyb3cgZXJyO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChhdHRhY2htZW50U3RhdHVzLmlkKVxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdHlpZWxkIGluYm94LmRlbGV0ZUF0dGFjaG1lbnQoYXR0YWNobWVudFN0YXR1cy5pZCk7XHJcblx0XHRcdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0XHRcdGF0dGFjaG1lbnRTdGF0dXMuc3RhdHVzID0gdHJhbnNsYXRpb25zLkxCX0FUVEFDSE1FTlRfU1RBVFVTX0RFTEVUSU5HX0VSUk9SO1xyXG5cdFx0XHRcdHRocm93IGVycjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdCRzY29wZS5hdHRhY2htZW50cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdH0pO1xyXG5cclxuXHQkc2NvcGUudXBsb2FkQXR0YWNobWVudCA9IChhdHRhY2htZW50U3RhdHVzLCBrZXlzKSA9PiBjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0Y29uc3QgaXNTZWN1cmVkID0gRW1haWwuaXNTZWN1cmVkS2V5cyhrZXlzKTtcclxuXHJcblx0XHRsZXQgZW52ZWxvcGU7XHJcblx0XHRhdHRhY2htZW50U3RhdHVzLnN0YXR1cyA9IGlzU2VjdXJlZCA/IHRyYW5zbGF0aW9ucy5MQl9BVFRBQ0hNRU5UX1NUQVRVU19FTkNSWVBUSU5HIDogdHJhbnNsYXRpb25zLkxCX0FUVEFDSE1FTlRfU1RBVFVTX0ZPUk1BVFRJTkc7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRlbnZlbG9wZSA9IHlpZWxkIEF0dGFjaG1lbnQudG9FbnZlbG9wZShhdHRhY2htZW50U3RhdHVzLmF0dGFjaG1lbnQsIGtleXMpO1xyXG5cdFx0fSBjYXRjaCAoZXJyKSB7XHJcblx0XHRcdGF0dGFjaG1lbnRTdGF0dXMuc3RhdHVzID0gaXNTZWN1cmVkID8gdHJhbnNsYXRpb25zLkxCX0FUVEFDSE1FTlRfU1RBVFVTX0VOQ1JZUFRJTkdfRVJST1IgOiB0cmFuc2xhdGlvbnMuTEJfQVRUQUNITUVOVF9TVEFUVVNfRk9STUFUVElOR19FUlJPUjtcclxuXHRcdFx0dGhyb3cgZXJyO1xyXG5cdFx0fSBmaW5hbGx5IHtcclxuXHRcdFx0aWYgKGF0dGFjaG1lbnRTdGF0dXMuaXNDYW5jZWxsZWQpXHJcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdjYW5jZWxsZWQnKTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgcjtcclxuXHRcdGF0dGFjaG1lbnRTdGF0dXMuc3RhdHVzID0gdHJhbnNsYXRpb25zLkxCX0FUVEFDSE1FTlRfU1RBVFVTX1VQTE9BRElORztcclxuXHRcdHRyeSB7XHJcblx0XHRcdHIgPSB5aWVsZCBpbmJveC51cGxvYWRBdHRhY2htZW50KGVudmVsb3BlKTtcclxuXHRcdFx0YXR0YWNobWVudFN0YXR1cy5pZCA9IHIuYm9keS5maWxlLmlkO1xyXG5cdFx0XHRhdHRhY2htZW50U3RhdHVzLnN0YXR1cyA9IHRyYW5zbGF0aW9ucy5MQl9BVFRBQ0hNRU5UX1NUQVRVU19VUExPQURFRDtcclxuXHRcdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0XHRhdHRhY2htZW50U3RhdHVzLnN0YXR1cyA9IHRyYW5zbGF0aW9ucy5MQl9BVFRBQ0hNRU5UX1NUQVRVU19VUExPQURJTkdfRVJST1I7XHJcblx0XHRcdHRocm93IGVycjtcclxuXHRcdH0gZmluYWxseSB7XHJcblx0XHRcdGlmIChhdHRhY2htZW50U3RhdHVzLmlzQ2FuY2VsbGVkKVxyXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignY2FuY2VsbGVkJyk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdCRzY29wZS4kd2F0Y2goJ2lzU2tpcFdhcm5pbmcnLCAobywgbikgPT4ge1xyXG5cdFx0aWYgKG8gPT0gbilcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdHVzZXIudXBkYXRlKHtpc1NraXBDb21wb3NlU2NyZWVuV2FybmluZzogJHNjb3BlLmlzU2tpcFdhcm5pbmd9KTtcclxuXHR9KTtcclxuXHJcblx0JHNjb3BlLnRvZ2dsZUlzU2tpcFdhcm5pbmcgPSAoZXZlbnQpID0+IHtcclxuXHRcdCRzY29wZS5pc1NraXBXYXJuaW5nID0gISRzY29wZS5pc1NraXBXYXJuaW5nO1xyXG5cdH07XHJcblxyXG5cdCRzY29wZS5pc1ZhbGlkID0gKCkgPT4gJHNjb3BlLl9fZm9ybS4kdmFsaWQgJiZcclxuXHRcdCRzY29wZS5mb3JtICYmICRzY29wZS5mb3JtLnNlbGVjdGVkLnRvLmxlbmd0aCA+IDA7XHJcblxyXG5cdCRzY29wZS5zZW5kID0gKCkgPT4gY28oZnVuY3Rpb24gKigpIHtcclxuXHRcdGlmICghJHNjb3BlLmlzVmFsaWQoKSlcclxuXHRcdFx0cmV0dXJuO1xyXG5cclxuXHRcdGlmICghJHNjb3BlLmZvcm0uc3ViamVjdClcclxuXHRcdFx0JHNjb3BlLmZvcm0uc3ViamVjdCA9IHRyYW5zbGF0aW9ucy5MQl9OT19TVUJKRUNUO1xyXG5cclxuXHRcdCRzY29wZS5pc0Vycm9yID0gZmFsc2U7XHJcblx0XHQkc2NvcGUuaXNXYXJuaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0eWllbGQgJHNjb3BlLmF0dGFjaG1lbnRzLm1hcChhID0+IGEucHJvY2Vzc2luZ1Byb21pc2UpO1xyXG5cclxuXHRcdGxldCB0byA9ICRzY29wZS5mb3JtLnNlbGVjdGVkLnRvLm1hcChlID0+IGUuZW1haWwpLFxyXG5cdFx0XHRjYyA9ICRzY29wZS5mb3JtLnNlbGVjdGVkLmNjLm1hcChlID0+IGUuZW1haWwpLFxyXG5cdFx0XHRiY2MgPSAkc2NvcGUuZm9ybS5zZWxlY3RlZC5iY2MubWFwKGUgPT4gZS5lbWFpbCk7XHJcblxyXG5cdFx0bGV0IGtleXMgPSB5aWVsZCAoWy4uLiRzY29wZS5mb3JtLnNlbGVjdGVkLnRvLCAuLi4kc2NvcGUuZm9ybS5zZWxlY3RlZC5jYywgLi4uJHNjb3BlLmZvcm0uc2VsZWN0ZWQuYmNjXS5yZWR1Y2UoKGEsIGUpID0+IHtcclxuXHRcdFx0YVtlLmVtYWlsXSA9IGNvLnRyYW5zZm9ybShjby5kZWYoZS5sb2FkS2V5KCksIG51bGwpLCBlID0+IGUgPyBlLmFybW9yKCkgOiBudWxsKTtcclxuXHRcdFx0cmV0dXJuIGE7XHJcblx0XHR9LCB7fSkpO1xyXG5cdFx0Y29uc29sZS5sb2coJ2NvbXBvc2U6IGxvYWRlZCBrZXlzIGZvciBlbmNyeXB0aW9uJywga2V5cyk7XHJcblx0XHRjb25zb2xlLmxvZygndG8nLCAkc2NvcGUuZm9ybS5zZWxlY3RlZC50byk7XHJcblx0XHRjb25zb2xlLmxvZygndG8nLCAkc2NvcGUuZm9ybS5zZWxlY3RlZC5jYyk7XHJcblx0XHRjb25zb2xlLmxvZygndG8nLCAkc2NvcGUuZm9ybS5zZWxlY3RlZC5iY2MpO1xyXG5cclxuXHRcdGNvbnN0IGlzU2VjdXJlZCA9IEVtYWlsLmlzU2VjdXJlZEtleXMoa2V5cyk7XHJcblxyXG5cdFx0eWllbGQgJHNjb3BlLmF0dGFjaG1lbnRzLm1hcChhdHRhY2htZW50U3RhdHVzID0+ICRzY29wZS51cGxvYWRBdHRhY2htZW50KGF0dGFjaG1lbnRTdGF0dXMsIGtleXMpKTtcclxuXHJcblx0XHRtYW5pZmVzdCA9IE1hbmlmZXN0LmNyZWF0ZSh7XHJcblx0XHRcdGZyb21FbWFpbDogdXNlci5lbWFpbCxcclxuXHRcdFx0dG8sXHJcblx0XHRcdGNjLFxyXG5cdFx0XHRiY2MsXHJcblx0XHRcdHN1YmplY3Q6ICRzY29wZS5mb3JtLnN1YmplY3RcclxuXHRcdH0pO1xyXG5cclxuXHRcdG1hbmlmZXN0LnNldEJvZHkoJHNjb3BlLmZvcm0uYm9keSwgJ3RleHQvaHRtbCcpO1xyXG5cdFx0Zm9yKGxldCBhdHRhY2htZW50U3RhdHVzIG9mICRzY29wZS5hdHRhY2htZW50cylcclxuXHRcdFx0bWFuaWZlc3QuYWRkQXR0YWNobWVudChhdHRhY2htZW50U3RhdHVzLmF0dGFjaG1lbnQuaWQsXHJcblx0XHRcdFx0YXR0YWNobWVudFN0YXR1cy5hdHRhY2htZW50LmdldEJvZHlBc0JpbmFyeVN0cmluZygpLCBhdHRhY2htZW50U3RhdHVzLmF0dGFjaG1lbnQubmFtZSwgYXR0YWNobWVudFN0YXR1cy5hdHRhY2htZW50LnR5cGUpO1xyXG5cclxuXHRcdHRyeSB7XHJcblx0XHRcdGxldCBib2R5ID0gJHNjb3BlLmZvcm0uYm9keTtcclxuXHJcblx0XHRcdGxldCBzZW5kU3RhdHVzID0geWllbGQgaW5ib3guc2VuZCh7XHJcblx0XHRcdFx0Ym9keTogYm9keSxcclxuXHRcdFx0XHRhdHRhY2htZW50SWRzOiAkc2NvcGUuYXR0YWNobWVudHMubWFwKGEgPT4gYS5pZCksXHJcblx0XHRcdFx0dGhyZWFkSWQ6IHJlcGx5VGhyZWFkSWRcclxuXHRcdFx0fSwgbWFuaWZlc3QsIGtleXMpO1xyXG5cclxuXHRcdFx0Y29uc29sZS5sb2coJ2NvbXBvc2Ugc2VuZCBzdGF0dXMnLCBzZW5kU3RhdHVzKTtcclxuXHJcblx0XHRcdGlmIChpc1NlY3VyZWQpIHtcclxuXHRcdFx0XHQkc2NvcGUuZm9ybS5ib2R5ID0gaW5ib3guZ2V0TXVtYmxlZEZvcm1hdHRlZEJvZHkoKTtcclxuXHJcblx0XHRcdFx0eWllbGQgdXRpbHMuc2xlZXAoY29uc3RzLk1VTUJMRV9TSE9XX0RFTEFZKTtcclxuXHJcblx0XHRcdFx0eWllbGQgJHNjb3BlLmNvbmZpcm0oKTtcclxuXHRcdFx0fSBlbHNlIGlmICgkc2NvcGUuaXNTa2lwV2FybmluZylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHlpZWxkICRzY29wZS5jb25maXJtKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0JHNjb3BlLmlzV2FybmluZyA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0gY2F0Y2ggKGVycikge1xyXG5cdFx0XHQkc2NvcGUuaXNFcnJvciA9IHRydWU7XHJcblx0XHRcdHRocm93IGVycjtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JHNjb3BlLmNvbmZpcm0gPSAoKSA9PiBjbyhmdW5jdGlvbiAqKCl7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQkc2NvcGUuaXNXYXJuaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0XHR5aWVsZCBpbmJveC5jb25maXJtU2VuZCgpO1xyXG5cclxuXHRcdFx0eWllbGQgbWFuaWZlc3QuZ2V0RGVzdGluYXRpb25FbWFpbHMoKVxyXG5cdFx0XHRcdC5maWx0ZXIoZW1haWwgPT4gIWNvbnRhY3RzLmdldENvbnRhY3RCeUVtYWlsKGVtYWlsKSlcclxuXHRcdFx0XHQubWFwKGVtYWlsID0+IHtcclxuXHRcdFx0XHRcdGxldCBjb250YWN0ID0gbmV3IENvbnRhY3Qoe25hbWU6ICckaGlkZGVuJ30pO1xyXG5cdFx0XHRcdFx0Y29udGFjdC5oaWRkZW5FbWFpbCA9IGhpZGRlbkNvbnRhY3RzW2VtYWlsXTtcclxuXHRcdFx0XHRcdHJldHVybiBjb250YWN0cy5jcmVhdGVDb250YWN0KGNvbnRhY3QpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0bWFuaWZlc3QgPSBudWxsO1xyXG5cclxuXHRcdFx0cm91dGVyLmhpZGVQb3B1cCgpO1xyXG5cdFx0fSBjYXRjaCAoZXJyKSB7XHJcblx0XHRcdCRzY29wZS5pc0Vycm9yID0gdHJ1ZTtcclxuXHRcdFx0dGhyb3cgZXJyO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkc2NvcGUucmVqZWN0ID0gKCkgPT4ge1xyXG5cdFx0JHNjb3BlLmlzV2FybmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdGluYm94LnJlamVjdFNlbmQoKTtcclxuXHRcdG1hbmlmZXN0ID0gbnVsbDtcclxuXHR9O1xyXG5cclxuXHQkc2NvcGUuJGJpbmQoJ2NvbnRhY3RzLWNoYW5nZWQnLCAoKSA9PiB7XHJcblx0XHRsZXQgdG9FbWFpbENvbnRhY3QgPSBDb250YWN0RW1haWwudHJhbnNmb3JtKHRvRW1haWwpO1xyXG5cclxuXHRcdGxldCBwZW9wbGUgPSBbLi4uY29udGFjdHMucGVvcGxlLnZhbHVlcygpXTtcclxuXHRcdGxldCBtYXAgPSBuZXcgTWFwKCk7XHJcblxyXG5cdFx0Y29uc3QgYWRkSGlkZGVuRW1haWxzID0gKGNoZWNrRW1haWwpID0+IHtcclxuXHRcdFx0cGVvcGxlLnJlZHVjZSgoYSwgYykgPT4ge1xyXG5cdFx0XHRcdGlmIChjLmhpZGRlbkVtYWlsICYmIGMuaGlkZGVuRW1haWwuZW1haWwgJiYgY2hlY2tFbWFpbChjLmhpZGRlbkVtYWlsKSlcclxuXHRcdFx0XHRcdGEuc2V0KGMuaGlkZGVuRW1haWwuZW1haWwsIGMuaGlkZGVuRW1haWwpO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gYTtcclxuXHRcdFx0fSwgbWFwKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgYWRkRW1haWxzID0gKGNoZWNrRW1haWwpID0+IHtcclxuXHRcdFx0cGVvcGxlLnJlZHVjZSgoYSwgYykgPT4ge1xyXG5cdFx0XHRcdGMucHJpdmF0ZUVtYWlscy5mb3JFYWNoKGUgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGUuZW1haWwgJiYgY2hlY2tFbWFpbChlKSlcclxuXHRcdFx0XHRcdFx0YS5zZXQoZS5lbWFpbCwgZSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0Yy5idXNpbmVzc0VtYWlscy5mb3JFYWNoKGUgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKGUuZW1haWwgJiYgY2hlY2tFbWFpbChlKSlcclxuXHRcdFx0XHRcdFx0YS5zZXQoZS5lbWFpbCwgZSk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdHJldHVybiBhO1xyXG5cdFx0XHR9LCBtYXApO1xyXG5cdFx0fTtcclxuXHJcblx0XHRhZGRFbWFpbHMoZSA9PiBlLmlzU2VjdXJlZCgpICYmIGUuaXNTdGFyKTtcclxuXHRcdGFkZEVtYWlscyhlID0+IGUuaXNTZWN1cmVkKCkgJiYgIWUuaXNTdGFyKTtcclxuXHRcdGFkZEVtYWlscyhlID0+ICFlLmlzU2VjdXJlZCgpICYmIGUuaXNTdGFyKTtcclxuXHRcdGFkZEVtYWlscyhlID0+ICFlLmlzU2VjdXJlZCgpICYmICFlLmlzU3Rhcik7XHJcblxyXG5cdFx0YWRkSGlkZGVuRW1haWxzKGUgPT4gZS5pc1NlY3VyZWQoKSk7XHJcblx0XHRhZGRIaWRkZW5FbWFpbHMoZSA9PiAhZS5pc1NlY3VyZWQoKSk7XHJcblxyXG5cdFx0aWYgKHRvRW1haWxDb250YWN0KVxyXG5cdFx0XHRtYXAuc2V0KHRvRW1haWxDb250YWN0LmVtYWlsLCB0b0VtYWlsQ29udGFjdCk7XHJcblxyXG5cdFx0JHNjb3BlLnBlb3BsZSA9IFsuLi5tYXAudmFsdWVzKCldO1xyXG5cdFx0Y29uc29sZS5sb2coJyRzY29wZS5wZW9wbGUnLCAkc2NvcGUucGVvcGxlKTtcclxuXHJcblx0XHRjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0XHRsZXQgYm9keSA9ICc8YnIvPic7XHJcblx0XHRcdGxldCBzdWJqZWN0ID0gJyc7XHJcblxyXG5cdFx0XHRjb25zdCBzaWduYXR1cmUgPSB1c2VyLnNldHRpbmdzLmlzU2lnbmF0dXJlRW5hYmxlZCAmJiB1c2VyLnNldHRpbmdzLnNpZ25hdHVyZUh0bWwgPyB1c2VyLnNldHRpbmdzLnNpZ25hdHVyZUh0bWwgOiAnJztcclxuXHRcdFx0aWYgKGZvcndhcmRFbWFpbElkKSB7XHJcblx0XHRcdFx0bGV0IGVtYWlscyA9IFt5aWVsZCBpbmJveC5nZXRFbWFpbEJ5SWQoZm9yd2FyZEVtYWlsSWQpXTtcclxuXHRcdFx0XHRib2R5ID0geWllbGQgY29tcG9zZUhlbHBlcnMuYnVpbGRGb3J3YXJkZWRUZW1wbGF0ZShib2R5LCAnJywgZW1haWxzKTtcclxuXHRcdFx0XHRzdWJqZWN0ID0gJ0Z3ZDogJyArIEVtYWlsLmdldFN1YmplY3RXaXRob3V0UmUoZW1haWxzWzBdLnN1YmplY3QpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2VcclxuXHRcdFx0aWYgKGZvcndhcmRUaHJlYWRJZCkge1xyXG5cdFx0XHRcdGxldCBlbWFpbHMgPSB5aWVsZCBpbmJveC5nZXRFbWFpbHNCeVRocmVhZElkKGZvcndhcmRUaHJlYWRJZCk7XHJcblx0XHRcdFx0Ym9keSA9IHlpZWxkIGNvbXBvc2VIZWxwZXJzLmJ1aWxkRm9yd2FyZGVkVGVtcGxhdGUoYm9keSwgJycsIGVtYWlscyk7XHJcblx0XHRcdFx0c3ViamVjdCA9ICdGd2Q6ICcgKyBFbWFpbC5nZXRTdWJqZWN0V2l0aG91dFJlKGVtYWlsc1swXS5zdWJqZWN0KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdGlmIChyZXBseUVtYWlsSWQpIHtcclxuXHRcdFx0XHRsZXQgZW1haWwgPSB5aWVsZCBpbmJveC5nZXRFbWFpbEJ5SWQocmVwbHlFbWFpbElkKTtcclxuXHJcblx0XHRcdFx0Ym9keSA9IHlpZWxkIGNvbXBvc2VIZWxwZXJzLmJ1aWxkUmVwbGllZFRlbXBsYXRlKGJvZHksIHNpZ25hdHVyZSwgW3tcclxuXHRcdFx0XHRcdGRhdGU6IGVtYWlsLmRhdGUsXHJcblx0XHRcdFx0XHRuYW1lOiBlbWFpbC5mcm9tWzBdLm5hbWUsXHJcblx0XHRcdFx0XHRhZGRyZXNzOiBlbWFpbC5mcm9tWzBdLmFkZHJlc3MsXHJcblx0XHRcdFx0XHRib2R5OiBlbWFpbC5ib2R5LmRhdGFcclxuXHRcdFx0XHR9XSk7XHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdGJvZHkgPSB5aWVsZCBjb21wb3NlSGVscGVycy5idWlsZERpcmVjdFRlbXBsYXRlKGJvZHksIHNpZ25hdHVyZSk7XHJcblxyXG5cdFx0XHRpZiAocmVwbHlUaHJlYWRJZCAmJiByZXBseUVtYWlsSWQpIHtcclxuXHRcdFx0XHRsZXQgdGhyZWFkID0geWllbGQgaW5ib3guZ2V0VGhyZWFkQnlJZChyZXBseVRocmVhZElkKTtcclxuXHRcdFx0XHRsZXQgZW1haWwgPSB5aWVsZCBpbmJveC5nZXRFbWFpbEJ5SWQocmVwbHlFbWFpbElkKTtcclxuXHJcblx0XHRcdFx0bGV0IHRvID0gKGlzUmVwbHlBbGwgPyB0aHJlYWQubWVtYmVycyA6IGVtYWlsLmZyb20pXHJcblx0XHRcdFx0XHQubWFwKG0gPT4gQ29udGFjdEVtYWlsLnRyYW5zZm9ybShtLmFkZHJlc3MpKTtcclxuXHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ3JlcGx5IHRvJywgdG8pO1xyXG5cdFx0XHRcdCRzY29wZS5mb3JtID0ge1xyXG5cdFx0XHRcdFx0cGVyc29uOiB7fSxcclxuXHRcdFx0XHRcdHNlbGVjdGVkOiB7XHJcblx0XHRcdFx0XHRcdHRvOiB0byxcclxuXHRcdFx0XHRcdFx0Y2M6IFtdLFxyXG5cdFx0XHRcdFx0XHRiY2M6IFtdLFxyXG5cdFx0XHRcdFx0XHRmcm9tOiBjb250YWN0cy5teXNlbGZcclxuXHRcdFx0XHRcdH0sXHJcblx0XHRcdFx0XHRmcm9tRW1haWxzOiBbY29udGFjdHMubXlzZWxmXSxcclxuXHRcdFx0XHRcdHN1YmplY3Q6IGBSZTogJHtFbWFpbC5nZXRTdWJqZWN0V2l0aG91dFJlKHRocmVhZC5zdWJqZWN0KX1gLFxyXG5cdFx0XHRcdFx0Ym9keTogYm9keVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JHNjb3BlLmZvcm0gPSB7XHJcblx0XHRcdFx0XHRwZXJzb246IHt9LFxyXG5cdFx0XHRcdFx0c2VsZWN0ZWQ6IHtcclxuXHRcdFx0XHRcdFx0dG86IHRvRW1haWxDb250YWN0ID8gW3RvRW1haWxDb250YWN0XSA6IFtdLFxyXG5cdFx0XHRcdFx0XHRjYzogW10sXHJcblx0XHRcdFx0XHRcdGJjYzogW10sXHJcblx0XHRcdFx0XHRcdGZyb206IGNvbnRhY3RzLm15c2VsZlxyXG5cdFx0XHRcdFx0fSxcclxuXHRcdFx0XHRcdGZyb21FbWFpbHM6IFtjb250YWN0cy5teXNlbGZdLFxyXG5cdFx0XHRcdFx0c3ViamVjdDogc3ViamVjdCxcclxuXHRcdFx0XHRcdGJvZHk6IGJvZHlcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAocHVibGljS2V5KSB7XHJcblx0XHRcdFx0Y29uc3QgYmxvYiA9IG5ldyBCbG9iKFtwdWJsaWNLZXkuYXJtb3IoKV0sIHt0eXBlOiAndGV4dC9wbGFpbid9KTtcclxuXHRcdFx0XHRibG9iLmxhc3RNb2RpZmllZERhdGUgPSBwdWJsaWNLZXkucHJpbWFyeUtleS5jcmVhdGVkO1xyXG5cdFx0XHRcdGJsb2IubmFtZSA9IHV0aWxzLmdldEVtYWlsRnJvbUFkZHJlc3NTdHJpbmcocHVibGljS2V5LnVzZXJzWzBdLnVzZXJJZC51c2VyaWQpICsgJy5hc2MnO1xyXG5cdFx0XHRcdGNvbnN0IGF0dGFjaG1lbnRTdGF0dXMgPSB7XHJcblx0XHRcdFx0XHRhdHRhY2htZW50OiBuZXcgQXR0YWNobWVudChibG9iKVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0YXR0YWNobWVudFN0YXR1cy5wcm9jZXNzaW5nUHJvbWlzZSA9IHByb2Nlc3NBdHRhY2htZW50KGF0dGFjaG1lbnRTdGF0dXMpO1xyXG5cdFx0XHRcdCRzY29wZS5hdHRhY2htZW50cy5wdXNoKGF0dGFjaG1lbnRTdGF0dXMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjb25zb2xlLmxvZygnJHNjb3BlLmZvcm0nLCAkc2NvcGUuZm9ybSk7XHJcblx0XHR9KTtcclxuXHR9KTtcclxuXHJcblx0JHNjb3BlLmFkZEF0dGFjaG1lbnQgPSAoZmlsZSkgPT4ge1xyXG5cdFx0Y29uc3QgYXR0YWNobWVudFN0YXR1cyA9IHtcclxuXHRcdFx0YXR0YWNobWVudDogbmV3IEF0dGFjaG1lbnQoZmlsZSlcclxuXHRcdH07XHJcblx0XHRhdHRhY2htZW50U3RhdHVzLnByb2Nlc3NpbmdQcm9taXNlID0gcHJvY2Vzc0F0dGFjaG1lbnQoYXR0YWNobWVudFN0YXR1cyk7XHJcblx0XHQkc2NvcGUuYXR0YWNobWVudHMucHVzaChhdHRhY2htZW50U3RhdHVzKTtcclxuXHR9O1xyXG5cclxuXHQkc2NvcGUuY2xlYXJUbyA9ICgpID0+ICRzY29wZS5mb3JtLnNlbGVjdGVkLnRvID0gW107XHJcblx0JHNjb3BlLmNsZWFyQ0MgPSAoKSA9PiAkc2NvcGUuZm9ybS5zZWxlY3RlZC5jYyA9IFtdO1xyXG5cdCRzY29wZS5jbGVhckJDQyA9ICgpID0+ICRzY29wZS5mb3JtLnNlbGVjdGVkLmJjYyA9IFtdO1xyXG5cclxuXHQkc2NvcGUudG9nZ2xlQ0MgPSAoKSA9PiAkc2NvcGUuaXNDQyA9ICEkc2NvcGUuaXNDQztcclxuXHQkc2NvcGUudG9nZ2xlQkNDID0gKCkgPT4gJHNjb3BlLmlzQkNDID0gISRzY29wZS5pc0JDQztcclxuXHJcblx0JHNjb3BlLnRvZ2dsZVRvb2xiYXIgPSAoKSA9PiAkc2NvcGUuaXNUb29sYmFyU2hvd24gPSAhJHNjb3BlLmlzVG9vbGJhclNob3duO1xyXG5cclxuXHQkc2NvcGUudGFnQ2xpY2tlZCA9IChzZWxlY3QsIGl0ZW0sIG1vZGVsKSA9PiB7XHJcblx0XHRjb25zdCBpbmRleCA9IG1vZGVsLmZpbmRJbmRleChjID0+IGMuZW1haWwgPT0gaXRlbS5lbWFpbCk7XHJcblx0XHRpZiAoaW5kZXggPiAtMSkge1xyXG5cdFx0XHRjb25zdCB0YWcgPSBpdGVtLmdldFRhZygpO1xyXG5cdFx0XHRpZiAodGFnKSB7XHJcblx0XHRcdFx0bW9kZWwuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRcdFx0XHRzZWxlY3Quc2VhcmNoID0gaXRlbS5nZXRUYWcoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCRzY29wZS50YWdUcmFuc2Zvcm0gPSBuZXdUYWcgPT4ge1xyXG5cdFx0aWYgKCFuZXdUYWcpXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cclxuXHRcdGNvbnN0IG1hdGNoID0gbmV3VGFnLm1hdGNoKC88KFtePl0qKT4vKTtcclxuXHRcdGNvbnN0IGVtYWlsSW5zaWRlID0gbWF0Y2ggPyBtYXRjaFsxXSA6IG51bGw7XHJcblx0XHRjb25zdCBlbWFpbFRlbXBsYXRlID0gZW1haWxJbnNpZGUgPyBlbWFpbEluc2lkZSA6IG5ld1RhZztcclxuXHJcblx0XHRsZXQgcCA9IGVtYWlsVGVtcGxhdGUuc3BsaXQoJ0AnKTtcclxuXHJcblx0XHRsZXQgbmFtZSwgZW1haWw7XHJcblxyXG5cdFx0aWYgKHAubGVuZ3RoID4gMSlcclxuXHRcdFx0W25hbWUsIGVtYWlsXSA9IFtwWzBdLnRyaW0oKSwgYCR7cFswXS50cmltKCl9QCR7cFsxXS50cmltKCl9YF07XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0aWYgKCF1c2VyLnNldHRpbmdzLmlzVW5rbm93bkNvbnRhY3RzQXV0b0NvbXBsZXRlKVxyXG5cdFx0XHRcdHJldHVybiBudWxsO1xyXG5cclxuXHRcdFx0W25hbWUsIGVtYWlsXSA9IFtlbWFpbFRlbXBsYXRlLnRyaW0oKSwgYCR7ZW1haWxUZW1wbGF0ZS50cmltKCl9QCR7Y29uc3RzLlJPT1RfRE9NQUlOfWBdO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChuZXdIaWRkZW5Db250YWN0KSB7XHJcblx0XHRcdGlmIChuZXdIaWRkZW5Db250YWN0LmVtYWlsID09IGVtYWlsKVxyXG5cdFx0XHRcdHJldHVybiBuZXdIaWRkZW5Db250YWN0O1xyXG5cclxuXHRcdFx0bmV3SGlkZGVuQ29udGFjdC5jYW5jZWxLZXlMb2FkaW5nKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGhpZGRlbkNvbnRhY3RzW2VtYWlsXSlcclxuXHRcdFx0cmV0dXJuIGhpZGRlbkNvbnRhY3RzW2VtYWlsXTtcclxuXHJcblx0XHRpZiAoY29udGFjdHMuZ2V0Q29udGFjdEJ5RW1haWwoZW1haWwpKVxyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHJcblx0XHRuZXdIaWRkZW5Db250YWN0ID0gbmV3IENvbnRhY3RFbWFpbChudWxsLCB7XHJcblx0XHRcdGlzVGFnOiB0cnVlLFxyXG5cdFx0XHR0YWc6IG5ld1RhZyxcclxuXHRcdFx0bmFtZSxcclxuXHRcdFx0ZW1haWwsXHJcblx0XHRcdGlzTmV3OiB0cnVlXHJcblx0XHR9LCAnaGlkZGVuJyk7XHJcblxyXG5cdFx0bmV3SGlkZGVuQ29udGFjdC5sb2FkS2V5KCk7XHJcblxyXG5cdFx0aGlkZGVuQ29udGFjdHNbbmV3SGlkZGVuQ29udGFjdC5lbWFpbF0gPSBuZXdIaWRkZW5Db250YWN0O1xyXG5cdFx0cmV0dXJuIG5ld0hpZGRlbkNvbnRhY3Q7XHJcblx0fTtcclxuXHJcblx0JHNjb3BlLnBlcnNvbkZpbHRlciA9ICh0ZXh0KSA9PlxyXG5cdFx0KHBlcnNvbikgPT4ge1xyXG5cdFx0XHR0ZXh0ID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHBlcnNvbiAmJlxyXG5cdFx0XHRcdCghJHNjb3BlLmZvcm0gfHwgISRzY29wZS5mb3JtLnNlbGVjdGVkLnRvLnNvbWUoZSA9PiBlLmVtYWlsID09IHBlcnNvbi5lbWFpbCkpICYmIChcclxuXHRcdFx0XHRcdHBlcnNvbi5nZXREaXNwbGF5TmFtZSgpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGV4dCkgfHxcclxuXHRcdFx0XHRcdHBlcnNvbi5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGV4dCkgfHxcclxuXHRcdFx0XHRcdHBlcnNvbi5lbWFpbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRleHQpXHJcblx0XHRcdFx0KTtcclxuXHRcdH07XHJcblxyXG5cdCRzY29wZS5mb3JtYXRQYXN0ZSA9IChodG1sKSA9PiB0ZXh0QW5ndWxhckhlbHBlcnMuZm9ybWF0UGFzdGUoaHRtbCk7XHJcblxyXG5cdGhvdGtleS5hZGRIb3RrZXkoe1xyXG4gICAgICAgIGNvbWJvOiBbJ2N0cmwrZW50ZXInLCAnY29tbWFuZCtlbnRlciddLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnSE9US0VZLlNFTkRfRU1BSUwnLFxyXG4gICAgICAgIGNhbGxiYWNrOiAoZXZlbnQsIGtleSkgPT4ge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAkc2NvcGUuc2VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHR0ZXh0QW5ndWxhckhlbHBlcnMuY3RybEVudGVyQ2FsbGJhY2sgPSAkc2NvcGUuc2VuZDtcclxufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlComposeEmail.js":{"source":"\"use strict\";\n\nmodule.exports = /*@ngInject*/function ($scope) {\n\t$scope.status = {\n\t\tisDropdownOpened: false\n\t};\n\t$scope.switchContextMenu = function () {\n\t\t$scope.status.isDropdownOpened = !$scope.status.isDropdownOpened;\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb21wb3NlRW1haWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxNQUFNLEVBQUs7QUFDekMsT0FBTSxDQUFDLE1BQU0sR0FBRztBQUNmLGtCQUFnQixFQUFFLEtBQUs7RUFDdkIsQ0FBQztBQUNGLE9BQU0sQ0FBQyxpQkFBaUIsR0FBRyxZQUFNO0FBQ2hDLFFBQU0sQ0FBQyxNQUFNLENBQUMsZ0JBQWdCLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDO0VBQ2pFLENBQUM7Q0FDRixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb21wb3NlRW1haWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHNjb3BlKSA9PiB7XG5cdCRzY29wZS5zdGF0dXMgPSB7XG5cdFx0aXNEcm9wZG93bk9wZW5lZDogZmFsc2Vcblx0fTtcblx0JHNjb3BlLnN3aXRjaENvbnRleHRNZW51ID0gKCkgPT4ge1xuXHRcdCRzY29wZS5zdGF0dXMuaXNEcm9wZG93bk9wZW5lZCA9ICEkc2NvcGUuc3RhdHVzLmlzRHJvcGRvd25PcGVuZWQ7XG5cdH07XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlContactList.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $translate, $state, $stateParams, dialogs, co, contacts, user, hotkey) {\n\t$scope.selectedContactId = null;\n\t$scope.searchText = '';\n\n\tvar translations = {\n\t\tLB_NEW_CONTACT_SHORT: '',\n\t\tLB_EMPTY_CONTACT_SHORT: '',\n\t\tLB_CONFIRM: '%',\n\t\tTITLE_CONFIRM_DELETE: ''\n\t};\n\n\t$translate.bindAsObject(translations, 'MAIN.CONTACTS');\n\n\tvar findContact = function findContact(cid) {\n\t\tvar letterIndex = 0;\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = $scope.letters[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar letter = _step.value;\n\n\t\t\t\tvar index = $scope.people[letter].findIndex(function (c) {\n\t\t\t\t\treturn c.id == cid;\n\t\t\t\t});\n\t\t\t\tif (index < 0) {\n\t\t\t\t\tletterIndex++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\treturn {\n\t\t\t\t\tletterIndex: letterIndex,\n\t\t\t\t\tindex: index\n\t\t\t\t};\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t_iterator['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n\n\tvar nextContactId = function nextContactId(pos) {\n\t\tvar delta = arguments[1] === undefined ? 0 : arguments[1];\n\n\t\tvar peopleByLetter = undefined;\n\n\t\tif ($scope.letters.length < 1) return null;\n\n\t\tif (pos.letterIndex > $scope.letters.length - 1) {\n\t\t\tpos.letterIndex = $scope.letters.length - 1;\n\n\t\t\tpeopleByLetter = $scope.people[$scope.letters[pos.letterIndex]];\n\t\t\tpos.index = peopleByLetter.length - 1;\n\t\t} else peopleByLetter = $scope.people[$scope.letters[pos.letterIndex]];\n\n\t\tpos.index += delta;\n\n\t\tif (pos.index > peopleByLetter.length - 1) {\n\t\t\tif (pos.letterIndex < $scope.letters.length - 1) {\n\t\t\t\tpeopleByLetter = $scope.people[$scope.letters[pos.letterIndex + 1]];\n\t\t\t\treturn peopleByLetter[0].id;\n\t\t\t}\n\t\t\treturn peopleByLetter[peopleByLetter.length - 1].id;\n\t\t}\n\t\tif (pos.index < 0) {\n\t\t\tif (pos.letterIndex > 0) {\n\t\t\t\tpeopleByLetter = $scope.people[$scope.letters[pos.letterIndex - 1]];\n\t\t\t\treturn peopleByLetter[peopleByLetter.length - 1].id;\n\t\t\t}\n\t\t\treturn peopleByLetter[0].id;\n\t\t}\n\n\t\treturn peopleByLetter[pos.index].id;\n\t};\n\n\t$scope.$bind('contacts-changed', function () {\n\t\tvar oldContactPosition = $scope.selectedContactId !== null ? findContact($scope.selectedContactId) : null;\n\n\t\tvar list = [].concat(babelHelpers.toConsumableArray(contacts.people.values())).filter(function (c) {\n\t\t\treturn !c.isHidden();\n\t\t});\n\t\t$scope.contacts = contacts.people;\n\n\t\tvar group = function group(map, letter, item) {\n\t\t\tif (!map[letter]) map[letter] = [];\n\t\t\tmap[letter].push(item);\n\t\t\treturn map;\n\t\t};\n\n\t\t$scope.people = list.reduce(function (a, contact) {\n\t\t\tif (contact.isNew) return group(a, '+', contact);\n\n\t\t\tif (!contact.name) return group(a, '?', contact);\n\n\t\t\treturn group(a, contact.getSortingField(user.settings.contactsSortBy)[0], contact);\n\t\t}, {});\n\n\t\tObject.keys($scope.people).forEach(function (letter) {\n\t\t\t$scope.people[letter].sort(function (a, b) {\n\t\t\t\ta = a.getFullName();\n\t\t\t\tb = b.getFullName();\n\t\t\t\tif (a < b) return -1;\n\t\t\t\tif (a > b) return 1;\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t});\n\n\t\t$scope.letters = Object.keys($scope.people).sort();\n\n\t\tif (oldContactPosition !== null) $state.go('main.contacts.profile', { contactId: nextContactId(oldContactPosition) });\n\t});\n\n\t$scope.newContact = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn $state.go('main.contacts.profile', { contactId: 'new' });\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\t$scope.starContact = function (contactId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar contact;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontact = contacts.getContactById(contactId);\n\n\t\t\t\t\t\tcontact.isStar = !contact.isStar;\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn contacts.updateContact(contact);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\t$scope.deleteContact = function (contactId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar contact, confirmed;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontact = contacts.getContactById(contactId);\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn co.def(dialogs.confirm(translations.TITLE_CONFIRM_DELETE, translations.LB_CONFIRM({ name: contact.getFullName() })).result, 'cancelled');\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tconfirmed = context$3$0.sent;\n\n\t\t\t\t\t\tif (!(confirmed == 'cancelled')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\treturn contacts.deleteContact(contactId);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tvar stateChangeSuccess = $scope.$bind('$stateChangeSuccess', function () {\n\t\t$scope.selectedContactId = $stateParams.contactId;\n\n\t\tvar addHotkeys = function addHotkeys() {\n\t\t\tvar moveContacts = function moveContacts(delta) {\n\t\t\t\tvar oldContactPosition = $scope.selectedContactId !== null ? findContact($scope.selectedContactId) : null;\n\n\t\t\t\tif (oldContactPosition) {\n\t\t\t\t\tvar cid = nextContactId(oldContactPosition, delta);\n\t\t\t\t\t$state.go('main.contacts.profile', { contactId: cid });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar moveUp = function moveUp(event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tmoveContacts(-1);\n\t\t\t};\n\n\t\t\tvar moveDown = function moveDown(event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tmoveContacts(1);\n\t\t\t};\n\n\t\t\thotkey.addHotkey({\n\t\t\t\tcombo: ['h', 'k', 'left', 'up'],\n\t\t\t\tdescription: 'HOTKEY.MOVE_UP',\n\t\t\t\tcallback: moveUp\n\t\t\t});\n\n\t\t\thotkey.addHotkey({\n\t\t\t\tcombo: ['j', 'l', 'right', 'down'],\n\t\t\t\tdescription: 'HOTKEY.MOVE_DOWN',\n\t\t\t\tcallback: moveDown\n\t\t\t});\n\t\t};\n\n\t\taddHotkeys();\n\t});\n\n\t$scope.$on('$destroy', function () {\n\t\tstateChangeSuccess();\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb250YWN0TGlzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBSztBQUM1SCxPQUFNLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO0FBQ2hDLE9BQU0sQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFDOztBQUV2QixLQUFNLFlBQVksR0FBRztBQUNwQixzQkFBb0IsRUFBRSxFQUFFO0FBQ3hCLHdCQUFzQixFQUFFLEVBQUU7QUFDMUIsWUFBVSxFQUFFLEdBQUc7QUFDZixzQkFBb0IsRUFBQyxFQUFFO0VBQ3ZCLENBQUM7O0FBRUYsV0FBVSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLENBQUM7O0FBRXZELEtBQU0sV0FBVyxHQUFHLFNBQWQsV0FBVyxDQUFJLEdBQUcsRUFBSztBQUM1QixNQUFJLFdBQVcsR0FBRyxDQUFDLENBQUM7Ozs7OztBQUNwQix3QkFBa0IsTUFBTSxDQUFDLE9BQU8sOEhBQUU7UUFBMUIsTUFBTTs7QUFDYixRQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFNBQVMsQ0FBQyxVQUFBLENBQUM7WUFBSSxDQUFDLENBQUMsRUFBRSxJQUFJLEdBQUc7S0FBQSxDQUFDLENBQUM7QUFDOUQsUUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO0FBQ2QsZ0JBQVcsRUFBRSxDQUFDO0FBQ2QsY0FBUztLQUNUO0FBQ0QsV0FBTztBQUNOLGdCQUFXLEVBQUUsV0FBVztBQUN4QixVQUFLLEVBQUUsS0FBSztLQUNaLENBQUM7SUFDRjs7Ozs7Ozs7Ozs7Ozs7OztBQUVELFNBQU8sSUFBSSxDQUFDO0VBQ1osQ0FBQzs7QUFFRixLQUFNLGFBQWEsR0FBRyxTQUFoQixhQUFhLENBQUksR0FBRyxFQUFnQjtNQUFkLEtBQUssZ0NBQUcsQ0FBQzs7QUFDcEMsTUFBSSxjQUFjLFlBQUEsQ0FBQzs7QUFFbkIsTUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQzVCLE9BQU8sSUFBSSxDQUFDOztBQUViLE1BQUksR0FBRyxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDaEQsTUFBRyxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7O0FBRTVDLGlCQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO0FBQ2hFLE1BQUcsQ0FBQyxLQUFLLEdBQUcsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7R0FDdEMsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDOztBQUV2RSxLQUFHLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQzs7QUFFbkIsTUFBSSxHQUFHLENBQUMsS0FBSyxHQUFHLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQzFDLE9BQUksR0FBRyxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDaEQsa0JBQWMsR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BFLFdBQU8sY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUM1QjtBQUNELFVBQU8sY0FBYyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO0dBQ3BEO0FBQ0QsTUFBSSxHQUFHLENBQUMsS0FBSyxHQUFHLENBQUMsRUFBRTtBQUNsQixPQUFJLEdBQUcsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUFFO0FBQ3hCLGtCQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNwRSxXQUFPLGNBQWMsQ0FBQyxjQUFjLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNwRDtBQUNELFVBQU8sY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztHQUM1Qjs7QUFFRCxTQUFPLGNBQWMsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDO0VBQ3BDLENBQUM7O0FBRUYsT0FBTSxDQUFDLEtBQUssQ0FBQyxrQkFBa0IsRUFBRSxZQUFNO0FBQ3RDLE1BQUksa0JBQWtCLEdBQUcsTUFBTSxDQUFDLGlCQUFpQixLQUFLLElBQUksR0FBRyxXQUFXLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFDLEdBQUcsSUFBSSxDQUFDOztBQUUxRyxNQUFNLElBQUksR0FBRyx5Q0FBSSxRQUFRLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFFLE1BQU0sQ0FBQyxVQUFBLENBQUM7VUFBSSxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7R0FBQSxDQUFDLENBQUM7QUFDdEUsUUFBTSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDOztBQUVsQyxNQUFNLEtBQUssR0FBRyxTQUFSLEtBQUssQ0FBSSxHQUFHLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBSztBQUNwQyxPQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUNmLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDbEIsTUFBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QixVQUFPLEdBQUcsQ0FBQztHQUNYLENBQUM7O0FBRUYsUUFBTSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBSztBQUMzQyxPQUFJLE9BQU8sQ0FBQyxLQUFLLEVBQ2hCLE9BQU8sS0FBSyxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsT0FBTyxDQUFDLENBQUM7O0FBRS9CLE9BQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUNoQixPQUFPLEtBQUssQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDOztBQUUvQixVQUFPLEtBQUssQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ25GLEVBQUUsRUFBRSxDQUFDLENBQUM7O0FBRVAsUUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsTUFBTSxFQUFJO0FBQzVDLFNBQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSztBQUNwQyxLQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO0FBQ3BCLEtBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7QUFDcEIsUUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDckIsUUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3BCLFdBQU8sQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDO0dBQ0gsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRW5ELE1BQUksa0JBQWtCLEtBQUssSUFBSSxFQUM5QixNQUFNLENBQUMsRUFBRSxDQUFDLHVCQUF1QixFQUFFLEVBQUMsU0FBUyxFQUFFLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFDLENBQUMsQ0FBQztFQUNwRixDQUFDLENBQUM7O0FBRUgsT0FBTSxDQUFDLFVBQVUsR0FBRztTQUFNLEVBQUUseUJBQUM7Ozs7O2FBQ3RCLE1BQU0sQ0FBQyxFQUFFLENBQUMsdUJBQXVCLEVBQUUsRUFBQyxTQUFTLEVBQUUsS0FBSyxFQUFDLENBQUM7Ozs7Ozs7R0FDNUQsRUFBQztFQUFBLENBQUM7O0FBRUgsT0FBTSxDQUFDLFdBQVcsR0FBRyxVQUFDLFNBQVM7U0FBSyxFQUFFLHlCQUFDO09BQ2hDLE9BQU87Ozs7QUFBUCxhQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7O0FBQ2xELGFBQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDOzthQUNwQixRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQzs7Ozs7Ozs7OztHQUM1QyxFQUFDO0VBQUEsQ0FBQzs7QUFFSCxPQUFNLENBQUMsYUFBYSxHQUFHLFVBQUMsU0FBUztTQUFLLEVBQUUseUJBQUM7T0FDbEMsT0FBTyxFQUVQLFNBQVM7Ozs7QUFGVCxhQUFPLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUM7O2FBRTFCLEVBQUUsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FDN0MsWUFBWSxDQUFDLG9CQUFvQixFQUNqQyxZQUFZLENBQUMsVUFBVSxDQUFDLEVBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxXQUFXLEVBQUUsRUFBQyxDQUFDLENBQ3RELENBQUMsTUFBTSxFQUFFLFdBQVcsQ0FBQzs7O0FBSGhCLGVBQVM7O1lBSVgsU0FBUyxJQUFJLFdBQVcsQ0FBQTs7Ozs7Ozs7O2FBR2YsUUFBUSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUM7Ozs7Ozs7Ozs7R0FDOUMsRUFBQztFQUFBLENBQUM7O0FBRUgsS0FBTSxrQkFBa0IsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLHFCQUFxQixFQUFFLFlBQU07QUFDcEUsUUFBTSxDQUFDLGlCQUFpQixHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7O0FBRWxELE1BQU0sVUFBVSxHQUFHLFNBQWIsVUFBVSxHQUFTO0FBQ3hCLE9BQU0sWUFBWSxHQUFHLFNBQWYsWUFBWSxDQUFHLEtBQUssRUFBSTtBQUM3QixRQUFJLGtCQUFrQixHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsS0FBSyxJQUFJLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLElBQUksQ0FBQzs7QUFFMUcsUUFBSSxrQkFBa0IsRUFBRTtBQUN2QixTQUFJLEdBQUcsR0FBRyxhQUFhLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDbkQsV0FBTSxDQUFDLEVBQUUsQ0FBQyx1QkFBdUIsRUFBRSxFQUFDLFNBQVMsRUFBRSxHQUFHLEVBQUMsQ0FBQyxDQUFDO0tBQ3JEO0lBQ0QsQ0FBQzs7QUFFRixPQUFNLE1BQU0sR0FBRyxTQUFULE1BQU0sQ0FBSSxLQUFLLEVBQUUsR0FBRyxFQUFLO0FBQzlCLFNBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN2QixnQkFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakIsQ0FBQzs7QUFFRixPQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxLQUFLLEVBQUUsR0FBRyxFQUFLO0FBQ2hDLFNBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN2QixnQkFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hCLENBQUM7O0FBRUYsU0FBTSxDQUFDLFNBQVMsQ0FBQztBQUNoQixTQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUM7QUFDL0IsZUFBVyxFQUFFLGdCQUFnQjtBQUM3QixZQUFRLEVBQUUsTUFBTTtJQUNoQixDQUFDLENBQUM7O0FBRUgsU0FBTSxDQUFDLFNBQVMsQ0FBQztBQUNoQixTQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUM7QUFDbEMsZUFBVyxFQUFFLGtCQUFrQjtBQUMvQixZQUFRLEVBQUUsUUFBUTtJQUNsQixDQUFDLENBQUM7R0FDSCxDQUFDOztBQUVGLFlBQVUsRUFBRSxDQUFDO0VBQ2IsQ0FBQyxDQUFDOztBQUVILE9BQU0sQ0FBQyxHQUFHLENBQUMsVUFBVSxFQUFFLFlBQU07QUFDNUIsb0JBQWtCLEVBQUUsQ0FBQztFQUNyQixDQUFDLENBQUM7Q0FDSCxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb250YWN0TGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkc2NvcGUsICR0cmFuc2xhdGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBkaWFsb2dzLCBjbywgY29udGFjdHMsIHVzZXIsIGhvdGtleSkgPT4ge1xuXHQkc2NvcGUuc2VsZWN0ZWRDb250YWN0SWQgPSBudWxsO1xuXHQkc2NvcGUuc2VhcmNoVGV4dCA9ICcnO1xuXG5cdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcblx0XHRMQl9ORVdfQ09OVEFDVF9TSE9SVDogJycsXG5cdFx0TEJfRU1QVFlfQ09OVEFDVF9TSE9SVDogJycsXG5cdFx0TEJfQ09ORklSTTogJyUnLFxuXHRcdFRJVExFX0NPTkZJUk1fREVMRVRFOicnXG5cdH07XG5cblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5DT05UQUNUUycpO1xuXG5cdGNvbnN0IGZpbmRDb250YWN0ID0gKGNpZCkgPT4ge1xuXHRcdGxldCBsZXR0ZXJJbmRleCA9IDA7XG5cdFx0Zm9yKGxldCBsZXR0ZXIgb2YgJHNjb3BlLmxldHRlcnMpIHtcblx0XHRcdGxldCBpbmRleCA9ICRzY29wZS5wZW9wbGVbbGV0dGVyXS5maW5kSW5kZXgoYyA9PiBjLmlkID09IGNpZCk7XG5cdFx0XHRpZiAoaW5kZXggPCAwKSB7XG5cdFx0XHRcdGxldHRlckluZGV4Kys7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0bGV0dGVySW5kZXg6IGxldHRlckluZGV4LFxuXHRcdFx0XHRpbmRleDogaW5kZXhcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG51bGw7XG5cdH07XG5cblx0Y29uc3QgbmV4dENvbnRhY3RJZCA9IChwb3MsIGRlbHRhID0gMCkgPT4ge1xuXHRcdGxldCBwZW9wbGVCeUxldHRlcjtcblxuXHRcdGlmICgkc2NvcGUubGV0dGVycy5sZW5ndGggPCAxKVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRpZiAocG9zLmxldHRlckluZGV4ID4gJHNjb3BlLmxldHRlcnMubGVuZ3RoIC0gMSkge1xuXHRcdFx0cG9zLmxldHRlckluZGV4ID0gJHNjb3BlLmxldHRlcnMubGVuZ3RoIC0gMTtcblxuXHRcdFx0cGVvcGxlQnlMZXR0ZXIgPSAkc2NvcGUucGVvcGxlWyRzY29wZS5sZXR0ZXJzW3Bvcy5sZXR0ZXJJbmRleF1dO1xuXHRcdFx0cG9zLmluZGV4ID0gcGVvcGxlQnlMZXR0ZXIubGVuZ3RoIC0gMTtcblx0XHR9IGVsc2UgcGVvcGxlQnlMZXR0ZXIgPSAkc2NvcGUucGVvcGxlWyRzY29wZS5sZXR0ZXJzW3Bvcy5sZXR0ZXJJbmRleF1dO1xuXG5cdFx0cG9zLmluZGV4ICs9IGRlbHRhO1xuXG5cdFx0aWYgKHBvcy5pbmRleCA+IHBlb3BsZUJ5TGV0dGVyLmxlbmd0aCAtIDEpIHtcblx0XHRcdGlmIChwb3MubGV0dGVySW5kZXggPCAkc2NvcGUubGV0dGVycy5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdHBlb3BsZUJ5TGV0dGVyID0gJHNjb3BlLnBlb3BsZVskc2NvcGUubGV0dGVyc1twb3MubGV0dGVySW5kZXggKyAxXV07XG5cdFx0XHRcdHJldHVybiBwZW9wbGVCeUxldHRlclswXS5pZDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwZW9wbGVCeUxldHRlcltwZW9wbGVCeUxldHRlci5sZW5ndGggLSAxXS5pZDtcblx0XHR9XG5cdFx0aWYgKHBvcy5pbmRleCA8IDApIHtcblx0XHRcdGlmIChwb3MubGV0dGVySW5kZXggPiAwKSB7XG5cdFx0XHRcdHBlb3BsZUJ5TGV0dGVyID0gJHNjb3BlLnBlb3BsZVskc2NvcGUubGV0dGVyc1twb3MubGV0dGVySW5kZXggLSAxXV07XG5cdFx0XHRcdHJldHVybiBwZW9wbGVCeUxldHRlcltwZW9wbGVCeUxldHRlci5sZW5ndGggLSAxXS5pZDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBwZW9wbGVCeUxldHRlclswXS5pZDtcblx0XHR9XG5cblx0XHRyZXR1cm4gcGVvcGxlQnlMZXR0ZXJbcG9zLmluZGV4XS5pZDtcblx0fTtcblxuXHQkc2NvcGUuJGJpbmQoJ2NvbnRhY3RzLWNoYW5nZWQnLCAoKSA9PiB7XG5cdFx0bGV0IG9sZENvbnRhY3RQb3NpdGlvbiA9ICRzY29wZS5zZWxlY3RlZENvbnRhY3RJZCAhPT0gbnVsbCA/IGZpbmRDb250YWN0KCRzY29wZS5zZWxlY3RlZENvbnRhY3RJZCkgOiBudWxsO1xuXG5cdFx0Y29uc3QgbGlzdCA9IFsuLi5jb250YWN0cy5wZW9wbGUudmFsdWVzKCldLmZpbHRlcihjID0+ICFjLmlzSGlkZGVuKCkpO1xuXHRcdCRzY29wZS5jb250YWN0cyA9IGNvbnRhY3RzLnBlb3BsZTtcblxuXHRcdGNvbnN0IGdyb3VwID0gKG1hcCwgbGV0dGVyLCBpdGVtKSA9PiB7XG5cdFx0XHRpZiAoIW1hcFtsZXR0ZXJdKVxuXHRcdFx0XHRtYXBbbGV0dGVyXSA9IFtdO1xuXHRcdFx0bWFwW2xldHRlcl0ucHVzaChpdGVtKTtcblx0XHRcdHJldHVybiBtYXA7XG5cdFx0fTtcblxuXHRcdCRzY29wZS5wZW9wbGUgPSBsaXN0LnJlZHVjZSgoYSwgY29udGFjdCkgPT4ge1xuXHRcdFx0aWYgKGNvbnRhY3QuaXNOZXcpXG5cdFx0XHRcdHJldHVybiBncm91cChhLCAnKycsIGNvbnRhY3QpO1xuXG5cdFx0XHRpZiAoIWNvbnRhY3QubmFtZSlcblx0XHRcdFx0cmV0dXJuIGdyb3VwKGEsICc/JywgY29udGFjdCk7XG5cblx0XHRcdHJldHVybiBncm91cChhLCBjb250YWN0LmdldFNvcnRpbmdGaWVsZCh1c2VyLnNldHRpbmdzLmNvbnRhY3RzU29ydEJ5KVswXSwgY29udGFjdCk7XG5cdFx0fSwge30pO1xuXG5cdFx0T2JqZWN0LmtleXMoJHNjb3BlLnBlb3BsZSkuZm9yRWFjaChsZXR0ZXIgPT4ge1xuXHRcdFx0JHNjb3BlLnBlb3BsZVtsZXR0ZXJdLnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdFx0YSA9IGEuZ2V0RnVsbE5hbWUoKTtcblx0XHRcdFx0YiA9IGIuZ2V0RnVsbE5hbWUoKTtcblx0XHRcdFx0aWYgKGEgPCBiKSByZXR1cm4gLTE7XG5cdFx0XHRcdGlmIChhID4gYikgcmV0dXJuIDE7XG5cdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQkc2NvcGUubGV0dGVycyA9IE9iamVjdC5rZXlzKCRzY29wZS5wZW9wbGUpLnNvcnQoKTtcblxuXHRcdGlmIChvbGRDb250YWN0UG9zaXRpb24gIT09IG51bGwpXG5cdFx0XHQkc3RhdGUuZ28oJ21haW4uY29udGFjdHMucHJvZmlsZScsIHtjb250YWN0SWQ6IG5leHRDb250YWN0SWQob2xkQ29udGFjdFBvc2l0aW9uKX0pO1xuXHR9KTtcblxuXHQkc2NvcGUubmV3Q29udGFjdCA9ICgpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHR5aWVsZCAkc3RhdGUuZ28oJ21haW4uY29udGFjdHMucHJvZmlsZScsIHtjb250YWN0SWQ6ICduZXcnfSk7XG5cdH0pO1xuXG5cdCRzY29wZS5zdGFyQ29udGFjdCA9IChjb250YWN0SWQpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRjb25zdCBjb250YWN0ID0gY29udGFjdHMuZ2V0Q29udGFjdEJ5SWQoY29udGFjdElkKTtcblx0XHRjb250YWN0LmlzU3RhciA9ICFjb250YWN0LmlzU3Rhcjtcblx0XHRyZXR1cm4geWllbGQgY29udGFjdHMudXBkYXRlQ29udGFjdChjb250YWN0KTtcblx0fSk7XG5cblx0JHNjb3BlLmRlbGV0ZUNvbnRhY3QgPSAoY29udGFjdElkKSA9PiBjbyhmdW5jdGlvbiAqKCl7XG5cdFx0Y29uc3QgY29udGFjdCA9IGNvbnRhY3RzLmdldENvbnRhY3RCeUlkKGNvbnRhY3RJZCk7XG5cblx0XHRjb25zdCBjb25maXJtZWQgPSB5aWVsZCBjby5kZWYoZGlhbG9ncy5jb25maXJtKFxuXHRcdFx0dHJhbnNsYXRpb25zLlRJVExFX0NPTkZJUk1fREVMRVRFLFxuXHRcdFx0dHJhbnNsYXRpb25zLkxCX0NPTkZJUk0oe25hbWU6IGNvbnRhY3QuZ2V0RnVsbE5hbWUoKX0pXG5cdFx0KS5yZXN1bHQsICdjYW5jZWxsZWQnKTtcblx0XHRpZiAoY29uZmlybWVkID09ICdjYW5jZWxsZWQnKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0cmV0dXJuIHlpZWxkIGNvbnRhY3RzLmRlbGV0ZUNvbnRhY3QoY29udGFjdElkKTtcblx0fSk7XG5cblx0Y29uc3Qgc3RhdGVDaGFuZ2VTdWNjZXNzID0gJHNjb3BlLiRiaW5kKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgKCkgPT4ge1xuXHRcdCRzY29wZS5zZWxlY3RlZENvbnRhY3RJZCA9ICRzdGF0ZVBhcmFtcy5jb250YWN0SWQ7XG5cblx0XHRjb25zdCBhZGRIb3RrZXlzID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgbW92ZUNvbnRhY3RzID0gZGVsdGEgPT4ge1xuXHRcdFx0XHRsZXQgb2xkQ29udGFjdFBvc2l0aW9uID0gJHNjb3BlLnNlbGVjdGVkQ29udGFjdElkICE9PSBudWxsID8gZmluZENvbnRhY3QoJHNjb3BlLnNlbGVjdGVkQ29udGFjdElkKSA6IG51bGw7XG5cblx0XHRcdFx0aWYgKG9sZENvbnRhY3RQb3NpdGlvbikge1xuXHRcdFx0XHRcdGxldCBjaWQgPSBuZXh0Q29udGFjdElkKG9sZENvbnRhY3RQb3NpdGlvbiwgZGVsdGEpO1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnbWFpbi5jb250YWN0cy5wcm9maWxlJywge2NvbnRhY3RJZDogY2lkfSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdGNvbnN0IG1vdmVVcCA9IChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdG1vdmVDb250YWN0cygtMSk7XG5cdFx0XHR9O1xuXG5cdFx0XHRjb25zdCBtb3ZlRG93biA9IChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdG1vdmVDb250YWN0cygxKTtcblx0XHRcdH07XG5cblx0XHRcdGhvdGtleS5hZGRIb3RrZXkoe1xuXHRcdFx0XHRjb21ibzogWydoJywgJ2snLCAnbGVmdCcsICd1cCddLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5NT1ZFX1VQJyxcblx0XHRcdFx0Y2FsbGJhY2s6IG1vdmVVcFxuXHRcdFx0fSk7XG5cblx0XHRcdGhvdGtleS5hZGRIb3RrZXkoe1xuXHRcdFx0XHRjb21ibzogWydqJywgJ2wnLCAncmlnaHQnLCAnZG93biddLFxuXHRcdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5NT1ZFX0RPV04nLFxuXHRcdFx0XHRjYWxsYmFjazogbW92ZURvd25cblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRhZGRIb3RrZXlzKCk7XG5cdH0pO1xuXG5cdCRzY29wZS4kb24oJyRkZXN0cm95JywgKCkgPT4ge1xuXHRcdHN0YXRlQ2hhbmdlU3VjY2VzcygpO1xuXHR9KTtcbn07XG4iXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlContactProfile.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $translate, $state, $stateParams, dialogs, co, contacts, notifications, ContactEmail) {\n\t$scope.contactId = $stateParams.contactId;\n\tvar email = $stateParams.email;\n\n\t$scope.isEditMode = $scope.contactId == 'new';\n\n\tvar translations = {\n\t\tLB_NEW_CONTACT: '',\n\t\tLB_CONTACT_CANNOT_BE_SAVED: '',\n\t\tLB_CONTACT_SAVED: '',\n\t\tLB_CONTACT_DELETED: '',\n\t\tLB_CONTACT_CANNOT_BE_DELETED: '',\n\t\tLB_CONFIRM: '%',\n\t\tTITLE_CONFIRM_DELETE: ''\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.CONTACTS');\n\n\t$rootScope.$bind('notifications', function () {\n\t\t$scope.notificationsInfo = notifications.get('info', 'contact.profile');\n\t\t$scope.notificationsWarning = notifications.get('warning', 'contact.profile');\n\t});\n\n\tconsole.log('ctrl contact profile', $scope.contactId);\n\n\tif ($scope.contactId == 'new') {\n\t\t$scope.details = contacts.newContact();\n\t\tif (email && !$scope.details.getEmail(email)) $scope.details.privateEmails.push(new ContactEmail($scope.details, { name: email }, 'private'));\n\t} else {\n\t\t$scope.details = contacts.getContactById($scope.contactId);\n\n\t\tif (!$scope.details || $scope.details.isHidden()) $state.go('main.contacts');\n\t}\n\n\t$scope.$watchGroup(['details.firstName', 'details.lastName'], function (newValues, oldValues) {\n\t\tif (newValues[0] != oldValues[0] || newValues[1] != oldValues[1]) {\n\t\t\tvar firstName = $scope.details.firstName ? $scope.details.firstName.trim() : '';\n\t\t\tvar lastName = $scope.details.lastName ? $scope.details.lastName.trim() : '';\n\n\t\t\t$scope.details.name = firstName || lastName ? '' + firstName + ' ' + lastName : $scope.details.name;\n\t\t}\n\t});\n\n\t$scope.addNewPrivateEmail = function () {\n\t\tvar e = new ContactEmail($scope.details, {}, 'private');\n\t\t$scope.details.privateEmails.push(e);\n\t};\n\n\t$scope.addNewBusinessEmail = function () {\n\t\tvar e = new ContactEmail($scope.details, {}, 'business');\n\t\t$scope.details.businessEmails.push(e);\n\t};\n\n\tvar originalContact = null;\n\n\t$scope.openEditMode = function () {\n\t\toriginalContact = angular.copy($scope.details);\n\t\t$scope.isEditMode = true;\n\t};\n\n\t$scope.cancelEditMode = function () {\n\t\t$scope.isEditMode = false;\n\t\t$scope.details.setFromAnotherContact(originalContact);\n\t};\n\n\t$scope.saveThisContact = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar cid;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.prev = 0;\n\n\t\t\t\t\t\tif (!($scope.details.id != 'new')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn contacts.updateContact($scope.details);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\treturn contacts.createContact($scope.details);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\tcid = context$3$0.sent;\n\n\t\t\t\t\t\t$state.go('main.contacts.profile', { contactId: cid });\n\n\t\t\t\t\tcase 10:\n\n\t\t\t\t\t\t$scope.isEditMode = false;\n\t\t\t\t\t\tcontext$3$0.next = 17;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tcontext$3$0.prev = 13;\n\t\t\t\t\t\tcontext$3$0.t10 = context$3$0['catch'](0);\n\n\t\t\t\t\t\tnotifications.set('contact-save-fail', {\n\t\t\t\t\t\t\ttext: translations.LB_CONTACT_CANNOT_BE_SAVED,\n\t\t\t\t\t\t\tnamespace: 'contact.profile'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthrow context$3$0.t10;\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[0, 13]]);\n\t\t}));\n\t};\n\n\t$scope.deleteThisContact = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar confirmed;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.prev = 0;\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn co.def(dialogs.confirm(translations.TITLE_CONFIRM_DELETE, translations.LB_CONFIRM({ name: $scope.details.getFullName() })).result, 'cancelled');\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tconfirmed = context$3$0.sent;\n\n\t\t\t\t\t\tif (!(confirmed == 'cancelled')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\treturn contacts.deleteContact($scope.contactId);\n\n\t\t\t\t\tcase 8:\n\n\t\t\t\t\t\tnotifications.set('contact-delete-ok', {\n\t\t\t\t\t\t\ttext: translations.LB_CONTACT_DELETED,\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\tnamespace: 'contact.profile'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcontext$3$0.next = 15;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tcontext$3$0.prev = 11;\n\t\t\t\t\t\tcontext$3$0.t11 = context$3$0['catch'](0);\n\n\t\t\t\t\t\tnotifications.set('contact-delete-fail', {\n\t\t\t\t\t\t\ttext: translations.LB_CONTACT_CANNOT_BE_DELETED,\n\t\t\t\t\t\t\tnamespace: 'contact.profile'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthrow context$3$0.t11;\n\n\t\t\t\t\tcase 15:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[0, 11]]);\n\t\t}));\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb250YWN0UHJvZmlsZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQ3pFLE9BQU8sRUFBRSxFQUFFLEVBQUUsUUFBUSxFQUFFLGFBQWEsRUFBRSxZQUFZLEVBQUs7QUFDaEUsT0FBTSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDO0FBQzFDLEtBQU0sS0FBSyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUM7O0FBRWpDLE9BQU0sQ0FBQyxVQUFVLEdBQUcsTUFBTSxDQUFDLFNBQVMsSUFBSSxLQUFLLENBQUM7O0FBRTlDLEtBQU0sWUFBWSxHQUFHO0FBQ3BCLGdCQUFjLEVBQUUsRUFBRTtBQUNsQiw0QkFBMEIsRUFBRSxFQUFFO0FBQzlCLGtCQUFnQixFQUFFLEVBQUU7QUFDcEIsb0JBQWtCLEVBQUUsRUFBRTtBQUN0Qiw4QkFBNEIsRUFBRSxFQUFFO0FBQ2hDLFlBQVUsRUFBRSxHQUFHO0FBQ2Ysc0JBQW9CLEVBQUMsRUFBRTtFQUN2QixDQUFDO0FBQ0YsV0FBVSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLENBQUM7O0FBRXZELFdBQVUsQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLFlBQU07QUFDdkMsUUFBTSxDQUFDLGlCQUFpQixHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLGlCQUFpQixDQUFDLENBQUM7QUFDeEUsUUFBTSxDQUFDLG9CQUFvQixHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLGlCQUFpQixDQUFDLENBQUM7RUFDOUUsQ0FBQyxDQUFDOztBQUVILFFBQU8sQ0FBQyxHQUFHLENBQUMs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O0FBRUgsbUJBQWEsQ0FBQyxHQUFHLENBQUMscUJBQXFCLEVBQUU7QUFDeEMsV0FBSSxFQUFFLFlBQVksQ0FBQyw0QkFBNEI7QUFDL0MsZ0JBQVMsRUFBRSxpQkFBaUI7T0FDNUIsQ0FBQyxDQUFDOzs7Ozs7OztHQUdKLEVBQUM7RUFBQSxDQUFDO0NBQ0gsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9jb250cm9sbGVycy9jdHJsQ29udGFjdFByb2ZpbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHJvb3RTY29wZSwgJHNjb3BlLCAkdHJhbnNsYXRlLCAkc3RhdGUsICRzdGF0ZVBhcmFtcyxcblx0XHRcdFx0XHRcdFx0ICAgZGlhbG9ncywgY28sIGNvbnRhY3RzLCBub3RpZmljYXRpb25zLCBDb250YWN0RW1haWwpID0+IHtcblx0JHNjb3BlLmNvbnRhY3RJZCA9ICRzdGF0ZVBhcmFtcy5jb250YWN0SWQ7XG5cdGNvbnN0IGVtYWlsID0gJHN0YXRlUGFyYW1zLmVtYWlsO1xuXG5cdCRzY29wZS5pc0VkaXRNb2RlID0gJHNjb3BlLmNvbnRhY3RJZCA9PSAnbmV3JztcblxuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0TEJfTkVXX0NPTlRBQ1Q6ICcnLFxuXHRcdExCX0NPTlRBQ1RfQ0FOTk9UX0JFX1NBVkVEOiAnJyxcblx0XHRMQl9DT05UQUNUX1NBVkVEOiAnJyxcblx0XHRMQl9DT05UQUNUX0RFTEVURUQ6ICcnLFxuXHRcdExCX0NPTlRBQ1RfQ0FOTk9UX0JFX0RFTEVURUQ6ICcnLFxuXHRcdExCX0NPTkZJUk06ICclJyxcblx0XHRUSVRMRV9DT05GSVJNX0RFTEVURTonJ1xuXHR9O1xuXHQkdHJhbnNsYXRlLmJpbmRBc09iamVjdCh0cmFuc2xhdGlvbnMsICdNQUlOLkNPTlRBQ1RTJyk7XG5cblx0JHJvb3RTY29wZS4kYmluZCgnbm90aWZpY2F0aW9ucycsICgpID0+IHtcblx0XHQkc2NvcGUubm90aWZpY2F0aW9uc0luZm8gPSBub3RpZmljYXRpb25zLmdldCgnaW5mbycsICdjb250YWN0LnByb2ZpbGUnKTtcblx0XHQkc2NvcGUubm90aWZpY2F0aW9uc1dhcm5pbmcgPSBub3RpZmljYXRpb25zLmdldCgnd2FybmluZycsICdjb250YWN0LnByb2ZpbGUnKTtcblx0fSk7XG5cblx0Y29uc29sZS5sb2coJ2N0cmwgY29udGFjdCBwcm9maWxlJywgJHNjb3BlLmNvbnRhY3RJZCk7XG5cblx0aWYgKCRzY29wZS5jb250YWN0SWQgPT0gJ25ldycpIHtcblx0XHQkc2NvcGUuZGV0YWlscyA9IGNvbnRhY3RzLm5ld0NvbnRhY3QoKTtcblx0XHRpZiAoZW1haWwgJiYgISRzY29wZS5kZXRhaWxzLmdldEVtYWlsKGVtYWlsKSlcblx0XHRcdCRzY29wZS5kZXRhaWxzLnByaXZhdGVFbWFpbHMucHVzaChuZXcgQ29udGFjdEVtYWlsKCRzY29wZS5kZXRhaWxzLCB7bmFtZTogZW1haWx9LCAncHJpdmF0ZScpKTtcblx0fSBlbHNlIHtcblx0XHQkc2NvcGUuZGV0YWlscyA9IGNvbnRhY3RzLmdldENvbnRhY3RCeUlkKCRzY29wZS5jb250YWN0SWQpO1xuXG5cdFx0aWYgKCEkc2NvcGUuZGV0YWlscyB8fCAkc2NvcGUuZGV0YWlscy5pc0hpZGRlbigpKVxuXHRcdFx0JHN0YXRlLmdvKCdtYWluLmNvbnRhY3RzJyk7XG5cdH1cblxuXHQkc2NvcGUuJHdhdGNoR3JvdXAoWydkZXRhaWxzLmZpcnN0TmFtZScsICdkZXRhaWxzLmxhc3ROYW1lJ10sIChuZXdWYWx1ZXMsIG9sZFZhbHVlcykgPT4ge1xuXHRcdGlmIChuZXdWYWx1ZXNbMF0gIT0gb2xkVmFsdWVzWzBdIHx8IG5ld1ZhbHVlc1sxXSAhPSBvbGRWYWx1ZXNbMV0pIHtcblx0XHRcdGxldCBmaXJzdE5hbWUgPSAkc2NvcGUuZGV0YWlscy5maXJzdE5hbWUgPyAkc2NvcGUuZGV0YWlscy5maXJzdE5hbWUudHJpbSgpIDogJyc7XG5cdFx0XHRsZXQgbGFzdE5hbWUgPSAkc2NvcGUuZGV0YWlscy5sYXN0TmFtZSA/ICRzY29wZS5kZXRhaWxzLmxhc3ROYW1lLnRyaW0oKSA6ICcnO1xuXG5cdFx0XHQkc2NvcGUuZGV0YWlscy5uYW1lID0gZmlyc3ROYW1lIHx8IGxhc3ROYW1lID8gYCR7Zmlyc3ROYW1lfSAke2xhc3ROYW1lfWAgOiAkc2NvcGUuZGV0YWlscy5uYW1lO1xuXHRcdH1cblx0fSk7XG5cblx0JHNjb3BlLmFkZE5ld1ByaXZhdGVFbWFpbCA9ICgpID0+IHtcblx0XHRsZXQgZSA9IG5ldyBDb250YWN0RW1haWwoJHNjb3BlLmRldGFpbHMsIHt9LCAncHJpdmF0ZScpO1xuXHRcdCRzY29wZS5kZXRhaWxzLnByaXZhdGVFbWFpbHMucHVzaChlKTtcblx0fTtcblxuXHQkc2NvcGUuYWRkTmV3QnVzaW5lc3NFbWFpbCA9ICgpID0+IHtcblx0XHRsZXQgZSA9IG5ldyBDb250YWN0RW1haWwoJHNjb3BlLmRldGFpbHMsIHt9LCAnYnVzaW5lc3MnKTtcblx0XHQkc2NvcGUuZGV0YWlscy5idXNpbmVzc0VtYWlscy5wdXNoKGUpO1xuXHR9O1xuXG5cdGxldCBvcmlnaW5hbENvbnRhY3QgPSBudWxsO1xuXG5cdCRzY29wZS5vcGVuRWRpdE1vZGUgPSAoKSA9PiB7XG5cdFx0b3JpZ2luYWxDb250YWN0ID0gYW5ndWxhci5jb3B5KCRzY29wZS5kZXRhaWxzKTtcblx0XHQkc2NvcGUuaXNFZGl0TW9kZSA9IHRydWU7XG5cdH07XG5cblx0JHNjb3BlLmNhbmNlbEVkaXRNb2RlID0gKCkgPT4ge1xuXHRcdCRzY29wZS5pc0VkaXRNb2RlID0gZmFsc2U7XG5cdFx0JHNjb3BlLmRldGFpbHMuc2V0RnJvbUFub3RoZXJDb250YWN0KG9yaWdpbmFsQ29udGFjdCk7XG5cdH07XG5cblx0JHNjb3BlLnNhdmVUaGlzQ29udGFjdCA9ICgpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHR0cnkge1xuXHRcdFx0aWYgKCRzY29wZS5kZXRhaWxzLmlkICE9ICduZXcnKVxuXHRcdFx0XHR5aWVsZCBjb250YWN0cy51cGRhdGVDb250YWN0KCRzY29wZS5kZXRhaWxzKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRsZXQgY2lkID0geWllbGQgY29udGFjdHMuY3JlYXRlQ29udGFjdCgkc2NvcGUuZGV0YWlscyk7XG5cdFx0XHRcdCRzdGF0ZS5nbygnbWFpbi5jb250YWN0cy5wcm9maWxlJywge2NvbnRhY3RJZDogY2lkfSk7XG5cdFx0XHR9XG5cblx0XHRcdCRzY29wZS5pc0VkaXRNb2RlID0gZmFsc2U7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRub3RpZmljYXRpb25zLnNldCgnY29udGFjdC1zYXZlLWZhaWwnLCB7XG5cdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9DT05UQUNUX0NBTk5PVF9CRV9TQVZFRCxcblx0XHRcdFx0bmFtZXNwYWNlOiAnY29udGFjdC5wcm9maWxlJ1xuXHRcdFx0fSk7XG5cdFx0XHR0aHJvdyBlcnI7XG5cdFx0fVxuXHR9KTtcblxuXHQkc2NvcGUuZGVsZXRlVGhpc0NvbnRhY3QgPSAoKSA9PiBjbyhmdW5jdGlvbiAqKCl7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGNvbmZpcm1lZCA9IHlpZWxkIGNvLmRlZihkaWFsb2dzLmNvbmZpcm0oXG5cdFx0XHRcdHRyYW5zbGF0aW9ucy5USVRMRV9DT05GSVJNX0RFTEVURSxcblx0XHRcdFx0dHJhbnNsYXRpb25zLkxCX0NPTkZJUk0oe25hbWU6ICRzY29wZS5kZXRhaWxzLmdldEZ1bGxOYW1lKCl9KVxuXHRcdFx0KS5yZXN1bHQsICdjYW5jZWxsZWQnKTtcblx0XHRcdGlmIChjb25maXJtZWQgPT0gJ2NhbmNlbGxlZCcpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0eWllbGQgY29udGFjdHMuZGVsZXRlQ29udGFjdCgkc2NvcGUuY29udGFjdElkKTtcblxuXHRcdFx0bm90aWZpY2F0aW9ucy5zZXQoJ2NvbnRhY3QtZGVsZXRlLW9rJywge1xuXHRcdFx0XHR0ZXh0OiB0cmFuc2xhdGlvbnMuTEJfQ09OVEFDVF9ERUxFVEVELFxuXHRcdFx0XHR0eXBlOiAnaW5mbycsXG5cdFx0XHRcdHRpbWVvdXQ6IDMwMDAsXG5cdFx0XHRcdG5hbWVzcGFjZTogJ2NvbnRhY3QucHJvZmlsZSdcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bm90aWZpY2F0aW9ucy5zZXQoJ2NvbnRhY3QtZGVsZXRlLWZhaWwnLCB7XG5cdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9DT05UQUNUX0NBTk5PVF9CRV9ERUxFVEVELFxuXHRcdFx0XHRuYW1lc3BhY2U6ICdjb250YWN0LnByb2ZpbGUnXG5cdFx0XHR9KTtcblx0XHRcdHRocm93IGVycjtcblx0XHR9XG5cdH0pO1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlContactProfileEmail.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, $stateParams, $translate, co, consts, crypto, saver, notifications, router, Key) {\n\t$scope.selectedContactId = $stateParams.contactId;\n\t$scope.isNotFound = false;\n\t$scope.emails = [];\n\n\tvar translations = {\n\t\tLB_EMAIL_NOT_FOUND: '',\n\t\tLB_CANNOT_IMPORT_PUBLIC_KEY: '',\n\t\tLB_PUBLIC_KEY_IMPORTED: '%'\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.CONTACTS');\n\n\t$scope.starEmail = function () {\n\t\tif ($scope.isEditMode) $scope.currentEmail.isStar = !$scope.currentEmail.isStar;\n\t};\n\n\t$scope.requestPublicKey = function () {\n\t\trouter.showPopup('compose', { to: $scope.currentEmail.email });\n\t};\n\n\t$scope.uploadPublicKey = function (data) {\n\t\ttry {\n\t\t\tvar key = crypto.readKey(data);\n\n\t\t\tif (!key) throw new Error('not_found');\n\t\t\tvar primaryKey = key.primaryKey;\n\t\t\tif (!primaryKey) throw new Error('not_found');\n\n\t\t\t$scope.currentEmail.key = new Key(key);\n\n\t\t\tnotifications.set('public-key-import-ok' + $scope.currentEmail.email, {\n\t\t\t\ttype: 'info',\n\t\t\t\ttext: translations.LB_PUBLIC_KEY_IMPORTED({\n\t\t\t\t\temail: $scope.currentEmail.email,\n\t\t\t\t\talgos: $scope.currentEmail.key.algos,\n\t\t\t\t\tlength: $scope.currentEmail.key.length\n\t\t\t\t}),\n\t\t\t\tnamespace: 'contact.profile',\n\t\t\t\ttimeout: 3000\n\t\t\t});\n\t\t} catch (err) {\n\t\t\tnotifications.set('public-key-import-fail' + $scope.currentEmail.email, {\n\t\t\t\ttext: translations.LB_CANNOT_IMPORT_PUBLIC_KEY,\n\t\t\t\tnamespace: 'contact.profile'\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.downloadPublicKey = function () {\n\t\tconsole.log($scope.currentEmail.key);\n\t\tsaver.saveAs($scope.currentEmail.key.armor(), '' + $scope.currentEmail.email + '.asc', 'text/plain;charset=utf-8');\n\t};\n\n\t$scope.remove = function () {\n\t\tconsole.log('remove from', $scope.details[$scope.emails], $scope.currentEmail.$$hashKey);\n\t\t$scope.details[$scope.emails] = $scope.details[$scope.emails].filter(function (e) {\n\t\t\treturn e.$$hashKey != $scope.currentEmail.$$hashKey;\n\t\t});\n\t};\n\n\t$scope.$watch('currentEmail.name', function (o, n) {\n\t\tif (o == n) return;\n\n\t\tvar email = $scope.currentEmail;\n\t\tif (!email || !email.name) return;\n\n\t\temail.email = email.name.includes('@') ? email.name : '' + email.name + '@' + consts.ROOT_DOMAIN;\n\t\temail.loadKey(true);\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb250YWN0UHJvZmlsZUVtYWlsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsTUFBTSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLGFBQWEsRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFLO0FBQzFILE9BQU0sQ0FBQyxpQkFBaUIsR0FBRyxZQUFZLENBQUMsU0FBUyxDQUFDO0FBQ2xELE9BQU0sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDO0FBQzFCLE9BQU0sQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDOztBQUVuQixLQUFNLFlBQVksR0FBRztBQUNwQixvQkFBa0IsRUFBRSxFQUFFO0FBQ3RCLDZCQUEyQixFQUFFLEVBQUU7QUFDL0Isd0JBQXNCLEVBQUUsR0FBRztFQUMzQixDQUFDO0FBQ0YsV0FBVSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsZUFBZSxDQUFDLENBQUM7O0FBRXZELE9BQU0sQ0FBQyxTQUFTLEdBQUcsWUFBTTtBQUN4QixNQUFJLE1BQU0sQ0FBQyxVQUFVLEVBQ3BCLE1BQU0sQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUM7RUFDMUQsQ0FBQzs7QUFFRixPQUFNLENBQUMsZ0JBQWdCLEdBQUcsWUFBTTtBQUMvQixRQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsRUFBRSxFQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBQyxDQUFDLENBQUM7RUFDN0QsQ0FBQzs7QUFFRixPQUFNLENBQUMsZUFBZSxHQUFHLFVBQUMsSUFBSSxFQUFLO0FBQ2xDLE1BQUk7QUFDSCxPQUFNLEdBQUcs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L3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxDb250YWN0UHJvZmlsZUVtYWlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRzY29wZSwgJHN0YXRlUGFyYW1zLCAkdHJhbnNsYXRlLCBjbywgY29uc3RzLCBjcnlwdG8sIHNhdmVyLCBub3RpZmljYXRpb25zLCByb3V0ZXIsIEtleSkgPT4ge1xuXHQkc2NvcGUuc2VsZWN0ZWRDb250YWN0SWQgPSAkc3RhdGVQYXJhbXMuY29udGFjdElkO1xuXHQkc2NvcGUuaXNOb3RGb3VuZCA9IGZhbHNlO1xuXHQkc2NvcGUuZW1haWxzID0gW107XG5cblx0Y29uc3QgdHJhbnNsYXRpb25zID0ge1xuXHRcdExCX0VNQUlMX05PVF9GT1VORDogJycsXG5cdFx0TEJfQ0FOTk9UX0lNUE9SVF9QVUJMSUNfS0VZOiAnJyxcblx0XHRMQl9QVUJMSUNfS0VZX0lNUE9SVEVEOiAnJSdcblx0fTtcblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5DT05UQUNUUycpO1xuXG5cdCRzY29wZS5zdGFyRW1haWwgPSAoKSA9PiB7XG5cdFx0aWYgKCRzY29wZS5pc0VkaXRNb2RlKVxuXHRcdFx0JHNjb3BlLmN1cnJlbnRFbWFpbC5pc1N0YXIgPSAhJHNjb3BlLmN1cnJlbnRFbWFpbC5pc1N0YXI7XG5cdH07XG5cblx0JHNjb3BlLnJlcXVlc3RQdWJsaWNLZXkgPSAoKSA9PiB7XG5cdFx0cm91dGVyLnNob3dQb3B1cCgnY29tcG9zZScsIHt0bzogJHNjb3BlLmN1cnJlbnRFbWFpbC5lbWFpbH0pO1xuXHR9O1xuXG5cdCRzY29wZS51cGxvYWRQdWJsaWNLZXkgPSAoZGF0YSkgPT4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBrZXkgPSBjcnlwdG8ucmVhZEtleShkYXRhKTtcblxuXHRcdFx0aWYgKCFrZXkpXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignbm90X2ZvdW5kJyk7XG5cdFx0XHRjb25zdCBwcmltYXJ5S2V5ID0ga2V5LnByaW1hcnlLZXk7XG5cdFx0XHRpZiAoIXByaW1hcnlLZXkpXG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignbm90X2ZvdW5kJyk7XG5cblx0XHRcdCRzY29wZS5jdXJyZW50RW1haWwua2V5ID0gbmV3IEtleShrZXkpO1xuXG5cdFx0XHRub3RpZmljYXRpb25zLnNldCgncHVibGljLWtleS1pbXBvcnQtb2snICsgJHNjb3BlLmN1cnJlbnRFbWFpbC5lbWFpbCwge1xuXHRcdFx0XHR0eXBlOiAnaW5mbycsXG5cdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9QVUJMSUNfS0VZX0lNUE9SVEVEKHtcblx0XHRcdFx0XHRlbWFpbDogJHNjb3BlLmN1cnJlbnRFbWFpbC5lbWFpbCxcblx0XHRcdFx0XHRhbGdvczogJHNjb3BlLmN1cnJlbnRFbWFpbC5rZXkuYWxnb3MsXG5cdFx0XHRcdFx0bGVuZ3RoOiAkc2NvcGUuY3VycmVudEVtYWlsLmtleS5sZW5ndGhcblx0XHRcdFx0fSksXG5cdFx0XHRcdG5hbWVzcGFjZTogJ2NvbnRhY3QucHJvZmlsZScsXG5cdFx0XHRcdHRpbWVvdXQ6IDMwMDBcblx0XHRcdH0pO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0bm90aWZpY2F0aW9ucy5zZXQoJ3B1YmxpYy1rZXktaW1wb3J0LWZhaWwnICsgICRzY29wZS5jdXJyZW50RW1haWwuZW1haWwsIHtcblx0XHRcdFx0dGV4dDogdHJhbnNsYXRpb25zLkxCX0NBTk5PVF9JTVBPUlRfUFVCTElDX0tFWSxcblx0XHRcdFx0bmFtZXNwYWNlOiAnY29udGFjdC5wcm9maWxlJ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdCRzY29wZS5kb3dubG9hZFB1YmxpY0tleSA9ICgpID0+IHtcblx0XHRjb25zb2xlLmxvZygkc2NvcGUuY3VycmVudEVtYWlsLmtleSk7XG5cdFx0c2F2ZXIuc2F2ZUFzKCRzY29wZS5jdXJyZW50RW1haWwua2V5LmFybW9yKCksIGAkeyRzY29wZS5jdXJyZW50RW1haWwuZW1haWx9LmFzY2AsICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnKTtcblx0fTtcblxuXHQkc2NvcGUucmVtb3ZlID0gKCkgPT4ge1xuXHRcdGNvbnNvbGUubG9nKCdyZW1vdmUgZnJvbScsICRzY29wZS5kZXRhaWxzWyRzY29wZS5lbWFpbHNdLCAkc2NvcGUuY3VycmVudEVtYWlsLiQkaGFzaEtleSk7XG5cdFx0JHNjb3BlLmRldGFpbHNbJHNjb3BlLmVtYWlsc10gPSAkc2NvcGUuZGV0YWlsc1skc2NvcGUuZW1haWxzXS5maWx0ZXIoZSA9PiBlLiQkaGFzaEtleSAhPSAkc2NvcGUuY3VycmVudEVtYWlsLiQkaGFzaEtleSk7XG5cdH07XG5cblx0JHNjb3BlLiR3YXRjaCgnY3VycmVudEVtYWlsLm5hbWUnLCAobywgbikgPT4ge1xuXHRcdGlmIChvID09IG4pXG5cdFx0XHRyZXR1cm47XG5cblx0XHRsZXQgZW1haWwgPSAkc2NvcGUuY3VycmVudEVtYWlsO1xuXHRcdGlmICghZW1haWwgfHwgIWVtYWlsLm5hbWUpXG5cdFx0XHRyZXR1cm47XG5cblx0XHRlbWFpbC5lbWFpbCA9IGVtYWlsLm5hbWUuaW5jbHVkZXMoJ0AnKSA/IGVtYWlsLm5hbWUgOiBgJHtlbWFpbC5uYW1lfUAke2NvbnN0cy5ST09UX0RPTUFJTn1gO1xuXHRcdGVtYWlsLmxvYWRLZXkodHJ1ZSk7XG5cdH0pO1xufTtcbiJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlDownload.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $stateParams, $interval, $timeout, $translate, consts, co, inbox, router, saver) {\n\tvar emailId = $stateParams.emailId;\n\tvar fileId = $stateParams.fileId;\n\n\tvar timePassed = 0;\n\t// TODO: implement proper estimation\n\tvar estimatedTime = 1000 * 3;\n\n\t$scope.progress = 0;\n\t$scope.label = '';\n\n\tvar translations = {\n\t\tLB_ACQUIRING: '',\n\t\tLB_DOWNLOADING: '',\n\t\tLB_DECRYPTING: '',\n\t\tLB_TAKES_MORE: '',\n\t\tLB_COMPLETED: ''\n\t};\n\n\t$translate.bindAsObject(translations, 'INBOX.DOWNLOAD', null, function () {\n\t\t$scope.label = translations.LB_ACQUIRING;\n\t});\n\n\tconsole.log('downloading file. Email id', emailId, 'file id', fileId);\n\n\tvar progressBarInterval = $interval(function () {\n\t\t$scope.progress = Math.floor(++timePassed / estimatedTime);\n\t\tif ($scope.progress >= 100) {\n\t\t\t$scope.label = translations.LB_TAKES_MORE;\n\n\t\t\t$interval.cancel(progressBarInterval);\n\t\t}\n\t}, 1000);\n\n\tco(regeneratorRuntime.mark(function callee$1$0() {\n\t\tvar email, fileData, manifestFile;\n\t\treturn regeneratorRuntime.wrap(function callee$1$0$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tcontext$2$0.next = 2;\n\t\t\t\t\treturn inbox.getEmailById(emailId);\n\n\t\t\t\tcase 2:\n\t\t\t\t\temail = context$2$0.sent;\n\n\t\t\t\t\tconsole.log('downloading file from email', 'email', email);\n\n\t\t\t\t\t$scope.label = translations.LB_DOWNLOADING;\n\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\treturn inbox.downloadAttachment(emailId, fileId);\n\n\t\t\t\tcase 7:\n\t\t\t\t\tfileData = context$2$0.sent;\n\t\t\t\t\tmanifestFile = email.manifest.getFileById(fileId);\n\n\t\t\t\t\tsaver.saveAs(fileData, manifestFile.filename);\n\n\t\t\t\t\t$scope.progress = 100;\n\t\t\t\t\t$scope.label = translations.LB_COMPLETED;\n\t\t\t\t\t$interval.cancel(progressBarInterval);\n\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\trouter.hidePopup();\n\t\t\t\t\t}, consts.POPUP_AUTO_HIDE_DELAY);\n\n\t\t\t\tcase 14:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$0, this);\n\t}));\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxEb3dubG9hZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUs7S0FDakksT0FBTyxHQUFhLFlBQVksQ0FBQyxPQUFPO0tBQS9CLE1BQU0sR0FBMkIsWUFBWSxDQUFDLE1BQU07O0FBRWxFLEtBQUksVUFBVSxHQUFHLENBQUMsQ0FBQzs7QUFFbkIsS0FBSSxhQUFhLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQzs7QUFFN0IsT0FBTSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7QUFDcEIsT0FBTSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7O0FBRWxCLEtBQU0sWUFBWSxHQUFHO0FBQ3BCLGNBQVksRUFBRyxFQUFFO0FBQ2pCLGdCQUFjLEVBQUcsRUFBRTtBQUNuQixlQUFhLEVBQUcsRUFBRTtBQUNsQixlQUFhLEVBQUcsRUFBRTtBQUNsQixjQUFZLEVBQUcsRUFBRTtFQUNqQixDQUFDOztBQUVGLFdBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLGdCQUFnQixFQUFFLElBQUksRUFBRSxZQUFNO0FBQ25FLFFBQU0sQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDLFlBQVksQ0FBQztFQUN6QyxDQUFDLENBQUM7O0FBRUgsUUFBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQyxDQUFDOztBQUV0RSxLQUFJLG1CQUFtQixHQUFHLFNBQVMsQ0FBQyxZQUFNO0FBQ3pDLFFBQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLFVBQVUsR0FBRyxhQUFhLENBQUMsQ0FBQztBQUMzRCxNQUFJLE1BQU0sQ0FBQyxRQUFRLElBQUksR0FBRyxFQUFFO0FBQzNCLFNBQU0sQ0FBQyxLQUFLLEdBQUcsWUFBWSxDQUFDLGFBQWEsQ0FBQzs7QUFFMUMsWUFBUyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0dBQ3RDO0VBQ0QsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFVCxHQUFFLHlCQUFDO01BQ0UsS0FBSyxFQUlMLFFBQVEsRUFFUixZQUFZOzs7OztZQU5FLEtBQUssQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDOzs7QUFBekMsVUFBSzs7QUFDVCxZQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixFQUFFLE9BQU8sRUFBRSxLQUFLLENBQUMsQ0FBQzs7QUFFM0QsV0FBTSxDQUFDLEtBQUssR0FBRyxZQUFZLENBQUMsY0FBYyxDQUFDOztZQUN0QixLQUFLLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQzs7O0FBQTFELGFBQVE7QUFFUixpQkFBWSxHQUFHLEtBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQzs7QUFDckQsVUFBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUU5QyxXQUFNLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQztBQUN0QixXQUFNLENBQUMsS0FBSyxHQUFHLFlBQVksQ0FBQyxZQUFZLENBQUM7QUFDekMsY0FBUyxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztBQUV0QyxhQUFRLENBQUMsWUFBTTtBQUNkLFlBQU0sQ0FBQyxTQUFTLEVBQUUsQ0FBQztNQUNuQixFQUFFLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDOzs7Ozs7O0VBQ2pDLEVBQUMsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybERvd25sb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRyb290U2NvcGUsICRzY29wZSwgJHN0YXRlUGFyYW1zLCAkaW50ZXJ2YWwsICR0aW1lb3V0LCAkdHJhbnNsYXRlLCBjb25zdHMsIGNvLCBpbmJveCwgcm91dGVyLCBzYXZlcikgPT4ge1xuXHRsZXQgW2VtYWlsSWQsIGZpbGVJZF0gPSBbJHN0YXRlUGFyYW1zLmVtYWlsSWQsICRzdGF0ZVBhcmFtcy5maWxlSWRdO1xuXG5cdGxldCB0aW1lUGFzc2VkID0gMDtcblx0Ly8gVE9ETzogaW1wbGVtZW50IHByb3BlciBlc3RpbWF0aW9uXG5cdGxldCBlc3RpbWF0ZWRUaW1lID0gMTAwMCAqIDM7XG5cblx0JHNjb3BlLnByb2dyZXNzID0gMDtcblx0JHNjb3BlLmxhYmVsID0gJyc7XG5cblx0Y29uc3QgdHJhbnNsYXRpb25zID0ge1xuXHRcdExCX0FDUVVJUklORyA6ICcnLFxuXHRcdExCX0RPV05MT0FESU5HIDogJycsXG5cdFx0TEJfREVDUllQVElORyA6ICcnLFxuXHRcdExCX1RBS0VTX01PUkUgOiAnJyxcblx0XHRMQl9DT01QTEVURUQgOiAnJ1xuXHR9O1xuXG5cdCR0cmFuc2xhdGUuYmluZEFzT2JqZWN0KHRyYW5zbGF0aW9ucywgJ0lOQk9YLkRPV05MT0FEJywgbnVsbCwgKCkgPT4ge1xuXHRcdCRzY29wZS5sYWJlbCA9IHRyYW5zbGF0aW9ucy5MQl9BQ1FVSVJJTkc7XG5cdH0pO1xuXG5cdGNvbnNvbGUubG9nKCdkb3dubG9hZGluZyBmaWxlLiBFbWFpbCBpZCcsIGVtYWlsSWQsICdmaWxlIGlkJywgZmlsZUlkKTtcblxuXHRsZXQgcHJvZ3Jlc3NCYXJJbnRlcnZhbCA9ICRpbnRlcnZhbCgoKSA9PiB7XG5cdFx0JHNjb3BlLnByb2dyZXNzID0gTWF0aC5mbG9vcigrK3RpbWVQYXNzZWQgLyBlc3RpbWF0ZWRUaW1lKTtcblx0XHRpZiAoJHNjb3BlLnByb2dyZXNzID49IDEwMCkge1xuXHRcdFx0JHNjb3BlLmxhYmVsID0gdHJhbnNsYXRpb25zLkxCX1RBS0VTX01PUkU7XG5cblx0XHRcdCRpbnRlcnZhbC5jYW5jZWwocHJvZ3Jlc3NCYXJJbnRlcnZhbCk7XG5cdFx0fVxuXHR9LCAxMDAwKTtcblxuXHRjbyhmdW5jdGlvbiAqKCl7XG5cdFx0bGV0IGVtYWlsID0geWllbGQgaW5ib3guZ2V0RW1haWxCeUlkKGVtYWlsSWQpO1xuXHRcdGNvbnNvbGUubG9nKCdkb3dubG9hZGluZyBmaWxlIGZyb20gZW1haWwnLCAnZW1haWwnLCBlbWFpbCk7XG5cblx0XHQkc2NvcGUubGFiZWwgPSB0cmFuc2xhdGlvbnMuTEJfRE9XTkxPQURJTkc7XG5cdFx0bGV0IGZpbGVEYXRhID0geWllbGQgaW5ib3guZG93bmxvYWRBdHRhY2htZW50KGVtYWlsSWQsIGZpbGVJZCk7XG5cblx0XHRsZXQgbWFuaWZlc3RGaWxlID0gZW1haWwubWFuaWZlc3QuZ2V0RmlsZUJ5SWQoZmlsZUlkKTtcblx0XHRzYXZlci5zYXZlQXMoZmlsZURhdGEsIG1hbmlmZXN0RmlsZS5maWxlbmFtZSk7XG5cblx0XHQkc2NvcGUucHJvZ3Jlc3MgPSAxMDA7XG5cdFx0JHNjb3BlLmxhYmVsID0gdHJhbnNsYXRpb25zLkxCX0NPTVBMRVRFRDtcblx0XHQkaW50ZXJ2YWwuY2FuY2VsKHByb2dyZXNzQmFySW50ZXJ2YWwpO1xuXG5cdFx0JHRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0cm91dGVyLmhpZGVQb3B1cCgpO1xuXHRcdH0sIGNvbnN0cy5QT1BVUF9BVVRPX0hJREVfREVMQVkpO1xuXHR9KTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlEmailList.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $timeout, $state, $stateParams, $translate, $sanitize, user, utils, co, inbox, saver, notifications) {\n\n\t$rootScope.$bind('notifications', function () {\n\t\t$scope.notificationsInfo = notifications.get('info', 'mailbox');\n\t\t$scope.notificationsWarning = notifications.get('warning', 'mailbox');\n\t});\n\n\t$scope.selfEmail = user.email;\n\t$scope.labelName = $stateParams.labelName;\n\t$scope.selectedTid = $stateParams.threadId ? $stateParams.threadId : null;\n\tinbox.selectedTidByLabelName[$scope.labelName] = $scope.selectedTid;\n\n\t$scope.isThreads = false;\n\t$scope.isLoading = false;\n\n\t{\n\t\tvar list = inbox.requestListCached($scope.labelName);\n\t\tconsole.log('requestListCached', list);\n\t\t$scope.threads = list ? utils.toMap(list) : {};\n\t\t$scope.isThreads = Object.keys($scope.threads).length > 0;\n\t}\n\n\tconsole.log('CtrlEmailList is loading', $scope.labelName, $scope.selectedTid);\n\n\t$scope.$on('inbox-threads-ready', function (e, labelName, threads) {\n\t\t$scope.threads = utils.toMap(threads);\n\t\t$scope.isThreads = true;\n\t});\n\n\tvar translations = {\n\t\tTITLE_CONFIRM: '',\n\t\tLB_EMAIL_HAS_EMBEDDED_STYLING: ''\n\t};\n\t$translate.bindAsObject(translations, 'INBOX');\n\n\t$scope.downloadEmail = function (email, name, isHtml) {\n\t\tvar contentType = isHtml ? 'text/html' : 'text/plain';\n\n\t\tsaver.saveAs(email, name + (isHtml ? '.html' : '.txt'), contentType);\n\t};\n\n\t$scope.openEmail = function (email, isHtml) {\n\t\tvar contentType = isHtml ? 'text/html' : 'text/plain';\n\n\t\tsaver.openAs(email, contentType);\n\t};\n\n\t$scope.restoreFromSpam = function (tid) {\n\t\tconsole.log('restoreFromSpam', tid, $scope.threads[tid]);\n\t\tinbox.requestRestoreFromSpam($scope.threads[tid]);\n\t};\n\n\t$scope.restoreFromTrash = function (tid) {\n\t\tconsole.log('restoreFromTrash', tid, $scope.threads[tid]);\n\t\tinbox.requestRestoreFromTrash($scope.threads[tid]);\n\t};\n\n\t$scope.spamThread = function (tid) {\n\t\tconsole.log('spamThread', tid, $scope.threads[tid]);\n\t\tinbox.requestAddLabel($scope.threads[tid], 'Spam');\n\t};\n\n\t$scope.deleteThread = function (tid) {\n\t\tconsole.log('deleteThread', tid, $scope.threads[tid]);\n\t\tinbox.requestDelete($scope.threads[tid]);\n\t};\n\n\t$scope.starThread = function (tid) {\n\t\tconsole.log('starThread', tid, $scope.threads[tid]);\n\t\tinbox.requestSwitchLabel($scope.threads[tid], 'Starred');\n\t};\n\n\t$scope.$on('inbox-new', function (e, threadId) {\n\t\tif (threadId == $scope.selectedTid) inbox.setThreadReadStatus($scope.selectedTid);\n\t});\n\n\tif ($scope.selectedTid) {\n\t\t$scope.emails = [];\n\t\t$scope.isLoading = true;\n\n\t\tconsole.log('emails has selected tid', $scope.selectedTid);\n\n\t\tco(regeneratorRuntime.mark(function callee$1$0() {\n\t\t\tvar threadPromise, emailsPromise, thread;\n\t\t\treturn regeneratorRuntime.wrap(function callee$1$0$(context$2$0) {\n\t\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$2$0.prev = 0;\n\t\t\t\t\t\tthreadPromise = inbox.getThreadById($scope.selectedTid);\n\t\t\t\t\t\temailsPromise = inbox.getEmailsByThreadId($scope.selectedTid);\n\t\t\t\t\t\tcontext$2$0.next = 5;\n\t\t\t\t\t\treturn co.def(threadPromise, null);\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tthread = context$2$0.sent;\n\n\t\t\t\t\t\tif (!(!thread || !thread.isLabel($scope.labelName))) {\n\t\t\t\t\t\t\tcontext$2$0.next = 11;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tinbox.selectedTidByLabelName[$scope.labelName] = null;\n\t\t\t\t\t\tcontext$2$0.next = 10;\n\t\t\t\t\t\treturn $state.go('main.inbox.label', { labelName: $scope.labelName, threadId: null });\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\treturn context$2$0.abrupt('return');\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\t\tcontext$2$0.next = 13;\n\t\t\t\t\t\treturn utils.wait(function () {\n\t\t\t\t\t\t\treturn $scope.isThreads;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tcontext$2$0.next = 15;\n\t\t\t\t\t\treturn emailsPromise;\n\n\t\t\t\t\tcase 15:\n\t\t\t\t\t\t$scope.emails = context$2$0.sent.map(function (e) {\n\t\t\t\t\t\t\te.originalBodyData = e.body.data;\n\t\t\t\t\t\t\treturn e;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tinbox.setThreadReadStatus($scope.selectedTid);\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\t\tcontext$2$0.prev = 17;\n\n\t\t\t\t\t\t$scope.isLoading = false;\n\t\t\t\t\t\treturn context$2$0.finish(17);\n\n\t\t\t\t\tcase 20:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$2$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$1$0, this, [[0,, 17, 20]]);\n\t\t}));\n\t}\n\n\t$scope.$on('inbox-emails', function (e, threadId) {\n\t\tif (threadId != $scope.selectedTid) return;\n\n\t\tco(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\t$scope.isLoading = true;\n\t\t\t\t\t\tcontext$3$0.prev = 1;\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn inbox.getEmailsByThreadId(threadId);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\t$scope.emails = context$3$0.sent.map(function (e) {\n\t\t\t\t\t\t\te.originalBodyData = e.body.data;\n\t\t\t\t\t\t\treturn e;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tcontext$3$0.prev = 5;\n\n\t\t\t\t\t\t$scope.isLoading = false;\n\t\t\t\t\t\treturn context$3$0.finish(5);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[1,, 5, 8]]);\n\t\t}));\n\t});\n\n\tvar emailsBeforeSearch = [];\n\n\t$scope.$on('inbox-emails-clear', function () {\n\t\temailsBeforeSearch = $scope.emails;\n\t\t$scope.emails = [];\n\t});\n\n\t$scope.$on('inbox-emails-restore', function () {\n\t\tif (emailsBeforeSearch && emailsBeforeSearch.length > 0) {\n\t\t\t$scope.emails = emailsBeforeSearch;\n\t\t\temailsBeforeSearch = [];\n\t\t}\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxFbWFpbExpc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFVBQVUsRUFBRSxTQUFTLEVBQzlGLElBQUksRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFLOztBQUUxRCxXQUFVLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxZQUFNO0FBQ3ZDLFFBQU0sQ0FBQyxpQkFBaUIsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxTQUFTLENBQUMsQ0FBQztBQUNoRSxRQUFNLENBQUMsb0JBQW9CLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7RUFDdEUsQ0FBQyxDQUFDOztBQUVILE9BQU0sQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUM5QixPQUFNLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxTQUFTLENBQUM7QUFDMUMsT0FBTSxDQUFDLFdBQVcsR0FBRyxZQUFZLENBQUMsUUFBUSxHQUFHLFlBQVksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO0FBQzFFLE1BQUssQ0FBQyxzQkFBc0IsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQzs7QUFFcEUsT0FBTSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7QUFDekIsT0FBTSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7O0FBRXpCO0FBQ0MsTUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztB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Q0FBQyxDQUFDOztBQUVILEtBQUksa0JBQWtCLEdBQUcsRUFBRSxDQUFDOztBQUU1QixPQUFNLENBQUMsR0FBRyxDQUFDLG9CQUFvQixFQUFFLFlBQU07QUFDdEMsb0JBQWtCLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUNuQyxRQUFNLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztFQUNuQixDQUFDLENBQUM7O0FBRUgsT0FBTSxDQUFDLEdBQUcsQ0FBQyxzQkFBc0IsRUFBRSxZQUFNO0FBQ3hDLE1BQUksa0JBQWtCLElBQUksa0JBQWtCLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtBQUN4RCxTQUFNLENBQUMsTUFBTSxHQUFHLGtCQUFrQixDQUFDO0FBQ25DLHFCQUFrQixHQUFHLEVBQUUsQ0FBQztHQUN4QjtFQUNELENBQUMsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybEVtYWlsTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkc2NvcGUsICR0aW1lb3V0LCAkc3RhdGUsICRzdGF0ZVBhcmFtcywgJHRyYW5zbGF0ZSwgJHNhbml0aXplLFxuXHRcdFx0XHRcdFx0XHQgICB1c2VyLCB1dGlscywgY28sIGluYm94LCBzYXZlciwgbm90aWZpY2F0aW9ucykgPT4ge1xuXG5cdCRyb290U2NvcGUuJGJpbmQoJ25vdGlmaWNhdGlvbnMnLCAoKSA9PiB7XG5cdFx0JHNjb3BlLm5vdGlmaWNhdGlvbnNJbmZvID0gbm90aWZpY2F0aW9ucy5nZXQoJ2luZm8nLCAnbWFpbGJveCcpO1xuXHRcdCRzY29wZS5ub3RpZmljYXRpb25zV2FybmluZyA9IG5vdGlmaWNhdGlvbnMuZ2V0KCd3YXJuaW5nJywgJ21haWxib3gnKTtcblx0fSk7XG5cblx0JHNjb3BlLnNlbGZFbWFpbCA9IHVzZXIuZW1haWw7XG5cdCRzY29wZS5sYWJlbE5hbWUgPSAkc3RhdGVQYXJhbXMubGFiZWxOYW1lO1xuXHQkc2NvcGUuc2VsZWN0ZWRUaWQgPSAkc3RhdGVQYXJhbXMudGhyZWFkSWQgPyAkc3RhdGVQYXJhbXMudGhyZWFkSWQgOiBudWxsO1xuXHRpbmJveC5zZWxlY3RlZFRpZEJ5TGFiZWxOYW1lWyRzY29wZS5sYWJlbE5hbWVdID0gJHNjb3BlLnNlbGVjdGVkVGlkO1xuXG5cdCRzY29wZS5pc1RocmVhZHMgPSBmYWxzZTtcblx0JHNjb3BlLmlzTG9hZGluZyA9IGZhbHNlO1xuXG5cdHtcblx0XHRsZXQgbGlzdCA9IGluYm94LnJlcXVlc3RMaXN0Q2FjaGVkKCRzY29wZS5sYWJlbE5hbWUpO1xuXHRcdGNvbnNvbGUubG9nKCdyZXF1ZXN0TGlzdENhY2hlZCcsIGxpc3QpO1xuXHRcdCRzY29wZS50aHJlYWRzID0gbGlzdCA/IHV0aWxzLnRvTWFwKGxpc3QpIDoge307XG5cdFx0JHNjb3BlLmlzVGhyZWFkcyA9IE9iamVjdC5rZXlzKCRzY29wZS50aHJlYWRzKS5sZW5ndGggPiAwO1xuXHR9XG5cblx0Y29uc29sZS5sb2coJ0N0cmxFbWFpbExpc3QgaXMgbG9hZGluZycsICRzY29wZS5sYWJlbE5hbWUsICRzY29wZS5zZWxlY3RlZFRpZCk7XG5cblx0JHNjb3BlLiRvbihgaW5ib3gtdGhyZWFkcy1yZWFkeWAsIChlLCBsYWJlbE5hbWUsIHRocmVhZHMpID0+IHtcblx0XHQkc2NvcGUudGhyZWFkcyA9IHV0aWxzLnRvTWFwKHRocmVhZHMpO1xuXHRcdCRzY29wZS5pc1RocmVhZHMgPSB0cnVlO1xuXHR9KTtcblxuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0VElUTEVfQ09ORklSTTogJycsXG5cdFx0TEJfRU1BSUxfSEFTX0VNQkVEREVEX1NUWUxJTkc6ICcnXG5cdH07XG5cdCR0cmFuc2xhdGUuYmluZEFzT2JqZWN0KHRyYW5zbGF0aW9ucywgJ0lOQk9YJyk7XG5cblx0JHNjb3BlLmRvd25sb2FkRW1haWwgPSAoZW1haWwsIG5hbWUsIGlzSHRtbCkgPT4ge1xuXHRcdGxldCBjb250ZW50VHlwZSA9IGlzSHRtbCA/ICd0ZXh0L2h0bWwnIDogJ3RleHQvcGxhaW4nO1xuXG5cdFx0c2F2ZXIuc2F2ZUFzKGVtYWlsLCBuYW1lICsgKGlzSHRtbCA/ICcuaHRtbCcgOiAnLnR4dCcpLCBjb250ZW50VHlwZSk7XG5cdH07XG5cblx0JHNjb3BlLm9wZW5FbWFpbCA9IChlbWFpbCwgaXNIdG1sKSA9PiB7XG5cdFx0bGV0IGNvbnRlbnRUeXBlID0gaXNIdG1sID8gJ3RleHQvaHRtbCcgOiAndGV4dC9wbGFpbic7XG5cblx0XHRzYXZlci5vcGVuQXMoZW1haWwsIGNvbnRlbnRUeXBlKTtcblx0fTtcblxuXHQkc2NvcGUucmVzdG9yZUZyb21TcGFtID0gKHRpZCkgPT4ge1xuXHRcdGNvbnNvbGUubG9nKCdyZXN0b3JlRnJvbVNwYW0nLCB0aWQsICRzY29wZS50aHJlYWRzW3RpZF0pO1xuXHRcdGluYm94LnJlcXVlc3RSZXN0b3JlRnJvbVNwYW0oJHNjb3BlLnRocmVhZHNbdGlkXSk7XG5cdH07XG5cblx0JHNjb3BlLnJlc3RvcmVGcm9tVHJhc2ggPSAodGlkKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coJ3Jlc3RvcmVGcm9tVHJhc2gnLCB0aWQsICRzY29wZS50aHJlYWRzW3RpZF0pO1xuXHRcdGluYm94LnJlcXVlc3RSZXN0b3JlRnJvbVRyYXNoKCRzY29wZS50aHJlYWRzW3RpZF0pO1xuXHR9O1xuXG5cdCRzY29wZS5zcGFtVGhyZWFkID0gKHRpZCkgPT4ge1xuXHRcdGNvbnNvbGUubG9nKCdzcGFtVGhyZWFkJywgdGlkLCAkc2NvcGUudGhyZWFkc1t0aWRdKTtcblx0XHRpbmJveC5yZXF1ZXN0QWRkTGFiZWwoJHNjb3BlLnRocmVhZHNbdGlkXSwgJ1NwYW0nKTtcblx0fTtcblxuXHQkc2NvcGUuZGVsZXRlVGhyZWFkID0gKHRpZCkgPT4ge1xuXHRcdGNvbnNvbGUubG9nKCdkZWxldGVUaHJlYWQnLCB0aWQsICRzY29wZS50aHJlYWRzW3RpZF0pO1xuXHRcdGluYm94LnJlcXVlc3REZWxldGUoJHNjb3BlLnRocmVhZHNbdGlkXSk7XG5cdH07XG5cblx0JHNjb3BlLnN0YXJUaHJlYWQgPSAodGlkKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coJ3N0YXJUaHJlYWQnLCB0aWQsICRzY29wZS50aHJlYWRzW3RpZF0pO1xuXHRcdGluYm94LnJlcXVlc3RTd2l0Y2hMYWJlbCgkc2NvcGUudGhyZWFkc1t0aWRdLCAnU3RhcnJlZCcpO1xuXHR9O1xuXG5cdCRzY29wZS4kb24oJ2luYm94LW5ldycsIChlLCB0aHJlYWRJZCkgPT4ge1xuXHRcdGlmICh0aHJlYWRJZCA9PSAkc2NvcGUuc2VsZWN0ZWRUaWQpXG5cdFx0XHRpbmJveC5zZXRUaHJlYWRSZWFkU3RhdHVzKCRzY29wZS5zZWxlY3RlZFRpZCk7XG5cdH0pO1xuXG5cdGlmICgkc2NvcGUuc2VsZWN0ZWRUaWQpIHtcblx0XHQkc2NvcGUuZW1haWxzID0gW107XG5cdFx0JHNjb3BlLmlzTG9hZGluZyA9IHRydWU7XG5cblx0XHRjb25zb2xlLmxvZygnZW1haWxzIGhhcyBzZWxlY3RlZCB0aWQnLCAkc2NvcGUuc2VsZWN0ZWRUaWQpO1xuXG5cdFx0Y28oZnVuY3Rpb24gKigpe1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29uc3QgdGhyZWFkUHJvbWlzZSA9IGluYm94LmdldFRocmVhZEJ5SWQoJHNjb3BlLnNlbGVjdGVkVGlkKTtcblx0XHRcdFx0Y29uc3QgZW1haWxzUHJvbWlzZSA9IGluYm94LmdldEVtYWlsc0J5VGhyZWFkSWQoJHNjb3BlLnNlbGVjdGVkVGlkKTtcblxuXHRcdFx0XHRjb25zdCB0aHJlYWQgPSB5aWVsZCBjby5kZWYodGhyZWFkUHJvbWlzZSwgbnVsbCk7XG5cblx0XHRcdFx0aWYgKCF0aHJlYWQgfHwgIXRocmVhZC5pc0xhYmVsKCRzY29wZS5sYWJlbE5hbWUpKSB7XG5cdFx0XHRcdFx0aW5ib3guc2VsZWN0ZWRUaWRCeUxhYmVsTmFtZVskc2NvcGUubGFiZWxOYW1lXSA9IG51bGw7XG5cdFx0XHRcdFx0eWllbGQgJHN0YXRlLmdvKCdtYWluLmluYm94LmxhYmVsJywge2xhYmVsTmFtZTogJHNjb3BlLmxhYmVsTmFtZSwgdGhyZWFkSWQ6IG51bGx9KTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR5aWVsZCB1dGlscy53YWl0KCgpID0+ICRzY29wZS5pc1RocmVhZHMpO1xuXG5cdFx0XHRcdCRzY29wZS5lbWFpbHMgPSAoeWllbGQgZW1haWxzUHJvbWlzZSkubWFwKGUgPT4ge1xuXHRcdFx0XHRcdGUub3JpZ2luYWxCb2R5RGF0YSA9IGUuYm9keS5kYXRhO1xuXHRcdFx0XHRcdHJldHVybiBlO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRpbmJveC5zZXRUaHJlYWRSZWFkU3RhdHVzKCRzY29wZS5zZWxlY3RlZFRpZCk7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHQkc2NvcGUuaXNMb2FkaW5nID0gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQkc2NvcGUuJG9uKCdpbmJveC1lbWFpbHMnLCAoZSwgdGhyZWFkSWQpID0+IHtcblx0XHRpZiAodGhyZWFkSWQgIT0gJHNjb3BlLnNlbGVjdGVkVGlkKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0Y28oZnVuY3Rpb24gKigpIHtcblx0XHRcdCRzY29wZS5pc0xvYWRpbmcgPSB0cnVlO1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0JHNjb3BlLmVtYWlscyA9ICh5aWVsZCBpbmJveC5nZXRFbWFpbHNCeVRocmVhZElkKHRocmVhZElkKSkubWFwKGUgPT4ge1xuXHRcdFx0XHRcdGUub3JpZ2luYWxCb2R5RGF0YSA9IGUuYm9keS5kYXRhO1xuXHRcdFx0XHRcdHJldHVybiBlO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdCRzY29wZS5pc0xvYWRpbmcgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cblx0bGV0IGVtYWlsc0JlZm9yZVNlYXJjaCA9IFtdO1xuXG5cdCRzY29wZS4kb24oJ2luYm94LWVtYWlscy1jbGVhcicsICgpID0+IHtcblx0XHRlbWFpbHNCZWZvcmVTZWFyY2ggPSAkc2NvcGUuZW1haWxzO1xuXHRcdCRzY29wZS5lbWFpbHMgPSBbXTtcblx0fSk7XG5cblx0JHNjb3BlLiRvbignaW5ib3gtZW1haWxzLXJlc3RvcmUnLCAoKSA9PiB7XG5cdFx0aWYgKGVtYWlsc0JlZm9yZVNlYXJjaCAmJiBlbWFpbHNCZWZvcmVTZWFyY2gubGVuZ3RoID4gMCkge1xuXHRcdFx0JHNjb3BlLmVtYWlscyA9IGVtYWlsc0JlZm9yZVNlYXJjaDtcblx0XHRcdGVtYWlsc0JlZm9yZVNlYXJjaCA9IFtdO1xuXHRcdH1cblx0fSk7XG59O1xuIl19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlHotkeys.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, hotkey) {\n\t$scope.hotkeys = hotkey.getKeys();\n\tconsole.log('$scope.hotkeys', $scope.hotkeys);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxIb3RrZXlzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsTUFBTSxFQUFFLE1BQU0sRUFBSztBQUNqRCxPQUFNLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztBQUNsQyxRQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFnQixFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztDQUM5QyxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxIb3RrZXlzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRzY29wZSwgaG90a2V5KSA9PiB7XG5cdCRzY29wZS5ob3RrZXlzID0gaG90a2V5LmdldEtleXMoKTtcblx0Y29uc29sZS5sb2coJyRzY29wZS5ob3RrZXlzJywgJHNjb3BlLmhvdGtleXMpO1xufTtcbiJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlLsOff.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, $modalInstance) {\n\t$scope.no = function () {\n\t\t$modalInstance.dismiss('no');\n\t};\n\n\t$scope.yes = function () {\n\t\t$modalInstance.close('yes');\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxMc09mZi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUs7QUFDekQsT0FBTSxDQUFDLEVBQUUsR0FBRyxZQUFVO0FBQ3JCLGdCQUFjLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQzdCLENBQUM7O0FBRUYsT0FBTSxDQUFDLEdBQUcsR0FBRyxZQUFVO0FBQ3RCLGdCQUFjLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0VBQzVCLENBQUM7Q0FDRixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxMc09mZi5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkc2NvcGUsICRtb2RhbEluc3RhbmNlKSA9PiB7XG5cdCRzY29wZS5ubyA9IGZ1bmN0aW9uKCl7XG5cdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnbm8nKTtcblx0fTtcblxuXHQkc2NvcGUueWVzID0gZnVuY3Rpb24oKXtcblx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSgneWVzJyk7XG5cdH07XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlNavigation.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $state, co, inbox, user) {\n\t$scope.$state = $state;\n\t$scope.name = user.styledName;\n\n\tco(regeneratorRuntime.mark(function callee$1$0() {\n\t\treturn regeneratorRuntime.wrap(function callee$1$0$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tcontext$2$0.next = 2;\n\t\t\t\t\treturn inbox.getLabels();\n\n\t\t\t\tcase 2:\n\t\t\t\t\t$scope.labels = context$2$0.sent.list;\n\n\t\t\t\tcase 3:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$0, this);\n\t}));\n\n\t$scope.getThreadForLabel = function (labelName) {\n\t\treturn inbox.selectedTidByLabelName[labelName] ? inbox.selectedTidByLabelName[labelName] : null;\n\t};\n\n\t$scope.$on('inbox-labels', function (e, labels) {\n\t\t$scope.labels = labels.list;\n\t});\n\n\t$scope.logout = function () {\n\t\tuser.logout();\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxOYXZpZ2F0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUs7QUFDOUUsT0FBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7QUFDdkIsT0FBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDOztBQUU5QixHQUFFLHlCQUFDOzs7OztZQUNxQixLQUFLLENBQUMsU0FBUyxFQUFFOzs7QUFBeEMsV0FBTSxDQUFDLE1BQU0sb0JBQTZCLElBQUk7Ozs7Ozs7RUFDOUMsRUFBQyxDQUFDOztBQUVILE9BQU0sQ0FBQyxpQkFBaUIsR0FBRyxVQUFBLFNBQVM7U0FBSSxLQUFLLENBQUMsc0JBQXNCLENBQUMsU0FBUyxDQUFDLEdBQUcsS0FBSyxDQUFDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUk7RUFBQSxDQUFDOztBQUVqSSxPQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsRUFBRSxVQUFDLENBQUMsRUFBRSxNQUFNLEVBQUs7QUFDekMsUUFBTSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDO0VBQzVCLENBQUMsQ0FBQzs7QUFFSCxPQUFNLENBQUMsTUFBTSxHQUFHLFlBQU07QUFDckIsTUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0VBQ2QsQ0FBQztDQUNGLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybE5hdmlnYXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHJvb3RTY29wZSwgJHNjb3BlLCAkc3RhdGUsIGNvLCBpbmJveCwgdXNlcikgPT4ge1xyXG5cdCRzY29wZS4kc3RhdGUgPSAkc3RhdGU7XHJcblx0JHNjb3BlLm5hbWUgPSB1c2VyLnN0eWxlZE5hbWU7XHJcblxyXG5cdGNvKGZ1bmN0aW9uICooKXtcclxuXHRcdCRzY29wZS5sYWJlbHMgPSAoeWllbGQgaW5ib3guZ2V0TGFiZWxzKCkpLmxpc3Q7XHJcblx0fSk7XHJcblxyXG5cdCRzY29wZS5nZXRUaHJlYWRGb3JMYWJlbCA9IGxhYmVsTmFtZSA9PiBpbmJveC5zZWxlY3RlZFRpZEJ5TGFiZWxOYW1lW2xhYmVsTmFtZV0gPyBpbmJveC5zZWxlY3RlZFRpZEJ5TGFiZWxOYW1lW2xhYmVsTmFtZV0gOiBudWxsO1xyXG5cclxuXHQkc2NvcGUuJG9uKCdpbmJveC1sYWJlbHMnLCAoZSwgbGFiZWxzKSA9PiB7XHJcblx0XHQkc2NvcGUubGFiZWxzID0gbGFiZWxzLmxpc3Q7XHJcblx0fSk7XHJcblxyXG5cdCRzY29wZS5sb2dvdXQgPSAoKSA9PiB7XHJcblx0XHR1c2VyLmxvZ291dCgpO1xyXG5cdH07XHJcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettings.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, notifications) {\n\t$rootScope.$bind('notifications', function () {\n\t\t$scope.notificationsInfo = notifications.get('info', 'settings');\n\t\t$scope.notificationsWarning = notifications.get('warning', 'settings');\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5ncy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFLO0FBQ3BFLFdBQVUsQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLFlBQU07QUFDdkMsUUFBTSxDQUFDLGlCQUFpQixHQUFHLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ2pFLFFBQU0sQ0FBQyxvQkFBb0IsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztFQUN2RSxDQUFDLENBQUM7Q0FDSCxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5ncy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkc2NvcGUsIG5vdGlmaWNhdGlvbnMpID0+IHtcblx0JHJvb3RTY29wZS4kYmluZCgnbm90aWZpY2F0aW9ucycsICgpID0+IHtcblx0XHQkc2NvcGUubm90aWZpY2F0aW9uc0luZm8gPSBub3RpZmljYXRpb25zLmdldCgnaW5mbycsICdzZXR0aW5ncycpO1xuXHRcdCRzY29wZS5ub3RpZmljYXRpb25zV2FybmluZyA9IG5vdGlmaWNhdGlvbnMuZ2V0KCd3YXJuaW5nJywgJ3NldHRpbmdzJyk7XG5cdH0pO1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsGeneral.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $scope, $interval, $translate, $timeout, translate, user, hotkey, co, notifications) {\n\t$scope.form = {\n\t\tselectedLanguage: null,\n\t\tcontactsSortBy: null\n\t};\n\t$scope.languages = [];\n\t$scope.settings = {};\n\n\t$rootScope.hotkeys = [];\n\n\t$scope.$bind('user-settings', function () {\n\t\t$scope.settings = user.settings;\n\t});\n\n\tvar translations = {\n\t\tLB_NOT_IMPLEMENTED: 'GLOBAL',\n\t\tLB_SORT_BY_DISPLAY_NAME: '',\n\t\tLB_SORT_BY_FIRST_NAME: '',\n\t\tLB_SORT_BY_LAST_NAME: '',\n\t\tLB_PROFILE_SAVED: 'MAIN.SETTINGS.PROFILE',\n\t\tLB_PROFILE_CANNOT_BE_SAVED: 'MAIN.SETTINGS.PROFILE'\n\t};\n\n\tvar translationImages = {\n\t\tLB_IMAGES_NONE: '',\n\t\tLB_IMAGES_NONE_TITLE: '',\n\t\tLB_IMAGES_PROXY: '',\n\t\tLB_IMAGES_PROXY_TITLE: '',\n\t\tLB_IMAGES_HTTPS: '',\n\t\tLB_IMAGES_HTTPS_TITLE: '',\n\t\tLB_IMAGES_ALL: '',\n\t\tLB_IMAGES_ALL_TITLE: ''\n\t};\n\n\tvar translationStyles = {\n\t\tLB_STYLES_NONE: '',\n\t\tLB_STYLES_NONE_TITLE: '',\n\t\tLB_STYLES_ALL: '',\n\t\tLB_STYLES_ALL_TITLE: ''\n\t};\n\n\t$translate.bindAsObject(translationImages, 'MAIN.SETTINGS.GENERAL', null, function () {\n\t\t$scope.imageSettings = [{ name: 'none', description: translationImages.LB_IMAGES_NONE, title: translationImages.LB_IMAGES_NONE_TITLE }, { name: 'proxy', description: translationImages.LB_IMAGES_PROXY, title: translationImages.LB_IMAGES_PROXY_TITLE }, { name: 'directHttps', description: translationImages.LB_IMAGES_HTTPS, title: translationImages.LB_IMAGES_HTTPS_TITLE }, { name: 'directAll', description: translationImages.LB_IMAGES_ALL, title: translationImages.LB_IMAGES_ALL_TITLE }];\n\t});\n\n\t$translate.bindAsObject(translationStyles, 'MAIN.SETTINGS.GENERAL', null, function () {\n\t\t$scope.styleSettings = [{ name: 'none', description: translationStyles.LB_STYLES_NONE, title: translationStyles.LB_STYLES_NONE_TITLE }, { name: 'all', description: translationStyles.LB_STYLES_ALL, title: translationStyles.LB_STYLES_ALL_TITLE }];\n\t});\n\n\t$translate.bindAsObject(translations, 'MAIN.SETTINGS.GENERAL', null, function () {\n\t\t$scope.notImplemented = [{ name: 'none', description: translations.LB_NOT_IMPLEMENTED }];\n\t\t$scope.sortBy = [{ name: translations.LB_SORT_BY_DISPLAY_NAME }, { name: translations.LB_SORT_BY_FIRST_NAME }, { name: translations.LB_SORT_BY_LAST_NAME }];\n\n\t\tif (!$scope.form.contactsSortBy) $scope.form.contactsSortBy = $scope.sortBy[user.settings.contactsSortBy ? user.settings.contactsSortBy : 0];\n\t});\n\n\t$scope.languages = Object.keys(translate.settings.TRANSLATIONS).reduce(function (a, langCode) {\n\t\ta.push({\n\t\t\tname: translate.settings.TRANSLATIONS[langCode],\n\t\t\tlangCode: langCode\n\t\t});\n\t\treturn a;\n\t}, []);\n\t$scope.form.selectedLanguage = $scope.languages.find(function (e) {\n\t\treturn e.langCode == translate.getCurrentLangCode();\n\t});\n\n\tconsole.log('initialize CtrlSettingsGeneral', $scope.languages);\n\n\t$scope.$watch('form.selectedLanguage', function () {\n\t\tif ($scope.form.selectedLanguage) translate.switchLanguage($scope.form.selectedLanguage.langCode);\n\t});\n\n\t$scope.$watch('form.contactsSortBy', function () {\n\t\tif ($scope.form.contactsSortBy) user.update({ contactsSortBy: $scope.sortBy.findIndex(function (e) {\n\t\t\t\treturn e.name == $scope.form.contactsSortBy.name;\n\t\t\t}) });\n\t});\n\n\t$scope.$watch('settings.isHotkeyEnabled', function () {\n\t\thotkey.toggleHotkeys($scope.settings.isHotkeyEnabled);\n\t});\n\n\tvar updateTimeout = null;\n\n\t$scope.$watch('settings', function (o, n) {\n\t\tif (o === n) return;\n\n\t\tif (Object.keys($scope.settings).length > 0) {\n\t\t\tvar _temp = $timeout.schedulePromise(updateTimeout, function () {\n\t\t\t\treturn co(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tcontext$4$0.prev = 0;\n\t\t\t\t\t\t\t\tcontext$4$0.next = 3;\n\t\t\t\t\t\t\t\treturn user.update($scope.settings);\n\n\t\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tnotifications.set('profile-save-ok', {\n\t\t\t\t\t\t\t\t\ttext: translations.LB_PROFILE_SAVED,\n\t\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tcontext$4$0.next = 9;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\tcontext$4$0.prev = 6;\n\t\t\t\t\t\t\t\tcontext$4$0.t13 = context$4$0['catch'](0);\n\n\t\t\t\t\t\t\t\tnotifications.set('profile-save-fail', {\n\t\t\t\t\t\t\t\t\ttext: translations.LB_PROFILE_CANNOT_BE_SAVED,\n\t\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, callee$3$0, this, [[0, 6]]);\n\t\t\t\t}));\n\t\t\t}, 1000);\n\n\t\t\tvar _temp2 = babelHelpers.slicedToArray(_temp, 1);\n\n\t\t\tupdateTimeout = _temp2[0];\n\t\t\t_temp;\n\t\t}\n\t}, true);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc0dlbmVyYWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEVBQUUsRUFBRSxhQUFhLEVBQUs7QUFDbEksT0FBTSxDQUFDLElBQUksR0FBRztBQUNiLGtCQUFnQixFQUFFLElBQUk7QUFDdEIsZ0JBQWMsRUFBRSxJQUFJO0VBQ3BCLENBQUM7QUFDRixPQUFNLENBQUMsU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNuQixPQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQzs7QUFFckIsV0FBVSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7O0FBRXhCLE9BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLFlBQU07QUFDaEMsUUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0VBQ25DLENBQUMsQ0FBQzs7QUFFTixLQUFNLFlBQVksR0FBRztBQUNwQixvQkFBa0IsRUFBRSxRQUFRO0FBQzVCLHlCQUF1QixFQUFHLEVBQUU7QUFDNUIsdUJBQXFCLEVBQUcsRUFBRTtBQUMxQixzQkFBb0IsRUFBRyxFQUFFO0FBQ3pCLGtCQUFnQixFQUFFLHVCQUF1QjtBQUN6Qyw0QkFBMEIsRUFBRSx1QkFBdUI7RUFDbkQsQ0FBQzs7QUFFRixLQUFNLGlCQUFpQixHQUFHO0FBQ3pCLGdCQUFjLEVBQUUsRUFBRTtBQUNsQixzQkFBb0IsRUFBRSxFQUFFO0FBQ3hCLGlCQUFlLEVBQUUsRUFBRTtBQUNuQix1QkFBcUIsRUFBRSxFQUFFO0FBQ3pCLGlCQUFlLEVBQUUsRUFBRTtBQUNuQix1QkFBcUIsRUFB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SUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2VBQ2hDLFFBQVEsQ0FBQyxlQUFlLENBQUMsYUFBYSxFQUFFO1dBQU0sRUFBRSx5QkFBQzs7Ozs7O2VBRTNELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQzs7OztBQUVsQyxxQkFBYSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRTtBQUNwQyxhQUFJLEVBQUUsWUFBWSxDQUFDLGdCQUFnQjtBQUNuQyxhQUFJLEVBQUUsTUFBTTtBQUNaLGdCQUFPLEVBQUUsSUFBSTtBQUNiLGtCQUFTLEVBQUUsVUFBVTtTQUNyQixDQUFDLENBQUM7Ozs7Ozs7O0FBRUgscUJBQWEsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUU7QUFDdEMsYUFBSSxFQUFFLFlBQVksQ0FBQywwQkFBMEI7QUFDN0Msa0JBQVMsRUFBRSxVQUFVO1NBQ3JCLENBQUMsQ0FBQzs7Ozs7OztLQUVLLEVBQUM7SUFBQSxFQUFFLElBQUksQ0FBQzs7OztBQWhCakIsZ0JBQWE7O0dBaUJSO0VBQ0osRUFBRSxJQUFJLENBQUMsQ0FBQztDQUVaLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybFNldHRpbmdzR2VuZXJhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkc2NvcGUsICRpbnRlcnZhbCwgJHRyYW5zbGF0ZSwgJHRpbWVvdXQsIHRyYW5zbGF0ZSwgdXNlciwgaG90a2V5LCBjbywgbm90aWZpY2F0aW9ucykgPT4ge1xuXHQkc2NvcGUuZm9ybSA9IHtcblx0XHRzZWxlY3RlZExhbmd1YWdlOiBudWxsLFxuXHRcdGNvbnRhY3RzU29ydEJ5OiBudWxsXG5cdH07XG5cdCRzY29wZS5sYW5ndWFnZXMgPSBbXTtcbiAgICAkc2NvcGUuc2V0dGluZ3MgPSB7fTtcblxuICAgICRyb290U2NvcGUuaG90a2V5cyA9IFtdO1xuXG4gICAgJHNjb3BlLiRiaW5kKCd1c2VyLXNldHRpbmdzJywgKCkgPT4ge1xuICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSB1c2VyLnNldHRpbmdzO1xuICAgIH0pO1xuXG5cdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcblx0XHRMQl9OT1RfSU1QTEVNRU5URUQ6ICdHTE9CQUwnLFxuXHRcdExCX1NPUlRfQllfRElTUExBWV9OQU1FIDogJycsXG5cdFx0TEJfU09SVF9CWV9GSVJTVF9OQU1FIDogJycsXG5cdFx0TEJfU09SVF9CWV9MQVNUX05BTUUgOiAnJyxcblx0XHRMQl9QUk9GSUxFX1NBVkVEOiAnTUFJTi5TRVRUSU5HUy5QUk9GSUxFJyxcblx0XHRMQl9QUk9GSUxFX0NBTk5PVF9CRV9TQVZFRDogJ01BSU4uU0VUVElOR1MuUFJPRklMRSdcblx0fTtcblxuXHRjb25zdCB0cmFuc2xhdGlvbkltYWdlcyA9IHtcblx0XHRMQl9JTUFHRVNfTk9ORTogJycsXG5cdFx0TEJfSU1BR0VTX05PTkVfVElUTEU6ICcnLFxuXHRcdExCX0lNQUdFU19QUk9YWTogJycsXG5cdFx0TEJfSU1BR0VTX1BST1hZX1RJVExFOiAnJyxcblx0XHRMQl9JTUFHRVNfSFRUUFM6ICcnLFxuXHRcdExCX0lNQUdFU19IVFRQU19USVRMRTogJycsXG5cdFx0TEJfSU1BR0VTX0FMTDogJycsXG5cdFx0TEJfSU1BR0VTX0FMTF9USVRMRTogJydcblx0fTtcblx0XG5cdGNvbnN0IHRyYW5zbGF0aW9uU3R5bGVzID0ge1xuXHRcdExCX1NUWUxFU19OT05FOiAnJyxcblx0XHRMQl9TVFlMRVNfTk9ORV9USVRMRTogJycsXG5cdFx0TEJfU1RZTEVTX0FMTDogJycsXG5cdFx0TEJfU1RZTEVTX0FMTF9USVRMRTogJydcblx0fTtcblxuXHQkdHJhbnNsYXRlLmJpbmRBc09iamVjdCh0cmFuc2xhdGlvbkltYWdlcywgJ01BSU4uU0VUVElOR1MuR0VORVJBTCcsIG51bGwsICgpID0+IHtcblx0XHQkc2NvcGUuaW1hZ2VTZXR0aW5ncyA9IFtcblx0XHRcdHtuYW1lOiAnbm9uZScsIGRlc2NyaXB0aW9uOiB0cmFuc2xhdGlvbkltYWdlcy5MQl9JTUFHRVNfTk9ORSwgdGl0bGU6IHRyYW5zbGF0aW9uSW1hZ2VzLkxCX0lNQUdFU19OT05FX1RJVExFfSxcblx0XHRcdHtuYW1lOiAncHJveHknLCBkZXNjcmlwdGlvbjogdHJhbnNsYXRpb25JbWFnZXMuTEJfSU1BR0VTX1BST1hZLCB0aXRsZTogdHJhbnNsYXRpb25JbWFnZXMuTEJfSU1BR0VTX1BST1hZX1RJVExFfSxcblx0XHRcdHtuYW1lOiAnZGlyZWN0SHR0cHMnLCBkZXNjcmlwdGlvbjogdHJhbnNsYXRpb25JbWFnZXMuTEJfSU1BR0VTX0hUVFBTLCB0aXRsZTogdHJhbnNsYXRpb25JbWFnZXMuTEJfSU1BR0VTX0hUVFBTX1RJVExFfSxcblx0XHRcdHtuYW1lOiAnZGlyZWN0QWxsJywgZGVzY3JpcHRpb246IHRyYW5zbGF0aW9uSW1hZ2VzLkxCX0lNQUdFU19BTEwsIHRpdGxlOiB0cmFuc2xhdGlvbkltYWdlcy5MQl9JTUFHRVNfQUxMX1RJVExFfVxuXHRcdF07XG5cdH0pO1xuXG5cdCR0cmFuc2xhdGUuYmluZEFzT2JqZWN0KHRyYW5zbGF0aW9uU3R5bGVzLCAnTUFJTi5TRVRUSU5HUy5HRU5FUkFMJywgbnVsbCwgKCkgPT4ge1xuXHRcdCRzY29wZS5zdHlsZVNldHRpbmdzID0gW1xuXHRcdFx0e25hbWU6ICdub25lJywgZGVzY3JpcHRpb246IHRyYW5zbGF0aW9uU3R5bGVzLkxCX1NUWUxFU19OT05FLCB0aXRsZTogdHJhbnNsYXRpb25TdHlsZXMuTEJfU1RZTEVTX05PTkVfVElUTEV9LFxuXHRcdFx0e25hbWU6ICdhbGwnLCBkZXNjcmlwdGlvbjogdHJhbnNsYXRpb25TdHlsZXMuTEJfU1RZTEVTX0FMTCwgdGl0bGU6IHRyYW5zbGF0aW9uU3R5bGVzLkxCX1NUWUxFU19BTExfVElUTEV9XG5cdFx0XTtcblx0fSk7XG5cblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5TRVRUSU5HUy5HRU5FUkFMJywgbnVsbCwgKCkgPT4ge1xuXHRcdCRzY29wZS5ub3RJbXBsZW1lbnRlZCA9IFt7bmFtZTogJ25vbmUnLCBkZXNjcmlwdGlvbjogdHJhbnNsYXRpb25zLkxCX05PVF9JTVBMRU1FTlRFRH1dO1xuXHRcdCRzY29wZS5zb3J0QnkgPSBbXG5cdFx0XHR7bmFtZTogdHJhbnNsYXRpb25zLkxCX1NPUlRfQllfRElTUExBWV9OQU1FfSxcblx0XHRcdHtuYW1lOiB0cmFuc2xhdGlvbnMuTEJfU09SVF9CWV9GSVJTVF9OQU1FfSxcblx0XHRcdHtuYW1lOiB0cmFuc2xhdGlvbnMuTEJfU09SVF9CWV9MQVNUX05BTUV9XG5cdFx0XTtcblxuXHRcdGlmICghJHNjb3BlLmZvcm0uY29udGFjdHNTb3J0QnkpXG5cdFx0XHQkc2NvcGUuZm9ybS5jb250YWN0c1NvcnRCeSA9ICRzY29wZS5zb3J0QnlbdXNlci5zZXR0aW5ncy5jb250YWN0c1NvcnRCeSA/IHVzZXIuc2V0dGluZ3MuY29udGFjdHNTb3J0QnkgOiAwXTtcblx0fSk7XG5cblx0JHNjb3BlLmxhbmd1YWdlcyA9IE9iamVjdC5rZXlzKHRyYW5zbGF0ZS5zZXR0aW5ncy5UUkFOU0xBVElPTlMpLnJlZHVjZSgoYSwgbGFuZ0NvZGUpID0+IHtcblx0XHRhLnB1c2goe1xuXHRcdFx0bmFtZTogdHJhbnNsYXRlLnNldHRpbmdzLlRSQU5TTEFUSU9OU1tsYW5nQ29kZV0sXG5cdFx0XHRsYW5nQ29kZTogbGFuZ0NvZGVcblx0XHR9KTtcblx0XHRyZXR1cm4gYTtcblx0fSwgW10pO1xuXHQkc2NvcGUuZm9ybS5zZWxlY3RlZExhbmd1YWdlID0gJHNjb3BlLmxhbmd1YWdlcy5maW5kKGUgPT4gZS5sYW5nQ29kZSA9PSB0cmFuc2xhdGUuZ2V0Q3VycmVudExhbmdDb2RlKCkpO1xuXG5cdGNvbnNvbGUubG9nKCdpbml0aWFsaXplIEN0cmxTZXR0aW5nc0dlbmVyYWwnLCAkc2NvcGUubGFuZ3VhZ2VzKTtcblxuXHQkc2NvcGUuJHdhdGNoKCdmb3JtLnNlbGVjdGVkTGFuZ3VhZ2UnLCAoKSA9PiB7XG5cdFx0aWYgKCRzY29wZS5mb3JtLnNlbGVjdGVkTGFuZ3VhZ2UpXG5cdFx0XHR0cmFuc2xhdGUuc3dpdGNoTGFuZ3VhZ2UoJHNjb3BlLmZvcm0uc2VsZWN0ZWRMYW5ndWFnZS5sYW5nQ29kZSk7XG5cdH0pO1xuXG5cdCRzY29wZS4kd2F0Y2goJ2Zvcm0uY29udGFjdHNTb3J0QnknLCAoKSA9PiB7XG5cdFx0aWYgKCRzY29wZS5mb3JtLmNvbnRhY3RzU29ydEJ5KVxuXHRcdFx0dXNlci51cGRhdGUoe2NvbnRhY3RzU29ydEJ5OiAkc2NvcGUuc29ydEJ5LmZpbmRJbmRleChlID0+IGUubmFtZSA9PSAkc2NvcGUuZm9ybS5jb250YWN0c1NvcnRCeS5uYW1lKX0pO1xuXHR9KTtcblxuICAgICRzY29wZS4kd2F0Y2goJ3NldHRpbmdzLmlzSG90a2V5RW5hYmxlZCcsICgpID0+IHtcbiAgICAgICAgaG90a2V5LnRvZ2dsZUhvdGtleXMoJHNjb3BlLnNldHRpbmdzLmlzSG90a2V5RW5hYmxlZCk7XG4gICAgfSk7XG5cblx0bGV0IHVwZGF0ZVRpbWVvdXQgPSBudWxsO1xuXG4gICAgJHNjb3BlLiR3YXRjaCgnc2V0dGluZ3MnLCAobywgbikgPT4ge1xuICAgICAgICBpZiAobyA9PT0gbilcblx0XHRcdHJldHVybjtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoJHNjb3BlLnNldHRpbmdzKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRbdXBkYXRlVGltZW91dF0gPSAkdGltZW91dC5zY2hlZHVsZVByb21pc2UodXBkYXRlVGltZW91dCwgKCkgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHlpZWxkIHVzZXIudXBkYXRlKCRzY29wZS5zZXR0aW5ncyk7XG5cblx0XHRcdFx0XHRub3RpZmljYXRpb25zLnNldCgncHJvZmlsZS1zYXZlLW9rJywge1xuXHRcdFx0XHRcdFx0dGV4dDogdHJhbnNsYXRpb25zLkxCX1BST0ZJTEVfU0FWRUQsXG5cdFx0XHRcdFx0XHR0eXBlOiAnaW5mbycsXG5cdFx0XHRcdFx0XHR0aW1lb3V0OiAzMDAwLFxuXHRcdFx0XHRcdFx0bmFtZXNwYWNlOiAnc2V0dGluZ3MnXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5vdGlmaWNhdGlvbnMuc2V0KCdwcm9maWxlLXNhdmUtZmFpbCcsIHtcblx0XHRcdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9QUk9GSUxFX0NBTk5PVF9CRV9TQVZFRCxcblx0XHRcdFx0XHRcdG5hbWVzcGFjZTogJ3NldHRpbmdzJ1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG4gICAgICAgICAgICB9KSwgMTAwMCk7XG4gICAgICAgIH1cbiAgICB9LCB0cnVlKTtcblxufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsList.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $state, router, hotkey) {\n\tvar settingsList = ['main.settings.general', 'main.settings.profile', 'main.settings.security', 'main.settings.plan'];\n\n\tvar goSettings = function goSettings(event, delta) {\n\t\tevent.preventDefault();\n\n\t\tvar i = settingsList.findIndex(function (s) {\n\t\t\treturn s == $state.current.name;\n\t\t});\n\t\tif (i > -1) {\n\t\t\ti = i + delta;\n\t\t\tif (i < 0) i = settingsList.length + i;\n\t\t\tif (i > settingsList.length - 1) i = settingsList.length - i;\n\t\t\t$state.go(settingsList[i]);\n\t\t}\n\t};\n\n\tvar addHotkeys = function addHotkeys() {\n\t\thotkey.addHotkey({\n\t\t\tcombo: ['h', 'k', 'left', 'up'],\n\t\t\tdescription: 'HOTKEY.MOVE_UP',\n\t\t\tcallback: function callback(event, key) {\n\t\t\t\treturn goSettings(event, -1);\n\t\t\t}\n\t\t});\n\n\t\thotkey.addHotkey({\n\t\t\tcombo: ['j', 'l', 'right', 'down'],\n\t\t\tdescription: 'HOTKEY.MOVE_DOWN',\n\t\t\tcallback: function callback(event, key) {\n\t\t\t\treturn goSettings(event, +1);\n\t\t\t}\n\t\t});\n\t};\n\n\taddHotkeys();\n\n\t$rootScope.$on('hotkeys-enabled', function (e, isActive) {\n\t\taddHotkeys();\n\t});\n\n\t$rootScope.$on('$stateChangeStart', function (e, toState) {\n\t\tif (toState.name.startsWith('main.settings') && !router.isPopupState(toState.name)) addHotkeys();\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc0xpc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUs7QUFDckUsS0FBTSxZQUFZLEdBQUcsQ0FBQyx1QkFBdUIsRUFBRSx1QkFBdUIsRUFBRSx3QkFBd0IsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDOztBQUV4SCxLQUFNLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBSSxLQUFLLEVBQUUsS0FBSyxFQUFLO0FBQ3BDLE9BQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQzs7QUFFdkIsTUFBSSxDQUFDLEdBQUcsWUFBWSxDQUFDLFNBQVMsQ0FBQyxVQUFBLENBQUM7VUFBSSxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJO0dBQUEsQ0FBQyxDQUFDO0FBQzlELE1BQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFO0FBQ1gsSUFBQyxHQUFHLENBQUMsR0FBRyxLQUFLLENBQUM7QUFDZCxPQUFJLENBQUMsR0FBRyxDQUFDLEVBQ1IsQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQzdCLE9BQUksQ0FBQyxHQUFHLFlBQVksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUM5QixDQUFDLEdBQUcsWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDN0IsU0FBTSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztHQUMzQjtFQUNELENBQUM7O0FBRUYsS0FBTSxVQUFVLEdBQUcsU0FBYixVQUFVLEdBQVM7QUFDeEIsUUFBTSxDQUFDLFNBQVMsQ0FBQztBQUNoQixRQUFLLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUM7QUFDL0IsY0FBVyxFQUFFLGdCQUFnQjtBQUM3QixXQUFRLEVBQUUsa0JBQUMsS0FBSyxFQUFFLEdBQUc7V0FBSyxVQUFVLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQUE7R0FDL0MsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxTQUFTLENBQUM7QUFDaEIsUUFBSyxFQUFFLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxPQUFPLEVBQUUsTUFBTSxDQUFDO0FBQ2xDLGNBQVcsRUFBRSxrQkFBa0I7QUFDL0IsV0FBUSxFQUFFLGtCQUFDLEtBQUssRUFBRSxHQUFHO1dBQUssVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztJQUFBO0dBQy9DLENBQUMsQ0FBQztFQUNILENBQUM7O0FBRUYsV0FBVSxFQUFFLENBQUM7O0FBRWIsV0FBVSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxVQUFDLENBQUMsRUFBRSxRQUFRLEVBQUs7QUFDbEQsWUFBVSxFQUFFLENBQUM7RUFDYixDQUFDLENBQUM7O0FBRUEsV0FBVSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRSxVQUFDLENBQUMsRUFBRSxPQUFPLEVBQUs7QUFDaEQsTUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxFQUN2RixVQUFVLEVBQUUsQ0FBQztFQUNYLENBQUMsQ0FBQztDQUNOLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybFNldHRpbmdzTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkc3RhdGUsIHJvdXRlciwgaG90a2V5KSA9PiB7XG5cdGNvbnN0IHNldHRpbmdzTGlzdCA9IFsnbWFpbi5zZXR0aW5ncy5nZW5lcmFsJywgJ21haW4uc2V0dGluZ3MucHJvZmlsZScsICdtYWluLnNldHRpbmdzLnNlY3VyaXR5JywgJ21haW4uc2V0dGluZ3MucGxhbiddO1xuXG5cdGNvbnN0IGdvU2V0dGluZ3MgPSAoZXZlbnQsIGRlbHRhKSA9PiB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdGxldCBpID0gc2V0dGluZ3NMaXN0LmZpbmRJbmRleChzID0+IHMgPT0gJHN0YXRlLmN1cnJlbnQubmFtZSk7XG5cdFx0aWYgKGkgPiAtMSkge1xuXHRcdFx0aSA9IGkgKyBkZWx0YTtcblx0XHRcdGlmIChpIDwgMClcblx0XHRcdFx0aSA9IHNldHRpbmdzTGlzdC5sZW5ndGggKyBpO1xuXHRcdFx0aWYgKGkgPiBzZXR0aW5nc0xpc3QubGVuZ3RoIC0gMSlcblx0XHRcdFx0aSA9IHNldHRpbmdzTGlzdC5sZW5ndGggLSBpO1xuXHRcdFx0JHN0YXRlLmdvKHNldHRpbmdzTGlzdFtpXSk7XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnN0IGFkZEhvdGtleXMgPSAoKSA9PiB7XG5cdFx0aG90a2V5LmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogWydoJywgJ2snLCAnbGVmdCcsICd1cCddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuTU9WRV9VUCcsXG5cdFx0XHRjYWxsYmFjazogKGV2ZW50LCBrZXkpID0+IGdvU2V0dGluZ3MoZXZlbnQsIC0xKVxuXHRcdH0pO1xuXG5cdFx0aG90a2V5LmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogWydqJywgJ2wnLCAncmlnaHQnLCAnZG93biddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuTU9WRV9ET1dOJyxcblx0XHRcdGNhbGxiYWNrOiAoZXZlbnQsIGtleSkgPT4gZ29TZXR0aW5ncyhldmVudCwgKzEpXG5cdFx0fSk7XG5cdH07XG5cblx0YWRkSG90a2V5cygpO1xuXG5cdCRyb290U2NvcGUuJG9uKCdob3RrZXlzLWVuYWJsZWQnLCAoZSwgaXNBY3RpdmUpID0+IHtcblx0XHRhZGRIb3RrZXlzKCk7XG5cdH0pO1xuXG4gICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZVN0YXJ0JywgKGUsIHRvU3RhdGUpID0+IHtcbiAgICAgICAgaWYgKHRvU3RhdGUubmFtZS5zdGFydHNXaXRoKCdtYWluLnNldHRpbmdzJykgJiYgIXJvdXRlci5pc1BvcHVwU3RhdGUodG9TdGF0ZS5uYW1lKSlcblx0XHRcdGFkZEhvdGtleXMoKTtcbiAgICB9KTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsPersonal.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, $timeout, $translate, user, co, notifications) {\n\t$scope.name = user.styledName;\n\t$scope.status = '';\n\t$scope.settings = {};\n\n\tvar translations = {\n\t\tLB_PROFILE_SAVED: '',\n\t\tLB_PROFILE_CANNOT_BE_SAVED: ''\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.SETTINGS.PROFILE');\n\n\t$scope.$bind('user-settings', function () {\n\t\t$scope.settings = user.settings;\n\t});\n\n\tvar updateTimeout = null;\n\n\t$scope.$watch('settings', function (o, n) {\n\t\tif (o === n) return;\n\n\t\tif (Object.keys($scope.settings).length > 0) {\n\t\t\tvar _temp = $timeout.schedulePromise(updateTimeout, function () {\n\t\t\t\treturn co(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\tcontext$4$0.prev = 0;\n\t\t\t\t\t\t\t\tcontext$4$0.next = 3;\n\t\t\t\t\t\t\t\treturn user.update($scope.settings);\n\n\t\t\t\t\t\t\tcase 3:\n\n\t\t\t\t\t\t\t\tnotifications.set('profile-save-ok', {\n\t\t\t\t\t\t\t\t\ttext: translations.LB_PROFILE_SAVED,\n\t\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tcontext$4$0.next = 9;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\tcontext$4$0.prev = 6;\n\t\t\t\t\t\t\t\tcontext$4$0.t14 = context$4$0['catch'](0);\n\n\t\t\t\t\t\t\t\tnotifications.set('profile-save-fail', {\n\t\t\t\t\t\t\t\t\ttext: translations.LB_PROFILE_CANNOT_BE_SAVED,\n\t\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}, callee$3$0, this, [[0, 6]]);\n\t\t\t\t}));\n\t\t\t}, 1000);\n\n\t\t\tvar _temp2 = babelHelpers.slicedToArray(_temp, 1);\n\n\t\t\tupdateTimeout = _temp2[0];\n\t\t\t_temp;\n\t\t}\n\t}, true);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc1BlcnNvbmFsLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxhQUFhLEVBQUs7QUFDeEYsT0FBTSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDO0FBQzlCLE9BQU0sQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0FBQ25CLE9BQU0sQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDOztBQUVyQixLQUFNLFlBQVksR0FBRztBQUNwQixrQkFBZ0IsRUFBRSxFQUFFO0FBQ3BCLDRCQUEwQixFQUFFLEVBQUU7RUFDOUIsQ0FBQztBQUNGLFdBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLHVCQUF1QixDQUFDLENBQUM7O0FBRS9ELE9BQU0sQ0FBQyxLQUFLLENBQUMsZUFBZSxFQUFFLFlBQU07QUFDbkMsUUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO0VBQ2hDLENBQUMsQ0FBQzs7QUFFSCxLQUFJLGFBQWEsR0FBRyxJQUFJLENBQUM7O0FBRXpCLE9BQU0sQ0FBQyxNQUFNLENBQUMsVUFBVSxFQUFFLFVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSztBQUNuQyxNQUFJLENBQUMsS0FBSyxDQUFDLEVBQ1YsT0FBTzs7QUFFUixNQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7ZUFDMUIsUUFBUSxDQUFDLGVBQWUsQ0FBQyxhQUFhLEVBQUU7V0FBTSxFQUFFLHlCQUFDOzs7Ozs7ZUFFM0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDOzs7O0FBRWxDLHFCQUFhLENBQUMsR0FBRyxDQUFDLGlCQUFpQixFQUFFO0FBQ3BDLGFBQUksRUFBRSxZQUFZLENBQUMsZ0JBQWdCO0FBQ25DLGFBQUksRUFBRSxNQUFNO0FBQ1osZ0JBQU8sRUFBRSxJQUFJO0FBQ2Isa0JBQVMsRUFBRSxVQUFVO1NBQ3JCLENBQUMsQ0FBQzs7Ozs7Ozs7QUFFSCxxQkFBYSxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsRUFBRTtBQUN0QyxhQUFJLEVBQUUsWUFBWSxDQUFDLDBCQUEwQjtBQUM3QyxrQkFBUyxFQUFFLFVBQVU7U0FDckIsQ0FBQyxDQUFDOzs7Ozs7O0tBRUosRUFBQztJQUFBLEVBQUUsSUFBSSxDQUFDOzs7O0FBaEJSLGdCQUFhOztHQWlCZDtFQUNELEVBQUUsSUFBSSxDQUFDLENBQUM7Q0FDVCxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc1BlcnNvbmFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRzY29wZSwgJHRpbWVvdXQsICR0cmFuc2xhdGUsIHVzZXIsIGNvLCBub3RpZmljYXRpb25zKSA9PiB7XG5cdCRzY29wZS5uYW1lID0gdXNlci5zdHlsZWROYW1lO1xuXHQkc2NvcGUuc3RhdHVzID0gJyc7XG5cdCRzY29wZS5zZXR0aW5ncyA9IHt9O1xuXG5cdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcblx0XHRMQl9QUk9GSUxFX1NBVkVEOiAnJyxcblx0XHRMQl9QUk9GSUxFX0NBTk5PVF9CRV9TQVZFRDogJydcblx0fTtcblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5TRVRUSU5HUy5QUk9GSUxFJyk7XG5cblx0JHNjb3BlLiRiaW5kKCd1c2VyLXNldHRpbmdzJywgKCkgPT4ge1xuXHRcdCRzY29wZS5zZXR0aW5ncyA9IHVzZXIuc2V0dGluZ3M7XG5cdH0pO1xuXG5cdGxldCB1cGRhdGVUaW1lb3V0ID0gbnVsbDtcblxuXHQkc2NvcGUuJHdhdGNoKCdzZXR0aW5ncycsIChvLCBuKSA9PiB7XG5cdFx0aWYgKG8gPT09IG4pXG5cdFx0XHRyZXR1cm47XG5cblx0XHRpZiAoT2JqZWN0LmtleXMoJHNjb3BlLnNldHRpbmdzKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRbdXBkYXRlVGltZW91dF0gPSAkdGltZW91dC5zY2hlZHVsZVByb21pc2UodXBkYXRlVGltZW91dCwgKCkgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHlpZWxkIHVzZXIudXBkYXRlKCRzY29wZS5zZXR0aW5ncyk7XG5cblx0XHRcdFx0XHRub3RpZmljYXRpb25zLnNldCgncHJvZmlsZS1zYXZlLW9rJywge1xuXHRcdFx0XHRcdFx0dGV4dDogdHJhbnNsYXRpb25zLkxCX1BST0ZJTEVfU0FWRUQsXG5cdFx0XHRcdFx0XHR0eXBlOiAnaW5mbycsXG5cdFx0XHRcdFx0XHR0aW1lb3V0OiAzMDAwLFxuXHRcdFx0XHRcdFx0bmFtZXNwYWNlOiAnc2V0dGluZ3MnXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdG5vdGlmaWNhdGlvbnMuc2V0KCdwcm9maWxlLXNhdmUtZmFpbCcsIHtcblx0XHRcdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9QUk9GSUxFX0NBTk5PVF9CRV9TQVZFRCxcblx0XHRcdFx0XHRcdG5hbWVzcGFjZTogJ3NldHRpbmdzJ1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KSwgMTAwMCk7XG5cdFx0fVxuXHR9LCB0cnVlKTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsPlan.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, $translate, $interval, consts) {\n\t$scope.currentPlanName = 'BASIC';\n\t$scope.plans = {};\n\n\tconsts.PLAN_LIST.forEach(function (name) {\n\t\t$scope.plans[name] = {\n\t\t\tTITLE: '',\n\t\t\tLB_TAG: '',\n\t\t\tLB_ITEMS: ''\n\t\t};\n\t\tconsole.log('translating', $scope.plans[name], 'MAIN.SETTINGS.PLAN.' + name);\n\t\t$translate.bindAsObject($scope.plans[name], 'MAIN.SETTINGS.PLAN.' + name, function (t) {\n\t\t\tt.LB_ITEMS = t.LB_ITEMS.split('|');\n\t\t\treturn t;\n\t\t});\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc1BsYW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxNQUFNLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUs7QUFDeEUsT0FBTSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUM7QUFDakMsT0FBTSxDQUFDLEtBQUssR0FBRyxFQUFHLENBQUM7O0FBRW5CLE9BQU0sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQUEsSUFBSSxFQUFJO0FBQ2hDLFFBQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEdBQUc7QUFDcEIsUUFBSyxFQUFFLEVBQUU7QUFDVCxTQUFNLEVBQUUsRUFBRTtBQUNWLFdBQVEsRUFBRSxFQUFFO0dBQ1osQ0FBQztBQUNGLFNBQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUscUJBQXFCLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDN0UsWUFBVSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLHFCQUFxQixHQUFHLElBQUksRUFBRSxVQUFBLENBQUMsRUFBSTtBQUM5RSxJQUFDLENBQUMsUUFBUSxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ25DLFVBQU8sQ0FBQyxDQUFDO0dBQ1QsQ0FBQyxDQUFDO0VBQ0gsQ0FBQyxDQUFDO0NBQ0gsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9jb250cm9sbGVycy9jdHJsU2V0dGluZ3NQbGFuLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRzY29wZSwgJHRyYW5zbGF0ZSwgJGludGVydmFsLCBjb25zdHMpID0+IHtcblx0JHNjb3BlLmN1cnJlbnRQbGFuTmFtZSA9ICdCQVNJQyc7XG5cdCRzY29wZS5wbGFucyA9IHsgfTtcblxuXHRjb25zdHMuUExBTl9MSVNULmZvckVhY2gobmFtZSA9PiB7XG5cdFx0JHNjb3BlLnBsYW5zW25hbWVdID0ge1xuXHRcdFx0VElUTEU6ICcnLFxuXHRcdFx0TEJfVEFHOiAnJyxcblx0XHRcdExCX0lURU1TOiAnJ1xuXHRcdH07XG5cdFx0Y29uc29sZS5sb2coJ3RyYW5zbGF0aW5nJywgJHNjb3BlLnBsYW5zW25hbWVdLCAnTUFJTi5TRVRUSU5HUy5QTEFOLicgKyBuYW1lKTtcblx0XHQkdHJhbnNsYXRlLmJpbmRBc09iamVjdCgkc2NvcGUucGxhbnNbbmFtZV0sICdNQUlOLlNFVFRJTkdTLlBMQU4uJyArIG5hbWUsIHQgPT4ge1xuXHRcdFx0dC5MQl9JVEVNUyA9IHQuTEJfSVRFTVMuc3BsaXQoJ3wnKTtcblx0XHRcdHJldHVybiB0O1xuXHRcdH0pO1xuXHR9KTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsSecurity.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, $timeout, $translate, $state, Key, dialogs, router, co, utils, user, crypto, cryptoKeys, LavaboomAPI, fileReader, inbox, saver, notifications) {\n\t$scope.email = user.email;\n\t$scope.settings = {};\n\n\t$scope.form = {\n\t\toldPassword: '',\n\t\tpassword: '',\n\t\tpasswordRepeat: ''\n\t};\n\n\tvar translations = {\n\t\tLB_PASSWORD_CANNOT_BE_CHANGED: '%',\n\t\tLB_PASSWORD_CHANGED: '',\n\t\tLB_LAVABOOM_SYNC_ACTIVATED: '',\n\t\tLB_LAVABOOM_SYNC_DEACTIVATED: '',\n\t\tLB_LAVABOOM_SYNC_CANNOT_UPDATE: '',\n\t\tTITLE_CONFIRM: '',\n\t\tLB_CONFIRM_PASSWORD_CHANGE: '',\n\t\tLB_CONFIRM_KEYS_REMOVAL: '',\n\t\tLB_CANNOT_IMPORT: '',\n\t\tLB_CANNOT_IMPORT_WRONG_FORMAT: '',\n\t\tLB_CANNOT_IMPORT_CORRUPTED: ''\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.SETTINGS.SECURITY');\n\n\t$scope.$bind('user-settings', function () {\n\t\t$scope.settings = user.settings;\n\t});\n\n\t$scope.$bind('keyring-updated', function () {\n\t\t$scope.keys = crypto.getAvailablePrivateKeys().map(function (key) {\n\t\t\tvar k = new Key(key);\n\t\t\tk.email = user.styleEmail(k.email);\n\t\t\treturn k;\n\t\t}).sort(function (a, b) {\n\t\t\tif (a.keyId < b.keyId) return -1;\n\t\t\tif (a.keyId > b.keyId) return 1;\n\t\t\treturn 0;\n\t\t});\n\t\t$scope.isAnyUndecryptedKeys = $scope.keys.some(function (k) {\n\t\t\treturn !k.isDecrypted;\n\t\t});\n\n\t\tconsole.log('keyring-updated', $scope.keys);\n\t});\n\n\t$scope.changePassword = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar confirmed;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.prev = 0;\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn co.def(dialogs.confirm(translations.TITLE_CONFIRM, translations.LB_CONFIRM_PASSWORD_CHANGE).result, 'cancelled');\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tconfirmed = context$3$0.sent;\n\n\t\t\t\t\t\tif (!(confirmed == 'cancelled')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\treturn user.updatePassword($scope.form.oldPassword, $scope.form.password);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\tcrypto.changePassword(user.email, $scope.form.oldPassword, $scope.form.password);\n\n\t\t\t\t\t\tnotifications.set('password-changed-ok', {\n\t\t\t\t\t\t\ttext: translations.LB_PASSWORD_CHANGED,\n\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcontext$3$0.next = 15;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\tcontext$3$0.prev = 12;\n\t\t\t\t\t\tcontext$3$0.t15 = context$3$0['catch'](0);\n\n\t\t\t\t\t\tnotifications.set('password-changed-fail', {\n\t\t\t\t\t\t\ttext: translations.LB_PASSWORD_CANNOT_BE_CHANGED({ error: context$3$0.t15.message }),\n\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 15:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[0, 12]]);\n\t\t}));\n\t};\n\n\t$scope.exportKeys = function () {\n\t\tvar keysBackup = cryptoKeys.exportKeys();\n\t\tsaver.saveAs(keysBackup, cryptoKeys.getExportFilename(keysBackup, user.name), 'text/plain;charset=utf-8');\n\t};\n\n\t$scope.generateKeys = function () {\n\t\tloader.resetProgress();\n\t\tloader.showLoader(true);\n\t\tloader.loadLoginApplication({ state: 'choosePasswordIntro', noDelay: true });\n\t};\n\n\t$scope.removeDecryptedKeys = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar confirmed;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn co.def(dialogs.confirm(translations.TITLE_CONFIRM, translations.LB_CONFIRM_KEYS_REMOVAL).result, 'cancelled');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tconfirmed = context$3$0.sent;\n\n\t\t\t\t\t\tif (!(confirmed == 'cancelled')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 5:\n\n\t\t\t\t\t\tcrypto.removeSensitiveKeys(true);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\t$scope.exportKeys = function () {\n\t\tvar keysBackup = cryptoKeys.exportKeys();\n\t\tsaver.saveAs(keysBackup, cryptoKeys.getExportFilename(keysBackup, user.name), 'text/plain;charset=utf-8');\n\t};\n\n\t$scope.exportPublicKey = function (key) {\n\t\tsaver.saveAs(cryptoKeys.exportPublicKeyByFingerprint(key.fingerprint), key.email + '.asc', 'text/plain;charset=utf-8');\n\t};\n\n\t$scope.sendKey = function (key) {\n\t\trouter.showPopup('compose', { publicKey: key.fingerprint });\n\t};\n\n\t$scope.importKeys = function (data) {\n\t\ttry {\n\t\t\tcryptoKeys.importKeys(data);\n\t\t} catch (err) {\n\t\t\tconsole.log('LB_CANNOT_IMPORT_', err.message);\n\t\t\tvar translatedErrorMessage = translations['LB_CANNOT_IMPORT_' + err.message];\n\n\t\t\tnotifications.set('import-keys-fail', {\n\t\t\t\ttext: translatedErrorMessage ? translatedErrorMessage : translations.LB_CANNOT_IMPORT,\n\t\t\t\tnamespace: 'settings'\n\t\t\t});\n\t\t}\n\t\tinbox.invalidateEmailCache();\n\t};\n\n\tvar updateTimeout = null;\n\tvar isLavaboomSyncRestored = false;\n\t$scope.$watch('settings.isLavaboomSynced', function (o, n) {\n\t\tif (o === n || isLavaboomSyncRestored) {\n\t\t\tisLavaboomSyncRestored = false;\n\t\t\treturn;\n\t\t}\n\n\t\tco(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar confirmed, keysBackup;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif ($scope.settings.isLavaboomSynced) {\n\t\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn co.def(dialogs.create('/partials/lsOff.html', 'CtrlLsOff').result, 'cancelled');\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tconfirmed = context$3$0.sent;\n\n\t\t\t\t\t\tif (!(confirmed == 'cancelled')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tisLavaboomSyncRestored = true;\n\t\t\t\t\t\t$scope.settings.isLavaboomSynced = true;\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 8:\n\n\t\t\t\t\t\tif ($scope.settings.isLavaboomSynced) {\n\t\t\t\t\t\t\tkeysBackup = cryptoKeys.exportKeys(user.email);\n\n\t\t\t\t\t\t\t$scope.settings.keyring = keysBackup;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$scope.settings.keyring = '';\n\n\t\t\t\t\t\t\tkeysBackup = cryptoKeys.exportKeys(user.email);\n\n\t\t\t\t\t\t\tsaver.saveAs(keysBackup, cryptoKeys.getExportFilename(keysBackup, user.name), 'text/plain;charset=utf-8');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Object.keys($scope.settings).length > 0) {\n\t\t\t\t\t\t\tupdateTimeout = $timeout.schedulePromise(updateTimeout, function () {\n\t\t\t\t\t\t\t\treturn co(regeneratorRuntime.mark(function callee$4$0() {\n\t\t\t\t\t\t\t\t\tvar keys;\n\t\t\t\t\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$4$0$(context$5$0) {\n\t\t\t\t\t\t\t\t\t\twhile (1) switch (context$5$0.prev = context$5$0.next) {\n\t\t\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.prev = 0;\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 3;\n\t\t\t\t\t\t\t\t\t\t\t\treturn user.update($scope.settings);\n\n\t\t\t\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\t\t\t\tkeys = crypto.clearPermanentPrivateKeysForEmail(user.email);\n\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('clearPermanentPrivateKeysForEmail returned', keys);\n\t\t\t\t\t\t\t\t\t\t\t\tif ($scope.settings.isLavaboomSynced) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcrypto.initialize({ isShortMemory: true });\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tcrypto.initialize({ isShortMemory: false });\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\tcrypto.restorePrivateKeys.apply(crypto, babelHelpers.toConsumableArray(keys));\n\n\t\t\t\t\t\t\t\t\t\t\t\tnotifications.set('ls-ok', {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: $scope.settings.isLavaboomSynced ? translations.LB_LAVABOOM_SYNC_ACTIVATED : translations.LB_LAVABOOM_SYNC_DEACTIVATED,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 14;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t\t\t\tcase 10:\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.prev = 10;\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.t16 = context$5$0['catch'](0);\n\n\t\t\t\t\t\t\t\t\t\t\t\tnotifications.set('ls-fail', {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: translations.LB_LAVABOOM_SYNC_CANNOT_UPDATE,\n\t\t\t\t\t\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t\tthrow context$5$0.t16;\n\n\t\t\t\t\t\t\t\t\t\t\tcase 14:\n\t\t\t\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.stop();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, callee$4$0, this, [[0, 10]]);\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t}, true);\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc1NlY3VyaXR5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUN6RCxHQUFHLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFDcEIsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsYUFBYSxFQUFLO0FBQ3ZHLE9BQU0sQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUMxQixPQUFNLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQzs7QUFFckIsT0FBTSxDQUFDLElBQUksR0FBRztBQUNiLGFBQVcsRUFBRSxFQUFFO0FBQ2YsVUFBUSxFQUFFLEVBQUU7QUFDWixnQkFBYyxFQUFFLEVBQUU7RUFDbEIsQ0FBQzs7QUFFRixLQUFNLFlBQVksR0FBRztBQUNwQiwrQkFBNkIsRUFBRSxHQUFHO0FBQ2xDLHFCQUFtQixFQUFFLEVBQUU7QUFDdkIsNEJBQTBCLEVBQUUsRUFBRTtBQUM5Qiw4QkFBNEIsRUFBRSxFQUFFO0FBQ2hDLGdDQUE4QixFQUFFLEVBQUU7QUFDbEMsZUFBYSxFQUFFLEVBQUU7QUFDakIsNEJBQTBCLEVBQUUsRUFBRTtBQUM5Qix5QkFBdUIsRUFBRSxFQUFFO0FBQzNCLGtCQUFnQixFQUFFLEVBQUU7QUFDcEIsK0JBQTZCLEVBQUUsRUFBRTtBQUNqQyw0QkFBMEIsRUFBRSxFQUFFO0VBQzlCLENBQUM7QUFDRixXQUFVLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSx3QkFBd0IsQ0FBQyxDQUFDOztBQUVoRSxPQUFNLENBQUMsS0FBSyxDQUFDLGVB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O2FBQzFDO0FBQ0Qsa0JBQU0sQ0FBQyxrQkFBa0IsTUFBQSxDQUF6QixNQUFNLGlDQUF1QixJQUFJLEVBQUMsQ0FBQzs7QUFFbkMseUJBQWEsQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFO0FBQzFCLGlCQUFJLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsR0FBRyxZQUFZLENBQUMsMEJBQTBCLEdBQUcsWUFBWSxDQUFDLDRCQUE0QjtBQUM1SCxpQkFBSSxFQUFFLE1BQU07QUFDWixvQkFBTyxFQUFFLElBQUk7QUFDYixzQkFBUyxFQUFFLFVBQVU7YUFDckIsQ0FBQyxDQUFDOzs7Ozs7OztBQUVILHlCQUFhLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRTtBQUM1QixpQkFBSSxFQUFFLFlBQVksQ0FBQyw4QkFBOEI7QUFDakQsc0JBQVMsRUFBRSxVQUFVO2FBQ3JCLENBQUMsQ0FBQzs7Ozs7Ozs7U0FHSixFQUFDO1FBQUEsRUFBRSxJQUFJLENBQUMsQ0FBQztPQUNWOzs7Ozs7O0dBQ0QsRUFBQyxDQUFDO0VBQ0gsRUFBRSxJQUFJLENBQUMsQ0FBQztDQUNULENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybFNldHRpbmdzU2VjdXJpdHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHNjb3BlLCAkdGltZW91dCwgJHRyYW5zbGF0ZSwgJHN0YXRlLFxuXHRcdFx0XHRcdFx0XHQgICBLZXksIGRpYWxvZ3MsIHJvdXRlcixcblx0XHRcdFx0XHRcdFx0ICAgY28sIHV0aWxzLCB1c2VyLCBjcnlwdG8sIGNyeXB0b0tleXMsIExhdmFib29tQVBJLCBmaWxlUmVhZGVyLCBpbmJveCwgc2F2ZXIsIG5vdGlmaWNhdGlvbnMpID0+IHtcblx0JHNjb3BlLmVtYWlsID0gdXNlci5lbWFpbDtcblx0JHNjb3BlLnNldHRpbmdzID0ge307XG5cblx0JHNjb3BlLmZvcm0gPSB7XG5cdFx0b2xkUGFzc3dvcmQ6ICcnLFxuXHRcdHBhc3N3b3JkOiAnJyxcblx0XHRwYXNzd29yZFJlcGVhdDogJydcblx0fTtcblxuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0TEJfUEFTU1dPUkRfQ0FOTk9UX0JFX0NIQU5HRUQ6ICclJyxcblx0XHRMQl9QQVNTV09SRF9DSEFOR0VEOiAnJyxcblx0XHRMQl9MQVZBQk9PTV9TWU5DX0FDVElWQVRFRDogJycsXG5cdFx0TEJfTEFWQUJPT01fU1lOQ19ERUFDVElWQVRFRDogJycsXG5cdFx0TEJfTEFWQUJPT01fU1lOQ19DQU5OT1RfVVBEQVRFOiAnJyxcblx0XHRUSVRMRV9DT05GSVJNOiAnJyxcblx0XHRMQl9DT05GSVJNX1BBU1NXT1JEX0NIQU5HRTogJycsXG5cdFx0TEJfQ09ORklSTV9LRVlTX1JFTU9WQUw6ICcnLFxuXHRcdExCX0NBTk5PVF9JTVBPUlQ6ICcnLFxuXHRcdExCX0NBTk5PVF9JTVBPUlRfV1JPTkdfRk9STUFUOiAnJyxcblx0XHRMQl9DQU5OT1RfSU1QT1JUX0NPUlJVUFRFRDogJydcblx0fTtcblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5TRVRUSU5HUy5TRUNVUklUWScpO1xuXG5cdCRzY29wZS4kYmluZCgndXNlci1zZXR0aW5ncycsICgpID0+IHtcblx0XHQkc2NvcGUuc2V0dGluZ3MgPSB1c2VyLnNldHRpbmdzO1xuXHR9KTtcblxuXHQkc2NvcGUuJGJpbmQoJ2tleXJpbmctdXBkYXRlZCcsICgpID0+IHtcblx0XHQkc2NvcGUua2V5cyA9IGNyeXB0by5nZXRBdmFpbGFibGVQcml2YXRlS2V5cygpXG5cdFx0XHQubWFwKGtleSA9PiB7XG5cdFx0XHRcdGxldCBrID0gbmV3IEtleShrZXkpO1xuXHRcdFx0XHRrLmVtYWlsID0gdXNlci5zdHlsZUVtYWlsKGsuZW1haWwpO1xuXHRcdFx0XHRyZXR1cm4gaztcblx0XHRcdH0pXG5cdFx0XHQuc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRpZiAoYS5rZXlJZCA8IGIua2V5SWQpIHJldHVybiAtMTtcblx0XHRcdFx0aWYgKGEua2V5SWQgPiBiLmtleUlkKSByZXR1cm4gMTtcblx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHR9KTtcblx0XHQkc2NvcGUuaXNBbnlVbmRlY3J5cHRlZEtleXMgPSAkc2NvcGUua2V5cy5zb21lKGsgPT4gIWsuaXNEZWNyeXB0ZWQpO1xuXG5cdFx0Y29uc29sZS5sb2coJ2tleXJpbmctdXBkYXRlZCcsICRzY29wZS5rZXlzKTtcblx0fSk7XG5cblx0JHNjb3BlLmNoYW5nZVBhc3N3b3JkID0gKCkgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb25maXJtZWQgPSB5aWVsZCBjby5kZWYoZGlhbG9ncy5jb25maXJtKHRyYW5zbGF0aW9ucy5USVRMRV9DT05GSVJNLCB0cmFuc2xhdGlvbnMuTEJfQ09ORklSTV9QQVNTV09SRF9DSEFOR0UpLnJlc3VsdCwgJ2NhbmNlbGxlZCcpO1xuXHRcdFx0aWYgKGNvbmZpcm1lZCA9PSAnY2FuY2VsbGVkJylcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHR5aWVsZCB1c2VyLnVwZGF0ZVBhc3N3b3JkKCRzY29wZS5mb3JtLm9sZFBhc3N3b3JkLCAkc2NvcGUuZm9ybS5wYXNzd29yZCk7XG5cdFx0XHRjcnlwdG8uY2hhbmdlUGFzc3dvcmQodXNlci5lbWFpbCwgJHNjb3BlLmZvcm0ub2xkUGFzc3dvcmQsICRzY29wZS5mb3JtLnBhc3N3b3JkKTtcblxuXHRcdFx0bm90aWZpY2F0aW9ucy5zZXQoJ3Bhc3N3b3JkLWNoYW5nZWQtb2snLCB7XG5cdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9QQVNTV09SRF9DSEFOR0VELFxuXHRcdFx0XHR0eXBlOiAnaW5mbycsXG5cdFx0XHRcdHRpbWVvdXQ6IDMwMDAsXG5cdFx0XHRcdG5hbWVzcGFjZTogJ3NldHRpbmdzJ1xuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRub3RpZmljYXRpb25zLnNldCgncGFzc3dvcmQtY2hhbmdlZC1mYWlsJywge1xuXHRcdFx0XHR0ZXh0OiB0cmFuc2xhdGlvbnMuTEJfUEFTU1dPUkRfQ0FOTk9UX0JFX0NIQU5HRUQoe2Vycm9yOiBlcnIubWVzc2FnZX0pLFxuXHRcdFx0XHRuYW1lc3BhY2U6ICdzZXR0aW5ncydcblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG5cblx0JHNjb3BlLmV4cG9ydEtleXMgPSAoKSA9PiB7XG5cdFx0dmFyIGtleXNCYWNrdXAgPSBjcnlwdG9LZXlzLmV4cG9ydEtleXMoKTtcblx0XHRzYXZlci5zYXZlQXMoa2V5c0JhY2t1cCwgY3J5cHRvS2V5cy5nZXRFeHBvcnRGaWxlbmFtZShrZXlzQmFja3VwLCB1c2VyLm5hbWUpLCAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04Jyk7XG5cdH07XG5cblx0JHNjb3BlLmdlbmVyYXRlS2V5cyA9ICgpID0+IHtcblx0XHRsb2FkZXIucmVzZXRQcm9ncmVzcygpO1xuXHRcdGxvYWRlci5zaG93TG9hZGVyKHRydWUpO1xuXHRcdGxvYWRlci5sb2FkTG9naW5BcHBsaWNhdGlvbih7c3RhdGU6ICdjaG9vc2VQYXNzd29yZEludHJvJywgbm9EZWxheTogdHJ1ZX0pO1xuXHR9O1xuXG5cdCRzY29wZS5yZW1vdmVEZWNyeXB0ZWRLZXlzID0gKCkgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdGNvbnN0IGNvbmZpcm1lZCA9IHlpZWxkIGNvLmRlZihkaWFsb2dzLmNvbmZpcm0odHJhbnNsYXRpb25zLlRJVExFX0NPTkZJUk0sIHRyYW5zbGF0aW9ucy5MQl9DT05GSVJNX0tFWVNfUkVNT1ZBTCkucmVzdWx0LCAnY2FuY2VsbGVkJyk7XG5cdFx0aWYgKGNvbmZpcm1lZCA9PSAnY2FuY2VsbGVkJylcblx0XHRcdHJldHVybjtcblxuXHRcdGNyeXB0by5yZW1vdmVTZW5zaXRpdmVLZXlzKHRydWUpO1xuXHR9KTtcblxuXHQkc2NvcGUuZXhwb3J0S2V5cyA9ICgpID0+IHtcblx0XHR2YXIga2V5c0JhY2t1cCA9IGNyeXB0b0tleXMuZXhwb3J0S2V5cygpO1xuXHRcdHNhdmVyLnNhdmVBcyhrZXlzQmFja3VwLCBjcnlwdG9LZXlzLmdldEV4cG9ydEZpbGVuYW1lKGtleXNCYWNrdXAsIHVzZXIubmFtZSksICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnKTtcblx0fTtcblxuXHQkc2NvcGUuZXhwb3J0UHVibGljS2V5ID0gKGtleSkgPT4ge1xuXHRcdHNhdmVyLnNhdmVBcyhjcnlwdG9LZXlzLmV4cG9ydFB1YmxpY0tleUJ5RmluZ2VycHJpbnQoa2V5LmZpbmdlcnByaW50KSwga2V5LmVtYWlsICsgJy5hc2MnLCAndGV4dC9wbGFpbjtjaGFyc2V0PXV0Zi04Jyk7XG5cdH07XG5cblx0JHNjb3BlLnNlbmRLZXkgPSAoa2V5KSA9PiB7XG5cdFx0cm91dGVyLnNob3dQb3B1cCgnY29tcG9zZScsIHtwdWJsaWNLZXk6IGtleS5maW5nZXJwcmludH0pO1xuXHR9O1xuXG5cdCRzY29wZS5pbXBvcnRLZXlzID0gKGRhdGEpID0+IHtcblx0XHR0cnkge1xuXHRcdFx0Y3J5cHRvS2V5cy5pbXBvcnRLZXlzKGRhdGEpO1xuXHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0Y29uc29sZS5sb2coJ0xCX0NBTk5PVF9JTVBPUlRfJywgZXJyLm1lc3NhZ2UpO1xuXHRcdFx0Y29uc3QgdHJhbnNsYXRlZEVycm9yTWVzc2FnZSA9IHRyYW5zbGF0aW9uc1snTEJfQ0FOTk9UX0lNUE9SVF8nICsgZXJyLm1lc3NhZ2VdO1xuXG5cdFx0XHRub3RpZmljYXRpb25zLnNldCgnaW1wb3J0LWtleXMtZmFpbCcsIHtcblx0XHRcdFx0dGV4dDogdHJhbnNsYXRlZEVycm9yTWVzc2FnZSA/IHRyYW5zbGF0ZWRFcnJvck1lc3NhZ2UgOiB0cmFuc2xhdGlvbnMuTEJfQ0FOTk9UX0lNUE9SVCxcblx0XHRcdFx0bmFtZXNwYWNlOiAnc2V0dGluZ3MnXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0aW5ib3guaW52YWxpZGF0ZUVtYWlsQ2FjaGUoKTtcblx0fTtcblxuXHRsZXQgdXBkYXRlVGltZW91dCA9IG51bGw7XG5cdGxldCBpc0xhdmFib29tU3luY1Jlc3RvcmVkID0gZmFsc2U7XG5cdCRzY29wZS4kd2F0Y2goJ3NldHRpbmdzLmlzTGF2YWJvb21TeW5jZWQnLCAobywgbikgPT4ge1xuXHRcdGlmIChvID09PSBuIHx8IGlzTGF2YWJvb21TeW5jUmVzdG9yZWQpIHtcblx0XHRcdGlzTGF2YWJvb21TeW5jUmVzdG9yZWQgPSBmYWxzZTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjbyAoZnVuY3Rpb24gKigpe1xuXHRcdFx0aWYgKCEkc2NvcGUuc2V0dGluZ3MuaXNMYXZhYm9vbVN5bmNlZCkge1xuXHRcdFx0XHRjb25zdCBjb25maXJtZWQgPSB5aWVsZCBjby5kZWYoZGlhbG9ncy5jcmVhdGUoXG5cdFx0XHRcdFx0Jy9wYXJ0aWFscy9sc09mZi5odG1sJyxcblx0XHRcdFx0XHQnQ3RybExzT2ZmJ1xuXHRcdFx0XHQpLnJlc3VsdCwgJ2NhbmNlbGxlZCcpO1xuXG5cdFx0XHRcdGlmIChjb25maXJtZWQgPT0gJ2NhbmNlbGxlZCcpIHtcblx0XHRcdFx0XHRpc0xhdmFib29tU3luY1Jlc3RvcmVkID0gdHJ1ZTtcblx0XHRcdFx0XHQkc2NvcGUuc2V0dGluZ3MuaXNMYXZhYm9vbVN5bmNlZCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmKCRzY29wZS5zZXR0aW5ncy5pc0xhdmFib29tU3luY2VkKXtcblx0XHRcdFx0bGV0IGtleXNCYWNrdXAgPSBjcnlwdG9LZXlzLmV4cG9ydEtleXModXNlci5lbWFpbCk7XG5cdFx0XHRcdCRzY29wZS5zZXR0aW5ncy5rZXlyaW5nID0ga2V5c0JhY2t1cDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCRzY29wZS5zZXR0aW5ncy5rZXlyaW5nID0gJyc7XG5cblx0XHRcdFx0bGV0IGtleXNCYWNrdXAgPSBjcnlwdG9LZXlzLmV4cG9ydEtleXModXNlci5lbWFpbCk7XG5cdFx0XHRcdHNhdmVyLnNhdmVBcyhrZXlzQmFja3VwLCBjcnlwdG9LZXlzLmdldEV4cG9ydEZpbGVuYW1lKGtleXNCYWNrdXAsIHVzZXIubmFtZSksICd0ZXh0L3BsYWluO2NoYXJzZXQ9dXRmLTgnKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKE9iamVjdC5rZXlzKCRzY29wZS5zZXR0aW5ncykubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR1cGRhdGVUaW1lb3V0ID0gJHRpbWVvdXQuc2NoZWR1bGVQcm9taXNlKHVwZGF0ZVRpbWVvdXQsICgpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0eWllbGQgdXNlci51cGRhdGUoJHNjb3BlLnNldHRpbmdzKTtcblxuXHRcdFx0XHRcdFx0bGV0IGtleXMgPSBjcnlwdG8uY2xlYXJQZXJtYW5lbnRQcml2YXRlS2V5c0ZvckVtYWlsKHVzZXIuZW1haWwpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2NsZWFyUGVybWFuZW50UHJpdmF0ZUtleXNGb3JFbWFpbCByZXR1cm5lZCcsIGtleXMpO1xuXHRcdFx0XHRcdFx0aWYgKCRzY29wZS5zZXR0aW5ncy5pc0xhdmFib29tU3luY2VkKSB7XG5cdFx0XHRcdFx0XHRcdGNyeXB0by5pbml0aWFsaXplKHtpc1Nob3J0TWVtb3J5OiB0cnVlfSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRjcnlwdG8uaW5pdGlhbGl6ZSh7aXNTaG9ydE1lbW9yeTogZmFsc2V9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNyeXB0by5yZXN0b3JlUHJpdmF0ZUtleXMoLi4ua2V5cyk7XG5cblx0XHRcdFx0XHRcdG5vdGlmaWNhdGlvbnMuc2V0KCdscy1vaycsIHtcblx0XHRcdFx0XHRcdFx0dGV4dDogJHNjb3BlLnNldHRpbmdzLmlzTGF2YWJvb21TeW5jZWQgPyB0cmFuc2xhdGlvbnMuTEJfTEFWQUJPT01fU1lOQ19BQ1RJVkFURUQgOiB0cmFuc2xhdGlvbnMuTEJfTEFWQUJPT01fU1lOQ19ERUFDVElWQVRFRCxcblx0XHRcdFx0XHRcdFx0dHlwZTogJ2luZm8nLFxuXHRcdFx0XHRcdFx0XHR0aW1lb3V0OiAzMDAwLFxuXHRcdFx0XHRcdFx0XHRuYW1lc3BhY2U6ICdzZXR0aW5ncydcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRcdFx0bm90aWZpY2F0aW9ucy5zZXQoJ2xzLWZhaWwnLCB7XG5cdFx0XHRcdFx0XHRcdHRleHQ6IHRyYW5zbGF0aW9ucy5MQl9MQVZBQk9PTV9TWU5DX0NBTk5PVF9VUERBVEUsXG5cdFx0XHRcdFx0XHRcdG5hbWVzcGFjZTogJ3NldHRpbmdzJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSwgMTAwMCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sIHRydWUpO1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsSecurityKey.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($scope, $timeout, $translate, co, consts, crypto, notifications) {\n\tconsole.log('CtrlSettingsSecurityKey instantiated with key', $scope.key);\n\n\tvar translations = {\n\t\tLB_PRIVATE_KEY_DECRYPTED: '%'\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.SETTINGS.SECURITY');\n\n\t$scope.$watch('key.decryptPassword', function (o, n) {\n\t\tif (o == n) return;\n\n\t\tif ($scope.key) {\n\t\t\tco(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\t\treturn $scope.key.decrypt($scope.key.decryptPassword);\n\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tif (!context$3$0.sent) {\n\t\t\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnotifications.set('private-key-decrypted-ok', {\n\t\t\t\t\t\t\t\ttext: translations.LB_PRIVATE_KEY_DECRYPTED({ email: $scope.email }),\n\t\t\t\t\t\t\t\ttype: 'info',\n\t\t\t\t\t\t\t\ttimeout: 3000,\n\t\t\t\t\t\t\t\tnamespace: 'settings'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnotifications.unSet('no-key', 'mailbox');\n\n\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t\t}\n\t\t\t\t}, callee$2$0, this);\n\t\t\t}));\n\t\t}\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxTZXR0aW5nc1NlY3VyaXR5S2V5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsYUFBYSxFQUFLO0FBQ2xHLFFBQU8sQ0FBQyxHQUFHLENBQUMsK0NBQStDLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDOztBQUV6RSxLQUFNLFlBQVksR0FBRztBQUNwQiwwQkFBd0IsRUFBRSxHQUFHO0VBQzdCLENBQUM7QUFDRixXQUFVLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSx3QkFBd0IsQ0FBQyxDQUFDOztBQUVoRSxPQUFNLENBQUMsTUFBTSxDQUFDLHFCQUFxQixFQUFFLFVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBSztBQUM5QyxNQUFJLENBQUMsSUFBSSxDQUFDLEVBQ1QsT0FBTzs7QUFFUixNQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDZixLQUFFLHlCQUFDOzs7OztjQUNRLE1BQU0sQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDOzs7Ozs7OztBQUN2RCxvQkFBYSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsRUFBRTtBQUM3QyxZQUFJLEVBQUUsWUFBWSxDQUFDLHdCQUF3QixDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLLEVBQUMsQ0FBQztBQUNsRSxZQUFJLEVBQUUsTUFBTTtBQUNaLGVBQU8sRUFBRSxJQUFJO0FBQ2IsaUJBQVMsRUFBRSxVQUFVO1FBQ3JCLENBQUMsQ0FBQztBQUNILG9CQUFhLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRSxTQUFTLENBQUMsQ0FBQzs7Ozs7OztJQUUxQyxFQUFDLENBQUM7R0FDSDtFQUNELENBQUMsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vY29udHJvbGxlcnMvY3RybFNldHRpbmdzU2VjdXJpdHlLZXkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHNjb3BlLCAkdGltZW91dCwgJHRyYW5zbGF0ZSwgY28sIGNvbnN0cywgY3J5cHRvLCBub3RpZmljYXRpb25zKSA9PiB7XG5cdGNvbnNvbGUubG9nKCdDdHJsU2V0dGluZ3NTZWN1cml0eUtleSBpbnN0YW50aWF0ZWQgd2l0aCBrZXknLCAkc2NvcGUua2V5KTtcblxuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0TEJfUFJJVkFURV9LRVlfREVDUllQVEVEOiAnJSdcblx0fTtcblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5TRVRUSU5HUy5TRUNVUklUWScpO1xuXG5cdCRzY29wZS4kd2F0Y2goJ2tleS5kZWNyeXB0UGFzc3dvcmQnLCAobywgbikgPT4ge1xuXHRcdGlmIChvID09IG4pXG5cdFx0XHRyZXR1cm47XG5cdFx0XG5cdFx0aWYgKCRzY29wZS5rZXkpIHtcblx0XHRcdGNvKGZ1bmN0aW9uICooKXtcblx0XHRcdFx0aWYgKHlpZWxkICRzY29wZS5rZXkuZGVjcnlwdCgkc2NvcGUua2V5LmRlY3J5cHRQYXNzd29yZCkpIHtcblx0XHRcdFx0XHRub3RpZmljYXRpb25zLnNldCgncHJpdmF0ZS1rZXktZGVjcnlwdGVkLW9rJywge1xuXHRcdFx0XHRcdFx0dGV4dDogdHJhbnNsYXRpb25zLkxCX1BSSVZBVEVfS0VZX0RFQ1JZUFRFRCh7ZW1haWw6ICRzY29wZS5lbWFpbH0pLFxuXHRcdFx0XHRcdFx0dHlwZTogJ2luZm8nLFxuXHRcdFx0XHRcdFx0dGltZW91dDogMzAwMCxcblx0XHRcdFx0XHRcdG5hbWVzcGFjZTogJ3NldHRpbmdzJ1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG5vdGlmaWNhdGlvbnMudW5TZXQoJ25vLWtleScsICdtYWlsYm94Jyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fSk7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/$sanitize.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($delegate, $injector, utils) {\n\tvar self = $delegate;\n\n\tvar getDOM = function getDOM(html) {\n\t\tvar dom = new DOMParser().parseFromString(html, 'text/html');\n\t\treturn dom.querySelector('body');\n\t};\n\n\tvar backupStyles = function backupStyles(dom, opts) {\n\t\tvar level = arguments[2] === undefined ? 0 : arguments[2];\n\n\t\tvar processNode = function processNode(node) {\n\t\t\tvar style = node.getAttribute('style');\n\t\t\tif (!style) return;\n\n\t\t\tif (style) style = style.trim();\n\t\t\tif (!style) return;\n\n\t\t\tvar key = 'i' + opts.styleIndex;\n\t\t\topts.styles[key] = {\n\t\t\t\tstyle: style,\n\t\t\t\ttitle: node.getAttribute('title')\n\t\t\t};\n\t\t\tnode.setAttribute('title', '' + opts.uniqKey + ':' + opts.styleIndex);\n\t\t\topts.styleIndex++;\n\t\t};\n\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = dom.childNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar node = _step.value;\n\n\t\t\t\tif (node.getAttribute) processNode(node);\n\n\t\t\t\tif (node.childNodes) backupStyles(node, opts, level + 1);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t_iterator['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar restoreStyles = function restoreStyles(dom, opts) {\n\t\tvar level = arguments[2] === undefined ? 0 : arguments[2];\n\n\t\tvar processNode = function processNode(node) {\n\t\t\tvar text = node.getAttribute('title');\n\t\t\tvar parts = text ? text.split(':') : null;\n\t\t\tvar styleIndex = parts && parts[0] == opts.uniqKey ? parts[1] : null;\n\n\t\t\tif (styleIndex !== null) {\n\t\t\t\tvar style = opts.styles['i' + styleIndex];\n\t\t\t\tnode.setAttribute('style', style.style);\n\t\t\t\tif (style.title) node.setAttribute('title', style.title);else node.removeAttribute('title');\n\t\t\t}\n\t\t};\n\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = dom.childNodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar node = _step2.value;\n\n\t\t\t\tif (node.getAttribute) processNode(node);\n\n\t\t\t\tif (node.childNodes) restoreStyles(node, opts, level + 1);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2['return']) {\n\t\t\t\t\t_iterator2['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (level === 0) {\n\t\t\tvar _iteratorNormalCompletion3 = true;\n\t\t\tvar _didIteratorError3 = false;\n\t\t\tvar _iteratorError3 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator3 = opts.removeNodes[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\t\tvar node = _step3.value;\n\n\t\t\t\t\tnode.parentNode.removeChild(node);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t_iteratorError3 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3['return']) {\n\t\t\t\t\t\t_iterator3['return']();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction sanitize(html, isAllowed, result) {\n\t\tvar dom = getDOM(html);\n\n\t\tvar stylesOpts = {\n\t\t\tuniqKey: utils.getRandomString(16),\n\t\t\tstyleIndex: 0,\n\t\t\tstyles: {},\n\t\t\tremoveNodes: []\n\t\t};\n\n\t\tbackupStyles(dom, stylesOpts);\n\n\t\tvar sanitizedEmailBody = $delegate(dom.innerHTML);\n\t\tdom = getDOM(sanitizedEmailBody);\n\n\t\tif (isAllowed) restoreStyles(dom, stylesOpts);\n\n\t\tif (result) result.hasStyles = stylesOpts.styleIndex > 0;\n\n\t\treturn dom.innerHTML;\n\t}\n\n\tfunction sanitizer(html) {\n\t\tvar user = $injector.get('user');\n\n\t\tif (user.settings.styles == 'none') return $delegate(html);\n\n\t\tif (user.settings.styles == 'all') return sanitize(html, true);\n\n\t\treturn $delegate(html);\n\t}\n\n\treturn sanitizer;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvJHNhbml0aXplLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUs7QUFDOUQsS0FBTSxJQUFJLEdBQUcsU0FBUyxDQUFDOztBQUV2QixLQUFNLE1BQU0sR0FBRyxTQUFULE1BQU0sQ0FBSSxJQUFJLEVBQUs7QUFDeEIsTUFBSSxHQUFHLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzdELFNBQU8sR0FBRyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztFQUNqQyxDQUFDOztBQUVGLEtBQU0sWUFBWSxHQUFHLFNBQWYsWUFBWSxDQUFJLEdBQUcsRUFBRSxJQUFJLEVBQWdCO01BQWQsS0FBSyxnQ0FBRyxDQUFDOztBQUN6QyxNQUFNLFdBQVcsR0FBRyxTQUFkLFdBQVcsQ0FBSSxJQUFJLEVBQUs7QUFDN0IsT0FBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2QyxPQUFJLENBQUMsS0FBSyxFQUNULE9BQU87O0FBRVIsT0FBSSxLQUFLLEVBQ1IsS0FBSyxHQUFHLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztBQUN0QixPQUFJLENBQUMsS0FBSyxFQUNULE9BQU87O0FBRVIsT0FBTSxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7QUFDbEMsT0FBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FBRztBQUNsQixTQUFLLEVBQUwsS0FBSztBQUNMLFNBQUssRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQztJQUNqQyxDQUFDO0FBQ0YsT0FBSSxDQUFDLFlBQVks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Q0FBQyxDQUFDOztBQUVoQyxNQUFJLE1BQU0sRUFDVCxNQUFNLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDOztBQUU5QyxTQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUM7RUFDckI7O0FBRUQsVUFBUyxTQUFTLENBQUUsSUFBSSxFQUFFO0FBQ3pCLE1BQU0sSUFBSSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRW5DLE1BQUksSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLElBQUksTUFBTSxFQUNqQyxPQUFPLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFeEIsTUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sSUFBSSxLQUFLLEVBQ2hDLE9BQU8sUUFBUSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFN0IsU0FBTyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDdkI7O0FBRUQsUUFBTyxTQUFTLENBQUM7Q0FDakIsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kZWNvcmF0b3JzLyRzYW5pdGl6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkZGVsZWdhdGUsICRpbmplY3RvciwgdXRpbHMpID0+IHtcblx0Y29uc3Qgc2VsZiA9ICRkZWxlZ2F0ZTtcblxuXHRjb25zdCBnZXRET00gPSAoaHRtbCkgPT4ge1xuXHRcdHZhciBkb20gPSBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGh0bWwsICd0ZXh0L2h0bWwnKTtcblx0XHRyZXR1cm4gZG9tLnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblx0fTtcblxuXHRjb25zdCBiYWNrdXBTdHlsZXMgPSAoZG9tLCBvcHRzLCBsZXZlbCA9IDApID0+IHtcblx0XHRjb25zdCBwcm9jZXNzTm9kZSA9IChub2RlKSA9PiB7XG5cdFx0XHRsZXQgc3R5bGUgPSBub2RlLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcblx0XHRcdGlmICghc3R5bGUpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0aWYgKHN0eWxlKVxuXHRcdFx0XHRzdHlsZSA9IHN0eWxlLnRyaW0oKTtcblx0XHRcdGlmICghc3R5bGUpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0Y29uc3Qga2V5ID0gJ2knICsgb3B0cy5zdHlsZUluZGV4O1xuXHRcdFx0b3B0cy5zdHlsZXNba2V5XSA9IHtcblx0XHRcdFx0c3R5bGUsXG5cdFx0XHRcdHRpdGxlOiBub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKVxuXHRcdFx0fTtcblx0XHRcdG5vZGUuc2V0QXR0cmlidXRlKCd0aXRsZScsIGAke29wdHMudW5pcUtleX06JHtvcHRzLnN0eWxlSW5kZXh9YCk7XG5cdFx0XHRvcHRzLnN0eWxlSW5kZXgrKztcblx0XHR9O1xuXG5cdFx0Zm9yKGxldCBub2RlIG9mIGRvbS5jaGlsZE5vZGVzKSB7XG5cdFx0XHRpZiAobm9kZS5nZXRBdHRyaWJ1dGUpXG5cdFx0XHRcdHByb2Nlc3NOb2RlKG5vZGUpO1xuXG5cdFx0XHRpZiAobm9kZS5jaGlsZE5vZGVzKVxuXHRcdFx0XHRiYWNrdXBTdHlsZXMobm9kZSwgb3B0cywgbGV2ZWwgKyAxKTtcblx0XHR9XG5cdH07XG5cblx0Y29uc3QgcmVzdG9yZVN0eWxlcyA9IChkb20sIG9wdHMsIGxldmVsID0gMCkgPT4ge1xuXHRcdGNvbnN0IHByb2Nlc3NOb2RlID0gKG5vZGUpID0+IHtcblx0XHRcdGNvbnN0IHRleHQgPSBub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKTtcblx0XHRcdGNvbnN0IHBhcnRzID0gdGV4dCA/IHRleHQuc3BsaXQoJzonKSA6IG51bGw7XG5cdFx0XHRjb25zdCBzdHlsZUluZGV4ID0gcGFydHMgJiYgcGFydHNbMF0gPT0gb3B0cy51bmlxS2V5ID8gcGFydHNbMV0gOiBudWxsO1xuXG5cdFx0XHRpZiAoc3R5bGVJbmRleCAhPT0gbnVsbCkge1xuXHRcdFx0XHRjb25zdCBzdHlsZSA9IG9wdHMuc3R5bGVzWydpJyArIHN0eWxlSW5kZXhdO1xuXHRcdFx0XHRub2RlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBzdHlsZS5zdHlsZSk7XG5cdFx0XHRcdGlmIChzdHlsZS50aXRsZSlcblx0XHRcdFx0XHRub2RlLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBzdHlsZS50aXRsZSk7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRub2RlLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Zm9yKGxldCBub2RlIG9mIGRvbS5jaGlsZE5vZGVzKSB7XG5cdFx0XHRpZiAobm9kZS5nZXRBdHRyaWJ1dGUpXG5cdFx0XHRcdHByb2Nlc3NOb2RlKG5vZGUpO1xuXG5cdFx0XHRpZiAobm9kZS5jaGlsZE5vZGVzKVxuXHRcdFx0XHRyZXN0b3JlU3R5bGVzKG5vZGUsIG9wdHMsIGxldmVsICsgMSk7XG5cdFx0fVxuXG5cdFx0aWYgKGxldmVsID09PSAwKSB7XG5cdFx0XHRmb3IobGV0IG5vZGUgb2Ygb3B0cy5yZW1vdmVOb2Rlcylcblx0XHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG5vZGUpO1xuXHRcdH1cblx0fTtcblxuXHRmdW5jdGlvbiBzYW5pdGl6ZShodG1sLCBpc0FsbG93ZWQsIHJlc3VsdCkge1xuXHRcdGxldCBkb20gPSBnZXRET00oaHRtbCk7XG5cblx0XHRjb25zdCBzdHlsZXNPcHRzID0ge1xuXHRcdFx0dW5pcUtleTogdXRpbHMuZ2V0UmFuZG9tU3RyaW5nKDE2KSxcblx0XHRcdHN0eWxlSW5kZXg6IDAsXG5cdFx0XHRzdHlsZXM6IHt9LFxuXHRcdFx0cmVtb3ZlTm9kZXM6IFtdXG5cdFx0fTtcblxuXHRcdGJhY2t1cFN0eWxlcyhkb20sIHN0eWxlc09wdHMpO1xuXG5cdFx0Y29uc3Qgc2FuaXRpemVkRW1haWxCb2R5ID0gJGRlbGVnYXRlKGRvbS5pbm5lckhUTUwpO1xuXHRcdGRvbSA9IGdldERPTShzYW5pdGl6ZWRFbWFpbEJvZHkpO1xuXG5cdFx0aWYgKGlzQWxsb3dlZClcblx0XHRcdHJlc3RvcmVTdHlsZXMoZG9tLCBzdHlsZXNPcHRzKTtcblxuXHRcdGlmIChyZXN1bHQpXG5cdFx0XHRyZXN1bHQuaGFzU3R5bGVzID0gc3R5bGVzT3B0cy5zdHlsZUluZGV4ID4gMDtcblxuXHRcdHJldHVybiBkb20uaW5uZXJIVE1MO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2FuaXRpemVyIChodG1sKSB7XG5cdFx0Y29uc3QgdXNlciA9ICRpbmplY3Rvci5nZXQoJ3VzZXInKTtcblxuXHRcdGlmICh1c2VyLnNldHRpbmdzLnN0eWxlcyA9PSAnbm9uZScpXG5cdFx0XHRyZXR1cm4gJGRlbGVnYXRlKGh0bWwpO1xuXG5cdFx0aWYgKHVzZXIuc2V0dGluZ3Muc3R5bGVzID09ICdhbGwnKVxuXHRcdFx0cmV0dXJuIHNhbml0aXplKGh0bWwsIHRydWUpO1xuXG5cdFx0cmV0dXJuICRkZWxlZ2F0ZShodG1sKTtcblx0fVxuXG5cdHJldHVybiBzYW5pdGl6ZXI7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/contacts.js":{"source":"\"use strict\";\n\nmodule.exports = /*@ngInject*/function ($delegate, $rootScope, co, consts, Cache, Proxy) {\n\tvar self = $delegate;\n\n\tvar proxy = new Proxy($delegate);\n\n\treturn $delegate;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvY29udGFjdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBSztBQUNsRixLQUFNLElBQUksR0FBRyxTQUFTLENBQUM7O0FBRXZCLEtBQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUVuQyxRQUFPLFNBQVMsQ0FBQztDQUNqQixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvY29udGFjdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJGRlbGVnYXRlLCAkcm9vdFNjb3BlLCBjbywgY29uc3RzLCBDYWNoZSwgUHJveHkpID0+IHtcblx0Y29uc3Qgc2VsZiA9ICRkZWxlZ2F0ZTtcblxuXHRjb25zdCBwcm94eSA9IG5ldyBQcm94eSgkZGVsZWdhdGUpO1xuXG5cdHJldHVybiAkZGVsZWdhdGU7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/inbox.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($delegate, $rootScope, $translate, co, consts, utils, LavaboomAPI, Cache, Proxy) {\n\tvar self = $delegate;\n\n\tvar proxy = new Proxy($delegate);\n\n\tvar CACHE_UNFOLD = {\n\t\tunfold: function unfold(item) {\n\t\t\treturn item.id;\n\t\t}\n\t};\n\n\tvar cache = new Cache('default cache', {\n\t\tttl: consts.INBOX_LABELS_CACHE_TTL\n\t});\n\tvar threadsCache = new Cache('threads cache', angular.extend({}, {\n\t\tttl: consts.INBOX_THREADS_CACHE_TTL\n\t}, {\n\t\tlist: function list(value) {\n\t\t\treturn value.list;\n\t\t}\n\t}, CACHE_UNFOLD));\n\tvar emailsCache = new Cache('emails cache', angular.extend({}, {\n\t\tttl: consts.INBOX_EMAILS_CACHE_TTL\n\t}, CACHE_UNFOLD));\n\n\tvar requestModifyLabelProxy = regeneratorRuntime.mark(function requestModifyLabelProxy(requestModifyLabel, args) {\n\t\tvar _args, thread, labels, newLabels, allLabels, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, labelName;\n\n\t\treturn regeneratorRuntime.wrap(function requestModifyLabelProxy$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args = babelHelpers.slicedToArray(args, 1);\n\t\t\t\t\tthread = _args[0];\n\t\t\t\t\tcontext$2$0.next = 4;\n\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\tcase 4:\n\t\t\t\t\tlabels = context$2$0.sent;\n\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\treturn requestModifyLabel.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 7:\n\t\t\t\t\tnewLabels = context$2$0.sent;\n\t\t\t\t\tallLabels = utils.uniq([].concat(babelHelpers.toConsumableArray(thread.labels.map(function (labelId) {\n\t\t\t\t\t\treturn labels.byId[labelId].name;\n\t\t\t\t\t})), babelHelpers.toConsumableArray(newLabels.map(function (labelId) {\n\t\t\t\t\t\treturn labels.byId[labelId].name;\n\t\t\t\t\t}))));\n\n\t\t\t\t\tallLabels.forEach(function (labelName) {\n\t\t\t\t\t\tthreadsCache.invalidate(labelName);\n\t\t\t\t\t});\n\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\tcontext$2$0.prev = 13;\n\t\t\t\t\tfor (_iterator = allLabels[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\tlabelName = _step.value;\n\n\t\t\t\t\t\tconsole.log('requestModifyLabel proxy label update: ', labelName);\n\n\t\t\t\t\t\t$rootScope.$broadcast('inbox-threads', labelName);\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext$2$0.next = 21;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 17:\n\t\t\t\t\tcontext$2$0.prev = 17;\n\t\t\t\t\tcontext$2$0.t17 = context$2$0['catch'](13);\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = context$2$0.t17;\n\n\t\t\t\tcase 21:\n\t\t\t\t\tcontext$2$0.prev = 21;\n\t\t\t\t\tcontext$2$0.prev = 22;\n\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t\t_iterator['return']();\n\t\t\t\t\t}\n\n\t\t\t\tcase 24:\n\t\t\t\t\tcontext$2$0.prev = 24;\n\n\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\tcontext$2$0.next = 27;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow _iteratorError;\n\n\t\t\t\tcase 27:\n\t\t\t\t\treturn context$2$0.finish(24);\n\n\t\t\t\tcase 28:\n\t\t\t\t\treturn context$2$0.finish(21);\n\n\t\t\t\tcase 29:\n\t\t\t\t\treturn context$2$0.abrupt('return', newLabels);\n\n\t\t\t\tcase 30:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, requestModifyLabelProxy, this, [[13, 17, 21, 29], [22,, 24, 28]]);\n\t});\n\n\tproxy.methodCall('createLabel', regeneratorRuntime.mark(function callee$1$0(createLabel, args) {\n\t\tvar res;\n\t\treturn regeneratorRuntime.wrap(function callee$1$0$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tcontext$2$0.next = 2;\n\t\t\t\t\treturn createLabel.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 2:\n\t\t\t\t\tres = context$2$0.sent;\n\n\t\t\t\t\tcache.invalidate('labels');\n\n\t\t\t\t\tcontext$2$0.next = 6;\n\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\tcase 6:\n\t\t\t\t\treturn context$2$0.abrupt('return', context$2$0.sent);\n\n\t\t\t\tcase 7:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$0, this);\n\t}));\n\n\tproxy.methodCall('getLabels', regeneratorRuntime.mark(function callee$1$1(getLabels, args) {\n\t\tvar res;\n\t\treturn regeneratorRuntime.wrap(function callee$1$1$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tres = cache.get('labels');\n\n\t\t\t\t\tif (!res) {\n\t\t\t\t\t\tcontext$2$0.next = 3;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn context$2$0.abrupt('return', res);\n\n\t\t\t\tcase 3:\n\t\t\t\t\tcontext$2$0.next = 5;\n\t\t\t\t\treturn getLabels.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 5:\n\t\t\t\t\tres = context$2$0.sent;\n\n\t\t\t\t\tcache.put('labels', res);\n\n\t\t\t\t\treturn context$2$0.abrupt('return', res);\n\n\t\t\t\tcase 8:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$1, this);\n\t}), true);\n\n\tvar requestListProxy = regeneratorRuntime.mark(function requestListProxy(requestList, args) {\n\t\tvar _args2, labelName, offset, limit, value, newList;\n\n\t\treturn regeneratorRuntime.wrap(function requestListProxy$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args2 = babelHelpers.slicedToArray(args, 3);\n\t\t\t\t\tlabelName = _args2[0];\n\t\t\t\t\toffset = _args2[1];\n\t\t\t\t\tlimit = _args2[2];\n\n\t\t\t\t\tconsole.log('proxy requestList', labelName, offset, limit);\n\n\t\t\t\t\tvalue = threadsCache.get(labelName);\n\n\t\t\t\t\tif (!(!value || !value.isEnd && offset >= value.list.length)) {\n\t\t\t\t\t\tcontext$2$0.next = 12;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext$2$0.next = 9;\n\t\t\t\t\treturn requestList.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 9:\n\t\t\t\t\tnewList = context$2$0.sent;\n\n\t\t\t\t\tif (!newList) newList = [];\n\n\t\t\t\t\tthreadsCache.put(labelName, {\n\t\t\t\t\t\tlist: value && value.list ? utils.uniq(value.list.concat(newList), function (c) {\n\t\t\t\t\t\t\treturn c.id;\n\t\t\t\t\t\t}) : newList,\n\t\t\t\t\t\tisEnd: newList.length < limit\n\t\t\t\t\t});\n\n\t\t\t\tcase 12:\n\n\t\t\t\t\tvalue = threadsCache.get(labelName);\n\t\t\t\t\tconsole.log('requestList cache value is', value);\n\n\t\t\t\t\treturn context$2$0.abrupt('return', value);\n\n\t\t\t\tcase 15:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, requestListProxy, this);\n\t});\n\n\tproxy.methodCall('requestList', regeneratorRuntime.mark(function callee$1$2(requestList, args) {\n\t\tvar _args3, labelName, offset, limit, value;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$2$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args3 = babelHelpers.slicedToArray(args, 3);\n\t\t\t\t\tlabelName = _args3[0];\n\t\t\t\t\toffset = _args3[1];\n\t\t\t\t\tlimit = _args3[2];\n\t\t\t\t\tcontext$2$0.next = 6;\n\t\t\t\t\treturn requestListProxy(requestList, args);\n\n\t\t\t\tcase 6:\n\t\t\t\t\tvalue = context$2$0.sent;\n\n\t\t\t\t\t$rootScope.$broadcast('inbox-threads', labelName);\n\n\t\t\t\t\treturn context$2$0.abrupt('return', value.list.slice(offset, offset + limit));\n\n\t\t\t\tcase 9:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$2, this);\n\t}), true);\n\n\tself.requestListDirect = proxy.unbindedMethodCall('requestList', regeneratorRuntime.mark(function callee$1$3(requestList, args) {\n\t\tvar _args4, labelName, offset, limit, value;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$3$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args4 = babelHelpers.slicedToArray(args, 3);\n\t\t\t\t\tlabelName = _args4[0];\n\t\t\t\t\toffset = _args4[1];\n\t\t\t\t\tlimit = _args4[2];\n\t\t\t\t\tcontext$2$0.next = 6;\n\t\t\t\t\treturn requestListProxy(requestList, args);\n\n\t\t\t\tcase 6:\n\t\t\t\t\tvalue = context$2$0.sent;\n\n\t\t\t\t\t$rootScope.$broadcast('inbox-threads-ready', labelName, value.list);\n\n\t\t\t\t\treturn context$2$0.abrupt('return', value.list);\n\n\t\t\t\tcase 9:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$3, this);\n\t}), true);\n\n\tself.requestListCached = function (labelName) {\n\t\tvar value = threadsCache.get(labelName);\n\n\t\treturn value ? value.list : [];\n\t};\n\n\tproxy.methodCall('getThreadById', regeneratorRuntime.mark(function callee$1$4(getThreadById, args) {\n\t\tvar _args5, threadId, isCachedOnly, r, thread, labels;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$4$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args5 = babelHelpers.slicedToArray(args, 2);\n\t\t\t\t\tthreadId = _args5[0];\n\t\t\t\t\tisCachedOnly = _args5[1];\n\t\t\t\t\tr = threadsCache.getById(threadId);\n\n\t\t\t\t\tif (!r) {\n\t\t\t\t\t\tcontext$2$0.next = 6;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn context$2$0.abrupt('return', r);\n\n\t\t\t\tcase 6:\n\t\t\t\t\tif (!isCachedOnly) {\n\t\t\t\t\t\tcontext$2$0.next = 8;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn context$2$0.abrupt('return', null);\n\n\t\t\t\tcase 8:\n\t\t\t\t\tcontext$2$0.next = 10;\n\t\t\t\t\treturn getThreadById.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 10:\n\t\t\t\t\tthread = context$2$0.sent;\n\t\t\t\t\tcontext$2$0.next = 13;\n\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\tcase 13:\n\t\t\t\t\tlabels = context$2$0.sent;\n\n\t\t\t\t\tthread.labels.forEach(function (labelId) {\n\t\t\t\t\t\tvar labelName = labels.byId[labelId].name;\n\t\t\t\t\t\tthreadsCache.unshiftOnlyIfKeyIsPreset(labelName, thread);\n\n\t\t\t\t\t\t$rootScope.$broadcast('inbox-threads', labelName);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn context$2$0.abrupt('return', thread);\n\n\t\t\t\tcase 16:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$4, this);\n\t}), true);\n\n\tproxy.methodCall('requestDeleteForcefully', regeneratorRuntime.mark(function callee$1$5(requestDeleteForcefully, args) {\n\t\tvar res, _args6, thread, labelsRes;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$5$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tcontext$2$0.next = 2;\n\t\t\t\t\treturn requestDeleteForcefully.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 2:\n\t\t\t\t\tres = context$2$0.sent;\n\t\t\t\t\t_args6 = babelHelpers.slicedToArray(args, 1);\n\t\t\t\t\tthread = _args6[0];\n\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\tcase 7:\n\t\t\t\t\tlabelsRes = context$2$0.sent;\n\n\t\t\t\t\tthread.labels.forEach(function (labelId) {\n\t\t\t\t\t\tvar labelName = labelsRes.byId[labelId].name;\n\t\t\t\t\t\tthreadsCache.invalidate(labelName);\n\t\t\t\t\t\t$rootScope.$broadcast('inbox-threads', labelName);\n\t\t\t\t\t});\n\n\t\t\t\t\treturn context$2$0.abrupt('return', res);\n\n\t\t\t\tcase 10:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$5, this);\n\t}));\n\n\tproxy.methodCall('requestSetLabel', requestModifyLabelProxy);\n\n\tproxy.methodCall('requestRemoveLabel', requestModifyLabelProxy);\n\n\tproxy.methodCall('requestAddLabel', requestModifyLabelProxy);\n\n\tproxy.methodCall('setThreadReadStatus', regeneratorRuntime.mark(function callee$1$6(setThreadReadStatus, args) {\n\t\tvar _args7, threadId, thread;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$6$(context$2$0) {\n\t\t\tvar _this = this;\n\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args7 = babelHelpers.slicedToArray(args, 1);\n\t\t\t\t\tthreadId = _args7[0];\n\t\t\t\t\tthread = threadsCache.getById(threadId);\n\n\t\t\t\t\tif (!thread) {\n\t\t\t\t\t\tcontext$2$0.next = 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn context$2$0.delegateYield(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\t\t\t\tvar labels;\n\t\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\tlabels = context$3$0.sent;\n\n\t\t\t\t\t\t\t\t\tthread.labels.forEach(function (lid) {\n\t\t\t\t\t\t\t\t\t\tvar labelName = labels.byId[lid].name;\n\t\t\t\t\t\t\t\t\t\tconsole.log('setThreadReadStatus decorator for threadId', threadId, 'labelName', labelName);\n\t\t\t\t\t\t\t\t\t\tif (['Inbox'].includes(labelName)) labels.byName[labelName].addReadThreadId(threadId);\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t$rootScope.$broadcast('inbox-labels', labels);\n\n\t\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, callee$2$0, _this);\n\t\t\t\t\t})(), 't18', 5);\n\n\t\t\t\tcase 5:\n\t\t\t\t\tif (!(thread && thread.isRead)) {\n\t\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn context$2$0.abrupt('return');\n\n\t\t\t\tcase 7:\n\t\t\t\t\tcontext$2$0.next = 9;\n\t\t\t\t\treturn setThreadReadStatus.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 9:\n\n\t\t\t\t\tif (thread) thread.isRead = true;\n\n\t\t\t\t\tcache.invalidate('labels');\n\t\t\t\t\tcontext$2$0.next = 13;\n\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\tcase 13:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$6, this);\n\t}));\n\n\tproxy.methodCall('getEmailsByThreadId', regeneratorRuntime.mark(function callee$1$7(getEmailsByThreadId, args) {\n\t\tvar _args8, threadId;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$7$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args8 = babelHelpers.slicedToArray(args, 1);\n\t\t\t\t\tthreadId = _args8[0];\n\n\t\t\t\t\tif (emailsCache.get(threadId)) {\n\t\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext$2$0.next = 5;\n\t\t\t\t\treturn getEmailsByThreadId.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 5:\n\t\t\t\t\tcontext$2$0.t19 = context$2$0.sent;\n\t\t\t\t\temailsCache.put(threadId, context$2$0.t19);\n\n\t\t\t\tcase 7:\n\t\t\t\t\treturn context$2$0.abrupt('return', emailsCache.get(threadId));\n\n\t\t\t\tcase 8:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$7, this);\n\t}), true);\n\n\tproxy.methodCall('getEmailById', regeneratorRuntime.mark(function callee$1$8(getEmailById, args) {\n\t\tvar _args9, emailId, email;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$8$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\t_args9 = babelHelpers.slicedToArray(args, 1);\n\t\t\t\t\temailId = _args9[0];\n\t\t\t\t\temail = emailsCache.getById(emailId);\n\n\t\t\t\t\tif (email) {\n\t\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontext$2$0.next = 6;\n\t\t\t\t\treturn getEmailById.apply(undefined, babelHelpers.toConsumableArray(args));\n\n\t\t\t\tcase 6:\n\t\t\t\t\temail = context$2$0.sent;\n\n\t\t\t\tcase 7:\n\t\t\t\t\treturn context$2$0.abrupt('return', email);\n\n\t\t\t\tcase 8:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$8, this);\n\t}), true);\n\n\tproxy.methodSyncCall('setSortQuery', function (setSortQuery, args) {\n\t\tself.invalidateThreadCache();\n\t\treturn setSortQuery.apply(undefined, babelHelpers.toConsumableArray(args));\n\t});\n\n\t$delegate.invalidateThreadCache = function () {\n\t\tthreadsCache.invalidateAll();\n\t};\n\n\t$delegate.invalidateEmailCache = function () {\n\t\temailsCache.invalidateAll();\n\t};\n\n\tvar events = [];\n\n\tvar handleEvent = function handleEvent(event) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels, labelNames, thread;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tconsole.log('got server event', event);\n\n\t\t\t\t\t\tlabels = cache.get('labels');\n\n\t\t\t\t\t\tif (!labels) {\n\t\t\t\t\t\t\tcontext$3$0.next = 7;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlabelNames = event.labels.map(function (lid) {\n\t\t\t\t\t\t\treturn labels.byId[lid].name;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tlabelNames.forEach(function (labelName) {\n\t\t\t\t\t\t\tif (['Inbox'].includes(labelName)) labels.byName[labelName].addUnreadThreadId(event.thread);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcontext$3$0.next = 9;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tcontext$3$0.next = 9;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tthread = threadsCache.getById(event.thread);\n\n\t\t\t\t\t\tconsole.log('event thread', thread);\n\t\t\t\t\t\tif (thread) {\n\t\t\t\t\t\t\tthreadsCache.invalidate(event.thread);\n\t\t\t\t\t\t\temailsCache.invalidate(event.thread);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\treturn self.getThreadById(event.thread);\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tcontext$3$0.next = 16;\n\t\t\t\t\t\treturn self.getEmailsByThreadId(event.thread);\n\n\t\t\t\t\tcase 16:\n\n\t\t\t\t\t\t$rootScope.$broadcast('inbox-emails', event.thread);\n\t\t\t\t\t\t$rootScope.$broadcast('inbox-new', event.thread);\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tco(regeneratorRuntime.mark(function callee$1$9() {\n\t\tvar _event;\n\n\t\treturn regeneratorRuntime.wrap(function callee$1$9$(context$2$0) {\n\t\t\twhile (1) switch (context$2$0.prev = context$2$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif (!true) {\n\t\t\t\t\t\tcontext$2$0.next = 9;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!(events.length > 0)) {\n\t\t\t\t\t\tcontext$2$0.next = 5;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t_event = events.shift();\n\t\t\t\t\tcontext$2$0.next = 5;\n\t\t\t\t\treturn handleEvent(_event);\n\n\t\t\t\tcase 5:\n\t\t\t\t\tcontext$2$0.next = 7;\n\t\t\t\t\treturn utils.sleep(100);\n\n\t\t\t\tcase 7:\n\t\t\t\t\tcontext$2$0.next = 0;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 9:\n\t\t\t\tcase 'end':\n\t\t\t\t\treturn context$2$0.stop();\n\t\t\t}\n\t\t}, callee$1$9, this);\n\t}));\n\n\t$rootScope.whenInitialized(function () {\n\t\t$rootScope.$on('keyring-updated', function () {\n\t\t\tcache.invalidateAll();\n\t\t\tself.invalidateEmailCache();\n\t\t\tself.invalidateThreadCache();\n\t\t});\n\t\t$rootScope.$on('contacts-changed', function () {\n\t\t\tself.invalidateThreadCache();\n\t\t});\n\t\t$rootScope.$on('logout', function () {\n\t\t\tconsole.log('invalidate inbox caches');\n\t\t\tself.invalidateEmailCache();\n\t\t\tself.invalidateThreadCache();\n\t\t});\n\n\t\tLavaboomAPI.subscribe('receipt', function (msg) {\n\t\t\treturn events.push(msg);\n\t\t});\n\t\tLavaboomAPI.subscribe('delivery', function (msg) {\n\t\t\treturn events.push(msg);\n\t\t});\n\t});\n\n\treturn $delegate;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvaW5ib3guanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBSztBQUNsSCxLQUFNLElBQUksR0FBRyxTQUFTLENBQUM7O0FBRXZCLEtBQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDOztBQUVuQyxLQUFNLFlBQVksR0FBRztBQUNwQixRQUFNLEVBQUUsZ0JBQUEsSUFBSTtVQUFJLElBQUksQ0FBQyxFQUFFO0dBQUE7RUFDdkIsQ0FBQzs7QUFFRixLQUFJLEtBQUssR0FBRyxJQUFJLEtBQUssQ0FBQyxlQUFlLEVBQUU7QUFDdEMsS0FBRyxFQUFFLE1BQU0sQ0FBQyxzQkFBc0I7RUFDbEMsQ0FBQyxDQUFDO0FBQ0gsS0FBSSxZQUFZLEdBQUcsSUFBSSxLQUFLLENBQUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUM5RDtBQUNDLEtBQUcsRUFBRSxNQUFNLENBQUMsdUJBQXVCO0VBQ25DLEVBQ0Q7QUFDQyxNQUFJLEVBQUUsY0FBQSxLQUFLO1VBQUksS0FBSyxDQUFDLElBQUk7R0FBQTtFQUN6QixFQUNELFlBQVksQ0FDWixDQUFDLENBQUM7QUFDSCxLQUFJLFdBQVcsR0FBRyxJQUFJLEtBQUssQ0FBQyxjQUFjLEVBQUUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQzVEO0FBQ0MsS0FBRyxFQUFFLE1BQU0sQ0FBQyxzQkFBc0I7RUFDbEMsRUFDRCxZQUFZLENBQ1osQ0FBQyxDQUFDOztBQUVILEtBQU0sdUJBQXVCLDJCQUFHLFNBQTFCLHVCQUF1QixDQUFj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QkFBcUIsRUFBRSxDQUFDO0dBQzdCLENBQUMsQ0FBQztBQUNILFlBQVUsQ0FBQyxHQUFHLENBQUMsa0JBQWtCLEVBQUUsWUFBTTtBQUN4QyxPQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztHQUM3QixDQUFDLENBQUM7QUFDSCxZQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQzlCLFVBQU8sQ0FBQyxHQUFHLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUN2QyxPQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztBQUM1QixPQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztHQUM3QixDQUFDLENBQUM7O0FBRUgsYUFBVyxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUUsVUFBQyxHQUFHO1VBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7R0FBQSxDQUFDLENBQUM7QUFDNUQsYUFBVyxDQUFDLFNBQVMsQ0FBQyxVQUFVLEVBQUUsVUFBQyxHQUFHO1VBQUssTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7R0FBQSxDQUFDLENBQUM7RUFDN0QsQ0FBQyxDQUFDOztBQUVILFFBQU8sU0FBUyxDQUFDO0NBQ2pCLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZGVjb3JhdG9ycy9pbmJveC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkZGVsZWdhdGUsICRyb290U2NvcGUsICR0cmFuc2xhdGUsIGNvLCBjb25zdHMsIHV0aWxzLCBMYXZhYm9vbUFQSSwgQ2FjaGUsIFByb3h5KSA9PiB7XG5cdGNvbnN0IHNlbGYgPSAkZGVsZWdhdGU7XG5cblx0Y29uc3QgcHJveHkgPSBuZXcgUHJveHkoJGRlbGVnYXRlKTtcblxuXHRjb25zdCBDQUNIRV9VTkZPTEQgPSB7XG5cdFx0dW5mb2xkOiBpdGVtID0+IGl0ZW0uaWRcblx0fTtcblxuXHRsZXQgY2FjaGUgPSBuZXcgQ2FjaGUoJ2RlZmF1bHQgY2FjaGUnLCB7XG5cdFx0dHRsOiBjb25zdHMuSU5CT1hfTEFCRUxTX0NBQ0hFX1RUTFxuXHR9KTtcblx0bGV0IHRocmVhZHNDYWNoZSA9IG5ldyBDYWNoZSgndGhyZWFkcyBjYWNoZScsIGFuZ3VsYXIuZXh0ZW5kKHt9LFxuXHRcdHtcblx0XHRcdHR0bDogY29uc3RzLklOQk9YX1RIUkVBRFNfQ0FDSEVfVFRMXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRsaXN0OiB2YWx1ZSA9PiB2YWx1ZS5saXN0XG5cdFx0fSxcblx0XHRDQUNIRV9VTkZPTERcblx0KSk7XG5cdGxldCBlbWFpbHNDYWNoZSA9IG5ldyBDYWNoZSgnZW1haWxzIGNhY2hlJywgYW5ndWxhci5leHRlbmQoe30sXG5cdFx0e1xuXHRcdFx0dHRsOiBjb25zdHMuSU5CT1hfRU1BSUxTX0NBQ0hFX1RUTFxuXHRcdH0sXG5cdFx0Q0FDSEVfVU5GT0xEXG5cdCkpO1xuXG5cdGNvbnN0IHJlcXVlc3RNb2RpZnlMYWJlbFByb3h5ID0gZnVuY3Rpb24gKihyZXF1ZXN0TW9kaWZ5TGFiZWwsIGFyZ3Mpe1xuXHRcdGNvbnN0IFt0aHJlYWRdID0gYXJncztcblxuXHRcdGNvbnN0IGxhYmVscyA9IHlpZWxkIHNlbGYuZ2V0TGFiZWxzKCk7XG5cdFx0Y29uc3QgbmV3TGFiZWxzID0geWllbGQgcmVxdWVzdE1vZGlmeUxhYmVsKC4uLmFyZ3MpO1xuXHRcdGNvbnN0IGFsbExhYmVscyA9IHV0aWxzLnVuaXEoWy4uLnRocmVhZC5sYWJlbHMubWFwKGxhYmVsSWQgPT4gbGFiZWxzLmJ5SWRbbGFiZWxJZF0ubmFtZSksIC4uLm5ld0xhYmVscy5tYXAobGFiZWxJZCA9PiBsYWJlbHMuYnlJZFtsYWJlbElkXS5uYW1lKV0pO1xuXG5cdFx0YWxsTGFiZWxzLmZvckVhY2gobGFiZWxOYW1lID0+IHtcblx0XHRcdHRocmVhZHNDYWNoZS5pbnZhbGlkYXRlKGxhYmVsTmFtZSk7XG5cdFx0fSk7XG5cblx0XHRmb3IobGV0IGxhYmVsTmFtZSBvZiBhbGxMYWJlbHMpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdyZXF1ZXN0TW9kaWZ5TGFiZWwgcHJveHkgbGFiZWwgdXBkYXRlOiAnLCBsYWJlbE5hbWUpO1xuXG5cdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoYGluYm94LXRocmVhZHNgLCBsYWJlbE5hbWUpO1xuXHRcdH1cblxuXHRcdHJldHVybiBuZXdMYWJlbHM7XG5cdH07XG5cblx0cHJveHkubWV0aG9kQ2FsbCgnY3JlYXRlTGFiZWwnLCBmdW5jdGlvbiAqKGNyZWF0ZUxhYmVsLCBhcmdzKSB7XG5cdFx0Y29uc3QgcmVzID0geWllbGQgY3JlYXRlTGFiZWwoLi4uYXJncyk7XG5cdFx0Y2FjaGUuaW52YWxpZGF0ZSgnbGFiZWxzJyk7XG5cblx0XHRyZXR1cm4geWllbGQgc2VsZi5nZXRMYWJlbHMoKTtcblx0fSk7XG5cblx0cHJveHkubWV0aG9kQ2FsbCgnZ2V0TGFiZWxzJywgZnVuY3Rpb24gKihnZXRMYWJlbHMsIGFyZ3MpIHtcblx0XHRsZXQgcmVzID0gY2FjaGUuZ2V0KCdsYWJlbHMnKTtcblx0XHRpZiAocmVzKVxuXHRcdFx0cmV0dXJuIHJlcztcblxuXHRcdHJlcyA9IHlpZWxkIGdldExhYmVscyguLi5hcmdzKTtcblx0XHRjYWNoZS5wdXQoJ2xhYmVscycsIHJlcyk7XG5cblx0XHRyZXR1cm4gcmVzO1xuXHR9LCB0cnVlKTtcblxuXHRjb25zdCByZXF1ZXN0TGlzdFByb3h5ID0gZnVuY3Rpb24gKihyZXF1ZXN0TGlzdCwgYXJncykge1xuXHRcdGxldCBbbGFiZWxOYW1lLCBvZmZzZXQsIGxpbWl0XSA9IGFyZ3M7XG5cblx0XHRjb25zb2xlLmxvZygncHJveHkgcmVxdWVzdExpc3QnLCBsYWJlbE5hbWUsIG9mZnNldCwgbGltaXQpO1xuXG5cdFx0bGV0IHZhbHVlID0gdGhyZWFkc0NhY2hlLmdldChsYWJlbE5hbWUpO1xuXHRcdGlmICghdmFsdWUgfHwgKCF2YWx1ZS5pc0VuZCAmJiBvZmZzZXQgPj0gdmFsdWUubGlzdC5sZW5ndGgpKSB7XG5cdFx0XHRsZXQgbmV3TGlzdCA9IHlpZWxkIHJlcXVlc3RMaXN0KC4uLmFyZ3MpO1xuXHRcdFx0aWYgKCFuZXdMaXN0KVxuXHRcdFx0XHRuZXdMaXN0ID0gW107XG5cblx0XHRcdHRocmVhZHNDYWNoZS5wdXQobGFiZWxOYW1lLCB7XG5cdFx0XHRcdGxpc3Q6IHZhbHVlICYmIHZhbHVlLmxpc3QgPyB1dGlscy51bmlxKHZhbHVlLmxpc3QuY29uY2F0KG5ld0xpc3QpLCBjID0+IGMuaWQpIDogbmV3TGlzdCxcblx0XHRcdFx0aXNFbmQ6IG5ld0xpc3QubGVuZ3RoIDwgbGltaXRcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHZhbHVlID0gdGhyZWFkc0NhY2hlLmdldChsYWJlbE5hbWUpO1xuXHRcdGNvbnNvbGUubG9nKCdyZXF1ZXN0TGlzdCBjYWNoZSB2YWx1ZSBpcycsIHZhbHVlKTtcblxuXHRcdHJldHVybiB2YWx1ZTtcblx0fTtcblxuXHRwcm94eS5tZXRob2RDYWxsKCdyZXF1ZXN0TGlzdCcsIGZ1bmN0aW9uICoocmVxdWVzdExpc3QsIGFyZ3MpIHtcblx0XHRsZXQgW2xhYmVsTmFtZSwgb2Zmc2V0LCBsaW1pdF0gPSBhcmdzO1xuXG5cdFx0Y29uc3QgdmFsdWUgPSB5aWVsZCByZXF1ZXN0TGlzdFByb3h5KHJlcXVlc3RMaXN0LCBhcmdzKTtcblxuXHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdChgaW5ib3gtdGhyZWFkc2AsIGxhYmVsTmFtZSk7XG5cblx0XHRyZXR1cm4gdmFsdWUubGlzdC5zbGljZShvZmZzZXQsIG9mZnNldCArIGxpbWl0KTtcblx0fSwgdHJ1ZSk7XG5cblx0c2VsZi5yZXF1ZXN0TGlzdERpcmVjdCA9IHByb3h5LnVuYmluZGVkTWV0aG9kQ2FsbCgncmVxdWVzdExpc3QnLCBmdW5jdGlvbiAqKHJlcXVlc3RMaXN0LCBhcmdzKSB7XG5cdFx0bGV0IFtsYWJlbE5hbWUsIG9mZnNldCwgbGltaXRdID0gYXJncztcblxuXHRcdGNvbnN0IHZhbHVlID0geWllbGQgcmVxdWVzdExpc3RQcm94eShyZXF1ZXN0TGlzdCwgYXJncyk7XG5cblx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoYGluYm94LXRocmVhZHMtcmVhZHlgLCBsYWJlbE5hbWUsIHZhbHVlLmxpc3QpO1xuXG5cdFx0cmV0dXJuIHZhbHVlLmxpc3Q7XG5cdH0sIHRydWUpO1xuXG5cdHNlbGYucmVxdWVzdExpc3RDYWNoZWQgPSAobGFiZWxOYW1lKSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSB0aHJlYWRzQ2FjaGUuZ2V0KGxhYmVsTmFtZSk7XG5cblx0XHRyZXR1cm4gdmFsdWUgPyB2YWx1ZS5saXN0IDogW107XG5cdH07XG5cblx0cHJveHkubWV0aG9kQ2FsbCgnZ2V0VGhyZWFkQnlJZCcsIGZ1bmN0aW9uICooZ2V0VGhyZWFkQnlJZCwgYXJncykge1xuXHRcdGNvbnN0IFt0aHJlYWRJZCwgaXNDYWNoZWRPbmx5XSA9IGFyZ3M7XG5cblx0XHRjb25zdCByID0gdGhyZWFkc0NhY2hlLmdldEJ5SWQodGhyZWFkSWQpO1xuXHRcdGlmIChyKVxuXHRcdFx0cmV0dXJuIHI7XG5cblx0XHRpZiAoaXNDYWNoZWRPbmx5KVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cblx0XHRjb25zdCB0aHJlYWQgPSB5aWVsZCBnZXRUaHJlYWRCeUlkKC4uLmFyZ3MpO1xuXG5cdFx0Y29uc3QgbGFiZWxzID0geWllbGQgc2VsZi5nZXRMYWJlbHMoKTtcblxuXHRcdHRocmVhZC5sYWJlbHMuZm9yRWFjaChsYWJlbElkID0+IHtcblx0XHRcdGNvbnN0IGxhYmVsTmFtZSA9IGxhYmVscy5ieUlkW2xhYmVsSWRdLm5hbWU7XG5cdFx0XHR0aHJlYWRzQ2FjaGUudW5zaGlmdE9ubHlJZktleUlzUHJlc2V0KGxhYmVsTmFtZSwgdGhyZWFkKTtcblxuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KGBpbmJveC10aHJlYWRzYCwgbGFiZWxOYW1lKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiB0aHJlYWQ7XG5cdH0sIHRydWUpO1xuXG5cdHByb3h5Lm1ldGhvZENhbGwoJ3JlcXVlc3REZWxldGVGb3JjZWZ1bGx5JywgZnVuY3Rpb24gKihyZXF1ZXN0RGVsZXRlRm9yY2VmdWxseSwgYXJncykge1xuXHRcdGNvbnN0IHJlcyA9IHlpZWxkIHJlcXVlc3REZWxldGVGb3JjZWZ1bGx5KC4uLmFyZ3MpO1xuXG5cdFx0Y29uc3QgW3RocmVhZF0gPSBhcmdzO1xuXG5cdFx0Y29uc3QgbGFiZWxzUmVzID0geWllbGQgc2VsZi5nZXRMYWJlbHMoKTtcblxuXHRcdHRocmVhZC5sYWJlbHMuZm9yRWFjaChsYWJlbElkID0+IHtcblx0XHRcdGNvbnN0IGxhYmVsTmFtZSA9IGxhYmVsc1Jlcy5ieUlkW2xhYmVsSWRdLm5hbWU7XG5cdFx0XHR0aHJlYWRzQ2FjaGUuaW52YWxpZGF0ZShsYWJlbE5hbWUpO1xuXHRcdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KGBpbmJveC10aHJlYWRzYCwgbGFiZWxOYW1lKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXM7XG5cdH0pO1xuXG5cdHByb3h5Lm1ldGhvZENhbGwoJ3JlcXVlc3RTZXRMYWJlbCcsIHJlcXVlc3RNb2RpZnlMYWJlbFByb3h5KTtcblxuXHRwcm94eS5tZXRob2RDYWxsKCdyZXF1ZXN0UmVtb3ZlTGFiZWwnLCByZXF1ZXN0TW9kaWZ5TGFiZWxQcm94eSk7XG5cblx0cHJveHkubWV0aG9kQ2FsbCgncmVxdWVzdEFkZExhYmVsJywgcmVxdWVzdE1vZGlmeUxhYmVsUHJveHkpO1xuXG5cdHByb3h5Lm1ldGhvZENhbGwoJ3NldFRocmVhZFJlYWRTdGF0dXMnLCBmdW5jdGlvbiAqKHNldFRocmVhZFJlYWRTdGF0dXMsIGFyZ3Mpe1xuXHRcdGNvbnN0IFt0aHJlYWRJZF0gPSBhcmdzO1xuXG5cdFx0Y29uc3QgdGhyZWFkID0gdGhyZWFkc0NhY2hlLmdldEJ5SWQodGhyZWFkSWQpO1xuXG5cdFx0aWYgKHRocmVhZCkge1xuXHRcdFx0Y29uc3QgbGFiZWxzID0geWllbGQgc2VsZi5nZXRMYWJlbHMoKTtcblx0XHRcdHRocmVhZC5sYWJlbHMuZm9yRWFjaChsaWQgPT4ge1xuXHRcdFx0XHRjb25zdCBsYWJlbE5hbWUgPSBsYWJlbHMuYnlJZFtsaWRdLm5hbWU7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdzZXRUaHJlYWRSZWFkU3RhdHVzIGRlY29yYXRvciBmb3IgdGhyZWFkSWQnLCB0aHJlYWRJZCwgJ2xhYmVsTmFtZScsIGxhYmVsTmFtZSk7XG5cdFx0XHRcdGlmIChbJ0luYm94J10uaW5jbHVkZXMobGFiZWxOYW1lKSlcblx0XHRcdFx0XHRsYWJlbHMuYnlOYW1lW2xhYmVsTmFtZV0uYWRkUmVhZFRocmVhZElkKHRocmVhZElkKTtcblx0XHRcdH0pO1xuXG5cdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2luYm94LWxhYmVscycsIGxhYmVscyk7XG5cdFx0fVxuXG5cdFx0aWYgKHRocmVhZCAmJiB0aHJlYWQuaXNSZWFkKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0eWllbGQgc2V0VGhyZWFkUmVhZFN0YXR1cyguLi5hcmdzKTtcblxuXHRcdGlmICh0aHJlYWQpXG5cdFx0XHR0aHJlYWQuaXNSZWFkID0gdHJ1ZTtcblxuXHRcdGNhY2hlLmludmFsaWRhdGUoJ2xhYmVscycpO1xuXHRcdHlpZWxkIHNlbGYuZ2V0TGFiZWxzKCk7XG5cdH0pO1xuXG5cdHByb3h5Lm1ldGhvZENhbGwoJ2dldEVtYWlsc0J5VGhyZWFkSWQnLCBmdW5jdGlvbiAqKGdldEVtYWlsc0J5VGhyZWFkSWQsIGFyZ3MpIHtcblx0XHRjb25zdCBbdGhyZWFkSWRdID0gYXJncztcblxuXHRcdGlmICghZW1haWxzQ2FjaGUuZ2V0KHRocmVhZElkKSlcblx0XHRcdGVtYWlsc0NhY2hlLnB1dCh0aHJlYWRJZCwgeWllbGQgZ2V0RW1haWxzQnlUaHJlYWRJZCguLi5hcmdzKSk7XG5cblx0XHRyZXR1cm4gZW1haWxzQ2FjaGUuZ2V0KHRocmVhZElkKTtcblx0fSwgdHJ1ZSk7XG5cblx0cHJveHkubWV0aG9kQ2FsbCgnZ2V0RW1haWxCeUlkJywgZnVuY3Rpb24gKihnZXRFbWFpbEJ5SWQsIGFyZ3MpIHtcblx0XHRjb25zdCBbZW1haWxJZF0gPSBhcmdzO1xuXG5cdFx0bGV0IGVtYWlsID0gZW1haWxzQ2FjaGUuZ2V0QnlJZChlbWFpbElkKTtcblx0XHRpZiAoIWVtYWlsKVxuXHRcdFx0ZW1haWwgPSB5aWVsZCBnZXRFbWFpbEJ5SWQoLi4uYXJncyk7XG5cblx0XHRyZXR1cm4gZW1haWw7XG5cdH0sIHRydWUpO1xuXG5cdHByb3h5Lm1ldGhvZFN5bmNDYWxsKCdzZXRTb3J0UXVlcnknLCBmdW5jdGlvbiAoc2V0U29ydFF1ZXJ5LCBhcmdzKSB7XG5cdFx0c2VsZi5pbnZhbGlkYXRlVGhyZWFkQ2FjaGUoKTtcblx0XHRyZXR1cm4gc2V0U29ydFF1ZXJ5KC4uLmFyZ3MpO1xuXHR9KTtcblxuXHQkZGVsZWdhdGUuaW52YWxpZGF0ZVRocmVhZENhY2hlID0gKCkgPT4ge1xuXHRcdHRocmVhZHNDYWNoZS5pbnZhbGlkYXRlQWxsKCk7XG5cdH07XG5cblx0JGRlbGVnYXRlLmludmFsaWRhdGVFbWFpbENhY2hlID0gKCkgPT4ge1xuXHRcdGVtYWlsc0NhY2hlLmludmFsaWRhdGVBbGwoKTtcblx0fTtcblxuXHRjb25zdCBldmVudHMgPSBbXTtcblxuXHRjb25zdCBoYW5kbGVFdmVudCA9IChldmVudCkgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdGNvbnNvbGUubG9nKCdnb3Qgc2VydmVyIGV2ZW50JywgZXZlbnQpO1xuXG5cdFx0Y29uc3QgbGFiZWxzID0gY2FjaGUuZ2V0KCdsYWJlbHMnKTtcblxuXHRcdGlmIChsYWJlbHMpIHtcblx0XHRcdGNvbnN0IGxhYmVsTmFtZXMgPSBldmVudC5sYWJlbHMubWFwKGxpZCA9PiBsYWJlbHMuYnlJZFtsaWRdLm5hbWUpO1xuXHRcdFx0bGFiZWxOYW1lcy5mb3JFYWNoKGxhYmVsTmFtZSA9PiB7XG5cdFx0XHRcdGlmIChbJ0luYm94J10uaW5jbHVkZXMobGFiZWxOYW1lKSlcblx0XHRcdFx0XHRsYWJlbHMuYnlOYW1lW2xhYmVsTmFtZV0uYWRkVW5yZWFkVGhyZWFkSWQoZXZlbnQudGhyZWFkKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZVxuXHRcdFx0eWllbGQgc2VsZi5nZXRMYWJlbHMoKTtcblxuXHRcdGNvbnN0IHRocmVhZCA9IHRocmVhZHNDYWNoZS5nZXRCeUlkKGV2ZW50LnRocmVhZCk7XG5cdFx0Y29uc29sZS5sb2coJ2V2ZW50IHRocmVhZCcsIHRocmVhZCk7XG5cdFx0aWYgKHRocmVhZCkge1xuXHRcdFx0dGhyZWFkc0NhY2hlLmludmFsaWRhdGUoZXZlbnQudGhyZWFkKTtcblx0XHRcdGVtYWlsc0NhY2hlLmludmFsaWRhdGUoZXZlbnQudGhyZWFkKTtcblx0XHR9XG5cblx0XHR5aWVsZCBzZWxmLmdldFRocmVhZEJ5SWQoZXZlbnQudGhyZWFkKTtcblx0XHR5aWVsZCBzZWxmLmdldEVtYWlsc0J5VGhyZWFkSWQoZXZlbnQudGhyZWFkKTtcblxuXHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdChgaW5ib3gtZW1haWxzYCwgZXZlbnQudGhyZWFkKTtcblx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoYGluYm94LW5ld2AsIGV2ZW50LnRocmVhZCk7XG5cdH0pO1xuXG5cdGNvKGZ1bmN0aW9uICooKSB7XG5cdFx0d2hpbGUgKHRydWUpIHtcblx0XHRcdGlmIChldmVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRjb25zdCBldmVudCA9IGV2ZW50cy5zaGlmdCgpO1xuXHRcdFx0XHR5aWVsZCBoYW5kbGVFdmVudChldmVudCk7XG5cdFx0XHR9XG5cdFx0XHR5aWVsZCB1dGlscy5zbGVlcCgxMDApO1xuXHRcdH1cblx0fSk7XG5cblx0JHJvb3RTY29wZS53aGVuSW5pdGlhbGl6ZWQoKCkgPT4ge1xuXHRcdCRyb290U2NvcGUuJG9uKCdrZXlyaW5nLXVwZGF0ZWQnLCAoKSA9PiB7XG5cdFx0XHRjYWNoZS5pbnZhbGlkYXRlQWxsKCk7XG5cdFx0XHRzZWxmLmludmFsaWRhdGVFbWFpbENhY2hlKCk7XG5cdFx0XHRzZWxmLmludmFsaWRhdGVUaHJlYWRDYWNoZSgpO1xuXHRcdH0pO1xuXHRcdCRyb290U2NvcGUuJG9uKCdjb250YWN0cy1jaGFuZ2VkJywgKCkgPT4ge1xuXHRcdFx0c2VsZi5pbnZhbGlkYXRlVGhyZWFkQ2FjaGUoKTtcblx0XHR9KTtcblx0XHQkcm9vdFNjb3BlLiRvbignbG9nb3V0JywgKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJ2ludmFsaWRhdGUgaW5ib3ggY2FjaGVzJyk7XG5cdFx0XHRzZWxmLmludmFsaWRhdGVFbWFpbENhY2hlKCk7XG5cdFx0XHRzZWxmLmludmFsaWRhdGVUaHJlYWRDYWNoZSgpO1xuXHRcdH0pO1xuXG5cdFx0TGF2YWJvb21BUEkuc3Vic2NyaWJlKCdyZWNlaXB0JywgKG1zZykgPT4gZXZlbnRzLnB1c2gobXNnKSk7XG5cdFx0TGF2YWJvb21BUEkuc3Vic2NyaWJlKCdkZWxpdmVyeScsIChtc2cpID0+IGV2ZW50cy5wdXNoKG1zZykpO1xuXHR9KTtcblxuXHRyZXR1cm4gJGRlbGVnYXRlO1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/taOptions.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($delegate, taRegisterTool, textAngularHelpers) {\n\ttaRegisterTool('submit', {\n\t\ticonclass: 'fa fa-bold',\n\t\ttooltiptext: 'submit',\n\t\taction: function action() {\n\t\t\tif (textAngularHelpers.ctrlEnterCallback) textAngularHelpers.ctrlEnterCallback();\n\t\t},\n\t\tcommandKeyCode: 10\n\t});\n\n\t$delegate.toolbar[1].push('submit');\n\n\treturn $delegate;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvdGFPcHRpb25zLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsU0FBUyxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBSztBQUNoRixlQUFjLENBQUMsUUFBUSxFQUFFO0FBQ3hCLFdBQVMsRUFBRSxZQUFZO0FBQ3ZCLGFBQVcsRUFBRSxRQUFRO0FBQ3JCLFFBQU0sRUFBRSxrQkFBVTtBQUNqQixPQUFJLGtCQUFrQixDQUFDLGlCQUFpQixFQUN2QyxrQkFBa0IsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO0dBQ3hDO0FBQ0QsZ0JBQWMsRUFBRSxFQUFFO0VBQ2xCLENBQUMsQ0FBQzs7QUFFSCxVQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFcEMsUUFBTyxTQUFTLENBQUM7Q0FDakIsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kZWNvcmF0b3JzL3RhT3B0aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkZGVsZWdhdGUsIHRhUmVnaXN0ZXJUb29sLCB0ZXh0QW5ndWxhckhlbHBlcnMpID0+IHtcblx0dGFSZWdpc3RlclRvb2woJ3N1Ym1pdCcsIHtcblx0XHRpY29uY2xhc3M6ICdmYSBmYS1ib2xkJyxcblx0XHR0b29sdGlwdGV4dDogJ3N1Ym1pdCcsXG5cdFx0YWN0aW9uOiBmdW5jdGlvbigpe1xuXHRcdFx0aWYgKHRleHRBbmd1bGFySGVscGVycy5jdHJsRW50ZXJDYWxsYmFjaylcblx0XHRcdFx0dGV4dEFuZ3VsYXJIZWxwZXJzLmN0cmxFbnRlckNhbGxiYWNrKCk7XG5cdFx0fSxcblx0XHRjb21tYW5kS2V5Q29kZTogMTBcblx0fSk7XG5cblx0JGRlbGVnYXRlLnRvb2xiYXJbMV0ucHVzaCgnc3VibWl0Jyk7XG5cblx0cmV0dXJuICRkZWxlZ2F0ZTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/taTools.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($delegate) {\n\t$delegate.h1.iconclass = 'icon-H1';\n\tdelete $delegate.h1.buttontext;\n\n\t$delegate.h2.iconclass = 'icon-H2';\n\tdelete $delegate.h2.buttontext;\n\n\t$delegate.h3.iconclass = 'icon-H3';\n\tdelete $delegate.h3.buttontext;\n\n\t$delegate.pre.iconclass = 'icon-format-code';\n\tdelete $delegate.pre.buttontext;\n\n\t$delegate.bold.iconclass = 'icon-format-bold';\n\t$delegate.italics.iconclass = 'icon-format-italic';\n\t$delegate.underline.iconclass = 'icon-format-underline';\n\t$delegate.ul.iconclass = 'icon-format-list-bulleted';\n\t$delegate.ol.iconclass = 'icon-format-list-numbered';\n\t$delegate.undo.iconclass = 'icon-undo';\n\t$delegate.redo.iconclass = 'icon-repeat';\n\t$delegate.justifyLeft.iconclass = 'icon-format-align-left';\n\t$delegate.justifyRight.iconclass = 'icon-format-align-right';\n\t$delegate.justifyCenter.iconclass = 'icon-format-align-center';\n\t$delegate.clear.iconclass = 'icon-ban-circle';\n\t$delegate.insertImage.iconclass = 'icon-format-photo';\n\t$delegate.indent.iconclass = 'icon-format-indent';\n\t$delegate.outdent.iconclass = 'icon-format-dedent';\n\t// $delegate.unlink.iconclass = 'icon-link red';\n\t// $delegate.insertImage.iconclass = 'icon-picture';\n\t// there is no quote icon in old font-awesome so we change to text as follows\n\t// delete $delegate.quote.iconclass;\n\t$delegate.quote.iconclass = 'icon-format-quote';\n\treturn $delegate;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvdGFUb29scy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFNBQVMsRUFBSztBQUM1QyxVQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7QUFDbkMsUUFBTyxTQUFTLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQzs7QUFFL0IsVUFBUyxDQUFDLEVBQUUsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0FBQ25DLFFBQU8sU0FBUyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUM7O0FBRS9CLFVBQVMsQ0FBQyxFQUFFLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQztBQUNuQyxRQUFPLFNBQVMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDOztBQUUvQixVQUFTLENBQUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQztBQUM3QyxRQUFPLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDOztBQUVoQyxVQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQztBQUM5QyxVQUFTLENBQUMsT0FBTyxDQUFDLFNBQVMsR0FBRyxvQkFBb0IsQ0FBQztBQUNuRCxVQUFTLENBQUMsU0FBUyxDQUFDLFNBQVMsR0FBRyx1QkFBdUIsQ0FBQztBQUN4RCxVQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRywyQkFBMkIsQ0FBQztBQUNyRCxVQUFTLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRywyQkFBMkIsQ0FBQztBQUNyRCxVQUFTLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxXQUFXLENBQUM7QUFDdkMsVUFBUyxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsYUFBYSxDQUFDO0FBQ3pDLFVBQVMsQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLHdCQUF3QixDQUFDO0FBQzNELFVBQVMsQ0FBQyxZQUFZLENBQUMsU0FBUyxHQUFHLHlCQUF5QixDQUFDO0FBQzdELFVBQVMsQ0FBQyxhQUFhLENBQUMsU0FBUyxHQUFHLDBCQUEwQixDQUFDO0FBQy9ELFVBQVMsQ0FBQyxLQUFLLENBQUMsU0FBUyxHQUFHLGlCQUFpQixDQUFDO0FBQzlDLFVBQVMsQ0FBQyxXQUFXLENBQUMsU0FBUyxHQUFHLG1CQUFtQixDQUFDO0FBQ3RELFVBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLG9CQUFvQixDQUFDO0FBQ2xELFVBQVMsQ0FBQyxPQUFPLENBQUMsU0FBUyxHQUFHLG9CQUFvQixDQUFDOzs7OztBQUtuRCxVQUFTLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxtQkFBbUIsQ0FBQztBQUNoRCxRQUFPLFNBQVMsQ0FBQztDQUNqQixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RlY29yYXRvcnMvdGFUb29scy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkZGVsZWdhdGUpID0+IHtcblx0JGRlbGVnYXRlLmgxLmljb25jbGFzcyA9ICdpY29uLUgxJztcblx0ZGVsZXRlICRkZWxlZ2F0ZS5oMS5idXR0b250ZXh0O1xuXG5cdCRkZWxlZ2F0ZS5oMi5pY29uY2xhc3MgPSAnaWNvbi1IMic7XG5cdGRlbGV0ZSAkZGVsZWdhdGUuaDIuYnV0dG9udGV4dDtcblxuXHQkZGVsZWdhdGUuaDMuaWNvbmNsYXNzID0gJ2ljb24tSDMnO1xuXHRkZWxldGUgJGRlbGVnYXRlLmgzLmJ1dHRvbnRleHQ7XG5cblx0JGRlbGVnYXRlLnByZS5pY29uY2xhc3MgPSAnaWNvbi1mb3JtYXQtY29kZSc7XG5cdGRlbGV0ZSAkZGVsZWdhdGUucHJlLmJ1dHRvbnRleHQ7XG5cblx0JGRlbGVnYXRlLmJvbGQuaWNvbmNsYXNzID0gJ2ljb24tZm9ybWF0LWJvbGQnO1xuXHQkZGVsZWdhdGUuaXRhbGljcy5pY29uY2xhc3MgPSAnaWNvbi1mb3JtYXQtaXRhbGljJztcblx0JGRlbGVnYXRlLnVuZGVybGluZS5pY29uY2xhc3MgPSAnaWNvbi1mb3JtYXQtdW5kZXJsaW5lJztcblx0JGRlbGVnYXRlLnVsLmljb25jbGFzcyA9ICdpY29uLWZvcm1hdC1saXN0LWJ1bGxldGVkJztcblx0JGRlbGVnYXRlLm9sLmljb25jbGFzcyA9ICdpY29uLWZvcm1hdC1saXN0LW51bWJlcmVkJztcblx0JGRlbGVnYXRlLnVuZG8uaWNvbmNsYXNzID0gJ2ljb24tdW5kbyc7XG5cdCRkZWxlZ2F0ZS5yZWRvLmljb25jbGFzcyA9ICdpY29uLXJlcGVhdCc7XG5cdCRkZWxlZ2F0ZS5qdXN0aWZ5TGVmdC5pY29uY2xhc3MgPSAnaWNvbi1mb3JtYXQtYWxpZ24tbGVmdCc7XG5cdCRkZWxlZ2F0ZS5qdXN0aWZ5UmlnaHQuaWNvbmNsYXNzID0gJ2ljb24tZm9ybWF0LWFsaWduLXJpZ2h0Jztcblx0JGRlbGVnYXRlLmp1c3RpZnlDZW50ZXIuaWNvbmNsYXNzID0gJ2ljb24tZm9ybWF0LWFsaWduLWNlbnRlcic7XG5cdCRkZWxlZ2F0ZS5jbGVhci5pY29uY2xhc3MgPSAnaWNvbi1iYW4tY2lyY2xlJztcblx0JGRlbGVnYXRlLmluc2VydEltYWdlLmljb25jbGFzcyA9ICdpY29uLWZvcm1hdC1waG90byc7XG5cdCRkZWxlZ2F0ZS5pbmRlbnQuaWNvbmNsYXNzID0gJ2ljb24tZm9ybWF0LWluZGVudCc7XG5cdCRkZWxlZ2F0ZS5vdXRkZW50Lmljb25jbGFzcyA9ICdpY29uLWZvcm1hdC1kZWRlbnQnO1xuXHQvLyAkZGVsZWdhdGUudW5saW5rLmljb25jbGFzcyA9ICdpY29uLWxpbmsgcmVkJztcblx0Ly8gJGRlbGVnYXRlLmluc2VydEltYWdlLmljb25jbGFzcyA9ICdpY29uLXBpY3R1cmUnO1xuXHQvLyB0aGVyZSBpcyBubyBxdW90ZSBpY29uIGluIG9sZCBmb250LWF3ZXNvbWUgc28gd2UgY2hhbmdlIHRvIHRleHQgYXMgZm9sbG93c1xuXHQvLyBkZWxldGUgJGRlbGVnYXRlLnF1b3RlLmljb25jbGFzcztcblx0JGRlbGVnYXRlLnF1b3RlLmljb25jbGFzcyA9ICdpY29uLWZvcm1hdC1xdW90ZSc7XG5cdHJldHVybiAkZGVsZWdhdGU7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/customDropZone.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($timeout, $state) {\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\teventFilter: '&'\n\t\t},\n\t\tlink: function link(scope, elem) {\n\t\t\twindow.addEventListener('dragover', function (e) {\n\t\t\t\tif (!scope.eventFilter({ name: 'dragover', event: e })) e.preventDefault();\n\t\t\t}, false);\n\t\t\twindow.addEventListener('drop', function (e) {\n\t\t\t\tif (!scope.eventFilter({ name: 'drop', event: e })) e.preventDefault();\n\t\t\t}, false);\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvY3VzdG9tRHJvcFpvbmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxRQUFRLEVBQUUsTUFBTTtRQUFNO0FBQ3BELFVBQVEsRUFBRyxHQUFHO0FBQ2QsT0FBSyxFQUFFO0FBQ04sY0FBVyxFQUFFLEdBQUc7R0FDaEI7QUFDRCxNQUFJLEVBQUcsY0FBQyxLQUFLLEVBQUUsSUFBSSxFQUFLO0FBQ3ZCLFNBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBQSxDQUFDLEVBQUk7QUFDeEMsUUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUNuRCxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDcEIsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUNWLFNBQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsVUFBQSxDQUFDLEVBQUk7QUFDcEMsUUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsRUFBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxDQUFDLEVBQUMsQ0FBQyxFQUMvQyxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7SUFDcEIsRUFBRSxLQUFLLENBQUMsQ0FBQztHQUNWO0VBQ0Q7Q0FBQyxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvY3VzdG9tRHJvcFpvbmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHRpbWVvdXQsICRzdGF0ZSkgPT4gKHtcblx0cmVzdHJpY3QgOiAnQScsXG5cdHNjb3BlOiB7XG5cdFx0ZXZlbnRGaWx0ZXI6ICcmJ1xuXHR9LFxuXHRsaW5rOiAgKHNjb3BlLCBlbGVtKSA9PiB7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdvdmVyJywgZSA9PiB7XG5cdFx0XHRpZiAoIXNjb3BlLmV2ZW50RmlsdGVyKHtuYW1lOiAnZHJhZ292ZXInLCBldmVudDogZX0pKVxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0fSwgZmFsc2UpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdkcm9wJywgZSA9PiB7XG5cdFx0XHRpZiAoIXNjb3BlLmV2ZW50RmlsdGVyKHtuYW1lOiAnZHJvcCcsIGV2ZW50OiBlfSkpXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9LCBmYWxzZSk7XG5cdH1cbn0pOyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/emailBody.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($translate, $timeout, $state, $compile, $sanitize, $templateCache, co, user, consts, utils, crypto) {\n\tvar emailRegex = /([-A-Z0-9_.]*[A-Z0-9]@[-A-Z0-9_.]*[A-Z0-9])/ig;\n\tvar urlRegex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n\tvar pgpRegex = /(-----BEGIN PGP MESSAGE-----[^-]+-----END PGP MESSAGE-----)/ig;\n\n\tvar translations = {\n\t\tTITLE_OPENPGP_BLOCK_DECRYPT_ERROR_NO_KEY_FOUND: '',\n\t\tTITLE_OPENPGP_BLOCK_DECRYPT_ERROR: ''\n\t};\n\n\t$translate.bindAsObject(translations, 'INBOX');\n\n\tvar transformCustomTextNodes = function transformCustomTextNodes(dom, transforms) {\n\t\tvar level = arguments[2] === undefined ? 0 : arguments[2];\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = dom.childNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar node = _step.value;\n\n\t\t\t\tif (node.nodeName == '#text') {\n\t\t\t\t\tvar data = node.data.trim();\n\t\t\t\t\tvar _parent = node.parentNode;\n\n\t\t\t\t\tif (!data || !_parent) continue;\n\n\t\t\t\t\tvar newData = node.data;\n\t\t\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\t\t\tvar _didIteratorError2 = false;\n\t\t\t\t\tvar _iteratorError2 = undefined;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tfor (var _iterator2 = transforms[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\t\t\tvar t = _step2.value;\n\n\t\t\t\t\t\t\tnewData = newData.replace(t.regex, t.replace);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t\t\t_iteratorError2 = err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2['return']) {\n\t\t\t\t\t\t\t\t_iterator2['return']();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (newData && newData != node.data) {\n\t\t\t\t\t\tvar newDataDOM = utils.getDOM(newData);\n\t\t\t\t\t\tvar newDataNodes = [];\n\t\t\t\t\t\tfor (var i = 0; i < newDataDOM.childNodes.length; i++) {\n\t\t\t\t\t\t\tnewDataNodes.push(newDataDOM.childNodes[i]);\n\t\t\t\t\t\t}for (var i = 0; i < newDataNodes.length; i++) {\n\t\t\t\t\t\t\t_parent.insertBefore(newDataNodes[i], node);\n\t\t\t\t\t\t}_parent.removeChild(node);\n\t\t\t\t\t}\n\t\t\t\t} else if (node.nodeName != 'A' && node.childNodes) transformCustomTextNodes(node, transforms, level + 1);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t_iterator['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (level === 0) return dom;\n\t};\n\n\tvar transformTextNodes = function transformTextNodes(dom) {\n\t\tvar level = arguments[1] === undefined ? 0 : arguments[1];\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar pgpMessages, pgpRemember, pgpReplace;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif (!(level >= 3)) {\n\t\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tpgpMessages = {};\n\n\t\t\t\t\t\tpgpRemember = function pgpRemember(str, pgpMessage) {\n\t\t\t\t\t\t\tconsole.log('remember hidden message', pgpMessage);\n\t\t\t\t\t\t\tpgpMessages[pgpMessage] = co(regeneratorRuntime.mark(function callee$4$0() {\n\t\t\t\t\t\t\t\tvar message, wrappedMessage, sanitizedMessage, _dom;\n\n\t\t\t\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$4$0$(context$5$0) {\n\t\t\t\t\t\t\t\t\twhile (1) switch (context$5$0.prev = context$5$0.next) {\n\t\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.prev = 0;\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 3;\n\t\t\t\t\t\t\t\t\t\t\treturn crypto.decodeRaw(pgpMessage);\n\n\t\t\t\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t\t\t\tmessage = context$5$0.sent;\n\t\t\t\t\t\t\t\t\t\t\twrappedMessage = '<div>' + message + '</div>';\n\t\t\t\t\t\t\t\t\t\t\tsanitizedMessage = $sanitize(wrappedMessage);\n\t\t\t\t\t\t\t\t\t\t\t_dom = utils.getDOM(sanitizedMessage);\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 9;\n\t\t\t\t\t\t\t\t\t\t\treturn transformTextNodes(_dom, level + 1);\n\n\t\t\t\t\t\t\t\t\t\tcase 9:\n\n\t\t\t\t\t\t\t\t\t\t\tconsole.log('decrypted hidden message', _dom.innerHTML);\n\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.abrupt('return', _dom.innerHTML);\n\n\t\t\t\t\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.prev = 13;\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.t20 = context$5$0['catch'](0);\n\n\t\t\t\t\t\t\t\t\t\t\tif (!(context$5$0.t20.message == 'no_private_key')) {\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 17;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.abrupt('return', '<pre title=\\'' + translations.TITLE_OPENPGP_BLOCK_DECRYPT_ERROR_NO_KEY_FOUND + '\\'>' + pgpMessage + '</pre>');\n\n\t\t\t\t\t\t\t\t\t\tcase 17:\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.abrupt('return', '<pre title=\\'' + translations.TITLE_OPENPGP_BLOCK_DECRYPT_ERROR + '\\'>' + pgpMessage + '</pre>');\n\n\t\t\t\t\t\t\t\t\t\tcase 18:\n\t\t\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.stop();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, callee$4$0, this, [[0, 13]]);\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\treturn pgpMessage;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tpgpReplace = function pgpReplace(str, pgpMessage) {\n\t\t\t\t\t\t\tif (pgpMessages[pgpMessage]) {\n\t\t\t\t\t\t\t\tconsole.log('replace hidden message!');\n\t\t\t\t\t\t\t\treturn pgpMessages[pgpMessage];\n\t\t\t\t\t\t\t} else console.log('cannot replace hidden message!');\n\t\t\t\t\t\t\treturn pgpMessage;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\ttransformCustomTextNodes(dom, [{ regex: pgpRegex, replace: pgpRemember }]);\n\n\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\treturn pgpMessages;\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\t\tpgpMessages = context$3$0.sent;\n\n\t\t\t\t\t\tconsole.log('replacing possible hidden messages...', dom.innerHTML);\n\n\t\t\t\t\t\ttransformCustomTextNodes(dom, [{ regex: pgpRegex, replace: pgpReplace }]);\n\n\t\t\t\t\t\tconsole.log('replaced possible hidden messages...', dom.innerHTML);\n\n\t\t\t\t\t\ttransformCustomTextNodes(dom, [{ regex: emailRegex, replace: '<a href=\"mailto:$1\">$1</a>' }, { regex: urlRegex, replace: '<a href=\"$1\">$1</a>' }]);\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tvar linksCounter = 0;\n\tvar transformEmail = function transformEmail(dom, _ref) {\n\t\tvar imagesSetting = _ref.imagesSetting;\n\t\tvar noImageTemplate = _ref.noImageTemplate;\n\t\tvar emails = _ref.emails;\n\t\tvar level = arguments[2] === undefined ? 0 : arguments[2];\n\n\t\tvar getEmailContextMenuDOM = function getEmailContextMenuDOM(i) {\n\t\t\treturn utils.getDOM('<email-context-menu email=\"emails[' + i + '].email\" is-open=\"emails[' + i + '].isDropdownOpened\"></email-context-menu>');\n\t\t};\n\t\tvar noImageTemplateDOM = utils.getDOM(noImageTemplate);\n\n\t\tif (level === 0) {\n\t\t\tlinksCounter = 0;\n\t\t}\n\n\t\tvar processNode = function processNode(node) {\n\t\t\tif (node.nodeName == 'IMG') {\n\t\t\t\tvar src = node.getAttribute('src');\n\n\t\t\t\tif (!src) return;\n\t\t\t\tsrc = src.trim();\n\t\t\t\tif (!src || src.startsWith('data:')) return;\n\n\t\t\t\tif (imagesSetting == 'none') {\n\t\t\t\t\tnode.parentNode.replaceChild(noImageTemplateDOM, node);\n\t\t\t\t} else if (imagesSetting == 'proxy') {\n\t\t\t\t\tvar proxifiedImageUri = '' + consts.IMAGES_PROXY_URI + '/i/' + src.replace(/http[s]*:\\/\\//i, '');\n\t\t\t\t\tnode.setAttribute('src', proxifiedImageUri);\n\n\t\t\t\t\tvar _parent2 = node.parentNode;\n\t\t\t\t\tif (_parent2.nodeName != 'A') return;\n\n\t\t\t\t\tvar href = _parent2.getAttribute('href');\n\t\t\t\t\tif (!href) return;\n\n\t\t\t\t\thref = href.trim();\n\t\t\t\t\tif (href == src) _parent2.setAttribute('href', proxifiedImageUri);\n\t\t\t\t} else if (imagesSetting == 'directHttps') {\n\t\t\t\t\tif (!src.startsWith('https://')) node.parentNode.replaceChild(noImageTemplateDOM, node);\n\t\t\t\t}\n\t\t\t} else if (node.nodeName == 'A') {\n\t\t\t\tvar href = node.getAttribute('href');\n\n\t\t\t\tif (!href) return;\n\t\t\t\thref = href.trim();\n\t\t\t\tif (!href) return;\n\n\t\t\t\tif (href.startsWith('mailto:')) {\n\t\t\t\t\tvar toEmail = href.replace('mailto:', '').trim();\n\t\t\t\t\temails.push({\n\t\t\t\t\t\temail: toEmail,\n\t\t\t\t\t\tisDropdownOpened: false\n\t\t\t\t\t});\n\n\t\t\t\t\tnode.setAttribute('href', $state.href('.popup.compose', { to: toEmail }));\n\t\t\t\t\tnode.setAttribute('ng-right-click', 'switchContextMenu(' + linksCounter + ')');\n\n\t\t\t\t\tvar emailContextMenuDOM = getEmailContextMenuDOM(linksCounter);\n\t\t\t\t\tnode.parentNode.replaceChild(emailContextMenuDOM, node);\n\t\t\t\t\temailContextMenuDOM.appendChild(node);\n\n\t\t\t\t\tlinksCounter++;\n\t\t\t\t} else node.setAttribute('target', '_blank');\n\t\t\t}\n\t\t};\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = dom.childNodes[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar node = _step3.value;\n\n\t\t\t\tprocessNode(node);\n\n\t\t\t\tif (node.childNodes) transformEmail(node, { imagesSetting: imagesSetting, noImageTemplate: noImageTemplate, emails: emails }, level + 1);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3['return']) {\n\t\t\t\t\t_iterator3['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tvar process = function process(scope, el, attrs) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar loadingTemplateUrl, noImageTemplate, snapTemplate, emailBody, wrapperTag, wrappedEmailBody, sanitizedEmailBody, dom, emailBodyHtml, emailBodyEl;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn $templateCache.fetch(scope.loadingTemplateUrl);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tloadingTemplateUrl = context$3$0.sent;\n\n\t\t\t\t\t\tscope.originalEmail = scope.emailBody;\n\t\t\t\t\t\tel.empty();\n\t\t\t\t\t\tel.append(loadingTemplateUrl);\n\n\t\t\t\t\t\tscope.emails = [];\n\t\t\t\t\t\tscope.switchContextMenu = function (index) {\n\t\t\t\t\t\t\treturn scope.emails[index].isDropdownOpened = !scope.emails[index].isDropdownOpened;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\treturn $templateCache.fetch(scope.noImageTemplateUrl);\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tnoImageTemplate = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 13;\n\t\t\t\t\t\treturn $templateCache.fetch(scope.snapTemplateUrl);\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tsnapTemplate = context$3$0.sent;\n\t\t\t\t\t\temailBody = null;\n\t\t\t\t\t\tcontext$3$0.prev = 15;\n\t\t\t\t\t\twrapperTag = scope.isHtml ? 'div' : 'pre';\n\t\t\t\t\t\twrappedEmailBody = '<' + wrapperTag + '>' + scope.emailBody + '</' + wrapperTag + '>';\n\t\t\t\t\t\tsanitizedEmailBody = $sanitize(wrappedEmailBody);\n\t\t\t\t\t\tdom = utils.getDOM(sanitizedEmailBody);\n\t\t\t\t\t\tcontext$3$0.next = 22;\n\t\t\t\t\t\treturn transformTextNodes(dom);\n\n\t\t\t\t\tcase 22:\n\n\t\t\t\t\t\ttransformEmail(dom, {\n\t\t\t\t\t\t\timagesSetting: user.settings.images,\n\t\t\t\t\t\t\tnoImageTemplate: noImageTemplate,\n\t\t\t\t\t\t\temails: scope.emails\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\temailBodyHtml = dom.innerHTML;\n\t\t\t\t\t\temailBodyEl = angular.element(emailBodyHtml);\n\n\t\t\t\t\t\temailBody = $compile(emailBodyEl)(scope);\n\t\t\t\t\t\tcontext$3$0.next = 40;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 28:\n\t\t\t\t\t\tcontext$3$0.prev = 28;\n\t\t\t\t\t\tcontext$3$0.t21 = context$3$0['catch'](15);\n\n\t\t\t\t\t\tconsole.error('error during email body transforming: \"' + context$3$0.t21.message + '\"');\n\n\t\t\t\t\t\tcontext$3$0.prev = 31;\n\t\t\t\t\t\temailBodyEl = angular.element(snapTemplate);\n\n\t\t\t\t\t\temailBody = $compile(emailBodyEl)(scope);\n\t\t\t\t\t\tcontext$3$0.next = 40;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 36:\n\t\t\t\t\t\tcontext$3$0.prev = 36;\n\t\t\t\t\t\tcontext$3$0.t22 = context$3$0['catch'](31);\n\n\t\t\t\t\t\tconsole.error('error during snap template processing: \"' + context$3$0.t22.message + '\"');\n\t\t\t\t\t\treturn context$3$0.abrupt('return');\n\n\t\t\t\t\tcase 40:\n\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tscope.emailBody = emailBody.html();\n\t\t\t\t\t\t}, 100);\n\n\t\t\t\t\t\tel.empty();\n\t\t\t\t\t\tel.append(emailBody);\n\n\t\t\t\t\tcase 43:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[15, 28], [31, 36]]);\n\t\t}));\n\t};\n\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\tisHtml: '=',\n\t\t\temailBody: '=',\n\t\t\toriginalEmailName: '=',\n\t\t\tnoImageTemplateUrl: '@',\n\t\t\tloadingTemplateUrl: '@',\n\t\t\tsnapTemplateUrl: '@',\n\t\t\topenEmail: '=',\n\t\t\tdownloadEmail: '='\n\t\t},\n\t\tlink: function link(scope, el, attrs) {\n\t\t\tprocess(scope, el, attrs);\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvZW1haWxCb2R5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsVUFBVSxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBSztBQUNySSxLQUFNLFVBQVUsR0FBRywrQ0FBK0MsQ0FBQztBQUNuRSxLQUFNLFFBQVEsR0FBRyw2RUFBNkUsQ0FBQztBQUMvRixLQUFNLFFBQVEsR0FBRywrREFBK0QsQ0FBQzs7QUFFakYsS0FBTSxZQUFZLEdBQUc7QUFDcEIsZ0RBQThDLEVBQUUsRUFBRTtBQUNsRCxtQ0FBaUMsRUFBRSxFQUFFO0VBQ3JDLENBQUM7O0FBRUYsV0FBVSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUM7O0FBRS9DLEtBQU0sd0JBQXdCLEdBQUcsU0FBM0Isd0JBQXdCLENBQUksR0FBRyxFQUFFLFVBQVUsRUFBZ0I7TUFBZCxLQUFLLGdDQUFHLENBQUM7Ozs7OztBQUMzRCx3QkFBZ0IsR0FBRyxDQUFDLFVBQVUsOEhBQUU7UUFBeEIsSUFBSTs7QUFDWCxRQUFJLElBQUksQ0FBQyxRQUFRLElBQUksT0FBTyxFQUFFO0FBQzdCLFNBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7QUFDOUIsU0FBTSxPQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQzs7QUFFL0IsU0FBSSxDQUFDLElBQUksSUFBSSxDQUFDLE9BQU0sRUFDbkIsU0FBUzs7QUFFVixTQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDOzs7Ozs7QUFDeEIsNEJBQWMsVUFBVTtXQUFmLENB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TyxDQUFDLEtBQUssOENBQTRDLGdCQUFJLE9BQU8sT0FBSSxDQUFDOzs7OztBQUszRSxjQUFRLENBQUMsWUFBTTtBQUNkLFlBQUssQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDLElBQUksRUFBRSxDQUFDO09BQ25DLEVBQUUsR0FBRyxDQUFDLENBQUM7O0FBRVIsUUFBRSxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ1gsUUFBRSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7Ozs7OztHQUNyQixFQUFDO0VBQUEsQ0FBQzs7QUFFSCxRQUFPO0FBQ04sVUFBUSxFQUFHLEdBQUc7QUFDZCxPQUFLLEVBQUU7QUFDTixTQUFNLEVBQUUsR0FBRztBQUNYLFlBQVMsRUFBRSxHQUFHO0FBQ2Qsb0JBQWlCLEVBQUUsR0FBRztBQUN0QixxQkFBa0IsRUFBRSxHQUFHO0FBQ3ZCLHFCQUFrQixFQUFFLEdBQUc7QUFDdkIsa0JBQWUsRUFBRSxHQUFHO0FBQ3BCLFlBQVMsRUFBRSxHQUFHO0FBQ2QsZ0JBQWEsRUFBRSxHQUFHO0dBQ2xCO0FBQ0QsTUFBSSxFQUFJLGNBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUs7QUFDN0IsVUFBTyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7R0FDMUI7RUFDRCxDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kaXJlY3RpdmVzL2VtYWlsQm9keS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkdHJhbnNsYXRlLCAkdGltZW91dCwgJHN0YXRlLCAkY29tcGlsZSwgJHNhbml0aXplLCAkdGVtcGxhdGVDYWNoZSwgY28sIHVzZXIsIGNvbnN0cywgdXRpbHMsIGNyeXB0bykgPT4ge1xuXHRjb25zdCBlbWFpbFJlZ2V4ID0gLyhbLUEtWjAtOV8uXSpbQS1aMC05XUBbLUEtWjAtOV8uXSpbQS1aMC05XSkvaWc7XG5cdGNvbnN0IHVybFJlZ2V4ID0gLyhcXGIoaHR0cHM/fGZ0cHxmaWxlKTpcXC9cXC9bLUEtWjAtOSsmQCNcXC8lPz1+X3whOiwuO10qWy1BLVowLTkrJkAjXFwvJT1+X3xdKS9pZztcblx0Y29uc3QgcGdwUmVnZXggPSAvKC0tLS0tQkVHSU4gUEdQIE1FU1NBR0UtLS0tLVteLV0rLS0tLS1FTkQgUEdQIE1FU1NBR0UtLS0tLSkvaWc7XG5cblx0Y29uc3QgdHJhbnNsYXRpb25zID0ge1xuXHRcdFRJVExFX09QRU5QR1BfQkxPQ0tfREVDUllQVF9FUlJPUl9OT19LRVlfRk9VTkQ6ICcnLFxuXHRcdFRJVExFX09QRU5QR1BfQkxPQ0tfREVDUllQVF9FUlJPUjogJydcblx0fTtcblxuXHQkdHJhbnNsYXRlLmJpbmRBc09iamVjdCh0cmFuc2xhdGlvbnMsICdJTkJPWCcpO1xuXG5cdGNvbnN0IHRyYW5zZm9ybUN1c3RvbVRleHROb2RlcyA9IChkb20sIHRyYW5zZm9ybXMsIGxldmVsID0gMCkgPT4ge1xuXHRcdGZvcihsZXQgbm9kZSBvZiBkb20uY2hpbGROb2Rlcykge1xuXHRcdFx0aWYgKG5vZGUubm9kZU5hbWUgPT0gJyN0ZXh0Jykge1xuXHRcdFx0XHRjb25zdCBkYXRhID0gbm9kZS5kYXRhLnRyaW0oKTtcblx0XHRcdFx0Y29uc3QgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXG5cdFx0XHRcdGlmICghZGF0YSB8fCAhcGFyZW50KVxuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXG5cdFx0XHRcdGxldCBuZXdEYXRhID0gbm9kZS5kYXRhO1xuXHRcdFx0XHRmb3IgKGxldCB0IG9mIHRyYW5zZm9ybXMpXG5cdFx0XHRcdFx0bmV3RGF0YSA9IG5ld0RhdGEucmVwbGFjZSh0LnJlZ2V4LCB0LnJlcGxhY2UpO1xuXG5cdFx0XHRcdGlmIChuZXdEYXRhICYmIG5ld0RhdGEgIT0gbm9kZS5kYXRhKSB7XG5cdFx0XHRcdFx0Y29uc3QgbmV3RGF0YURPTSA9IHV0aWxzLmdldERPTShuZXdEYXRhKTtcblx0XHRcdFx0XHRsZXQgbmV3RGF0YU5vZGVzID0gW107XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuZXdEYXRhRE9NLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspXG5cdFx0XHRcdFx0XHRuZXdEYXRhTm9kZXMucHVzaChuZXdEYXRhRE9NLmNoaWxkTm9kZXNbaV0pO1xuXG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuZXdEYXRhTm9kZXMubGVuZ3RoOyBpKyspXG5cdFx0XHRcdFx0XHRwYXJlbnQuaW5zZXJ0QmVmb3JlKG5ld0RhdGFOb2Rlc1tpXSwgbm9kZSk7XG5cdFx0XHRcdFx0cGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGlmIChub2RlLm5vZGVOYW1lICE9ICdBJyAmJiBub2RlLmNoaWxkTm9kZXMpXG5cdFx0XHRcdHRyYW5zZm9ybUN1c3RvbVRleHROb2Rlcyhub2RlLCB0cmFuc2Zvcm1zLCBsZXZlbCArIDEpO1xuXHRcdH1cblxuXHRcdGlmIChsZXZlbCA9PT0gMClcblx0XHRcdHJldHVybiBkb207XG5cdH07XG5cblx0Y29uc3QgdHJhbnNmb3JtVGV4dE5vZGVzID0gKGRvbSwgbGV2ZWwgPSAwKSA9PiBjbyhmdW5jdGlvbiAqKCl7XG5cdFx0aWYgKGxldmVsID49IDMpXG5cdFx0XHRyZXR1cm47XG5cblx0XHRsZXQgcGdwTWVzc2FnZXMgPSB7fTtcblxuXHRcdGNvbnN0IHBncFJlbWVtYmVyID0gKHN0ciwgcGdwTWVzc2FnZSkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJ3JlbWVtYmVyIGhpZGRlbiBtZXNzYWdlJywgcGdwTWVzc2FnZSk7XG5cdFx0XHRwZ3BNZXNzYWdlc1twZ3BNZXNzYWdlXSA9IGNvKGZ1bmN0aW9uICooKXtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRsZXQgbWVzc2FnZSA9IHlpZWxkIGNyeXB0by5kZWNvZGVSYXcocGdwTWVzc2FnZSk7XG5cblx0XHRcdFx0XHRsZXQgd3JhcHBlZE1lc3NhZ2UgPSBgPGRpdj4ke21lc3NhZ2V9PC9kaXY+YDtcblx0XHRcdFx0XHRsZXQgc2FuaXRpemVkTWVzc2FnZSA9ICRzYW5pdGl6ZSh3cmFwcGVkTWVzc2FnZSk7XG5cblx0XHRcdFx0XHRsZXQgZG9tID0gdXRpbHMuZ2V0RE9NKHNhbml0aXplZE1lc3NhZ2UpO1xuXG5cdFx0XHRcdFx0eWllbGQgdHJhbnNmb3JtVGV4dE5vZGVzKGRvbSwgbGV2ZWwgKyAxKTtcblxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdkZWNyeXB0ZWQgaGlkZGVuIG1lc3NhZ2UnLCBkb20uaW5uZXJIVE1MKTtcblxuXHRcdFx0XHRcdHJldHVybiBkb20uaW5uZXJIVE1MO1xuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGlmIChlcnJvci5tZXNzYWdlID09ICdub19wcml2YXRlX2tleScpXG5cdFx0XHRcdFx0XHRyZXR1cm4gYDxwcmUgdGl0bGU9JyR7dHJhbnNsYXRpb25zLlRJVExFX09QRU5QR1BfQkxPQ0tfREVDUllQVF9FUlJPUl9OT19LRVlfRk9VTkR9Jz4ke3BncE1lc3NhZ2V9PC9wcmU+YDtcblx0XHRcdFx0XHRyZXR1cm4gYDxwcmUgdGl0bGU9JyR7dHJhbnNsYXRpb25zLlRJVExFX09QRU5QR1BfQkxPQ0tfREVDUllQVF9FUlJPUn0nPiR7cGdwTWVzc2FnZX08L3ByZT5gO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdHJldHVybiBwZ3BNZXNzYWdlO1xuXHRcdH07XG5cblx0XHRjb25zdCBwZ3BSZXBsYWNlID0gKHN0ciwgcGdwTWVzc2FnZSkgPT4ge1xuXHRcdFx0aWYgKHBncE1lc3NhZ2VzW3BncE1lc3NhZ2VdKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCdyZXBsYWNlIGhpZGRlbiBtZXNzYWdlIScpO1xuXHRcdFx0XHRyZXR1cm4gcGdwTWVzc2FnZXNbcGdwTWVzc2FnZV07XG5cdFx0XHR9IGVsc2UgY29uc29sZS5sb2coJ2Nhbm5vdCByZXBsYWNlIGhpZGRlbiBtZXNzYWdlIScpO1xuXHRcdFx0cmV0dXJuIHBncE1lc3NhZ2U7XG5cdFx0fTtcblxuXHRcdHRyYW5zZm9ybUN1c3RvbVRleHROb2Rlcyhkb20sIFtcblx0XHRcdHtyZWdleDogcGdwUmVnZXgsIHJlcGxhY2U6IHBncFJlbWVtYmVyfVxuXHRcdF0pO1xuXG5cdFx0cGdwTWVzc2FnZXMgPSB5aWVsZCBwZ3BNZXNzYWdlcztcblxuXHRcdGNvbnNvbGUubG9nKCdyZXBsYWNpbmcgcG9zc2libGUgaGlkZGVuIG1lc3NhZ2VzLi4uJywgZG9tLmlubmVySFRNTCk7XG5cblx0XHR0cmFuc2Zvcm1DdXN0b21UZXh0Tm9kZXMoZG9tLCBbXG5cdFx0XHR7cmVnZXg6IHBncFJlZ2V4LCByZXBsYWNlOiBwZ3BSZXBsYWNlfVxuXHRcdF0pO1xuXG5cdFx0Y29uc29sZS5sb2coJ3JlcGxhY2VkIHBvc3NpYmxlIGhpZGRlbiBtZXNzYWdlcy4uLicsIGRvbS5pbm5lckhUTUwpO1xuXG5cdFx0dHJhbnNmb3JtQ3VzdG9tVGV4dE5vZGVzKGRvbSwgW1xuXHRcdFx0e3JlZ2V4OiBlbWFpbFJlZ2V4LCByZXBsYWNlOiAnPGEgaHJlZj1cIm1haWx0bzokMVwiPiQxPC9hPid9LFxuXHRcdFx0e3JlZ2V4OiB1cmxSZWdleCwgcmVwbGFjZTogJzxhIGhyZWY9XCIkMVwiPiQxPC9hPid9XG5cdFx0XSk7XG5cdH0pO1xuXG5cdGxldCBsaW5rc0NvdW50ZXIgPSAwO1xuXHRjb25zdCB0cmFuc2Zvcm1FbWFpbCA9IChkb20sIHtpbWFnZXNTZXR0aW5nLCBub0ltYWdlVGVtcGxhdGUsIGVtYWlsc30sIGxldmVsID0gMCkgPT4ge1xuXHRcdGNvbnN0IGdldEVtYWlsQ29udGV4dE1lbnVET00gPSAoaSkgPT5cblx0XHRcdHV0aWxzLmdldERPTShgPGVtYWlsLWNvbnRleHQtbWVudSBlbWFpbD1cImVtYWlsc1ske2l9XS5lbWFpbFwiIGlzLW9wZW49XCJlbWFpbHNbJHtpfV0uaXNEcm9wZG93bk9wZW5lZFwiPjwvZW1haWwtY29udGV4dC1tZW51PmApO1xuXHRcdGNvbnN0IG5vSW1hZ2VUZW1wbGF0ZURPTSA9IHV0aWxzLmdldERPTShub0ltYWdlVGVtcGxhdGUpO1xuXG5cdFx0aWYgKGxldmVsID09PSAwKSB7XG5cdFx0XHRsaW5rc0NvdW50ZXIgPSAwO1xuXHRcdH1cblxuXHRcdGNvbnN0IHByb2Nlc3NOb2RlID0gKG5vZGUpID0+IHtcblx0XHRcdGlmIChub2RlLm5vZGVOYW1lID09ICdJTUcnKSB7XG5cdFx0XHRcdGxldCBzcmMgPSBub2RlLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cblx0XHRcdFx0aWYgKCFzcmMpXG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRzcmMgPSBzcmMudHJpbSgpO1xuXHRcdFx0XHRpZiAoIXNyYyB8fCBzcmMuc3RhcnRzV2l0aCgnZGF0YTonKSlcblx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0aWYgKGltYWdlc1NldHRpbmcgPT0gJ25vbmUnKSB7XG5cdFx0XHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChub0ltYWdlVGVtcGxhdGVET00sIG5vZGUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGltYWdlc1NldHRpbmcgPT0gJ3Byb3h5Jykge1xuXHRcdFx0XHRcdGNvbnN0IHByb3hpZmllZEltYWdlVXJpID0gYCR7Y29uc3RzLklNQUdFU19QUk9YWV9VUkl9L2kvJHtzcmMucmVwbGFjZSgvaHR0cFtzXSo6XFwvXFwvL2ksICcnKX1gO1xuXHRcdFx0XHRcdG5vZGUuc2V0QXR0cmlidXRlKCdzcmMnLCBwcm94aWZpZWRJbWFnZVVyaSk7XG5cblx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG5cdFx0XHRcdFx0aWYgKHBhcmVudC5ub2RlTmFtZSAhPSAnQScpXG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0XHRsZXQgaHJlZiA9IHBhcmVudC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0XHRcdFx0XHRpZiAoIWhyZWYpXG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cblx0XHRcdFx0XHRocmVmID0gaHJlZi50cmltKCk7XG5cdFx0XHRcdFx0aWYgKGhyZWYgPT0gc3JjKVxuXHRcdFx0XHRcdFx0cGFyZW50LnNldEF0dHJpYnV0ZSgnaHJlZicsIHByb3hpZmllZEltYWdlVXJpKTtcblx0XHRcdFx0fSBlbHNlIGlmIChpbWFnZXNTZXR0aW5nID09ICdkaXJlY3RIdHRwcycpIHtcblx0XHRcdFx0XHRpZiAoIXNyYy5zdGFydHNXaXRoKCdodHRwczovLycpKVxuXHRcdFx0XHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChub0ltYWdlVGVtcGxhdGVET00sIG5vZGUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Vcblx0XHRcdGlmIChub2RlLm5vZGVOYW1lID09ICdBJykge1xuXHRcdFx0XHRsZXQgaHJlZiA9IG5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cblx0XHRcdFx0aWYgKCFocmVmKVxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0aHJlZiA9IGhyZWYudHJpbSgpO1xuXHRcdFx0XHRpZiAoIWhyZWYpXG5cdFx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHRcdGlmIChocmVmLnN0YXJ0c1dpdGgoJ21haWx0bzonKSkge1xuXHRcdFx0XHRcdGNvbnN0IHRvRW1haWwgPSBocmVmLnJlcGxhY2UoJ21haWx0bzonLCAnJykudHJpbSgpO1xuXHRcdFx0XHRcdGVtYWlscy5wdXNoKHtcblx0XHRcdFx0XHRcdGVtYWlsOiB0b0VtYWlsLFxuXHRcdFx0XHRcdFx0aXNEcm9wZG93bk9wZW5lZDogZmFsc2Vcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdG5vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgJHN0YXRlLmhyZWYoJy5wb3B1cC5jb21wb3NlJywge3RvOiB0b0VtYWlsfSkpO1xuXHRcdFx0XHRcdG5vZGUuc2V0QXR0cmlidXRlKCduZy1yaWdodC1jbGljaycsIGBzd2l0Y2hDb250ZXh0TWVudSgke2xpbmtzQ291bnRlcn0pYCk7XG5cblx0XHRcdFx0XHRjb25zdCBlbWFpbENvbnRleHRNZW51RE9NID0gZ2V0RW1haWxDb250ZXh0TWVudURPTShsaW5rc0NvdW50ZXIpO1xuXHRcdFx0XHRcdG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoZW1haWxDb250ZXh0TWVudURPTSwgbm9kZSk7XG5cdFx0XHRcdFx0ZW1haWxDb250ZXh0TWVudURPTS5hcHBlbmRDaGlsZChub2RlKTtcblxuXHRcdFx0XHRcdGxpbmtzQ291bnRlcisrO1xuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRub2RlLnNldEF0dHJpYnV0ZSgndGFyZ2V0JywgJ19ibGFuaycpO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRmb3IobGV0IG5vZGUgb2YgZG9tLmNoaWxkTm9kZXMpIHtcblx0XHRcdHByb2Nlc3NOb2RlKG5vZGUpO1xuXG5cdFx0XHRpZiAobm9kZS5jaGlsZE5vZGVzKVxuXHRcdFx0XHR0cmFuc2Zvcm1FbWFpbChub2RlLCB7aW1hZ2VzU2V0dGluZywgbm9JbWFnZVRlbXBsYXRlLCBlbWFpbHN9LCBsZXZlbCArIDEpO1xuXHRcdH1cblx0fTtcblxuXHRjb25zdCBwcm9jZXNzID0gKHNjb3BlLCBlbCwgYXR0cnMpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRjb25zdCBsb2FkaW5nVGVtcGxhdGVVcmwgPSB5aWVsZCAkdGVtcGxhdGVDYWNoZS5mZXRjaChzY29wZS5sb2FkaW5nVGVtcGxhdGVVcmwpO1xuXG5cdFx0c2NvcGUub3JpZ2luYWxFbWFpbCA9IHNjb3BlLmVtYWlsQm9keTtcblx0XHRlbC5lbXB0eSgpO1xuXHRcdGVsLmFwcGVuZChsb2FkaW5nVGVtcGxhdGVVcmwpO1xuXG5cdFx0c2NvcGUuZW1haWxzID0gW107XG5cdFx0c2NvcGUuc3dpdGNoQ29udGV4dE1lbnUgPSBpbmRleCA9PiBzY29wZS5lbWFpbHNbaW5kZXhdLmlzRHJvcGRvd25PcGVuZWQgPSAhc2NvcGUuZW1haWxzW2luZGV4XS5pc0Ryb3Bkb3duT3BlbmVkO1xuXG5cdFx0Y29uc3Qgbm9JbWFnZVRlbXBsYXRlID0geWllbGQgJHRlbXBsYXRlQ2FjaGUuZmV0Y2goc2NvcGUubm9JbWFnZVRlbXBsYXRlVXJsKTtcblx0XHRjb25zdCBzbmFwVGVtcGxhdGUgPSB5aWVsZCAkdGVtcGxhdGVDYWNoZS5mZXRjaChzY29wZS5zbmFwVGVtcGxhdGVVcmwpO1xuXG5cdFx0bGV0IGVtYWlsQm9keSA9IG51bGw7XG5cdFx0dHJ5IHtcblx0XHRcdGxldCB3cmFwcGVyVGFnID0gc2NvcGUuaXNIdG1sID8gJ2RpdicgOiAncHJlJztcblx0XHRcdGxldCB3cmFwcGVkRW1haWxCb2R5ID0gYDwke3dyYXBwZXJUYWd9PiR7c2NvcGUuZW1haWxCb2R5fTwvJHt3cmFwcGVyVGFnfT5gO1xuXHRcdFx0bGV0IHNhbml0aXplZEVtYWlsQm9keSA9ICRzYW5pdGl6ZSh3cmFwcGVkRW1haWxCb2R5KTtcblxuXHRcdFx0bGV0IGRvbSA9IHV0aWxzLmdldERPTShzYW5pdGl6ZWRFbWFpbEJvZHkpO1xuXG5cdFx0XHR5aWVsZCB0cmFuc2Zvcm1UZXh0Tm9kZXMoZG9tKTtcblxuXHRcdFx0dHJhbnNmb3JtRW1haWwoZG9tLCB7XG5cdFx0XHRcdGltYWdlc1NldHRpbmc6IHVzZXIuc2V0dGluZ3MuaW1hZ2VzLFxuXHRcdFx0XHRub0ltYWdlVGVtcGxhdGU6IG5vSW1hZ2VUZW1wbGF0ZSxcblx0XHRcdFx0ZW1haWxzOiBzY29wZS5lbWFpbHNcblx0XHRcdH0pO1xuXG5cdFx0XHRsZXQgZW1haWxCb2R5SHRtbCA9IGRvbS5pbm5lckhUTUw7XG5cblx0XHRcdGxldCBlbWFpbEJvZHlFbCA9IGFuZ3VsYXIuZWxlbWVudChlbWFpbEJvZHlIdG1sKTtcblx0XHRcdGVtYWlsQm9keSA9ICRjb21waWxlKGVtYWlsQm9keUVsKShzY29wZSk7XG5cdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGBlcnJvciBkdXJpbmcgZW1haWwgYm9keSB0cmFuc2Zvcm1pbmc6IFwiJHtlcnIubWVzc2FnZX1cImApO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRsZXQgZW1haWxCb2R5RWwgPSBhbmd1bGFyLmVsZW1lbnQoc25hcFRlbXBsYXRlKTtcblx0XHRcdFx0ZW1haWxCb2R5ID0gJGNvbXBpbGUoZW1haWxCb2R5RWwpKHNjb3BlKTtcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHRjb25zb2xlLmVycm9yKGBlcnJvciBkdXJpbmcgc25hcCB0ZW1wbGF0ZSBwcm9jZXNzaW5nOiBcIiR7ZXJyLm1lc3NhZ2V9XCJgKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdCR0aW1lb3V0KCgpID0+IHtcblx0XHRcdHNjb3BlLmVtYWlsQm9keSA9IGVtYWlsQm9keS5odG1sKCk7XG5cdFx0fSwgMTAwKTtcblxuXHRcdGVsLmVtcHR5KCk7XG5cdFx0ZWwuYXBwZW5kKGVtYWlsQm9keSk7XG5cdH0pO1xuXG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3QgOiAnQScsXG5cdFx0c2NvcGU6IHtcblx0XHRcdGlzSHRtbDogJz0nLFxuXHRcdFx0ZW1haWxCb2R5OiAnPScsXG5cdFx0XHRvcmlnaW5hbEVtYWlsTmFtZTogJz0nLFxuXHRcdFx0bm9JbWFnZVRlbXBsYXRlVXJsOiAnQCcsXG5cdFx0XHRsb2FkaW5nVGVtcGxhdGVVcmw6ICdAJyxcblx0XHRcdHNuYXBUZW1wbGF0ZVVybDogJ0AnLFxuXHRcdFx0b3BlbkVtYWlsOiAnPScsXG5cdFx0XHRkb3dubG9hZEVtYWlsOiAnPSdcblx0XHR9LFxuXHRcdGxpbmsgIDogKHNjb3BlLCBlbCwgYXR0cnMpID0+IHtcblx0XHRcdHByb2Nlc3Moc2NvcGUsIGVsLCBhdHRycyk7XG5cdFx0fVxuXHR9O1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/emailBuilder.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($timeout, $state, $compile, $sanitize, $templateCache, co, user, consts) {\n\t/*function getBase64Image(img) {\n \t// Create an empty canvas element\n \tvar canvas = document.createElement('canvas');\n \tcanvas.width = img.width;\n \tcanvas.height = img.height;\n \t\t// Copy the image contents to the canvas\n \tvar ctx = canvas.getContext('2d');\n \tctx.drawImage(img, 0, 0);\n \t\t// Get the data-URL formatted image\n \t// Firefox supports PNG and JPEG. You could check img.src to guess the\n \t// original format, but be aware the using \"image/jpg\" will re-encode the image.\n \tvar dataURL = canvas.toDataURL('image/png');\n \t\treturn dataURL.replace(/^data:image\\/(png|jpg);base64,/, '');\n }\n \tconst transform = (emailBodyHtml) => {\n \tangular.forEach(emailBodyHtml.find('img'), img => {\n \t\tconst imgElement = angular.element(img);\n \t\t\tlet src = imgElement.attr('src');\n \t\tif (!src)\n \t\t\treturn;\n \t\t\tsrc = src.trim();\n \t\tif (!src.startsWith('data:')) {\n \t\t\tconst imageDataURI = getBase64Image(img);\n \t\t\tconsole.log('image encoded into', imageDataURI);\n \t\t\t\timgElement.attr('src', imageDataURI);\n \t\t}\n \t});\n };*/\n\n\treturn {\n\t\trestrict: 'A',\n\t\trequire: 'ngModel',\n\t\tlink: function link(scope, el, attrs, ngModel) {}\n\t};\n};\n\n/*scope.$watch(\n\t() => ngModel.$modelValue,\n\t(emailBody) => {\n\t\tconsole.log(emailBody);\n\t\tconst emailBodyHtml = angular.element(`<div>${emailBody}</div>`);\n\t\t\ttransform(emailBodyHtml);\n\t\t\tconsole.log('replace with', emailBodyHtml.html());\n\t\tngModel.$setViewValue(emailBodyHtml.html());\n\t}\n);*/\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvZW1haWxCdWlsZGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsUUFBUSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBSzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUMxRyxRQUFPO0FBQ04sVUFBUSxFQUFHLEdBQUc7QUFDZCxTQUFPLEVBQUUsU0FBUztBQUNsQixNQUFJLEVBQUksY0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUssRUFhdEM7RUFDRCxDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kaXJlY3RpdmVzL2VtYWlsQnVpbGRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkdGltZW91dCwgJHN0YXRlLCAkY29tcGlsZSwgJHNhbml0aXplLCAkdGVtcGxhdGVDYWNoZSwgY28sIHVzZXIsIGNvbnN0cykgPT4ge1xuXHQvKmZ1bmN0aW9uIGdldEJhc2U2NEltYWdlKGltZykge1xuXHRcdC8vIENyZWF0ZSBhbiBlbXB0eSBjYW52YXMgZWxlbWVudFxuXHRcdHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcblx0XHRjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XG5cdFx0Y2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XG5cblx0XHQvLyBDb3B5IHRoZSBpbWFnZSBjb250ZW50cyB0byB0aGUgY2FudmFzXG5cdFx0dmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXHRcdGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcblxuXHRcdC8vIEdldCB0aGUgZGF0YS1VUkwgZm9ybWF0dGVkIGltYWdlXG5cdFx0Ly8gRmlyZWZveCBzdXBwb3J0cyBQTkcgYW5kIEpQRUcuIFlvdSBjb3VsZCBjaGVjayBpbWcuc3JjIHRvIGd1ZXNzIHRoZVxuXHRcdC8vIG9yaWdpbmFsIGZvcm1hdCwgYnV0IGJlIGF3YXJlIHRoZSB1c2luZyBcImltYWdlL2pwZ1wiIHdpbGwgcmUtZW5jb2RlIHRoZSBpbWFnZS5cblx0XHR2YXIgZGF0YVVSTCA9IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpO1xuXG5cdFx0cmV0dXJuIGRhdGFVUkwucmVwbGFjZSgvXmRhdGE6aW1hZ2VcXC8ocG5nfGpwZyk7YmFzZTY0LC8sICcnKTtcblx0fVxuXG5cdGNvbnN0IHRyYW5zZm9ybSA9IChlbWFpbEJvZHlIdG1sKSA9PiB7XG5cdFx0YW5ndWxhci5mb3JFYWNoKGVtYWlsQm9keUh0bWwuZmluZCgnaW1nJyksIGltZyA9PiB7XG5cdFx0XHRjb25zdCBpbWdFbGVtZW50ID0gYW5ndWxhci5lbGVtZW50KGltZyk7XG5cblx0XHRcdGxldCBzcmMgPSBpbWdFbGVtZW50LmF0dHIoJ3NyYycpO1xuXHRcdFx0aWYgKCFzcmMpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0c3JjID0gc3JjLnRyaW0oKTtcblx0XHRcdGlmICghc3JjLnN0YXJ0c1dpdGgoJ2RhdGE6JykpIHtcblx0XHRcdFx0Y29uc3QgaW1hZ2VEYXRhVVJJID0gZ2V0QmFzZTY0SW1hZ2UoaW1nKTtcblx0XHRcdFx0Y29uc29sZS5sb2coJ2ltYWdlIGVuY29kZWQgaW50bycsIGltYWdlRGF0YVVSSSk7XG5cblx0XHRcdFx0aW1nRWxlbWVudC5hdHRyKCdzcmMnLCBpbWFnZURhdGFVUkkpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9OyovXG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdCA6ICdBJyxcblx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0bGluayAgOiAoc2NvcGUsIGVsLCBhdHRycywgbmdNb2RlbCkgPT4ge1xuXHRcdFx0LypzY29wZS4kd2F0Y2goXG5cdFx0XHRcdCgpID0+IG5nTW9kZWwuJG1vZGVsVmFsdWUsXG5cdFx0XHRcdChlbWFpbEJvZHkpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhlbWFpbEJvZHkpO1xuXHRcdFx0XHRcdGNvbnN0IGVtYWlsQm9keUh0bWwgPSBhbmd1bGFyLmVsZW1lbnQoYDxkaXY+JHtlbWFpbEJvZHl9PC9kaXY+YCk7XG5cblx0XHRcdFx0XHR0cmFuc2Zvcm0oZW1haWxCb2R5SHRtbCk7XG5cblx0XHRcdFx0XHRjb25zb2xlLmxvZygncmVwbGFjZSB3aXRoJywgZW1haWxCb2R5SHRtbC5odG1sKCkpO1xuXHRcdFx0XHRcdG5nTW9kZWwuJHNldFZpZXdWYWx1ZShlbWFpbEJvZHlIdG1sLmh0bWwoKSk7XG5cdFx0XHRcdH1cblx0XHRcdCk7Ki9cblx0XHR9XG5cdH07XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/emailContextMenu.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($templateCache, $compile, co, contacts) {\n\treturn {\n\t\trestrict: 'E',\n\t\tscope: {\n\t\t\tisOpen: '=',\n\t\t\temail: '='\n\t\t},\n\t\tlink: function link(scope, el, attrs) {\n\t\t\tco(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\t\tvar template, contact, compiledTemplate;\n\t\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\t\treturn $templateCache.fetch('partials/directives/emailContextMenu.html');\n\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\ttemplate = context$3$0.sent;\n\t\t\t\t\t\t\tcontact = contacts.getContactByEmail(scope.email);\n\n\t\t\t\t\t\t\tscope.isExistingContact = !!contact;\n\n\t\t\t\t\t\t\tcompiledTemplate = $compile(template)(scope);\n\n\t\t\t\t\t\t\tel.prepend(compiledTemplate);\n\n\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t\t}\n\t\t\t\t}, callee$2$0, this);\n\t\t\t}));\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvZW1haWxDb250ZXh0TWVudS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLGNBQWMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLFFBQVE7UUFBTTtBQUMxRSxVQUFRLEVBQUcsR0FBRztBQUNkLE9BQUssRUFBRTtBQUNOLFNBQU0sRUFBRSxHQUFHO0FBQ1gsUUFBSyxFQUFFLEdBQUc7R0FDVjtBQUNELE1BQUksRUFBSSxjQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFLO0FBQzdCLEtBQUUseUJBQUM7UUFDSSxRQUFRLEVBQ1IsT0FBTyxFQUdQLGdCQUFnQjs7Ozs7Y0FKQyxjQUFjLENBQUMsS0FBSyxDQUFDLDJDQUEyQyxDQUFDOzs7QUFBbEYsZUFBUTtBQUNSLGNBQU8sR0FBRyxRQUFRLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQzs7QUFDdkQsWUFBSyxDQUFDLGlCQUFpQixHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUM7O0FBRTlCLHVCQUFnQixHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxLQUFLLENBQUM7O0FBQ2xELFNBQUUsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQzs7Ozs7OztJQUM3QixFQUFDLENBQUM7R0FDSDtFQUNEO0NBQUMsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kaXJlY3RpdmVzL2VtYWlsQ29udGV4dE1lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHRlbXBsYXRlQ2FjaGUsICRjb21waWxlLCBjbywgY29udGFjdHMpID0+ICh7XG5cdHJlc3RyaWN0IDogJ0UnLFxuXHRzY29wZToge1xuXHRcdGlzT3BlbjogJz0nLFxuXHRcdGVtYWlsOiAnPSdcblx0fSxcblx0bGluayAgOiAoc2NvcGUsIGVsLCBhdHRycykgPT4ge1xuXHRcdGNvKGZ1bmN0aW9uICooKXtcblx0XHRcdGNvbnN0IHRlbXBsYXRlID0geWllbGQgJHRlbXBsYXRlQ2FjaGUuZmV0Y2goJ3BhcnRpYWxzL2RpcmVjdGl2ZXMvZW1haWxDb250ZXh0TWVudS5odG1sJyk7XG5cdFx0XHRjb25zdCBjb250YWN0ID0gY29udGFjdHMuZ2V0Q29udGFjdEJ5RW1haWwoc2NvcGUuZW1haWwpO1xuXHRcdFx0c2NvcGUuaXNFeGlzdGluZ0NvbnRhY3QgPSAhIWNvbnRhY3Q7XG5cblx0XHRcdGNvbnN0IGNvbXBpbGVkVGVtcGxhdGUgPSAkY29tcGlsZSh0ZW1wbGF0ZSkoc2NvcGUpO1xuXHRcdFx0ZWwucHJlcGVuZChjb21waWxlZFRlbXBsYXRlKTtcblx0XHR9KTtcblx0fVxufSk7Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/ngRightClick.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($parse) {\n\treturn function (scope, element, attrs) {\n\t\tvar fn = $parse(attrs.ngRightClick);\n\t\telement.bind('contextmenu', function (event) {\n\t\t\tscope.$apply(function () {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tfn(scope, { $event: event });\n\t\t\t});\n\t\t});\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvbmdSaWdodENsaWNrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsTUFBTTtRQUNwQyxVQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFLO0FBQzFCLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDdEMsU0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsVUFBQSxLQUFLLEVBQUk7QUFDcEMsUUFBSyxDQUFDLE1BQU0sQ0FBQyxZQUFNO0FBQ2xCLFNBQUssQ0FBQyxjQUFjLEVBQUUsQ0FBQztBQUN2QixNQUFFLENBQUMsS0FBSyxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7SUFDM0IsQ0FBQyxDQUFDO0dBQ0gsQ0FBQyxDQUFDO0VBQ0g7Q0FBQSxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvbmdSaWdodENsaWNrLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRwYXJzZSkgPT5cblx0KHNjb3BlLCBlbGVtZW50LCBhdHRycykgPT4ge1xuXHRcdGNvbnN0IGZuID0gJHBhcnNlKGF0dHJzLm5nUmlnaHRDbGljayk7XG5cdFx0ZWxlbWVudC5iaW5kKCdjb250ZXh0bWVudScsIGV2ZW50ID0+IHtcblx0XHRcdHNjb3BlLiRhcHBseSgoKSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGZuKHNjb3BlLCB7JGV2ZW50OiBldmVudH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/openFile.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($compile, fileReader) {\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\topenFile: '&',\n\t\t\topenError: '&'\n\t\t},\n\t\tlink: function link(scope, el, attrs) {\n\t\t\tscope.getFile = function (file) {\n\t\t\t\tfileReader.readAsText(file).then(function (data) {\n\t\t\t\t\tscope.openFile({ data: data });\n\t\t\t\t})['catch'](function (error) {\n\t\t\t\t\tif (scope.openError) scope.openError(error);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tvar buttonEl = angular.element('<input class=\"hidden\" type=\"file\" file-select get-file=\"getFile(file)\"/>');\n\t\t\t$compile(buttonEl)(scope);\n\n\t\t\tel.bind('click', function () {\n\t\t\t\treturn buttonEl[0].click();\n\t\t\t});\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvb3BlbkZpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxRQUFRLEVBQUUsVUFBVTtRQUFNO0FBQ3hELFVBQVEsRUFBRyxHQUFHO0FBQ2QsT0FBSyxFQUFFO0FBQ04sV0FBUSxFQUFFLEdBQUc7QUFDYixZQUFTLEVBQUUsR0FBRztHQUNkO0FBQ0QsTUFBSSxFQUFJLGNBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUs7QUFDN0IsUUFBSyxDQUFDLE9BQU8sR0FBRyxVQUFDLElBQUksRUFBSztBQUN6QixjQUFVLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUN6QixJQUFJLENBQUMsVUFBQSxJQUFJLEVBQUk7QUFDYixVQUFLLENBQUMsUUFBUSxDQUFDLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBQyxDQUFDLENBQUM7S0FDN0IsQ0FBQyxTQUNJLENBQUMsVUFBQSxLQUFLLEVBQUk7QUFDZixTQUFJLEtBQUssQ0FBQyxTQUFTLEVBQ2xCLEtBQUssQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDeEIsQ0FBQyxDQUFDO0lBQ0osQ0FBQzs7QUFFRixPQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLDBFQUEwRSxDQUFDLENBQUM7QUFDN0csV0FBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUUxQixLQUFFLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRTtXQUFNLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLEVBQUU7SUFBQSxDQUFDLENBQUM7R0FDNUM7RUFDRDtDQUFDLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZGlyZWN0aXZlcy9vcGVuRmlsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkY29tcGlsZSwgZmlsZVJlYWRlcikgPT4gKHtcblx0cmVzdHJpY3QgOiAnQScsXG5cdHNjb3BlOiB7XG5cdFx0b3BlbkZpbGU6ICcmJyxcblx0XHRvcGVuRXJyb3I6ICcmJ1xuXHR9LFxuXHRsaW5rICA6IChzY29wZSwgZWwsIGF0dHJzKSA9PiB7XG5cdFx0c2NvcGUuZ2V0RmlsZSA9IChmaWxlKSA9PiB7XG5cdFx0XHRmaWxlUmVhZGVyLnJlYWRBc1RleHQoZmlsZSlcblx0XHRcdFx0LnRoZW4oZGF0YSA9PiB7XG5cdFx0XHRcdFx0c2NvcGUub3BlbkZpbGUoe2RhdGE6IGRhdGF9KTtcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGVycm9yID0+IHtcblx0XHRcdFx0XHRpZiAoc2NvcGUub3BlbkVycm9yKVxuXHRcdFx0XHRcdFx0c2NvcGUub3BlbkVycm9yKGVycm9yKTtcblx0XHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGJ1dHRvbkVsID0gYW5ndWxhci5lbGVtZW50KCc8aW5wdXQgY2xhc3M9XCJoaWRkZW5cIiB0eXBlPVwiZmlsZVwiIGZpbGUtc2VsZWN0IGdldC1maWxlPVwiZ2V0RmlsZShmaWxlKVwiLz4nKTtcblx0XHQkY29tcGlsZShidXR0b25FbCkoc2NvcGUpO1xuXG5cdFx0ZWwuYmluZCgnY2xpY2snLCAoKSA9PiBidXR0b25FbFswXS5jbGljaygpKTtcblx0fVxufSk7Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/openRawFile.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($compile, fileReader) {\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: {\n\t\t\topenRawFile: '&',\n\t\t\topenRawError: '&'\n\t\t},\n\t\tlink: function link(scope, el, attrs) {\n\t\t\tscope.getFile = function (file) {\n\t\t\t\tscope.openRawFile({ file: file });\n\t\t\t};\n\n\t\t\tvar buttonEl = angular.element('<input class=\"hidden\" type=\"file\" file-select get-file=\"getFile(file)\"/>');\n\t\t\t$compile(buttonEl)(scope);\n\n\t\t\tel.bind('click', function () {\n\t\t\t\treturn buttonEl[0].click();\n\t\t\t});\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvb3BlblJhd0ZpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxRQUFRLEVBQUUsVUFBVTtRQUFNO0FBQ3hELFVBQVEsRUFBRyxHQUFHO0FBQ2QsT0FBSyxFQUFFO0FBQ04sY0FBVyxFQUFFLEdBQUc7QUFDaEIsZUFBWSxFQUFFLEdBQUc7R0FDakI7QUFDRCxNQUFJLEVBQUksY0FBQyxLQUFLLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBSztBQUM3QixRQUFLLENBQUMsT0FBTyxHQUFHLFVBQUMsSUFBSSxFQUFLO0FBQ3pCLFNBQUssQ0FBQyxXQUFXLENBQUMsRUFBQyxJQUFJLEVBQUosSUFBSSxFQUFDLENBQUMsQ0FBQztJQUMxQixDQUFDOztBQUVGLE9BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsMEVBQTBFLENBQUMsQ0FBQztBQUM3RyxXQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7O0FBRTFCLEtBQUUsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFO1dBQU0sUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRTtJQUFBLENBQUMsQ0FBQztHQUM1QztFQUNEO0NBQUMsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kaXJlY3RpdmVzL29wZW5SYXdGaWxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCRjb21waWxlLCBmaWxlUmVhZGVyKSA9PiAoe1xuXHRyZXN0cmljdCA6ICdBJyxcblx0c2NvcGU6IHtcblx0XHRvcGVuUmF3RmlsZTogJyYnLFxuXHRcdG9wZW5SYXdFcnJvcjogJyYnXG5cdH0sXG5cdGxpbmsgIDogKHNjb3BlLCBlbCwgYXR0cnMpID0+IHtcblx0XHRzY29wZS5nZXRGaWxlID0gKGZpbGUpID0+IHtcblx0XHRcdHNjb3BlLm9wZW5SYXdGaWxlKHtmaWxlfSk7XG5cdFx0fTtcblxuXHRcdGNvbnN0IGJ1dHRvbkVsID0gYW5ndWxhci5lbGVtZW50KCc8aW5wdXQgY2xhc3M9XCJoaWRkZW5cIiB0eXBlPVwiZmlsZVwiIGZpbGUtc2VsZWN0IGdldC1maWxlPVwiZ2V0RmlsZShmaWxlKVwiLz4nKTtcblx0XHQkY29tcGlsZShidXR0b25FbCkoc2NvcGUpO1xuXG5cdFx0ZWwuYmluZCgnY2xpY2snLCAoKSA9PiBidXR0b25FbFswXS5jbGljaygpKTtcblx0fVxufSk7Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/tagOnFocusLoss.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($parse, $timeout) {\n\treturn {\n\t\trestrict: 'A',\n\t\trequire: 'ngModel',\n\t\tlink: function link(scope, element, attrs, ngModel) {\n\t\t\tvar _arguments2 = arguments;\n\n\t\t\tvar toggleInput = element.find('input')[0];\n\t\t\ttoggleInput.addEventListener('blur', function (event) {\n\t\t\t\tvar searchValue = $parse(attrs.tagOnFocusLoss)(scope);\n\t\t\t\tif (searchValue) searchValue = searchValue.trim();\n\n\t\t\t\tif (searchValue) {\n\t\t\t\t\t(function () {\n\t\t\t\t\t\tvar tagTransform = $parse(attrs.tagging)(scope);\n\n\t\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\t\tvar target = angular.element(event.explicitOriginalTarget || document.activeElement);\n\t\t\t\t\t\t\tvar isTransferable = function isTransferable(_x2) {\n\t\t\t\t\t\t\t\tvar _arguments = _arguments2;\n\t\t\t\t\t\t\t\tvar _again = true;\n\n\t\t\t\t\t\t\t\t_function: while (_again) {\n\t\t\t\t\t\t\t\t\tlvl = undefined;\n\t\t\t\t\t\t\t\t\t_again = false;\n\t\t\t\t\t\t\t\t\tvar target = _x2;\n\t\t\t\t\t\t\t\t\tvar lvl = _arguments[1] === undefined ? 1 : _arguments[1];\n\n\t\t\t\t\t\t\t\t\tif (target.hasClass('tag-transferable')) return true;\n\n\t\t\t\t\t\t\t\t\tif (target.parent() && lvl < 3) {\n\t\t\t\t\t\t\t\t\t\t_arguments = [_x2 = angular.element(target.parent()), lvl + 1];\n\t\t\t\t\t\t\t\t\t\t_again = true;\n\t\t\t\t\t\t\t\t\t\tcontinue _function;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tif (isTransferable(target)) {\n\t\t\t\t\t\t\t\tvar tag = tagTransform(searchValue);\n\t\t\t\t\t\t\t\tngModel.$modelValue.push(tag);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvdGFnT25Gb2N1c0xvc3MuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBaUIsVUFBQyxNQUFNLEVBQUUsUUFBUSxFQUFLO0FBQ3BELFFBQU87QUFDTixVQUFRLEVBQUUsR0FBRztBQUNiLFNBQU8sRUFBRSxTQUFTO0FBQ2xCLE1BQUksRUFBRSxjQUFVLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRTs7O0FBQy9DLE9BQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0MsY0FBVyxDQUFDLGdCQUFnQixDQUFDLE1BQU0sRUFBRSxVQUFDLEtBQUssRUFBSztBQUMvQyxRQUFJLFdBQVcsR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3RELFFBQUksV0FBVyxFQUNkLFdBQVcsR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUM7O0FBRWxDLFFBQUksV0FBVyxFQUFFOztBQUNoQixVQUFNLFlBQVksR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVsRCxjQUFRLENBQUMsWUFBTTtBQUNkLFdBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLHNCQUFzQixJQUFJLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN2RixXQUFNLGNBQWMsR0FBRyxTQUFqQixjQUFjOzs7O2tDQUF3QjtBQUFaLFlBQUc7O2FBQVgsTUFBTTthQUFFLEdBQUcsaUNBQUcsQ0FBQzs7QUFDdEMsYUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLGtCQUFrQixDQUFDLEVBQ3RDLE9BQU8sSUFBSSxDQUFDOztBQUViLGFBQUksTUFBTSxDQUFDLE1BQU0sRUFBRSxJQUFJLEdBQUcsR0FBRyxDQUFDOzhCQUNQLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7OztVQUFFOztBQUVsRSxnQkFBTyxLQUFLLENBQUM7U0FDYjtRQUFBLENBQUM7O0FBRUYsV0FBSSxjQUFjLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFDM0IsWUFBTSxHQUFHLEdBQUcsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3RDLGVBQU8sQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzlCO09BQ0QsQ0FBQyxDQUFDOztLQUNIO0lBQ0QsQ0FBQyxDQUFDO0dBQ0g7RUFDRCxDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9kaXJlY3RpdmVzL3RhZ09uRm9jdXNMb3NzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovICgkcGFyc2UsICR0aW1lb3V0KSA9PiB7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6ICdBJyxcblx0XHRyZXF1aXJlOiAnbmdNb2RlbCcsXG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuXHRcdFx0dmFyIHRvZ2dsZUlucHV0ID0gZWxlbWVudC5maW5kKCdpbnB1dCcpWzBdO1xuXHRcdFx0dG9nZ2xlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIChldmVudCkgPT4ge1xuXHRcdFx0XHRsZXQgc2VhcmNoVmFsdWUgPSAkcGFyc2UoYXR0cnMudGFnT25Gb2N1c0xvc3MpKHNjb3BlKTtcblx0XHRcdFx0aWYgKHNlYXJjaFZhbHVlKVxuXHRcdFx0XHRcdHNlYXJjaFZhbHVlID0gc2VhcmNoVmFsdWUudHJpbSgpO1xuXG5cdFx0XHRcdGlmIChzZWFyY2hWYWx1ZSkge1xuXHRcdFx0XHRcdGNvbnN0IHRhZ1RyYW5zZm9ybSA9ICRwYXJzZShhdHRycy50YWdnaW5nKShzY29wZSk7XG5cblx0XHRcdFx0XHQkdGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCB0YXJnZXQgPSBhbmd1bGFyLmVsZW1lbnQoZXZlbnQuZXhwbGljaXRPcmlnaW5hbFRhcmdldCB8fCBkb2N1bWVudC5hY3RpdmVFbGVtZW50KTtcblx0XHRcdFx0XHRcdGNvbnN0IGlzVHJhbnNmZXJhYmxlID0gKHRhcmdldCwgbHZsID0gMSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAodGFyZ2V0Lmhhc0NsYXNzKCd0YWctdHJhbnNmZXJhYmxlJykpXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdFx0XHRcdFx0aWYgKHRhcmdldC5wYXJlbnQoKSAmJiBsdmwgPCAzKVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBpc1RyYW5zZmVyYWJsZShhbmd1bGFyLmVsZW1lbnQodGFyZ2V0LnBhcmVudCgpKSwgbHZsICsgMSk7XG5cblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0aWYgKGlzVHJhbnNmZXJhYmxlKHRhcmdldCkpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgdGFnID0gdGFnVHJhbnNmb3JtKHNlYXJjaFZhbHVlKTtcblx0XHRcdFx0XHRcdFx0bmdNb2RlbC4kbW9kZWxWYWx1ZS5wdXNoKHRhZyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/textAngularFocus.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($parse, $timeout, textAngularManager) {\n\treturn {\n\t\tlink: function link(scope, element, attributes) {\n\t\t\t$timeout(function () {\n\t\t\t\tvar editorScope = textAngularManager.retrieveEditor(attributes.name).scope;\n\t\t\t\teditorScope.displayElements.text.triggerHandler('focus');\n\t\t\t\teditorScope.displayElements.text[0].focus();\n\t\t\t});\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2RpcmVjdGl2ZXMvdGV4dEFuZ3VsYXJGb2N1cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFpQixVQUFDLE1BQU0sRUFBRSxRQUFRLEVBQUUsa0JBQWtCLEVBQUs7QUFDeEUsUUFBTztBQUNOLE1BQUksRUFBRSxjQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFLO0FBQ3JDLFdBQVEsQ0FBQyxZQUFNO0FBQ2QsUUFBSSxXQUFXLEdBQUcsa0JBQWtCLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUM7QUFDM0UsZUFBVyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ3pELGVBQVcsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQzVDLENBQUMsQ0FBQztHQUNIO0VBQ0QsQ0FBQztDQUNGLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZGlyZWN0aXZlcy90ZXh0QW5ndWxhckZvY3VzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovICgkcGFyc2UsICR0aW1lb3V0LCB0ZXh0QW5ndWxhck1hbmFnZXIpID0+IHtcblx0cmV0dXJuIHtcblx0XHRsaW5rOiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpID0+IHtcblx0XHRcdCR0aW1lb3V0KCgpID0+IHtcblx0XHRcdFx0bGV0IGVkaXRvclNjb3BlID0gdGV4dEFuZ3VsYXJNYW5hZ2VyLnJldHJpZXZlRWRpdG9yKGF0dHJpYnV0ZXMubmFtZSkuc2NvcGU7XG5cdFx0XHRcdGVkaXRvclNjb3BlLmRpc3BsYXlFbGVtZW50cy50ZXh0LnRyaWdnZXJIYW5kbGVyKCdmb2N1cycpO1xuXHRcdFx0XHRlZGl0b3JTY29wZS5kaXNwbGF5RWxlbWVudHMudGV4dFswXS5mb2N1cygpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/attachment.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function (co, user, crypto, utils, fileReader, Email) {\n\tfunction Attachment(file) {\n\t\tvar self = this;\n\n\t\tangular.extend(this, {\n\t\t\tid: utils.getRandomString(16),\n\t\t\ttype: file.type,\n\t\t\tname: file.name,\n\t\t\tdateModified: new Date(file.lastModifiedDate),\n\t\t\tbody: '',\n\t\t\tsize: 0\n\t\t});\n\n\t\tthis.getBodyAsBinaryString = function () {\n\t\t\treturn utils.Uint8Array2str(self.body);\n\t\t};\n\n\t\tthis.read = function () {\n\t\t\treturn co(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tcontext$4$0.next = 2;\n\t\t\t\t\t\t\treturn fileReader.readAsArrayBuffer(file);\n\n\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\tcontext$4$0.t23 = context$4$0.sent;\n\t\t\t\t\t\t\tself.body = new Uint8Array(context$4$0.t23);\n\n\t\t\t\t\t\t\tself.size = self.body ? self.body.length : 0;\n\n\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t}\n\t\t\t\t}, callee$3$0, this);\n\t\t\t}));\n\t\t};\n\t}\n\n\tAttachment.toEnvelope = function (attachment, keys) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar isSecured, publicKeys, envelope;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tisSecured = Email.isSecuredKeys(keys);\n\n\t\t\t\t\t\tif (isSecured) keys[user.email] = user.key.key;\n\t\t\t\t\t\tpublicKeys = isSecured ? Email.keysMapToList(keys) : [];\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn crypto.encodeEnvelopeWithKeys({\n\t\t\t\t\t\t\tdata: attachment.body\n\t\t\t\t\t\t}, publicKeys, 'data');\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tenvelope = context$3$0.sent;\n\n\t\t\t\t\t\tenvelope.name = isSecured ? attachment.id + '.pgp' : attachment.name;\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', envelope);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tAttachment.fromEnvelope = function (envelope) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar data;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn crypto.decodeEnvelope(envelope, 'data');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tdata = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.t24 = data.majorVersion;\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', new Attachment(angular.extend({}, {\n\t\t\t\t\t\t\tid: envelope.id,\n\t\t\t\t\t\t\tname: envelope.name,\n\t\t\t\t\t\t\tdateCreated: envelope.date_created,\n\t\t\t\t\t\t\tdateModified: envelope.date_modified\n\t\t\t\t\t\t}, data.data)));\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\treturn Attachment;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9hdHRhY2htZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUs7QUFDN0UsVUFBUyxVQUFVLENBQUMsSUFBSSxFQUFFO0FBQ3pCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFbEIsU0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUU7QUFDcEIsS0FBRSxFQUFFLEtBQUssQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO0FBQzdCLE9BQUksRUFBRSxJQUFJLENBQUMsSUFBSTtBQUNmLE9BQUksRUFBRSxJQUFJLENBQUMsSUFBSTtBQUNmLGVBQVksRUFBRSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7QUFDN0MsT0FBSSxFQUFFLEVBQUU7QUFDUixPQUFJLEVBQUUsQ0FBQztHQUNQLENBQUMsQ0FBQzs7QUFFSCxNQUFJLENBQUMscUJBQXFCLEdBQUc7VUFBTSxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7R0FBQSxDQUFDOztBQUVuRSxNQUFJLENBQUMsSUFBSSxHQUFHO1VBQU0sRUFBRSx5QkFBQzs7Ozs7Y0FDYSxVQUFVLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDOzs7O0FBQW5FLFdBQUksQ0FBQyxJQUFJLE9BQU8sVUFBVTs7QUFDMUIsV0FBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQzs7Ozs7OztJQUM3QyxFQUFDO0dBQUEsQ0FBQztFQUNIOztBQUVELFdBQVUsQ0FBQyxVQUFVLEdBQUcsVUFBQyxVQUFVLEVBQUUsSUFBSTtTQUFLLEVBQUUseUJBQUM7T0FDMUMsU0FBUyxFQUlULFVBQVUsRUFFVixRQUFROzs7O0FBTlIsZUFBUyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDOztBQUUzQyxVQUFJLFNBQVMsRUFDWixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDO0FBQzNCLGdCQUFVLEdBQUcsU0FBUyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTs7YUFFdEMsTUFBTSxDQUFDLHNCQUFzQixDQUFDO0FBQ3BELFdBQUksRUFBRSxVQUFVLENBQUMsSUFBSTtPQUNyQixFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUM7OztBQUZoQixjQUFROztBQUdkLGNBQVEsQ0FBQyxJQUFJLEdBQUcsU0FBUyxHQUFHLFVBQVUsQ0FBQyxFQUFFLEdBQUcsTUFBTSxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUM7OzBDQUU5RCxRQUFROzs7Ozs7O0dBQ2YsRUFBQztFQUFBLENBQUM7O0FBRUgsV0FBVSxDQUFDLFlBQVksR0FBRyxVQUFDLFFBQVE7U0FBSyxFQUFFLHlCQUFDO09BQ3BDLElBQUk7Ozs7O2FBQVMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDOzs7QUFBcEQsVUFBSTt3QkFFRixJQUFJLENBQUMsWUFBWTs7Ozs7MENBRWhCLElBQUksVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO0FBQ3hDLFNBQUUsRUFBRSxRQUFRLENBQUMsRUFBRTtBQUNmLFdBQUksRUFBRSxRQUFRLENBQUMsSUFBSTtBQUNuQixrQkFBVyxFQUFFLFFBQVEsQ0FBQyxZQUFZO0FBQ2xDLG1CQUFZLEVBQUUsUUFBUSxDQUFDLGFBQWE7T0FDcEMsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7R0FFaEIsRUFBQztFQUFBLENBQUM7O0FBRUgsUUFBTyxVQUFVLENBQUM7Q0FDbEIsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9mYWN0b3JpZXMvYXR0YWNobWVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLyhjbywgdXNlciwgY3J5cHRvLCB1dGlscywgZmlsZVJlYWRlciwgRW1haWwpID0+IHtcblx0ZnVuY3Rpb24gQXR0YWNobWVudChmaWxlKSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0XHRhbmd1bGFyLmV4dGVuZCh0aGlzLCB7XG5cdFx0XHRpZDogdXRpbHMuZ2V0UmFuZG9tU3RyaW5nKDE2KSxcblx0XHRcdHR5cGU6IGZpbGUudHlwZSxcblx0XHRcdG5hbWU6IGZpbGUubmFtZSxcblx0XHRcdGRhdGVNb2RpZmllZDogbmV3IERhdGUoZmlsZS5sYXN0TW9kaWZpZWREYXRlKSxcblx0XHRcdGJvZHk6ICcnLFxuXHRcdFx0c2l6ZTogMFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5nZXRCb2R5QXNCaW5hcnlTdHJpbmcgPSAoKSA9PiB1dGlscy5VaW50OEFycmF5MnN0cihzZWxmLmJvZHkpO1xuXG5cdFx0dGhpcy5yZWFkID0gKCkgPT4gY28oZnVuY3Rpb24qICgpe1xuXHRcdFx0c2VsZi5ib2R5ID0gbmV3IFVpbnQ4QXJyYXkoeWllbGQgZmlsZVJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihmaWxlKSk7XG5cdFx0XHRzZWxmLnNpemUgPSBzZWxmLmJvZHkgPyBzZWxmLmJvZHkubGVuZ3RoIDogMDtcblx0XHR9KTtcblx0fVxuXG5cdEF0dGFjaG1lbnQudG9FbnZlbG9wZSA9IChhdHRhY2htZW50LCBrZXlzKSA9PiBjbyhmdW5jdGlvbiAqKCkge1xuXHRcdGNvbnN0IGlzU2VjdXJlZCA9IEVtYWlsLmlzU2VjdXJlZEtleXMoa2V5cyk7XG5cblx0XHRpZiAoaXNTZWN1cmVkKVxuXHRcdFx0a2V5c1t1c2VyLmVtYWlsXSA9IHVzZXIua2V5LmtleTtcblx0XHRjb25zdCBwdWJsaWNLZXlzID0gaXNTZWN1cmVkID8gRW1haWwua2V5c01hcFRvTGlzdChrZXlzKSA6IFtdO1xuXG5cdFx0Y29uc3QgZW52ZWxvcGUgPSB5aWVsZCBjcnlwdG8uZW5jb2RlRW52ZWxvcGVXaXRoS2V5cyh7XG5cdFx0XHRkYXRhOiBhdHRhY2htZW50LmJvZHlcblx0XHR9LCBwdWJsaWNLZXlzLCAnZGF0YScpO1xuXHRcdGVudmVsb3BlLm5hbWUgPSBpc1NlY3VyZWQgPyBhdHRhY2htZW50LmlkICsgJy5wZ3AnIDogYXR0YWNobWVudC5uYW1lO1xuXG5cdFx0cmV0dXJuIGVudmVsb3BlO1xuXHR9KTtcblxuXHRBdHRhY2htZW50LmZyb21FbnZlbG9wZSA9IChlbnZlbG9wZSkgPT4gY28oZnVuY3Rpb24gKigpIHtcblx0XHRjb25zdCBkYXRhID0geWllbGQgY3J5cHRvLmRlY29kZUVudmVsb3BlKGVudmVsb3BlLCAnZGF0YScpO1xuXG5cdFx0c3dpdGNoIChkYXRhLm1ham9yVmVyc2lvbikge1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cmV0dXJuIG5ldyBBdHRhY2htZW50KGFuZ3VsYXIuZXh0ZW5kKHt9LCB7XG5cdFx0XHRcdFx0aWQ6IGVudmVsb3BlLmlkLFxuXHRcdFx0XHRcdG5hbWU6IGVudmVsb3BlLm5hbWUsXG5cdFx0XHRcdFx0ZGF0ZUNyZWF0ZWQ6IGVudmVsb3BlLmRhdGVfY3JlYXRlZCxcblx0XHRcdFx0XHRkYXRlTW9kaWZpZWQ6IGVudmVsb3BlLmRhdGVfbW9kaWZpZWRcblx0XHRcdFx0fSwgZGF0YS5kYXRhKSk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gQXR0YWNobWVudDtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/contact.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($translate, co, user, crypto, ContactEmail) {\n\tvar translations = {\n\t\tLB_UNNAMED_CONTACT: ''\n\t};\n\n\t$translate.bindAsObject(translations, 'MAIN.COMPOSE');\n\n\tfunction Contact(opt) {\n\t\tvar _this = this;\n\n\t\tvar self = this;\n\n\t\tangular.extend(this, opt);\n\n\t\tif (this.isNew) this.isDecrypted = true;\n\n\t\tthis.hiddenEmail = this.hiddenEmail ? new ContactEmail(this, this.hiddenEmail, 'hidden') : null;\n\t\tthis.privateEmails = this.privateEmails ? this.privateEmails.map(function (e) {\n\t\t\treturn new ContactEmail(_this, e, 'private');\n\t\t}) : [];\n\t\tthis.businessEmails = this.businessEmails ? this.businessEmails.map(function (e) {\n\t\t\treturn new ContactEmail(_this, e, 'business');\n\t\t}) : [];\n\n\t\tthis.isCustomName = function () {\n\t\t\treturn self.firstName && self.lastName && self.name != '' + self.firstName.trim() + ' ' + self.lastName.trim();\n\t\t};\n\n\t\tthis.getFullName = function () {\n\t\t\tvar fullName = self.isCustomName() ? self.name + (' (' + self.firstName.trim() + ' ' + self.lastName.trim() + ')') : self.isHidden() ? '' + self.hiddenEmail.email : self.name;\n\t\t\treturn fullName ? fullName : translations.LB_UNNAMED_CONTACT;\n\t\t};\n\n\t\tthis.isMatchEmail = function (email) {\n\t\t\treturn self.hiddenEmail && self.hiddenEmail.email == email || self.privateEmails && self.privateEmails.some(function (e) {\n\t\t\t\treturn e.email == email;\n\t\t\t}) || self.businessEmails && self.businessEmails.some(function (e) {\n\t\t\t\treturn e.email == email;\n\t\t\t});\n\t\t};\n\n\t\tthis.getSortingField = function (id) {\n\t\t\tif (id === 1) return self.firstName;\n\t\t\tif (id === 2) return self.lastName;\n\t\t\treturn self.name;\n\t\t};\n\n\t\tthis.setFromAnotherContact = function (contact) {\n\t\t\tsecureFields.forEach(function (field) {\n\t\t\t\tself[field] = contact[field];\n\t\t\t});\n\t\t};\n\n\t\tthis.isHidden = function () {\n\t\t\treturn !!self.hiddenEmail || self.name == '$hidden';\n\t\t};\n\n\t\tthis.isStar = function () {\n\t\t\tif (self.hiddenEmail && self.hiddenEmail.isStar) return true;\n\n\t\t\tif (self.privateEmails) if (self.privateEmails.some(function (e) {\n\t\t\t\treturn e.isStar;\n\t\t\t})) return true;\n\n\t\t\tif (self.businessEmails) if (self.businessEmails.some(function (e) {\n\t\t\t\treturn e.isStar;\n\t\t\t})) return true;\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.isSecured = function () {\n\t\t\tif (self.hiddenEmail && self.hiddenEmail.isSecured()) return true;\n\n\t\t\tif (self.privateEmails) if (self.privateEmails.some(function (e) {\n\t\t\t\treturn e.isSecured();\n\t\t\t})) return true;\n\n\t\t\tif (self.businessEmails) if (self.businessEmails.some(function (e) {\n\t\t\t\treturn e.isSecured();\n\t\t\t})) return true;\n\n\t\t\treturn false;\n\t\t};\n\n\t\tthis.getEmail = function (email) {\n\t\t\tif (self.hiddenEmail && self.hiddenEmail.email == email) return self.hiddenEmail;\n\n\t\t\tif (self.privateEmails) {\n\t\t\t\tvar e = self.privateEmails.find(function (e) {\n\t\t\t\t\treturn e.email == email;\n\t\t\t\t});\n\t\t\t\tif (e) return e;\n\t\t\t}\n\t\t\tif (self.businessEmails) {\n\t\t\t\tvar e = self.businessEmails.find(function (e) {\n\t\t\t\t\treturn e.email == email;\n\t\t\t\t});\n\t\t\t\tif (e) return e;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t};\n\n\t\tthis.getSecureClass = function () {\n\t\t\treturn 'sec-' + (self.isSecured() ? 1 : 0);\n\t\t};\n\t}\n\n\tvar secureFields = ['name', 'firstName', 'lastName', 'companyName', 'privateEmails', 'businessEmails', 'hiddenEmail'];\n\n\tContact.toEnvelope = function (contact) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar data, envelope;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tdata = secureFields.reduce(function (a, field) {\n\t\t\t\t\t\t\tswitch (field) {\n\t\t\t\t\t\t\t\tcase 'privateEmails':\n\t\t\t\t\t\t\t\tcase 'businessEmails':\n\t\t\t\t\t\t\t\t\ta[field] = contact[field] ? contact[field].map(function (e) {\n\t\t\t\t\t\t\t\t\t\treturn e.compress();\n\t\t\t\t\t\t\t\t\t}) : [];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase 'hiddenEmail':\n\t\t\t\t\t\t\t\t\ta[field] = contact[field] ? contact[field].compress() : null;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\ta[field] = contact[field];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}, {});\n\n\t\t\t\t\t\tconsole.log('contact to envelope', data);\n\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn crypto.encodeEnvelopeWithKeys({\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\tencoding: 'json'\n\t\t\t\t\t\t}, [user.key.key], 'data');\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tenvelope = context$3$0.sent;\n\n\t\t\t\t\t\tenvelope.name = contact.name == '$hidden' ? '$hidden' : '$contact';\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', envelope);\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tContact.fromEnvelope = function (envelope) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar data, c;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn crypto.decodeEnvelope(envelope, 'data');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tdata = context$3$0.sent;\n\n\t\t\t\t\t\tconsole.log('Contact.fromEnvelope data', data);\n\n\t\t\t\t\t\tcontext$3$0.t25 = data.majorVersion;\n\t\t\t\t\t\tcontext$3$0.next = 7;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tc = new Contact(angular.extend({}, {\n\t\t\t\t\t\t\tid: envelope.id,\n\t\t\t\t\t\t\tdateCreated: envelope.date_created,\n\t\t\t\t\t\t\tdateModified: envelope.date_modified,\n\t\t\t\t\t\t\tisDecrypted: !!data.data\n\t\t\t\t\t\t}, data.data));\n\n\t\t\t\t\t\tconsole.log('contact', c);\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', c);\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\treturn Contact;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9jb250YWN0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsVUFBVSxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBSztBQUM3RSxLQUFNLFlBQVksR0FBRztBQUNwQixvQkFBa0IsRUFBRSxFQUFFO0VBQ3RCLENBQUM7O0FBRUYsV0FBVSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsY0FBYyxDQUFDLENBQUM7O0FBRXRELFVBQVMsT0FBTyxDQUFFLEdBQUcsRUFBRTs7O0FBQ3RCLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFbEIsU0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7O0FBRTFCLE1BQUksSUFBSSxDQUFDLEtBQUssRUFDYixJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQzs7QUFFekIsTUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUksQ0FBQztBQUNoRyxNQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsVUFBQSxDQUFDO1VBQUksSUFBSSxZQUFZLFFBQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztHQUFBLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDakgsTUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQztVQUFJLElBQUksWUFBWSxRQUFPLENBQUMsRUFBRSxVQUFVLENBQUM7R0FB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R0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLE1BQU0sQ0FBQzs7O0FBSHBCLGNBQVE7O0FBSWQsY0FBUSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxJQUFJLFNBQVMsR0FBRyxTQUFTLEdBQUcsVUFBVSxDQUFDOzswQ0FFNUQsUUFBUTs7Ozs7OztHQUNmLEVBQUM7RUFBQSxDQUFDOztBQUVILFFBQU8sQ0FBQyxZQUFZLEdBQUcsVUFBQyxRQUFRO1NBQUssRUFBRSx5QkFBQztPQUNqQyxJQUFJLEVBTUosQ0FBQzs7Ozs7YUFOWSxNQUFNLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7OztBQUFwRCxVQUFJOztBQUVWLGFBQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLEVBQUUsSUFBSSxDQUFDLENBQUM7O3dCQUV2QyxJQUFJLENBQUMsWUFBWTs7Ozs7QUFFbkIsT0FBQyxHQUFHLElBQUksT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFO0FBQ3RDLFNBQUUsRUFBRSxRQUFRLENBQUMsRUFBRTtBQUNmLGtCQUFXLEVBQUUsUUFBUSxDQUFDLFlBQVk7QUFDbEMsbUJBQVksRUFBRSxRQUFRLENBQUMsYUFBYTtBQUNwQyxrQkFBVyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSTtPQUN4QixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFZCxhQUFPLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQzs7MENBRW5CLENBQUM7Ozs7Ozs7R0FFVixFQUFDO0VBQUEsQ0FBQzs7QUFFSCxRQUFPLE9BQU8sQ0FBQztDQUNmLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZmFjdG9yaWVzL2NvbnRhY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHRyYW5zbGF0ZSwgY28sIHVzZXIsIGNyeXB0bywgQ29udGFjdEVtYWlsKSA9PiB7XG5cdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcblx0XHRMQl9VTk5BTUVEX0NPTlRBQ1Q6ICcnXG5cdH07XG5cblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5DT01QT1NFJyk7XG5cblx0ZnVuY3Rpb24gQ29udGFjdCAob3B0KSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0XHRhbmd1bGFyLmV4dGVuZCh0aGlzLCBvcHQpO1xuXG5cdFx0aWYgKHRoaXMuaXNOZXcpXG5cdFx0XHR0aGlzLmlzRGVjcnlwdGVkID0gdHJ1ZTtcblxuXHRcdHRoaXMuaGlkZGVuRW1haWwgPSB0aGlzLmhpZGRlbkVtYWlsID8gbmV3IENvbnRhY3RFbWFpbCh0aGlzLCB0aGlzLmhpZGRlbkVtYWlsLCAnaGlkZGVuJykgOiBudWxsO1xuXHRcdHRoaXMucHJpdmF0ZUVtYWlscyA9IHRoaXMucHJpdmF0ZUVtYWlscyA/IHRoaXMucHJpdmF0ZUVtYWlscy5tYXAoZSA9PiBuZXcgQ29udGFjdEVtYWlsKHRoaXMsIGUsICdwcml2YXRlJykpIDogW107XG5cdFx0dGhpcy5idXNpbmVzc0VtYWlscyA9IHRoaXMuYnVzaW5lc3NFbWFpbHMgPyB0aGlzLmJ1c2luZXNzRW1haWxzLm1hcChlID0+IG5ldyBDb250YWN0RW1haWwodGhpcywgZSwgJ2J1c2luZXNzJykpIDogW107XG5cblx0XHR0aGlzLmlzQ3VzdG9tTmFtZSA9ICgpID0+IHNlbGYuZmlyc3ROYW1lICYmIHNlbGYubGFzdE5hbWUgJiYgc2VsZi5uYW1lICE9IGAke3NlbGYuZmlyc3ROYW1lLnRyaW0oKX0gJHtzZWxmLmxhc3ROYW1lLnRyaW0oKX1gO1xuXG5cdFx0dGhpcy5nZXRGdWxsTmFtZSA9ICgpID0+IHtcblx0XHRcdGNvbnN0IGZ1bGxOYW1lID0gc2VsZi5pc0N1c3RvbU5hbWUoKSA/IHNlbGYubmFtZSArIGAgKCR7c2VsZi5maXJzdE5hbWUudHJpbSgpfSAke3NlbGYubGFzdE5hbWUudHJpbSgpfSlgIDpcblx0XHRcdFx0KHNlbGYuaXNIaWRkZW4oKSA/ICcnICsgc2VsZi5oaWRkZW5FbWFpbC5lbWFpbCA6IHNlbGYubmFtZSk7XG5cdFx0XHRyZXR1cm4gZnVsbE5hbWUgPyBmdWxsTmFtZSA6IHRyYW5zbGF0aW9ucy5MQl9VTk5BTUVEX0NPTlRBQ1Q7XG5cdFx0fTtcblxuXHRcdHRoaXMuaXNNYXRjaEVtYWlsID0gKGVtYWlsKSA9PlxuXHRcdFx0KHNlbGYuaGlkZGVuRW1haWwgJiYgc2VsZi5oaWRkZW5FbWFpbC5lbWFpbCA9PSBlbWFpbCkgfHxcblx0XHRcdChzZWxmLnByaXZhdGVFbWFpbHMgJiYgc2VsZi5wcml2YXRlRW1haWxzLnNvbWUoZSA9PiBlLmVtYWlsID09IGVtYWlsKSkgfHxcblx0XHRcdChzZWxmLmJ1c2luZXNzRW1haWxzICYmIHNlbGYuYnVzaW5lc3NFbWFpbHMuc29tZShlID0+IGUuZW1haWwgPT0gZW1haWwpKTtcblxuXHRcdHRoaXMuZ2V0U29ydGluZ0ZpZWxkID0gKGlkKSA9PiB7XG5cdFx0XHRpZiAoaWQgPT09IDEpXG5cdFx0XHRcdHJldHVybiBzZWxmLmZpcnN0TmFtZTtcblx0XHRcdGlmIChpZCA9PT0gMilcblx0XHRcdFx0cmV0dXJuIHNlbGYubGFzdE5hbWU7XG5cdFx0XHRyZXR1cm4gc2VsZi5uYW1lO1xuXHRcdH07XG5cblx0XHR0aGlzLnNldEZyb21Bbm90aGVyQ29udGFjdCA9IChjb250YWN0KSA9PiB7XG5cdFx0XHRzZWN1cmVGaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG5cdFx0XHRcdHNlbGZbZmllbGRdID0gY29udGFjdFtmaWVsZF07XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0dGhpcy5pc0hpZGRlbiA9ICgpID0+ICEhc2VsZi5oaWRkZW5FbWFpbCB8fCBzZWxmLm5hbWUgPT0gJyRoaWRkZW4nO1xuXG5cdFx0dGhpcy5pc1N0YXIgPSAoKSA9PiB7XG5cdFx0XHRpZiAoc2VsZi5oaWRkZW5FbWFpbCAmJiBzZWxmLmhpZGRlbkVtYWlsLmlzU3Rhcilcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdGlmIChzZWxmLnByaXZhdGVFbWFpbHMpXG5cdFx0XHRcdGlmIChzZWxmLnByaXZhdGVFbWFpbHMuc29tZShlID0+IGUuaXNTdGFyKSlcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdFx0aWYgKHNlbGYuYnVzaW5lc3NFbWFpbHMpXG5cdFx0XHRcdGlmIChzZWxmLmJ1c2luZXNzRW1haWxzLnNvbWUoZSA9PiBlLmlzU3RhcikpXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdFx0dGhpcy5pc1NlY3VyZWQgPSAoKSA9PiB7XG5cdFx0XHRpZiAoc2VsZi5oaWRkZW5FbWFpbCAmJiBzZWxmLmhpZGRlbkVtYWlsLmlzU2VjdXJlZCgpKVxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblxuXHRcdFx0aWYgKHNlbGYucHJpdmF0ZUVtYWlscylcblx0XHRcdFx0aWYgKHNlbGYucHJpdmF0ZUVtYWlscy5zb21lKGUgPT4gZS5pc1NlY3VyZWQoKSkpXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdGlmIChzZWxmLmJ1c2luZXNzRW1haWxzKVxuXHRcdFx0XHRpZiAoc2VsZi5idXNpbmVzc0VtYWlscy5zb21lKGUgPT4gZS5pc1NlY3VyZWQoKSkpXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdFx0dGhpcy5nZXRFbWFpbCA9IChlbWFpbCkgPT4ge1xuXHRcdFx0aWYgKHNlbGYuaGlkZGVuRW1haWwgJiYgc2VsZi5oaWRkZW5FbWFpbC5lbWFpbCA9PSBlbWFpbClcblx0XHRcdFx0cmV0dXJuIHNlbGYuaGlkZGVuRW1haWw7XG5cblx0XHRcdGlmIChzZWxmLnByaXZhdGVFbWFpbHMpIHtcblx0XHRcdFx0bGV0IGUgPSBzZWxmLnByaXZhdGVFbWFpbHMuZmluZChlID0+IGUuZW1haWwgPT0gZW1haWwpO1xuXHRcdFx0XHRpZiAoZSlcblx0XHRcdFx0XHRyZXR1cm4gZTtcblx0XHRcdH1cblx0XHRcdGlmIChzZWxmLmJ1c2luZXNzRW1haWxzKSB7XG5cdFx0XHRcdGxldCBlID0gc2VsZi5idXNpbmVzc0VtYWlscy5maW5kKGUgPT4gZS5lbWFpbCA9PSBlbWFpbCk7XG5cdFx0XHRcdGlmIChlKVxuXHRcdFx0XHRcdHJldHVybiBlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9O1xuXG5cdFx0dGhpcy5nZXRTZWN1cmVDbGFzcyA9ICgpID0+IGBzZWMtJHtzZWxmLmlzU2VjdXJlZCgpID8gMSA6IDB9YDtcblx0fVxuXG5cdGNvbnN0IHNlY3VyZUZpZWxkcyA9IFsnbmFtZScsICdmaXJzdE5hbWUnLCAnbGFzdE5hbWUnLCAnY29tcGFueU5hbWUnLCAncHJpdmF0ZUVtYWlscycsICdidXNpbmVzc0VtYWlscycsICdoaWRkZW5FbWFpbCddO1xuXG5cdENvbnRhY3QudG9FbnZlbG9wZSA9IChjb250YWN0KSA9PiBjbyhmdW5jdGlvbiAqKCkge1xuXHRcdGNvbnN0IGRhdGEgPSBzZWN1cmVGaWVsZHMucmVkdWNlKChhLCBmaWVsZCkgPT4ge1xuXHRcdFx0c3dpdGNoIChmaWVsZCkge1xuXHRcdFx0XHRjYXNlICdwcml2YXRlRW1haWxzJzpcblx0XHRcdFx0Y2FzZSAnYnVzaW5lc3NFbWFpbHMnOlxuXHRcdFx0XHRcdGFbZmllbGRdID0gY29udGFjdFtmaWVsZF0gPyBjb250YWN0W2ZpZWxkXS5tYXAoZSA9PiBlLmNvbXByZXNzKCkpIDogW107XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ2hpZGRlbkVtYWlsJzpcblx0XHRcdFx0XHRhW2ZpZWxkXSA9IGNvbnRhY3RbZmllbGRdID8gY29udGFjdFtmaWVsZF0uY29tcHJlc3MoKSA6IG51bGw7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0YVtmaWVsZF0gPSBjb250YWN0W2ZpZWxkXTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhO1xuXHRcdH0sIHt9KTtcblxuXHRcdGNvbnNvbGUubG9nKCdjb250YWN0IHRvIGVudmVsb3BlJywgZGF0YSk7XG5cblx0XHRjb25zdCBlbnZlbG9wZSA9IHlpZWxkIGNyeXB0by5lbmNvZGVFbnZlbG9wZVdpdGhLZXlzKHtcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRlbmNvZGluZzogJ2pzb24nXG5cdFx0fSwgW3VzZXIua2V5LmtleV0sICdkYXRhJyk7XG5cdFx0ZW52ZWxvcGUubmFtZSA9IGNvbnRhY3QubmFtZSA9PSAnJGhpZGRlbicgPyAnJGhpZGRlbicgOiAnJGNvbnRhY3QnO1xuXG5cdFx0cmV0dXJuIGVudmVsb3BlO1xuXHR9KTtcblxuXHRDb250YWN0LmZyb21FbnZlbG9wZSA9IChlbnZlbG9wZSkgPT4gY28oZnVuY3Rpb24gKigpIHtcblx0XHRjb25zdCBkYXRhID0geWllbGQgY3J5cHRvLmRlY29kZUVudmVsb3BlKGVudmVsb3BlLCAnZGF0YScpO1xuXG5cdFx0Y29uc29sZS5sb2coJ0NvbnRhY3QuZnJvbUVudmVsb3BlIGRhdGEnLCBkYXRhKTtcblxuXHRcdHN3aXRjaCAoZGF0YS5tYWpvclZlcnNpb24pIHtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGxldCBjID0gbmV3IENvbnRhY3QoYW5ndWxhci5leHRlbmQoe30sIHtcblx0XHRcdFx0XHRpZDogZW52ZWxvcGUuaWQsXG5cdFx0XHRcdFx0ZGF0ZUNyZWF0ZWQ6IGVudmVsb3BlLmRhdGVfY3JlYXRlZCxcblx0XHRcdFx0XHRkYXRlTW9kaWZpZWQ6IGVudmVsb3BlLmRhdGVfbW9kaWZpZWQsXG5cdFx0XHRcdFx0aXNEZWNyeXB0ZWQ6ICEhZGF0YS5kYXRhXG5cdFx0XHRcdH0sIGRhdGEuZGF0YSkpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCdjb250YWN0JywgYyk7XG5cblx0XHRcdFx0cmV0dXJuIGM7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gQ29udGFjdDtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/contactEmail.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $translate, $timeout, $injector, co, consts, crypto, Key) {\n\tvar translations = {\n\t\tLB_NEW: '',\n\t\tLB_PRIVATE: '',\n\t\tLB_BUSINESS: '',\n\t\tLB_HIDDEN: '',\n\t\tLB_EMAIL_NOT_FOUND: 'MAIN.CONTACTS'\n\t};\n\n\t$translate.bindAsObject(translations, 'MAIN.COMPOSE');\n\n\tfunction ContactEmail(contact, opts, kind) {\n\t\tvar _this = this;\n\n\t\tvar inbox = $injector.get('inbox');\n\t\tvar self = this;\n\n\t\tvar tooltip = '';\n\t\tvar label = '';\n\t\tvar t = null;\n\t\tvar isLoadingKey = false;\n\t\tvar isLoadedKey = false;\n\t\tvar isCollapsed = true;\n\t\tvar tag = opts.tag;\n\n\t\tvar loadKey = function loadKey() {\n\t\t\treturn co(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\tvar key;\n\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tcontext$4$0.prev = 0;\n\t\t\t\t\t\t\tcontext$4$0.next = 3;\n\t\t\t\t\t\t\treturn inbox.getKeyForEmail(self.email);\n\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tkey = context$4$0.sent;\n\n\t\t\t\t\t\t\tself.key = new Key(crypto.readKey(key.key));\n\n\t\t\t\t\t\t\ttooltip = '';\n\t\t\t\t\t\t\tcontext$4$0.next = 13;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\tcontext$4$0.prev = 8;\n\t\t\t\t\t\t\tcontext$4$0.t26 = context$4$0['catch'](0);\n\n\t\t\t\t\t\t\ttooltip = translations.LB_EMAIL_NOT_FOUND;\n\t\t\t\t\t\t\tself.key = null;\n\t\t\t\t\t\t\tthrow context$4$0.t26;\n\n\t\t\t\t\t\tcase 13:\n\t\t\t\t\t\t\tcontext$4$0.prev = 13;\n\n\t\t\t\t\t\t\tisLoadedKey = true;\n\t\t\t\t\t\t\tisLoadingKey = false;\n\t\t\t\t\t\t\treturn context$4$0.finish(13);\n\n\t\t\t\t\t\tcase 17:\n\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t}\n\t\t\t\t}, callee$3$0, this, [[0, 8, 13, 17]]);\n\t\t\t}));\n\t\t};\n\n\t\tif (!opts) opts = {};\n\n\t\tlabel = ({\n\t\t\t'private': translations.LB_PRIVATE,\n\t\t\t'business': translations.LB_BUSINESS,\n\t\t\t'hidden': (opts.isNew ? '' + translations.LB_NEW + ' ' : '') + translations.LB_HIDDEN\n\t\t})[kind];\n\t\tif (!label) throw new Error('Invalid contact email kind \"' + kind + '\"!');\n\n\t\tthis.email = opts.email ? opts.email : '';\n\t\tthis.name = opts.name ? opts.name : '';\n\t\tthis.isStar = opts.isStar ? opts.isStar : false;\n\n\t\tif (opts.key) {\n\t\t\tif (opts.key.key) this.key = new Key(crypto.readKey(opts.key.key));else this.key = new Key(crypto.readKey(opts.key));\n\t\t} else this.key = null;\n\n\t\tthis.isSecured = function () {\n\t\t\treturn !!self.key;\n\t\t};\n\t\tthis.getSecureClass = function () {\n\t\t\treturn 'sec-' + (self.isSecured() ? 1 : 0);\n\t\t};\n\n\t\tthis.getFirstName = function () {\n\t\t\treturn contact ? contact.firstName : '';\n\t\t};\n\t\tthis.getLastName = function () {\n\t\t\treturn contact ? contact.lastName : '';\n\t\t};\n\t\tthis.getDisplayName = function () {\n\t\t\treturn contact ? contact.getFullName() : '';\n\t\t};\n\t\tthis.isHidden = function () {\n\t\t\treturn kind == 'hidden';\n\t\t};\n\t\tthis.isNew = function () {\n\t\t\treturn !!opts.isNew;\n\t\t};\n\t\tthis.getLabel = function () {\n\t\t\treturn label;\n\t\t};\n\t\tthis.getTooltip = function () {\n\t\t\treturn tooltip;\n\t\t};\n\n\t\tthis.getTag = function () {\n\t\t\treturn tag;\n\t\t};\n\n\t\tthis.isCollapsed = function () {\n\t\t\treturn isCollapsed;\n\t\t};\n\t\tthis.collapse = function () {\n\t\t\treturn isCollapsed = true;\n\t\t};\n\t\tthis.expand = function () {\n\t\t\treturn isCollapsed = false;\n\t\t};\n\t\tthis.switchCollapse = function () {\n\t\t\treturn isCollapsed = !isCollapsed;\n\t\t};\n\n\t\tthis.loadKey = function () {\n\t\t\tvar isReload = arguments[0] === undefined ? false : arguments[0];\n\t\t\treturn co(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\tvar domain, promise, _$timeout$schedulePromise, _$timeout$schedulePromise2;\n\n\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tconsole.log('loadKey for ', self.email, 'key:', self.key, isLoadedKey, isLoadingKey, isReload, new Error());\n\n\t\t\t\t\t\t\tcontext$4$0.prev = 1;\n\n\t\t\t\t\t\t\tif (isReload) {\n\t\t\t\t\t\t\t\tcontext$4$0.next = 9;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!self.key) {\n\t\t\t\t\t\t\t\tcontext$4$0.next = 5;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn context$4$0.abrupt('return', self.key);\n\n\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\tif (!isLoadingKey) {\n\t\t\t\t\t\t\t\tcontext$4$0.next = 9;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontext$4$0.next = 8;\n\t\t\t\t\t\t\treturn co.def(t, null);\n\n\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\treturn context$4$0.abrupt('return', self.key);\n\n\t\t\t\t\t\tcase 9:\n\t\t\t\t\t\t\tdomain = self.email.split('@')[1];\n\n\t\t\t\t\t\t\tif (domain) domain = domain.trim().toLowerCase();\n\n\t\t\t\t\t\t\tif (!consts.ROOT_DOMAIN_LIST.includes(domain)) {\n\t\t\t\t\t\t\t\tcontext$4$0.next = 23;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tisLoadingKey = true;\n\n\t\t\t\t\t\t\tpromise = undefined;\n\t\t\t\t\t\t\t_$timeout$schedulePromise = $timeout.schedulePromise(t, function () {\n\t\t\t\t\t\t\t\treturn loadKey();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t\t_$timeout$schedulePromise2 = babelHelpers.slicedToArray(_$timeout$schedulePromise, 2);\n\t\t\t\t\t\t\tt = _$timeout$schedulePromise2[0];\n\t\t\t\t\t\t\tpromise = _$timeout$schedulePromise2[1];\n\t\t\t\t\t\t\tcontext$4$0.next = 20;\n\t\t\t\t\t\t\treturn promise;\n\n\t\t\t\t\t\tcase 20:\n\t\t\t\t\t\t\tconsole.log('scheduled promise completed');\n\t\t\t\t\t\t\tcontext$4$0.next = 27;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 23:\n\t\t\t\t\t\t\tif (t) $timeout.cancel(t);\n\t\t\t\t\t\t\tisLoadingKey = false;\n\n\t\t\t\t\t\t\ttooltip = '';\n\t\t\t\t\t\t\tself.key = null;\n\n\t\t\t\t\t\tcase 27:\n\n\t\t\t\t\t\t\tself.isError = self.isNotFoundError = false;\n\n\t\t\t\t\t\t\treturn context$4$0.abrupt('return', self.key);\n\n\t\t\t\t\t\tcase 31:\n\t\t\t\t\t\t\tcontext$4$0.prev = 31;\n\t\t\t\t\t\t\tcontext$4$0.t27 = context$4$0['catch'](1);\n\n\t\t\t\t\t\t\tself.isError = true;\n\t\t\t\t\t\t\tif (context$4$0.t27.original.status == 404) self.isNotFoundError = true;\n\n\t\t\t\t\t\t\tthrow context$4$0.t27;\n\n\t\t\t\t\t\tcase 36:\n\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t}\n\t\t\t\t}, callee$3$0, this, [[1, 31]]);\n\t\t\t}));\n\t\t};\n\n\t\tthis.cancelKeyLoading = function () {\n\t\t\tconsole.log('cancelKeyLoading for email', self.email);\n\t\t\tif (t) $timeout.cancel(t);\n\t\t\tisLoadingKey = false;\n\t\t\tself.isError = self.isNotFoundError = false;\n\t\t};\n\n\t\tthis.isLoadingKey = function () {\n\t\t\treturn isLoadingKey;\n\t\t};\n\n\t\tthis.compress = function () {\n\t\t\tvar r = angular.copy(_this);\n\n\t\t\tr.key = r.key ? r.key.armor() : null;\n\n\t\t\treturn r;\n\t\t};\n\t}\n\n\tContactEmail.newHiddenEmail = function (email) {\n\t\treturn new ContactEmail(null, {\n\t\t\tname: 'hidden',\n\t\t\temail: email,\n\t\t\tisNew: true\n\t\t}, 'hidden');\n\t};\n\n\tContactEmail.transform = function (email) {\n\t\tvar contacts = $injector.get('contacts');\n\n\t\tif (!email) return null;\n\n\t\tvar c = contacts.getContactByEmail(email);\n\t\tif (c) {\n\t\t\tvar e = c.getEmail(email);\n\t\t\tif (e) return e;\n\t\t}\n\n\t\treturn ContactEmail.newHiddenEmail(email);\n\t};\n\n\treturn ContactEmail;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9jb250YWN0RW1haWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxVQUFVLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFLO0FBQ3ZHLEtBQU0sWUFBWSxHQUFHO0FBQ3BCLFFBQU0sRUFBRyxFQUFFO0FBQ1gsWUFBVSxFQUFHLEVBQUU7QUFDZixhQUFXLEVBQUcsRUFBRTtBQUNoQixXQUFTLEVBQUcsRUFBRTtBQUNkLG9CQUFrQixFQUFHLGVBQWU7RUFDcEMsQ0FBQzs7QUFFRixXQUFVLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxjQUFjLENBQUMsQ0FBQzs7QUFFdEQsVUFBUyxZQUFZLENBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUU7OztBQUMzQyxNQUFJLEtBQUssR0FBRyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQ25DLE1BQUksSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFaEIsTUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ2pCLE1BQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLE1BQUksQ0FBQyxHQUFHLElBQUksQ0FBQztBQUNiLE1BQUksWUFBWSxHQUFHLEtBQUssQ0FBQztBQUN6QixNQUFJLFdBQVcsR0FBRyxLQUFLLENBQUM7QUFDeEIsTUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLE1BQUksR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7O0FBRW5CLE1BQUksT0FBTyxHQUFHLFNBQVYsT0FBTztVQUFTLEVBQUUseUJBQUM7UUFFakIsR0FBRzs7Ozs7O2NBQVMsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJ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QUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUM7O0FBRXJDLFVBQU8sQ0FBQyxDQUFDO0dBQ1QsQ0FBQztFQUNGOztBQUVELGFBQVksQ0FBQyxjQUFjLEdBQUcsVUFBQSxLQUFLO1NBQUksSUFBSSxZQUFZLENBQUMsSUFBSSxFQUFFO0FBQzdELE9BQUksRUFBRSxRQUFRO0FBQ2QsUUFBSyxFQUFMLEtBQUs7QUFDTCxRQUFLLEVBQUUsSUFBSTtHQUNYLEVBQUUsUUFBUSxDQUFDO0VBQUEsQ0FBQzs7QUFFYixhQUFZLENBQUMsU0FBUyxHQUFHLFVBQUEsS0FBSyxFQUFJO0FBQ2pDLE1BQUksUUFBUSxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7O0FBRXpDLE1BQUksQ0FBQyxLQUFLLEVBQ1QsT0FBTyxJQUFJLENBQUM7O0FBRWIsTUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLGlCQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzFDLE1BQUksQ0FBQyxFQUFFO0FBQ04sT0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMxQixPQUFJLENBQUMsRUFDSixPQUFPLENBQUMsQ0FBQztHQUNWOztBQUVELFNBQU8sWUFBWSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztFQUMxQyxDQUFDOztBQUVGLFFBQU8sWUFBWSxDQUFDO0NBQ3BCLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZmFjdG9yaWVzL2NvbnRhY3RFbWFpbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkdHJhbnNsYXRlLCAkdGltZW91dCwgJGluamVjdG9yLCBjbywgY29uc3RzLCBjcnlwdG8sIEtleSkgPT4ge1xuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0TEJfTkVXIDogJycsXG5cdFx0TEJfUFJJVkFURSA6ICcnLFxuXHRcdExCX0JVU0lORVNTIDogJycsXG5cdFx0TEJfSElEREVOIDogJycsXG5cdFx0TEJfRU1BSUxfTk9UX0ZPVU5EIDogJ01BSU4uQ09OVEFDVFMnXG5cdH07XG5cblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5DT01QT1NFJyk7XG5cblx0ZnVuY3Rpb24gQ29udGFjdEVtYWlsIChjb250YWN0LCBvcHRzLCBraW5kKSB7XG5cdFx0bGV0IGluYm94ID0gJGluamVjdG9yLmdldCgnaW5ib3gnKTtcblx0XHRsZXQgc2VsZiA9IHRoaXM7XG5cblx0XHRsZXQgdG9vbHRpcCA9ICcnO1xuXHRcdGxldCBsYWJlbCA9ICcnO1xuXHRcdGxldCB0ID0gbnVsbDtcblx0XHRsZXQgaXNMb2FkaW5nS2V5ID0gZmFsc2U7XG5cdFx0bGV0IGlzTG9hZGVkS2V5ID0gZmFsc2U7XG5cdFx0bGV0IGlzQ29sbGFwc2VkID0gdHJ1ZTtcblx0XHRsZXQgdGFnID0gb3B0cy50YWc7XG5cblx0XHRsZXQgbG9hZEtleSA9ICgpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCBrZXkgPSB5aWVsZCBpbmJveC5nZXRLZXlGb3JFbWFpbChzZWxmLmVtYWlsKTtcblxuXHRcdFx0XHRzZWxmLmtleSA9IG5ldyBLZXkoY3J5cHRvLnJlYWRLZXkoa2V5LmtleSkpO1xuXG5cdFx0XHRcdHRvb2x0aXAgPSAnJztcblx0XHRcdH0gY2F0Y2ggKGVycikge1xuXHRcdFx0XHR0b29sdGlwID0gdHJhbnNsYXRpb25zLkxCX0VNQUlMX05PVF9GT1VORDtcblx0XHRcdFx0c2VsZi5rZXkgPSBudWxsO1xuXHRcdFx0XHR0aHJvdyBlcnI7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRpc0xvYWRlZEtleSA9IHRydWU7XG5cdFx0XHRcdGlzTG9hZGluZ0tleSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0aWYgKCFvcHRzKVxuXHRcdFx0b3B0cyA9IHt9O1xuXG5cdFx0bGFiZWwgPSB7XG5cdFx0XHQncHJpdmF0ZSc6IHRyYW5zbGF0aW9ucy5MQl9QUklWQVRFLFxuXHRcdFx0J2J1c2luZXNzJzogdHJhbnNsYXRpb25zLkxCX0JVU0lORVNTLFxuXHRcdFx0J2hpZGRlbic6IChvcHRzLmlzTmV3ID8gYCR7dHJhbnNsYXRpb25zLkxCX05FV30gYCA6ICcnKSArIHRyYW5zbGF0aW9ucy5MQl9ISURERU5cblx0XHR9W2tpbmRdO1xuXHRcdGlmICghbGFiZWwpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29udGFjdCBlbWFpbCBraW5kIFwiJyArIGtpbmQgKyAnXCIhJyk7XG5cblx0XHR0aGlzLmVtYWlsID0gb3B0cy5lbWFpbCA/IG9wdHMuZW1haWwgOiAnJztcblx0XHR0aGlzLm5hbWUgPSBvcHRzLm5hbWUgPyBvcHRzLm5hbWUgOiAnJztcblx0XHR0aGlzLmlzU3RhciA9IG9wdHMuaXNTdGFyID8gb3B0cy5pc1N0YXIgOiBmYWxzZTtcblxuXHRcdGlmIChvcHRzLmtleSkge1xuXHRcdFx0aWYgKG9wdHMua2V5LmtleSlcblx0XHRcdFx0dGhpcy5rZXkgPSBuZXcgS2V5KGNyeXB0by5yZWFkS2V5KG9wdHMua2V5LmtleSkpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHR0aGlzLmtleSA9IG5ldyBLZXkoY3J5cHRvLnJlYWRLZXkob3B0cy5rZXkpKTtcblx0XHR9IGVsc2UgdGhpcy5rZXkgPSBudWxsO1xuXG5cdFx0dGhpcy5pc1NlY3VyZWQgPSAoKSA9PiAhIXNlbGYua2V5O1xuXHRcdHRoaXMuZ2V0U2VjdXJlQ2xhc3MgPSAoKSA9PiBgc2VjLSR7c2VsZi5pc1NlY3VyZWQoKSA/IDEgOiAwfWA7XG5cblx0XHR0aGlzLmdldEZpcnN0TmFtZSA9ICgpID0+IGNvbnRhY3QgPyBjb250YWN0LmZpcnN0TmFtZSA6ICcnO1xuXHRcdHRoaXMuZ2V0TGFzdE5hbWUgPSAoKSA9PiBjb250YWN0ID8gY29udGFjdC5sYXN0TmFtZSA6ICcnO1xuXHRcdHRoaXMuZ2V0RGlzcGxheU5hbWUgPSAoKSA9PiBjb250YWN0ID8gY29udGFjdC5nZXRGdWxsTmFtZSgpIDogJyc7XG5cdFx0dGhpcy5pc0hpZGRlbiA9ICgpID0+IGtpbmQgPT0gJ2hpZGRlbic7XG5cdFx0dGhpcy5pc05ldyA9ICgpID0+ICEhb3B0cy5pc05ldztcblx0XHR0aGlzLmdldExhYmVsID0gKCkgPT4gbGFiZWw7XG5cdFx0dGhpcy5nZXRUb29sdGlwID0gKCkgPT4gdG9vbHRpcDtcblxuXHRcdHRoaXMuZ2V0VGFnID0gKCkgPT4gdGFnO1xuXG5cdFx0dGhpcy5pc0NvbGxhcHNlZCA9ICgpID0+IGlzQ29sbGFwc2VkO1xuXHRcdHRoaXMuY29sbGFwc2UgPSAoKSA9PiBpc0NvbGxhcHNlZCA9IHRydWU7XG5cdFx0dGhpcy5leHBhbmQgPSAoKSA9PiBpc0NvbGxhcHNlZCA9IGZhbHNlO1xuXHRcdHRoaXMuc3dpdGNoQ29sbGFwc2UgPSAoKSA9PiBpc0NvbGxhcHNlZCA9ICFpc0NvbGxhcHNlZDtcblxuXHRcdHRoaXMubG9hZEtleSA9IChpc1JlbG9hZCA9IGZhbHNlKSA9PiBjbyhmdW5jdGlvbiAqKCl7XG5cdFx0XHRjb25zb2xlLmxvZygnbG9hZEtleSBmb3IgJywgc2VsZi5lbWFpbCwgJ2tleTonLCBzZWxmLmtleSwgaXNMb2FkZWRLZXksIGlzTG9hZGluZ0tleSwgaXNSZWxvYWQsIG5ldyBFcnJvcigpKTtcblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKCFpc1JlbG9hZCkge1xuXHRcdFx0XHRcdGlmIChzZWxmLmtleSlcblx0XHRcdFx0XHRcdHJldHVybiBzZWxmLmtleTtcblxuXHRcdFx0XHRcdGlmIChpc0xvYWRpbmdLZXkpIHtcblx0XHRcdFx0XHRcdHlpZWxkIGNvLmRlZih0LCBudWxsKTtcblxuXHRcdFx0XHRcdFx0cmV0dXJuIHNlbGYua2V5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGxldCBkb21haW4gPSBzZWxmLmVtYWlsLnNwbGl0KCdAJylbMV07XG5cdFx0XHRcdGlmIChkb21haW4pXG5cdFx0XHRcdFx0ZG9tYWluID0gZG9tYWluLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRcdGlmIChjb25zdHMuUk9PVF9ET01BSU5fTElTVC5pbmNsdWRlcyhkb21haW4pKSB7XG5cdFx0XHRcdFx0aXNMb2FkaW5nS2V5ID0gdHJ1ZTtcblxuXHRcdFx0XHRcdGxldCBwcm9taXNlO1xuXHRcdFx0XHRcdFt0LCBwcm9taXNlXSA9ICR0aW1lb3V0LnNjaGVkdWxlUHJvbWlzZSh0LCAoKSA9PiBsb2FkS2V5KCksIDEwMDApO1xuXHRcdFx0XHRcdHlpZWxkIHByb21pc2U7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3NjaGVkdWxlZCBwcm9taXNlIGNvbXBsZXRlZCcpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmICh0KVxuXHRcdFx0XHRcdFx0JHRpbWVvdXQuY2FuY2VsKHQpO1xuXHRcdFx0XHRcdGlzTG9hZGluZ0tleSA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0dG9vbHRpcCA9ICcnO1xuXHRcdFx0XHRcdHNlbGYua2V5ID0gbnVsbDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHNlbGYuaXNFcnJvciA9IHNlbGYuaXNOb3RGb3VuZEVycm9yID0gZmFsc2U7XG5cblx0XHRcdFx0cmV0dXJuIHNlbGYua2V5O1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdHNlbGYuaXNFcnJvciA9IHRydWU7XG5cdFx0XHRcdGlmIChlcnIub3JpZ2luYWwuc3RhdHVzID09IDQwNClcblx0XHRcdFx0XHRzZWxmLmlzTm90Rm91bmRFcnJvciA9IHRydWU7XG5cblx0XHRcdFx0dGhyb3cgZXJyO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5jYW5jZWxLZXlMb2FkaW5nID0gKCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJ2NhbmNlbEtleUxvYWRpbmcgZm9yIGVtYWlsJywgc2VsZi5lbWFpbCk7XG5cdFx0XHRpZiAodClcblx0XHRcdFx0JHRpbWVvdXQuY2FuY2VsKHQpO1xuXHRcdFx0aXNMb2FkaW5nS2V5ID0gZmFsc2U7XG5cdFx0XHRzZWxmLmlzRXJyb3IgPSBzZWxmLmlzTm90Rm91bmRFcnJvciA9IGZhbHNlO1xuXHRcdH07XG5cblx0XHR0aGlzLmlzTG9hZGluZ0tleSA9ICgpID0+IGlzTG9hZGluZ0tleTtcblxuXHRcdHRoaXMuY29tcHJlc3MgPSAoKSA9PiB7XG5cdFx0XHRsZXQgciA9IGFuZ3VsYXIuY29weSh0aGlzKTtcblxuXHRcdFx0ci5rZXkgPSByLmtleSA/IHIua2V5LmFybW9yKCkgOiBudWxsO1xuXG5cdFx0XHRyZXR1cm4gcjtcblx0XHR9O1xuXHR9XG5cblx0Q29udGFjdEVtYWlsLm5ld0hpZGRlbkVtYWlsID0gZW1haWwgPT4gbmV3IENvbnRhY3RFbWFpbChudWxsLCB7XG5cdFx0bmFtZTogJ2hpZGRlbicsXG5cdFx0ZW1haWwsXG5cdFx0aXNOZXc6IHRydWVcblx0fSwgJ2hpZGRlbicpO1xuXG5cdENvbnRhY3RFbWFpbC50cmFuc2Zvcm0gPSBlbWFpbCA9PiB7XG5cdFx0bGV0IGNvbnRhY3RzID0gJGluamVjdG9yLmdldCgnY29udGFjdHMnKTtcblxuXHRcdGlmICghZW1haWwpXG5cdFx0XHRyZXR1cm4gbnVsbDtcblxuXHRcdGxldCBjID0gY29udGFjdHMuZ2V0Q29udGFjdEJ5RW1haWwoZW1haWwpO1xuXHRcdGlmIChjKSB7XG5cdFx0XHRsZXQgZSA9IGMuZ2V0RW1haWwoZW1haWwpO1xuXHRcdFx0aWYgKGUpXG5cdFx0XHRcdHJldHVybiBlO1xuXHRcdH1cblxuXHRcdHJldHVybiBDb250YWN0RW1haWwubmV3SGlkZGVuRW1haWwoZW1haWwpO1xuXHR9O1xuXG5cdHJldHVybiBDb250YWN0RW1haWw7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/email.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function (co, crypto, user, Manifest) {\n\tvar reRegex = /([\\[\\(] *)?(RE?S?|FYI|RIF|I|FS|VB|RV|ENC|ODP|PD|YNT|ILT|SV|VS|VL|AW|WG||||||||FWD?) *([-:;)\\]][ :;\\])-]*|$)|\\]+ *$/i;\n\n\tfunction Email(opt, manifest) {\n\t\tvar self = this;\n\n\t\tthis.id = opt.id;\n\t\tthis.threadId = opt.thread;\n\t\tthis.date = opt.date_created;\n\n\t\tthis.manifest = manifest;\n\t\tthis.subject = manifest ? manifest.subject : opt.name;\n\t\tthis.files = manifest ? manifest.files : [];\n\t\tthis.isHtml = manifest ? manifest.getPart('body').isHtml() : false;\n\n\t\tvar prettify = function prettify(a) {\n\t\t\treturn a.map(function (e) {\n\t\t\t\treturn e.prettyName;\n\t\t\t}).join(',');\n\t\t};\n\n\t\tthis.from = manifest ? manifest.from : Manifest.parseAddresses(opt.from);\n\t\tthis.fromAllPretty = prettify(self.from);\n\n\t\tthis.to = manifest ? manifest.to : [];\n\t\tthis.toPretty = prettify(self.to);\n\n\t\tthis.cc = manifest ? manifest.cc : [];\n\t\tthis.ccPretty = prettify(self.cc);\n\n\t\tthis.bcc = manifest ? manifest.bcc : [];\n\t\tthis.bccPretty = prettify(self.bcc);\n\n\t\tthis.preview = opt.preview;\n\t\tthis.body = opt.body;\n\t\tthis.attachments = opt.attachments ? opt.attachments : [];\n\t}\n\n\tEmail.getSubjectWithoutRe = function (subject) {\n\t\treturn subject.replace(reRegex, '');\n\t};\n\n\tEmail.isSecuredKeys = function (keys) {\n\t\treturn !Object.keys(keys).some(function (e) {\n\t\t\treturn !keys[e];\n\t\t});\n\t};\n\n\tEmail.keysMapToList = function (keys) {\n\t\tvar publicKeysValues = Object.keys(keys).filter(function (e) {\n\t\t\treturn keys[e];\n\t\t}).map(function (e) {\n\t\t\treturn keys[e];\n\t\t});\n\n\t\treturn [].concat(babelHelpers.toConsumableArray(publicKeysValues));\n\t};\n\n\tEmail.toEnvelope = function (_ref, manifest, keys) {\n\t\tvar body = _ref.body;\n\t\tvar attachmentIds = _ref.attachmentIds;\n\t\tvar threadId = _ref.threadId;\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar isSecured, subjectHash, publicKeys, manifestString, _ref2, _ref22, envelope, manifestEncoded;\n\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif (!(manifest && manifest.isValid && !manifest.isValid())) {\n\t\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow new Error('invalid manifest');\n\n\t\t\t\t\tcase 2:\n\n\t\t\t\t\t\tif (!attachmentIds) attachmentIds = [];\n\t\t\t\t\t\tif (!threadId) threadId = null;\n\n\t\t\t\t\t\tisSecured = Email.isSecuredKeys(keys);\n\t\t\t\t\t\tsubjectHash = crypto.hash(Email.getSubjectWithoutRe(manifest.subject));\n\n\t\t\t\t\t\tif (!isSecured) {\n\t\t\t\t\t\t\tcontext$3$0.next = 18;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tkeys[user.email] = user.key.key;\n\t\t\t\t\t\tpublicKeys = Email.keysMapToList(keys);\n\n\t\t\t\t\t\tconsole.log('Email.toEnvelope keys', keys, publicKeys);\n\n\t\t\t\t\t\tmanifestString = manifest.stringify();\n\t\t\t\t\t\tcontext$3$0.next = 13;\n\t\t\t\t\t\treturn [crypto.encodeEnvelopeWithKeys({ data: body }, publicKeys, 'body', 'body'), crypto.encodeWithKeys(manifestString, publicKeys)];\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t_ref2 = context$3$0.sent;\n\t\t\t\t\t\t_ref22 = babelHelpers.slicedToArray(_ref2, 2);\n\t\t\t\t\t\tenvelope = _ref22[0];\n\t\t\t\t\t\tmanifestEncoded = _ref22[1];\n\t\t\t\t\t\treturn context$3$0.abrupt('return', angular.extend({}, envelope, {\n\t\t\t\t\t\t\tkind: 'manifest',\n\t\t\t\t\t\t\tmanifest: manifestEncoded.pgpData,\n\n\t\t\t\t\t\t\tto: manifest.to.map(function (e) {\n\t\t\t\t\t\t\t\treturn e.address;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tcc: manifest.cc.map(function (e) {\n\t\t\t\t\t\t\t\treturn e.address;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tbcc: manifest.bcc.map(function (e) {\n\t\t\t\t\t\t\t\treturn e.address;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsubject_hash: subjectHash,\n\n\t\t\t\t\t\t\tfiles: attachmentIds,\n\t\t\t\t\t\t\tthread: threadId\n\t\t\t\t\t\t}));\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', {\n\t\t\t\t\t\t\tkind: 'raw',\n\t\t\t\t\t\t\tcontent_type: 'text/html',\n\n\t\t\t\t\t\t\tto: manifest.to.map(function (e) {\n\t\t\t\t\t\t\t\treturn e.address;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tcc: manifest.cc.map(function (e) {\n\t\t\t\t\t\t\t\treturn e.address;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tbcc: manifest.bcc.map(function (e) {\n\t\t\t\t\t\t\t\treturn e.address;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsubject: manifest.subject,\n\t\t\t\t\t\t\tsubject_hash: subjectHash,\n\t\t\t\t\t\t\tbody: body,\n\n\t\t\t\t\t\t\tfiles: attachmentIds,\n\t\t\t\t\t\t\tthread: threadId\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 19:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tEmail.fromEnvelope = function (envelope) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar body, manifestRaw, _ref3, _ref32, bodyData, manifestRawData, email;\n\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tbody = null;\n\t\t\t\t\t\tmanifestRaw = null;\n\t\t\t\t\t\tcontext$3$0.prev = 2;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn [crypto.decodeRaw(envelope.body), crypto.decodeRaw(envelope.manifest)];\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\t_ref3 = context$3$0.sent;\n\t\t\t\t\t\t_ref32 = babelHelpers.slicedToArray(_ref3, 2);\n\t\t\t\t\t\tbodyData = _ref32[0];\n\t\t\t\t\t\tmanifestRawData = _ref32[1];\n\n\t\t\t\t\t\tbody = { state: 'ok', data: bodyData };\n\t\t\t\t\t\tmanifestRaw = manifestRawData;\n\t\t\t\t\t\tcontext$3$0.next = 17;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tcontext$3$0.prev = 13;\n\t\t\t\t\t\tcontext$3$0.t28 = context$3$0['catch'](2);\n\n\t\t\t\t\t\tconsole.error('Email.fromEnvelope decrypt error', context$3$0.t28);\n\t\t\t\t\t\tbody = { state: context$3$0.t28.message, data: '' };\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\t\temail = new Email(angular.extend({}, envelope, {\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\tpreview: body\n\t\t\t\t\t\t}), manifestRaw ? Manifest.createFromJson(manifestRaw) : null);\n\n\t\t\t\t\t\tconsole.log('email decoded', email, manifestRaw);\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', email);\n\n\t\t\t\t\tcase 20:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[2, 13]]);\n\t\t}));\n\t};\n\n\treturn Email;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9lbWFpbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBSztBQUM3RCxLQUFNLE9BQU8sR0FDWiw0SUFBNEksQ0FBQzs7QUFFOUksVUFBUyxLQUFLLENBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRTtBQUM5QixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWxCLE1BQUksQ0FBQyxFQUFFLEdBQUksR0FBRyxDQUFDLEVBQUUsQ0FBQztBQUNsQixNQUFJLENBQUMsUUFBUSxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDM0IsTUFBSSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDOztBQUU3QixNQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztBQUN6QixNQUFJLENBQUMsT0FBTyxHQUFHLFFBQVEsR0FBRyxRQUFRLENBQUMsT0FBTyxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDdEQsTUFBSSxDQUFDLEtBQUssR0FBRyxRQUFRLEdBQUcsUUFBUSxDQUFDLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDNUMsTUFBSSxDQUFDLE1BQU0sR0FBRyxRQUFRLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLEVBQUUsR0FBRyxLQUFLLENBQUM7O0FBRW5FLE1BQU0sUUFBUSxHQUFHLFNBQVgsUUFBUSxDQUFJLENBQUM7VUFBSyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQztXQUFJLENBQUMsQ0FBQyxVQUFVO0lBQUEsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUM7R0FBQSxDQUFDOztBQUUzRCxNQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEs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QU0sQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFO0FBQ2xELFdBQUksRUFBRSxJQUFJO0FBQ1YsY0FBTyxFQUFFLElBQUk7T0FDYixDQUFDLEVBQUUsV0FBVyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLEdBQUcsSUFBSSxDQUFDOztBQUU5RCxhQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsRUFBRSxLQUFLLEVBQUUsV0FBVyxDQUFDLENBQUM7OzBDQUUxQyxLQUFLOzs7Ozs7O0dBQ1osRUFBQztFQUFBLENBQUM7O0FBRUgsUUFBTyxLQUFLLENBQUM7Q0FDYixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9lbWFpbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLyhjbywgY3J5cHRvLCB1c2VyLCBNYW5pZmVzdCkgPT4ge1xuXHRjb25zdCByZVJlZ2V4ID1cblx0XHQvKFtcXFtcXChdICopPyhSRT9TP3xGWUl8UklGfEl8RlN8VkJ8UlZ8RU5DfE9EUHxQRHxZTlR8SUxUfFNWfFZTfFZMfEFXfFdHfM6RzqB8zqPOp86VzqR8zqDOoc6YfNeq15LXldeR15R815TXldei15HXqHzkuLvpoph86L2s5Y+RfEZXRD8pICooWy06OylcXF1dWyA6O1xcXSktXSp8JCl8XFxdKyAqJC9pO1xuXG5cdGZ1bmN0aW9uIEVtYWlsIChvcHQsIG1hbmlmZXN0KSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0XHR0aGlzLmlkID0gIG9wdC5pZDtcblx0XHR0aGlzLnRocmVhZElkID0gb3B0LnRocmVhZDtcblx0XHR0aGlzLmRhdGUgPSBvcHQuZGF0ZV9jcmVhdGVkO1xuXG5cdFx0dGhpcy5tYW5pZmVzdCA9IG1hbmlmZXN0O1xuXHRcdHRoaXMuc3ViamVjdCA9IG1hbmlmZXN0ID8gbWFuaWZlc3Quc3ViamVjdCA6IG9wdC5uYW1lO1xuXHRcdHRoaXMuZmlsZXMgPSBtYW5pZmVzdCA/IG1hbmlmZXN0LmZpbGVzIDogW107XG5cdFx0dGhpcy5pc0h0bWwgPSBtYW5pZmVzdCA/IG1hbmlmZXN0LmdldFBhcnQoJ2JvZHknKS5pc0h0bWwoKSA6IGZhbHNlO1xuXG5cdFx0Y29uc3QgcHJldHRpZnkgPSAoYSkgPT4gYS5tYXAoZSA9PiBlLnByZXR0eU5hbWUpLmpvaW4oJywnKTtcblxuXHRcdHRoaXMuZnJvbSA9IG1hbmlmZXN0ID8gbWFuaWZlc3QuZnJvbSA6IE1hbmlmZXN0LnBhcnNlQWRkcmVzc2VzKG9wdC5mcm9tKTtcblx0XHR0aGlzLmZyb21BbGxQcmV0dHkgPSBwcmV0dGlmeShzZWxmLmZyb20pO1xuXG5cdFx0dGhpcy50byA9IG1hbmlmZXN0ID8gbWFuaWZlc3QudG8gOiBbXTtcblx0XHR0aGlzLnRvUHJldHR5ID0gcHJldHRpZnkoc2VsZi50byk7XG5cblx0XHR0aGlzLmNjID0gbWFuaWZlc3QgPyBtYW5pZmVzdC5jYyA6IFtdO1xuXHRcdHRoaXMuY2NQcmV0dHkgPSBwcmV0dGlmeShzZWxmLmNjKTtcblxuXHRcdHRoaXMuYmNjID0gbWFuaWZlc3QgPyBtYW5pZmVzdC5iY2MgOiBbXTtcblx0XHR0aGlzLmJjY1ByZXR0eSA9IHByZXR0aWZ5KHNlbGYuYmNjKTtcblxuXHRcdHRoaXMucHJldmlldyA9IG9wdC5wcmV2aWV3O1xuXHRcdHRoaXMuYm9keSA9IG9wdC5ib2R5O1xuXHRcdHRoaXMuYXR0YWNobWVudHMgPSBvcHQuYXR0YWNobWVudHMgPyBvcHQuYXR0YWNobWVudHMgOiBbXTtcblx0fVxuXG5cdEVtYWlsLmdldFN1YmplY3RXaXRob3V0UmUgPSAoc3ViamVjdCkgPT4gc3ViamVjdC5yZXBsYWNlKHJlUmVnZXgsICcnKTtcblxuXHRFbWFpbC5pc1NlY3VyZWRLZXlzID0gKGtleXMpID0+ICFPYmplY3Qua2V5cyhrZXlzKS5zb21lKGUgPT4gIWtleXNbZV0pO1xuXG5cdEVtYWlsLmtleXNNYXBUb0xpc3QgPSAoa2V5cykgPT4ge1xuXHRcdGNvbnN0IHB1YmxpY0tleXNWYWx1ZXMgPSBPYmplY3Qua2V5cyhrZXlzKS5maWx0ZXIoZSA9PiBrZXlzW2VdKS5tYXAoZSA9PiBrZXlzW2VdKTtcblxuXHRcdHJldHVybiBbLi4ucHVibGljS2V5c1ZhbHVlc107XG5cdH07XG5cblx0RW1haWwudG9FbnZlbG9wZSA9ICh7Ym9keSwgYXR0YWNobWVudElkcywgdGhyZWFkSWR9LCBtYW5pZmVzdCwga2V5cykgPT4gY28oZnVuY3Rpb24gKigpIHtcblx0XHRpZiAobWFuaWZlc3QgJiYgbWFuaWZlc3QuaXNWYWxpZCAmJiAhbWFuaWZlc3QuaXNWYWxpZCgpKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIG1hbmlmZXN0Jyk7XG5cblx0XHRpZiAoIWF0dGFjaG1lbnRJZHMpXG5cdFx0XHRhdHRhY2htZW50SWRzID0gW107XG5cdFx0aWYgKCF0aHJlYWRJZClcblx0XHRcdHRocmVhZElkID0gbnVsbDtcblxuXHRcdGxldCBpc1NlY3VyZWQgPSBFbWFpbC5pc1NlY3VyZWRLZXlzKGtleXMpO1xuXG5cdFx0Y29uc3Qgc3ViamVjdEhhc2ggPSBjcnlwdG8uaGFzaChFbWFpbC5nZXRTdWJqZWN0V2l0aG91dFJlKG1hbmlmZXN0LnN1YmplY3QpKTtcblxuXHRcdGlmIChpc1NlY3VyZWQpIHtcblx0XHRcdGtleXNbdXNlci5lbWFpbF0gPSB1c2VyLmtleS5rZXk7XG5cdFx0XHRsZXQgcHVibGljS2V5cyA9IEVtYWlsLmtleXNNYXBUb0xpc3Qoa2V5cyk7XG5cblx0XHRcdGNvbnNvbGUubG9nKCdFbWFpbC50b0VudmVsb3BlIGtleXMnLCBrZXlzLCBwdWJsaWNLZXlzKTtcblxuXHRcdFx0bGV0IG1hbmlmZXN0U3RyaW5nID0gbWFuaWZlc3Quc3RyaW5naWZ5KCk7XG5cblx0XHRcdGxldCBbZW52ZWxvcGUsIG1hbmlmZXN0RW5jb2RlZF0gPSB5aWVsZCBbXG5cdFx0XHRcdGNyeXB0by5lbmNvZGVFbnZlbG9wZVdpdGhLZXlzKHtkYXRhOiBib2R5fSwgcHVibGljS2V5cywgJ2JvZHknLCAnYm9keScpLFxuXHRcdFx0XHRjcnlwdG8uZW5jb2RlV2l0aEtleXMobWFuaWZlc3RTdHJpbmcsIHB1YmxpY0tleXMpXG5cdFx0XHRdO1xuXG5cdFx0XHRyZXR1cm4gYW5ndWxhci5leHRlbmQoe30sIGVudmVsb3BlLCB7XG5cdFx0XHRcdGtpbmQ6ICdtYW5pZmVzdCcsXG5cdFx0XHRcdG1hbmlmZXN0OiBtYW5pZmVzdEVuY29kZWQucGdwRGF0YSxcblxuXHRcdFx0XHR0bzogbWFuaWZlc3QudG8ubWFwKGUgPT4gZS5hZGRyZXNzKSxcblx0XHRcdFx0Y2M6IG1hbmlmZXN0LmNjLm1hcChlID0+IGUuYWRkcmVzcyksXG5cdFx0XHRcdGJjYzogbWFuaWZlc3QuYmNjLm1hcChlID0+IGUuYWRkcmVzcyksXG5cdFx0XHRcdHN1YmplY3RfaGFzaDogc3ViamVjdEhhc2gsXG5cblx0XHRcdFx0ZmlsZXM6IGF0dGFjaG1lbnRJZHMsXG5cdFx0XHRcdHRocmVhZDogdGhyZWFkSWRcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiB7XG5cdFx0XHRraW5kOiAncmF3Jyxcblx0XHRcdGNvbnRlbnRfdHlwZTogJ3RleHQvaHRtbCcsXG5cblx0XHRcdHRvOiBtYW5pZmVzdC50by5tYXAoZSA9PiBlLmFkZHJlc3MpLFxuXHRcdFx0Y2M6IG1hbmlmZXN0LmNjLm1hcChlID0+IGUuYWRkcmVzcyksXG5cdFx0XHRiY2M6IG1hbmlmZXN0LmJjYy5tYXAoZSA9PiBlLmFkZHJlc3MpLFxuXHRcdFx0c3ViamVjdDogbWFuaWZlc3Quc3ViamVjdCxcblx0XHRcdHN1YmplY3RfaGFzaDogc3ViamVjdEhhc2gsXG5cdFx0XHRib2R5OiBib2R5LFxuXG5cdFx0XHRmaWxlczogYXR0YWNobWVudElkcyxcblx0XHRcdHRocmVhZDogdGhyZWFkSWRcblx0XHR9O1xuXHR9KTtcblxuXHRFbWFpbC5mcm9tRW52ZWxvcGUgPSAoZW52ZWxvcGUpID0+IGNvKGZ1bmN0aW9uICooKSB7XG5cdFx0bGV0IFtib2R5LCBtYW5pZmVzdFJhd10gPSBbbnVsbCwgbnVsbF07XG5cblx0XHR0cnkge1xuXHRcdFx0bGV0IFtib2R5RGF0YSwgbWFuaWZlc3RSYXdEYXRhXSA9IHlpZWxkIFtcblx0XHRcdFx0Y3J5cHRvLmRlY29kZVJhdyhlbnZlbG9wZS5ib2R5KSxcblx0XHRcdFx0Y3J5cHRvLmRlY29kZVJhdyhlbnZlbG9wZS5tYW5pZmVzdClcblx0XHRcdF07XG5cdFx0XHRib2R5ID0ge3N0YXRlOiAnb2snLCBkYXRhOiBib2R5RGF0YX07XG5cdFx0XHRtYW5pZmVzdFJhdyA9IG1hbmlmZXN0UmF3RGF0YTtcblx0XHR9IGNhdGNoIChlcnIpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJ0VtYWlsLmZyb21FbnZlbG9wZSBkZWNyeXB0IGVycm9yJywgZXJyKTtcblx0XHRcdGJvZHkgPSB7c3RhdGU6IGVyci5tZXNzYWdlLCBkYXRhOiAnJ307XG5cdFx0fVxuXG5cdFx0bGV0IGVtYWlsID0gbmV3IEVtYWlsKGFuZ3VsYXIuZXh0ZW5kKHt9LCBlbnZlbG9wZSwge1xuXHRcdFx0Ym9keTogYm9keSxcblx0XHRcdHByZXZpZXc6IGJvZHlcblx0XHR9KSwgbWFuaWZlc3RSYXcgPyBNYW5pZmVzdC5jcmVhdGVGcm9tSnNvbihtYW5pZmVzdFJhdykgOiBudWxsKTtcblxuXHRcdGNvbnNvbGUubG9nKCdlbWFpbCBkZWNvZGVkJywgZW1haWwsIG1hbmlmZXN0UmF3KTtcblxuXHRcdHJldHVybiBlbWFpbDtcblx0fSk7XG5cblx0cmV0dXJuIEVtYWlsO1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/key.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($injector, $translate, $timeout, co, crypto, utils, consts, dateFilter) {\n\tvar translations = {\n\t\tTP_KEY_IS_ENCRYPTED: '',\n\t\tTP_KEY_IS_DECRYPTED: '',\n\t\tLB_EXPIRED: '',\n\t\tLB_EXPIRING_SOON: ''\n\t};\n\t$translate.bindAsObject(translations, 'MAIN.SETTINGS.SECURITY');\n\n\tvar statuses = {};\n\n\tfunction Key(key) {\n\t\tvar _this = this;\n\n\t\tvar self = this;\n\n\t\tvar daysToMsec = 24 * 60 * 60 * 1000;\n\t\tvar now = function now() {\n\t\t\treturn new Date();\n\t\t};\n\n\t\tthis.keyId = utils.hexify(key.primaryKey.keyid.bytes);\n\t\tthis.fingerprint = key.primaryKey.fingerprint;\n\t\tthis.fingerprintPretty = key.primaryKey.fingerprint.match(/.{1,4}/g).join(' ');\n\n\t\tthis.created = new Date(Date.parse(key.primaryKey.created));\n\t\tthis.expiredAt = new Date(Date.parse(key.primaryKey.created) + consts.KEY_EXPIRY_DAYS * daysToMsec);\n\t\tthis.algos = key.primaryKey.algorithm.split('_')[0].toUpperCase();\n\t\tthis.length = key.primaryKey.getBitSize();\n\t\tthis.user = key.users[0].userId.userid;\n\t\tthis.email = utils.getEmailFromAddressString(key.users[0].userId.userid);\n\n\t\tif (!statuses[self.fingerprint]) statuses[self.fingerprint] = {\n\t\t\tisCollapsed: true\n\t\t};\n\n\t\tvar isCollapsed = statuses[self.fingerprint].isCollapsed;\n\t\tvar decodeTimeout = null;\n\t\tvar decryptTime = 0;\n\n\t\tthis.getTitle = function () {\n\t\t\treturn (self.isExpiringSoon ? '(' + translations.LB_EXPIRING_SOON + ') ' : '') + (self.isExpired ? '(' + translations.LB_EXPIRED + ') ' : '') + dateFilter(self.created);\n\t\t};\n\n\t\tthis.isExpired = now() > self.expiredAt;\n\t\tthis.isExpiringSoon = !self.isExpired && now() > self.expiredAt.getTime() - consts.KEY_EXPIRY_DAYS_WARNING * daysToMsec;\n\n\t\tthis.getDecryptTime = function () {\n\t\t\treturn decryptTime;\n\t\t};\n\t\tthis.isDecrypted = function () {\n\t\t\treturn key && key.primaryKey.isDecrypted;\n\t\t};\n\t\tthis.isCollapsed = function () {\n\t\t\treturn isCollapsed;\n\t\t};\n\t\tthis.switchCollapse = function () {\n\t\t\tisCollapsed = !isCollapsed;\n\t\t\tstatuses[self.fingerprint].isCollapsed = isCollapsed;\n\t\t};\n\n\t\tthis.getEncryptionStatusTooltip = function () {\n\t\t\treturn _this.isDecrypted() ? translations.TP_KEY_IS_DECRYPTED : translations.TP_KEY_IS_ENCRYPTED;\n\t\t};\n\n\t\tthis.decrypt = function (password) {\n\t\t\treturn co(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\tdecodeTimeout = $timeout.schedule(decodeTimeout, function () {\n\t\t\t\t\t\t\t\tvar r = false;\n\t\t\t\t\t\t\t\tif (key && !key.primaryKey.isDecrypted) {\n\t\t\t\t\t\t\t\t\tr = crypto.authenticate(key, password);\n\t\t\t\t\t\t\t\t\treturn !!r;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tdecryptTime = new Date();\n\t\t\t\t\t\t\t}, consts.AUTO_SAVE_TIMEOUT);\n\n\t\t\t\t\t\t\tcontext$4$0.next = 3;\n\t\t\t\t\t\t\treturn decodeTimeout;\n\n\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\tcontext$4$0.t29 = context$4$0.sent;\n\t\t\t\t\t\t\tutils.def(context$4$0.t29);\n\t\t\t\t\t\t\treturn context$4$0.abrupt('return', key.primaryKey.isDecrypted);\n\n\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t}\n\t\t\t\t}, callee$3$0, this);\n\t\t\t}));\n\t\t};\n\n\t\tthis.armor = function () {\n\t\t\treturn key.armor();\n\t\t};\n\t}\n\n\treturn Key;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9rZXkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsVUFBVSxFQUFLO0FBQ3pHLEtBQU0sWUFBWSxHQUFHO0FBQ3BCLHFCQUFtQixFQUFFLEVBQUU7QUFDdkIscUJBQW1CLEVBQUUsRUFBRTtBQUN2QixZQUFVLEVBQUUsRUFBRTtBQUNkLGtCQUFnQixFQUFFLEVBQUU7RUFDcEIsQ0FBQztBQUNGLFdBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLHdCQUF3QixDQUFDLENBQUM7O0FBRWhFLEtBQU0sUUFBUSxHQUFHLEVBQUUsQ0FBQzs7QUFFcEIsVUFBUyxHQUFHLENBQUMsR0FBRyxFQUFFOzs7QUFDakIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDOztBQUVsQixNQUFNLFVBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUM7QUFDdkMsTUFBTSxHQUFHLEdBQUcsU0FBTixHQUFHO1VBQVMsSUFBSSxJQUFJLEVBQUU7R0FBQSxDQUFDOztBQUU3QixNQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDdEQsTUFBSSxDQUFDLFdBQVcsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQztBQUM5QyxNQUFJLENBQUMsaUJBQWlCLEdBQUcsR0FBRyxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzs7QUFFL0Us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QyxHQUFHLENBQUMsVUFBVSxDQUFDLFdBQVcsRUFBRTtBQUN2QyxVQUFDLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdkMsZ0JBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNYOztBQUVELG1CQUFXLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN6QixFQUFFLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDOzs7Y0FFYixhQUFhOzs7O0FBQTdCLFlBQUssQ0FBQyxHQUFHOzJDQUVGLEdBQUcsQ0FBQyxVQUFVLENBQUMsV0FBVzs7Ozs7OztJQUNqQyxFQUFDO0dBQUEsQ0FBQzs7QUFFSCxNQUFJLENBQUMsS0FBSyxHQUFHO1VBQU0sR0FBRyxDQUFDLEtBQUssRUFBRTtHQUFBLENBQUM7RUFDL0I7O0FBRUQsUUFBTyxHQUFHLENBQUM7Q0FDWCxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9rZXkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJGluamVjdG9yLCAkdHJhbnNsYXRlLCAkdGltZW91dCwgY28sIGNyeXB0bywgdXRpbHMsIGNvbnN0cywgZGF0ZUZpbHRlcikgPT4ge1xuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0VFBfS0VZX0lTX0VOQ1JZUFRFRDogJycsXG5cdFx0VFBfS0VZX0lTX0RFQ1JZUFRFRDogJycsXG5cdFx0TEJfRVhQSVJFRDogJycsXG5cdFx0TEJfRVhQSVJJTkdfU09PTjogJydcblx0fTtcblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnTUFJTi5TRVRUSU5HUy5TRUNVUklUWScpO1xuXG5cdGNvbnN0IHN0YXR1c2VzID0ge307XG5cblx0ZnVuY3Rpb24gS2V5KGtleSkge1xuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdFx0Y29uc3QgZGF5c1RvTXNlYyA9IDI0ICogNjAgKiA2MCAqIDEwMDA7XG5cdFx0Y29uc3Qgbm93ID0gKCkgPT4gbmV3IERhdGUoKTtcblxuXHRcdHRoaXMua2V5SWQgPSB1dGlscy5oZXhpZnkoa2V5LnByaW1hcnlLZXkua2V5aWQuYnl0ZXMpO1xuXHRcdHRoaXMuZmluZ2VycHJpbnQgPSBrZXkucHJpbWFyeUtleS5maW5nZXJwcmludDtcblx0XHR0aGlzLmZpbmdlcnByaW50UHJldHR5ID0ga2V5LnByaW1hcnlLZXkuZmluZ2VycHJpbnQubWF0Y2goLy57MSw0fS9nKS5qb2luKCcgJyk7XG5cblx0XHR0aGlzLmNyZWF0ZWQgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKGtleS5wcmltYXJ5S2V5LmNyZWF0ZWQpKTtcblx0XHR0aGlzLmV4cGlyZWRBdCA9IG5ldyBEYXRlKERhdGUucGFyc2Uoa2V5LnByaW1hcnlLZXkuY3JlYXRlZCkgKyBjb25zdHMuS0VZX0VYUElSWV9EQVlTICogZGF5c1RvTXNlYyk7XG5cdFx0dGhpcy5hbGdvcyA9IGtleS5wcmltYXJ5S2V5LmFsZ29yaXRobS5zcGxpdCgnXycpWzBdLnRvVXBwZXJDYXNlKCk7XG5cdFx0dGhpcy5sZW5ndGggPSBrZXkucHJpbWFyeUtleS5nZXRCaXRTaXplKCk7XG5cdFx0dGhpcy51c2VyID0ga2V5LnVzZXJzWzBdLnVzZXJJZC51c2VyaWQ7XG5cdFx0dGhpcy5lbWFpbCA9IHV0aWxzLmdldEVtYWlsRnJvbUFkZHJlc3NTdHJpbmcoa2V5LnVzZXJzWzBdLnVzZXJJZC51c2VyaWQpO1xuXG5cdFx0aWYgKCFzdGF0dXNlc1tzZWxmLmZpbmdlcnByaW50XSlcblx0XHRcdHN0YXR1c2VzW3NlbGYuZmluZ2VycHJpbnRdID0ge1xuXHRcdFx0XHRpc0NvbGxhcHNlZDogdHJ1ZVxuXHRcdFx0fTtcblxuXHRcdGxldCBpc0NvbGxhcHNlZCA9IHN0YXR1c2VzW3NlbGYuZmluZ2VycHJpbnRdLmlzQ29sbGFwc2VkO1xuXHRcdGxldCBkZWNvZGVUaW1lb3V0ID0gbnVsbDtcblx0XHRsZXQgZGVjcnlwdFRpbWUgPSAwO1xuXG5cdFx0dGhpcy5nZXRUaXRsZSA9ICgpID0+XG5cdFx0XHQoc2VsZi5pc0V4cGlyaW5nU29vbiA/IGAoJHt0cmFuc2xhdGlvbnMuTEJfRVhQSVJJTkdfU09PTn0pIGAgOiAnJykgK1xuXHRcdFx0KHNlbGYuaXNFeHBpcmVkID8gYCgke3RyYW5zbGF0aW9ucy5MQl9FWFBJUkVEfSkgYCA6ICcnKSArXG5cdFx0XHRkYXRlRmlsdGVyKHNlbGYuY3JlYXRlZCk7XG5cblx0XHR0aGlzLmlzRXhwaXJlZCA9IG5vdygpID4gc2VsZi5leHBpcmVkQXQ7XG5cdFx0dGhpcy5pc0V4cGlyaW5nU29vbiA9ICFzZWxmLmlzRXhwaXJlZCAmJiAobm93KCkgPiBzZWxmLmV4cGlyZWRBdC5nZXRUaW1lKCkgLSBjb25zdHMuS0VZX0VYUElSWV9EQVlTX1dBUk5JTkcgKiBkYXlzVG9Nc2VjKTtcblxuXHRcdHRoaXMuZ2V0RGVjcnlwdFRpbWUgPSAoKSA9PiBkZWNyeXB0VGltZTtcblx0XHR0aGlzLmlzRGVjcnlwdGVkID0gKCkgPT4ga2V5ICYmIGtleS5wcmltYXJ5S2V5LmlzRGVjcnlwdGVkO1xuXHRcdHRoaXMuaXNDb2xsYXBzZWQgPSAoKSA9PiBpc0NvbGxhcHNlZDtcblx0XHR0aGlzLnN3aXRjaENvbGxhcHNlID0gKCkgPT4ge1xuXHRcdFx0aXNDb2xsYXBzZWQgPSAhaXNDb2xsYXBzZWQ7XG5cdFx0XHRzdGF0dXNlc1tzZWxmLmZpbmdlcnByaW50XS5pc0NvbGxhcHNlZCA9IGlzQ29sbGFwc2VkO1xuXHRcdH07XG5cblx0XHR0aGlzLmdldEVuY3J5cHRpb25TdGF0dXNUb29sdGlwID0gKCkgPT4gdGhpcy5pc0RlY3J5cHRlZCgpXG5cdFx0XHQ/IHRyYW5zbGF0aW9ucy5UUF9LRVlfSVNfREVDUllQVEVEXG5cdFx0XHQ6IHRyYW5zbGF0aW9ucy5UUF9LRVlfSVNfRU5DUllQVEVEO1xuXG5cdFx0dGhpcy5kZWNyeXB0ID0gKHBhc3N3b3JkKSA9PiBjbyhmdW5jdGlvbiAqKCl7XG5cdFx0XHRkZWNvZGVUaW1lb3V0ID0gJHRpbWVvdXQuc2NoZWR1bGUoZGVjb2RlVGltZW91dCwgKCkgPT4ge1xuXHRcdFx0XHRsZXQgciA9IGZhbHNlO1xuXHRcdFx0XHRpZiAoa2V5ICYmICFrZXkucHJpbWFyeUtleS5pc0RlY3J5cHRlZCkge1xuXHRcdFx0XHRcdHIgPSBjcnlwdG8uYXV0aGVudGljYXRlKGtleSwgcGFzc3dvcmQpO1xuXHRcdFx0XHRcdHJldHVybiAhIXI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWNyeXB0VGltZSA9IG5ldyBEYXRlKCk7XG5cdFx0XHR9LCBjb25zdHMuQVVUT19TQVZFX1RJTUVPVVQpO1xuXG5cdFx0XHR1dGlscy5kZWYoeWllbGQgZGVjb2RlVGltZW91dCk7XG5cblx0XHRcdHJldHVybiBrZXkucHJpbWFyeUtleS5pc0RlY3J5cHRlZDtcblx0XHR9KTtcblxuXHRcdHRoaXMuYXJtb3IgPSAoKSA9PiBrZXkuYXJtb3IoKTtcblx0fVxuXG5cdHJldHVybiBLZXk7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/label.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function () {\n\tvar classes = {\n\t\t'Drafts': 'draft',\n\t\t'Spam': 'ban',\n\t\t'Starred': 'star-outline'\n\t};\n\n\tfunction Label(opt) {\n\t\tvar self = this;\n\n\t\tthis.id = opt.id;\n\t\tthis.name = opt.name;\n\t\tthis.created = opt.date_created;\n\t\tthis.modified = opt.date_modified;\n\t\tthis.emailsTotal = opt.emails_total;\n\t\tthis.isBuiltin = opt.builtin;\n\n\t\tthis.iconClass = 'icon-' + (classes[this.name] ? classes[this.name] : this.name.toLowerCase());\n\n\t\tvar unreadFromServer = opt.unread_threads_count;\n\t\tvar unreadThreads = {};\n\t\tvar readThreads = {};\n\n\t\tthis.threadsUnread = unreadFromServer;\n\n\t\tthis.addUnreadThreadId = function (tid) {\n\t\t\tunreadThreads[tid] = true;\n\t\t\tself.threadsUnread = unreadFromServer + Object.keys(unreadThreads).length;\n\t\t};\n\n\t\tthis.addReadThreadId = function (tid) {\n\t\t\tdelete unreadThreads[tid];\n\t\t\tself.threadsUnread = unreadFromServer + Object.keys(unreadThreads).length;\n\t\t};\n\t}\n\n\treturn Label;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9sYWJlbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixZQUFNO0FBQ25DLEtBQU0sT0FBTyxHQUFHO0FBQ2YsVUFBUSxFQUFFLE9BQU87QUFDakIsUUFBTSxFQUFFLEtBQUs7QUFDYixXQUFTLEVBQUUsY0FBYztFQUN6QixDQUFDOztBQUVGLFVBQVMsS0FBSyxDQUFFLEdBQUcsRUFBRTtBQUNwQixNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWxCLE1BQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQztBQUNqQixNQUFJLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxJQUFJLENBQUM7QUFDckIsTUFBSSxDQUFDLE9BQU8sR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDO0FBQ2hDLE1BQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUNsQyxNQUFJLENBQUMsV0FBVyxHQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUM7QUFDcEMsTUFBSSxDQUFDLFNBQVMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDOztBQUU3QixNQUFJLENBQUMsU0FBUyxjQUFXLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFBLEFBQUUsQ0FBQzs7QUFFN0YsTUFBTSxnQkFBZ0IsR0FBRyxHQUFHLENBQUMsb0JBQW9CLENBQUM7QUFDbEQsTUFBTSxhQUFhLEdBQUcsRUFBRSxDQUFDO0FBQ3pCLE1BQU0sV0FBVyxHQUFHLEVBQUUsQ0FBQzs7QUFFdkIsTUFBSSxDQUFDLGFBQWEsR0FBRyxnQkFBZ0IsQ0FBQzs7QUFFdEMsTUFBSSxDQUFDLGlCQUFpQixHQUFHLFVBQUMsR0FBRyxFQUFLO0FBQ2pDLGdCQUFhLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDO0FBQzFCLE9BQUksQ0FBQyxhQUFhLEdBQUcsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLENBQUM7R0FDMUUsQ0FBQzs7QUFFRixNQUFJLENBQUMsZUFBZSxHQUFHLFVBQUMsR0FBRyxFQUFLO0FBQy9CLFVBQU8sYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzFCLE9BQUksQ0FBQyxhQUFhLEdBQUcsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxNQUFNLENBQUM7R0FDMUUsQ0FBQztFQUNGOztBQUdELFFBQU8sS0FBSyxDQUFDO0NBQ2IsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9mYWN0b3JpZXMvbGFiZWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oKSA9PiB7XG5cdGNvbnN0IGNsYXNzZXMgPSB7XG5cdFx0J0RyYWZ0cyc6ICdkcmFmdCcsXG5cdFx0J1NwYW0nOiAnYmFuJyxcblx0XHQnU3RhcnJlZCc6ICdzdGFyLW91dGxpbmUnXG5cdH07XG5cblx0ZnVuY3Rpb24gTGFiZWwgKG9wdCkge1xuXHRcdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdFx0dGhpcy5pZCA9IG9wdC5pZDtcblx0XHR0aGlzLm5hbWUgPSBvcHQubmFtZTtcblx0XHR0aGlzLmNyZWF0ZWQgPSBvcHQuZGF0ZV9jcmVhdGVkO1xuXHRcdHRoaXMubW9kaWZpZWQgPSBvcHQuZGF0ZV9tb2RpZmllZDtcblx0XHR0aGlzLmVtYWlsc1RvdGFsID0gb3B0LmVtYWlsc190b3RhbDtcblx0XHR0aGlzLmlzQnVpbHRpbiA9IG9wdC5idWlsdGluO1xuXG5cdFx0dGhpcy5pY29uQ2xhc3MgPSBgaWNvbi0ke2NsYXNzZXNbdGhpcy5uYW1lXSA/IGNsYXNzZXNbdGhpcy5uYW1lXSA6IHRoaXMubmFtZS50b0xvd2VyQ2FzZSgpfWA7XG5cblx0XHRjb25zdCB1bnJlYWRGcm9tU2VydmVyID0gb3B0LnVucmVhZF90aHJlYWRzX2NvdW50O1xuXHRcdGNvbnN0IHVucmVhZFRocmVhZHMgPSB7fTtcblx0XHRjb25zdCByZWFkVGhyZWFkcyA9IHt9O1xuXG5cdFx0dGhpcy50aHJlYWRzVW5yZWFkID0gdW5yZWFkRnJvbVNlcnZlcjtcblxuXHRcdHRoaXMuYWRkVW5yZWFkVGhyZWFkSWQgPSAodGlkKSA9PiB7XG5cdFx0XHR1bnJlYWRUaHJlYWRzW3RpZF0gPSB0cnVlO1xuXHRcdFx0c2VsZi50aHJlYWRzVW5yZWFkID0gdW5yZWFkRnJvbVNlcnZlciArIE9iamVjdC5rZXlzKHVucmVhZFRocmVhZHMpLmxlbmd0aDtcblx0XHR9O1xuXG5cdFx0dGhpcy5hZGRSZWFkVGhyZWFkSWQgPSAodGlkKSA9PiB7XG5cdFx0XHRkZWxldGUgdW5yZWFkVGhyZWFkc1t0aWRdO1xuXHRcdFx0c2VsZi50aHJlYWRzVW5yZWFkID0gdW5yZWFkRnJvbVNlcnZlciArIE9iamVjdC5rZXlzKHVucmVhZFRocmVhZHMpLmxlbmd0aDtcblx0XHR9O1xuXHR9XG5cblxuXHRyZXR1cm4gTGFiZWw7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/thread.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($injector, $translate, co, utils, crypto, user, Email, Manifest) {\n\tvar translations = {\n\t\tLB_EMAIL_TO_YOURSELF: ''\n\t};\n\t$translate.bindAsObject(translations, 'INBOX');\n\n\tfunction Thread(opt, manifest, labels) {\n\t\tvar self = this;\n\t\tvar isLoaded = false;\n\n\t\tvar prettify = function prettify(a) {\n\t\t\tvar r = a.map(function (e) {\n\t\t\t\treturn e.address == user.email ? '' : e.prettyName;\n\t\t\t}).filter(function (e) {\n\t\t\t\treturn !!e;\n\t\t\t});\n\n\t\t\tif (r.length < 1) r = [translations.LB_EMAIL_TO_YOURSELF];\n\n\t\t\treturn r;\n\t\t};\n\n\t\tvar filterMembers = function filterMembers(members) {\n\t\t\tvar myself = null;\n\t\t\tmembers = members.map(function (e) {\n\t\t\t\tif (e.address == user.email) {\n\t\t\t\t\tmyself = e;\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\treturn e;\n\t\t\t}).filter(function (e) {\n\t\t\t\treturn !!e;\n\t\t\t});\n\n\t\t\tif (members.length < 1 && myself) members = [myself];\n\n\t\t\treturn members;\n\t\t};\n\n\t\tthis.setupManifest = function (manifest) {\n\t\t\tvar setIsLoaded = arguments[1] === undefined ? false : arguments[1];\n\n\t\t\tisLoaded = setIsLoaded;\n\t\t\tself.id = opt.id;\n\t\t\tself.created = opt.date_created;\n\t\t\tself.modified = opt.date_modified;\n\n\t\t\tself.members = opt.members ? filterMembers(Manifest.parseAddresses(opt.members)) : [];\n\t\t\tself.membersPretty = prettify(self.members);\n\n\t\t\tself.to = manifest ? manifest.to : [];\n\n\t\t\tself.labels = opt.labels;\n\t\t\tself.isRead = opt.is_read;\n\t\t\tself.secure = opt.secure;\n\n\t\t\tself.subject = manifest && manifest.subject ? manifest.subject : opt.name;\n\t\t\tself.attachmentsCount = manifest && manifest.files ? manifest.files.length : 0;\n\n\t\t\tself.isReplied = opt.emails.length > 1;\n\t\t\tself.isForwarded = Email.getSubjectWithoutRe(self.subject) != self.subject;\n\t\t};\n\n\t\tthis.isLoaded = function () {\n\t\t\treturn isLoaded;\n\t\t};\n\t\tthis.isLabel = function (labelName) {\n\t\t\treturn self.labels.some(function (lid) {\n\t\t\t\treturn labels.byId[lid] && labels.byId[lid].name == labelName;\n\t\t\t});\n\t\t};\n\t\tthis.addLabel = function (labelName) {\n\t\t\treturn utils.uniq(self.labels.concat(labels.byName[labelName].id));\n\t\t};\n\t\tthis.removeLabel = function (labelName) {\n\t\t\treturn self.labels.filter(function (x) {\n\t\t\t\treturn x != labels.byName[labelName].id;\n\t\t\t});\n\t\t};\n\n\t\tself.setupManifest(manifest);\n\t}\n\n\tThread.fromEnvelope = function (envelope) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar inbox, labels, thread;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tinbox = $injector.get('inbox');\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn inbox.getLabels();\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\t\t\t\t\t\tthread = new Thread(envelope, null, labels);\n\n\t\t\t\t\t\tco(regeneratorRuntime.mark(function callee$3$0() {\n\t\t\t\t\t\t\tvar manifestRaw;\n\t\t\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$3$0$(context$4$0) {\n\t\t\t\t\t\t\t\twhile (1) switch (context$4$0.prev = context$4$0.next) {\n\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\tcontext$4$0.next = 2;\n\t\t\t\t\t\t\t\t\t\treturn co.def(crypto.decodeRaw(envelope.manifest), null);\n\n\t\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t\tmanifestRaw = context$4$0.sent;\n\n\t\t\t\t\t\t\t\t\t\tconsole.log('thread manifest', manifestRaw);\n\t\t\t\t\t\t\t\t\t\tthread.setupManifest(manifestRaw ? Manifest.createFromJson(manifestRaw) : null, true);\n\n\t\t\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\t\treturn context$4$0.stop();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, callee$3$0, this);\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', thread);\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\treturn Thread;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy90aHJlYWQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxTQUFTLEVBQUUsVUFBVSxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsUUFBUSxFQUFLO0FBQ2xHLEtBQU0sWUFBWSxHQUFHO0FBQ3BCLHNCQUFvQixFQUFFLEVBQUU7RUFDeEIsQ0FBQztBQUNGLFdBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDOztBQUUvQyxVQUFTLE1BQU0sQ0FBQyxHQUFHLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUN0QyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUM7QUFDbEIsTUFBSSxRQUFRLEdBQUcsS0FBSyxDQUFDOztBQUVyQixNQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBSSxDQUFDLEVBQUs7QUFDdkIsT0FBSSxDQUFDLEdBQUcsQ0FBQyxDQUNQLEdBQUcsQ0FBQyxVQUFBLENBQUM7V0FBSSxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxVQUFVO0lBQUEsQ0FBQyxDQUNyRCxNQUFNLENBQUMsVUFBQSxDQUFDO1dBQUksQ0FBQyxDQUFDLENBQUM7SUFBQSxDQUFDLENBQUM7O0FBRW5CLE9BQUksQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQ2YsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLG9CQUFvQixDQUFDLENBQUM7O0FBRXpDLFVBQU8sQ0FBQyxDQUFDO0dBQ1QsQ0FBQzs7QUFFRixNQUFNLGFBQWEsR0FBRyxTQUFoQixhQUFhLENBQUksT0FBTyxFQUFLO0FBQ2xDLE9BQUksTUFBTSxHQUFHLElBQUksQ0FBQztB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Q0FBQztXQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUU7SUFBQSxDQUFDO0dBQUEsQ0FBQzs7QUFFNUYsTUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztFQUM3Qjs7QUFFRCxPQUFNLENBQUMsWUFBWSxHQUFHLFVBQUMsUUFBUTtTQUFLLEVBQUUseUJBQUM7T0FDbEMsS0FBSyxFQUNMLE1BQU0sRUFFTixNQUFNOzs7O0FBSE4sV0FBSyxHQUFHLFNBQVMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDOzthQUNmLEtBQUssQ0FBQyxTQUFTLEVBQUU7OztBQUFoQyxZQUFNO0FBRU4sWUFBTSxHQUFHLElBQUksTUFBTSxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDOztBQUUvQyxRQUFFLHlCQUFDO1dBQ0UsV0FBVzs7Ozs7aUJBQVMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsRUFBRSxJQUFJLENBQUM7OztBQUFyRSxxQkFBVzs7QUFDZixpQkFBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxXQUFXLENBQUMsQ0FBQztBQUM1QyxnQkFBTSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsR0FBRyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7Ozs7Ozs7T0FDdEYsRUFBQyxDQUFDOzswQ0FFSSxNQUFNOzs7Ozs7O0dBQ2IsRUFBQztFQUFBLENBQUM7O0FBRUgsUUFBTyxNQUFNLENBQUM7Q0FDZCxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy90aHJlYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJGluamVjdG9yLCAkdHJhbnNsYXRlLCBjbywgdXRpbHMsIGNyeXB0bywgdXNlciwgRW1haWwsIE1hbmlmZXN0KSA9PiB7XG5cdGNvbnN0IHRyYW5zbGF0aW9ucyA9IHtcblx0XHRMQl9FTUFJTF9UT19ZT1VSU0VMRjogJydcblx0fTtcblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnSU5CT1gnKTtcblxuXHRmdW5jdGlvbiBUaHJlYWQob3B0LCBtYW5pZmVzdCwgbGFiZWxzKSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cdFx0bGV0IGlzTG9hZGVkID0gZmFsc2U7XG5cdFx0XG5cdFx0Y29uc3QgcHJldHRpZnkgPSAoYSkgPT4ge1xuXHRcdFx0bGV0IHIgPSBhXG5cdFx0XHRcdC5tYXAoZSA9PiBlLmFkZHJlc3MgPT0gdXNlci5lbWFpbCA/ICcnIDogZS5wcmV0dHlOYW1lKVxuXHRcdFx0XHQuZmlsdGVyKGUgPT4gISFlKTtcblxuXHRcdFx0aWYgKHIubGVuZ3RoIDwgMSlcblx0XHRcdFx0ciA9IFt0cmFuc2xhdGlvbnMuTEJfRU1BSUxfVE9fWU9VUlNFTEZdO1xuXG5cdFx0XHRyZXR1cm4gcjtcblx0XHR9O1xuXG5cdFx0Y29uc3QgZmlsdGVyTWVtYmVycyA9IChtZW1iZXJzKSA9PiB7XG5cdFx0XHRsZXQgbXlzZWxmID0gbnVsbDtcblx0XHRcdG1lbWJlcnMgPSBtZW1iZXJzLlxuXHRcdFx0XHRtYXAoZSA9PiB7XG5cdFx0XHRcdFx0aWYgKGUuYWRkcmVzcyA9PSB1c2VyLmVtYWlsKXtcblx0XHRcdFx0XHRcdG15c2VsZiA9IGU7XG5cdFx0XHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIGU7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5maWx0ZXIoZSA9PiAhIWUpO1xuXG5cdFx0XHRpZiAobWVtYmVycy5sZW5ndGggPCAxICYmIG15c2VsZilcblx0XHRcdFx0bWVtYmVycyA9IFtteXNlbGZdO1xuXG5cdFx0XHRyZXR1cm4gbWVtYmVycztcblx0XHR9O1xuXHRcdFxuXHRcdHRoaXMuc2V0dXBNYW5pZmVzdCA9IChtYW5pZmVzdCwgc2V0SXNMb2FkZWQgPSBmYWxzZSkgPT4ge1xuXHRcdFx0aXNMb2FkZWQgPSBzZXRJc0xvYWRlZDtcblx0XHRcdHNlbGYuaWQgPSBvcHQuaWQ7XG5cdFx0XHRzZWxmLmNyZWF0ZWQgPSBvcHQuZGF0ZV9jcmVhdGVkO1xuXHRcdFx0c2VsZi5tb2RpZmllZCA9IG9wdC5kYXRlX21vZGlmaWVkO1xuXG5cdFx0XHRzZWxmLm1lbWJlcnMgPSBvcHQubWVtYmVycyA/IGZpbHRlck1lbWJlcnMoTWFuaWZlc3QucGFyc2VBZGRyZXNzZXMob3B0Lm1lbWJlcnMpKSA6IFtdO1xuXHRcdFx0c2VsZi5tZW1iZXJzUHJldHR5ID0gcHJldHRpZnkoc2VsZi5tZW1iZXJzKTtcblxuXHRcdFx0c2VsZi50byA9IG1hbmlmZXN0ID8gbWFuaWZlc3QudG8gOiBbXTtcblxuXHRcdFx0c2VsZi5sYWJlbHMgPSBvcHQubGFiZWxzO1xuXHRcdFx0c2VsZi5pc1JlYWQgPSBvcHQuaXNfcmVhZDtcblx0XHRcdHNlbGYuc2VjdXJlID0gb3B0LnNlY3VyZTtcblxuXHRcdFx0c2VsZi5zdWJqZWN0ID0gbWFuaWZlc3QgJiYgbWFuaWZlc3Quc3ViamVjdCA/IG1hbmlmZXN0LnN1YmplY3QgOiBvcHQubmFtZTtcblx0XHRcdHNlbGYuYXR0YWNobWVudHNDb3VudCA9IG1hbmlmZXN0ICYmIG1hbmlmZXN0LmZpbGVzID8gbWFuaWZlc3QuZmlsZXMubGVuZ3RoIDogMDtcblxuXHRcdFx0c2VsZi5pc1JlcGxpZWQgPSBvcHQuZW1haWxzLmxlbmd0aCA+IDE7XG5cdFx0XHRzZWxmLmlzRm9yd2FyZGVkID0gRW1haWwuZ2V0U3ViamVjdFdpdGhvdXRSZShzZWxmLnN1YmplY3QpICE9IHNlbGYuc3ViamVjdDtcblx0XHR9O1xuXHRcdFxuXHRcdHRoaXMuaXNMb2FkZWQgPSAoKSA9PiBpc0xvYWRlZDtcblx0XHR0aGlzLmlzTGFiZWwgPSAobGFiZWxOYW1lKSA9PiBzZWxmLmxhYmVscy5zb21lKGxpZCA9PiBsYWJlbHMuYnlJZFtsaWRdICYmIGxhYmVscy5ieUlkW2xpZF0ubmFtZSA9PSBsYWJlbE5hbWUpO1xuXHRcdHRoaXMuYWRkTGFiZWwgPSAobGFiZWxOYW1lKSA9PiB1dGlscy51bmlxKHNlbGYubGFiZWxzLmNvbmNhdChsYWJlbHMuYnlOYW1lW2xhYmVsTmFtZV0uaWQpKTtcblx0XHR0aGlzLnJlbW92ZUxhYmVsID0gKGxhYmVsTmFtZSkgPT4gc2VsZi5sYWJlbHMuZmlsdGVyKHggPT4geCAhPSBsYWJlbHMuYnlOYW1lW2xhYmVsTmFtZV0uaWQpO1xuXG5cdFx0c2VsZi5zZXR1cE1hbmlmZXN0KG1hbmlmZXN0KTtcblx0fVxuXG5cdFRocmVhZC5mcm9tRW52ZWxvcGUgPSAoZW52ZWxvcGUpID0+IGNvKGZ1bmN0aW9uICooKSB7XG5cdFx0bGV0IGluYm94ID0gJGluamVjdG9yLmdldCgnaW5ib3gnKTtcblx0XHRsZXQgbGFiZWxzID0geWllbGQgaW5ib3guZ2V0TGFiZWxzKCk7XG5cdFx0XG5cdFx0bGV0IHRocmVhZCA9IG5ldyBUaHJlYWQoZW52ZWxvcGUsIG51bGwsIGxhYmVscyk7XG5cblx0XHRjbyhmdW5jdGlvbiAqKCl7XG5cdFx0XHRsZXQgbWFuaWZlc3RSYXcgPSB5aWVsZCBjby5kZWYoY3J5cHRvLmRlY29kZVJhdyhlbnZlbG9wZS5tYW5pZmVzdCksIG51bGwpO1xuXHRcdFx0Y29uc29sZS5sb2coJ3RocmVhZCBtYW5pZmVzdCcsIG1hbmlmZXN0UmF3KTtcblx0XHRcdHRocmVhZC5zZXR1cE1hbmlmZXN0KG1hbmlmZXN0UmF3ID8gTWFuaWZlc3QuY3JlYXRlRnJvbUpzb24obWFuaWZlc3RSYXcpIDogbnVsbCwgdHJ1ZSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gdGhyZWFkO1xuXHR9KTtcblx0XG5cdHJldHVybiBUaHJlYWQ7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/defaultValue.js":{"source":"\"use strict\";\n\nmodule.exports = /*@ngInject*/function () {\n\treturn function (v, defaultValue) {\n\t\treturn v ? v : defaultValue;\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvZGVmYXVsdFZhbHVlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCO1FBQzdCLFVBQUMsQ0FBQyxFQUFFLFlBQVk7U0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHLFlBQVk7RUFBQTtDQUFBLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZmlsdGVycy9kZWZhdWx0VmFsdWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oKSA9PlxuXHQodiwgZGVmYXVsdFZhbHVlKSA9PiB2ID8gdiA6IGRlZmF1bHRWYWx1ZTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/fileExtension.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function () {\n\treturn function (filename) {\n\t\tvar i = filename.lastIndexOf('.');\n\t\treturn filename && i >= 0 ? '.' + filename.substr(i, filename.length - i) : '';\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvZmlsZUV4dGVuc2lvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixZQUFNO0FBQ25DLFFBQU8sVUFBQyxRQUFRLEVBQUs7QUFDcEIsTUFBSSxDQUFDLEdBQUcsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNsQyxTQUFPLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFJLEdBQUcsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFJLEVBQUUsQ0FBQztFQUNqRixDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9maWx0ZXJzL2ZpbGVFeHRlbnNpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oKSA9PiB7XG5cdHJldHVybiAoZmlsZW5hbWUpID0+IHtcblx0XHRsZXQgaSA9IGZpbGVuYW1lLmxhc3RJbmRleE9mKCcuJyk7XG5cdFx0cmV0dXJuIGZpbGVuYW1lICYmIGkgPj0gMCA/ICgnLicgKyBmaWxlbmFtZS5zdWJzdHIoaSwgZmlsZW5hbWUubGVuZ3RoIC0gaSkpIDogJyc7XG5cdH07XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/fileName.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function () {\n\treturn function (filename) {\n\t\tvar i = filename.lastIndexOf('.');\n\t\treturn i >= 0 ? filename.substr(0, i) : filename;\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvZmlsZU5hbWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsWUFBTTtBQUNuQyxRQUFPLFVBQUMsUUFBUSxFQUFLO0FBQ3BCLE1BQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDbEMsU0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxHQUFHLFFBQVEsQ0FBQztFQUNqRCxDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9maWx0ZXJzL2ZpbGVOYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKCkgPT4ge1xuXHRyZXR1cm4gKGZpbGVuYW1lKSA9PiB7XG5cdFx0bGV0IGkgPSBmaWxlbmFtZS5sYXN0SW5kZXhPZignLicpO1xuXHRcdHJldHVybiBpID49IDAgPyBmaWxlbmFtZS5zdWJzdHIoMCwgaSkgOiBmaWxlbmFtZTtcblx0fTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/filesize.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function () {\n\treturn function (size) {\n\t\tif (isNaN(size)) size = 0;\n\n\t\tif (size < 1024) return size + ' Bytes';\n\n\t\tsize /= 1024;\n\n\t\tif (size < 1024) return size.toFixed(2) + ' Kb';\n\n\t\tsize /= 1024;\n\n\t\tif (size < 1024) return size.toFixed(2) + ' Mb';\n\n\t\tsize /= 1024;\n\n\t\tif (size < 1024) return size.toFixed(2) + ' Gb';\n\n\t\tsize /= 1024;\n\n\t\treturn size.toFixed(2) + ' Tb';\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvZmlsZXNpemUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0I7UUFDN0IsVUFBQSxJQUFJLEVBQUk7QUFDUCxNQUFJLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFDZCxJQUFJLEdBQUcsQ0FBQyxDQUFDOztBQUVWLE1BQUksSUFBSSxHQUFHLElBQUksRUFDZCxPQUFPLElBQUksR0FBRyxRQUFRLENBQUM7O0FBRXhCLE1BQUksSUFBSSxJQUFJLENBQUM7O0FBRWIsTUFBSSxJQUFJLEdBQUcsSUFBSSxFQUNkLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhDLE1BQUksSUFBSSxJQUFJLENBQUM7O0FBRWIsTUFBSSxJQUFJLEdBQUcsSUFBSSxFQUNkLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhDLE1BQUksSUFBSSxJQUFJLENBQUM7O0FBRWIsTUFBSSxJQUFJLEdBQUcsSUFBSSxFQUNkLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhDLE1BQUksSUFBSSxJQUFJLENBQUM7O0FBRWIsU0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQztFQUMvQjtDQUFBLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZmlsdGVycy9maWxlc2l6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygpID0+XG5cdHNpemUgPT4ge1xuXHRcdGlmIChpc05hTihzaXplKSlcblx0XHRcdHNpemUgPSAwO1xuXG5cdFx0aWYgKHNpemUgPCAxMDI0KVxuXHRcdFx0cmV0dXJuIHNpemUgKyAnIEJ5dGVzJztcblxuXHRcdHNpemUgLz0gMTAyNDtcblxuXHRcdGlmIChzaXplIDwgMTAyNClcblx0XHRcdHJldHVybiBzaXplLnRvRml4ZWQoMikgKyAnIEtiJztcblxuXHRcdHNpemUgLz0gMTAyNDtcblxuXHRcdGlmIChzaXplIDwgMTAyNClcblx0XHRcdHJldHVybiBzaXplLnRvRml4ZWQoMikgKyAnIE1iJztcblxuXHRcdHNpemUgLz0gMTAyNDtcblxuXHRcdGlmIChzaXplIDwgMTAyNClcblx0XHRcdHJldHVybiBzaXplLnRvRml4ZWQoMikgKyAnIEdiJztcblxuXHRcdHNpemUgLz0gMTAyNDtcblxuXHRcdHJldHVybiBzaXplLnRvRml4ZWQoMikgKyAnIFRiJztcblx0fTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/lavadate.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $translate, $filter) {\n\n\treturn function (input) {\n\t\tvar yesterday = new Date(new Date().valueOf() - 1000 * 60 * 60 * 24).toDateString();\n\t\tvar today = new Date().toDateString();\n\t\tvar inputString = new Date(input).toDateString();\n\t\tif (inputString == today) {\n\t\t\treturn $filter('date')(new Date(input), 'HH:mm');\n\t\t} else if (inputString == yesterday) {\n\t\t\treturn 'Yesterday';\n\t\t} else {\n\t\t\treturn $filter('date')(new Date(input), 'dd/M/yyyy');\n\t\t}\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvbGF2YWRhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxnQkFBZ0IsVUFBQyxVQUFVLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBSzs7QUFHbEUsUUFBTyxVQUFDLEtBQUssRUFBSztBQUNqQixNQUFJLFNBQVMsR0FBRyxJQUFJLElBQUksQ0FBQyxBQUFDLElBQUksSUFBSSxFQUFFLENBQUUsT0FBTyxFQUFFLEdBQUcsSUFBSSxHQUFDLEVBQUUsR0FBQyxFQUFFLEdBQUMsRUFBRSxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDaEYsTUFBSSxLQUFLLEdBQUcsQUFBQyxJQUFJLElBQUksRUFBRSxDQUFFLFlBQVksRUFBRSxDQUFDO0FBQ3hDLE1BQUksV0FBVyxHQUFHLEFBQUMsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUUsWUFBWSxFQUFFLENBQUM7QUFDbkQsTUFBRyxXQUFXLElBQUksS0FBSyxFQUFDO0FBQ3ZCLFVBQU8sT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2pELE1BQU0sSUFBSSxXQUFXLElBQUksU0FBUyxFQUFFO0FBQ3BDLFVBQU8sV0FBVyxDQUFDO0dBQ25CLE1BQU07QUFDTixVQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxXQUFXLENBQUMsQ0FBQztHQUNyRDtFQUVELENBQUM7Q0FDRixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvbGF2YWRhdGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHJvb3RTY29wZSwgJHRyYW5zbGF0ZSwgJGZpbHRlcikgPT4ge1xuXHRcblxuXHRyZXR1cm4gKGlucHV0KSA9PiB7XG5cdFx0dmFyIHllc3RlcmRheSA9IG5ldyBEYXRlKChuZXcgRGF0ZSgpKS52YWx1ZU9mKCkgLSAxMDAwKjYwKjYwKjI0KS50b0RhdGVTdHJpbmcoKTtcblx0XHR2YXIgdG9kYXkgPSAobmV3IERhdGUoKSkudG9EYXRlU3RyaW5nKCk7XG5cdFx0dmFyIGlucHV0U3RyaW5nID0gKG5ldyBEYXRlKGlucHV0KSkudG9EYXRlU3RyaW5nKCk7XG5cdFx0aWYoaW5wdXRTdHJpbmcgPT0gdG9kYXkpe1xuXHRcdFx0cmV0dXJuICRmaWx0ZXIoJ2RhdGUnKShuZXcgRGF0ZShpbnB1dCksICdISDptbScpO1xuXHRcdH0gZWxzZSBpZiAoaW5wdXRTdHJpbmcgPT0geWVzdGVyZGF5KSB7XG5cdFx0XHRyZXR1cm4gJ1llc3RlcmRheSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiAkZmlsdGVyKCdkYXRlJykobmV3IERhdGUoaW5wdXQpLCAnZGQvTS95eXl5Jyk7XG5cdFx0fVxuXG5cdH07XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/members.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $translate, contacts) {\n\tvar translations = {\n\t\tLB_AND_ONE_OTHER: '',\n\t\tLB_AND_TWO_OTHERS: '',\n\t\tLB_AND_OTHERS: ''\n\t};\n\n\t$translate.bindAsObject(translations, 'INBOX');\n\n\treturn function (membersList) {\n\t\tvar membersString = membersList.slice(0, 2).join(', ');\n\t\tif (membersList.length == 3) membersString += ' ' + translations.LB_AND_ONE_OTHER;else if (membersList.length == 4) membersString += ' ' + translations.LB_AND_TWO_OTHERS;else if (membersList.length > 4) membersString += ' ' + translations.LB_AND_OTHERS;\n\n\t\treturn membersString;\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvbWVtYmVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFLO0FBQ25FLEtBQU0sWUFBWSxHQUFHO0FBQ3BCLGtCQUFnQixFQUFHLEVBQUU7QUFDckIsbUJBQWlCLEVBQUcsRUFBRTtBQUN0QixlQUFhLEVBQUcsRUFBRTtFQUNsQixDQUFDOztBQUVGLFdBQVUsQ0FBQyxZQUFZLENBQUMsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDOztBQUUvQyxRQUFPLFVBQUMsV0FBVyxFQUFLO0FBQ3ZCLE1BQUksYUFBYSxHQUFHLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2RCxNQUFJLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUMxQixhQUFhLElBQUksR0FBRyxHQUFHLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUNqRCxJQUFJLFdBQVcsQ0FBQyxNQUFNLElBQUksQ0FBQyxFQUMvQixhQUFhLElBQUksR0FBRyxHQUFHLFlBQVksQ0FBQyxpQkFBaUIsQ0FBQyxLQUNsRCxJQUFJLFdBQVcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUM5QixhQUFhLElBQUksR0FBRyxHQUFHLFlBQVksQ0FBQyxhQUFhLENBQUM7O0FBRW5ELFNBQU8sYUFBYSxDQUFDO0VBQ3JCLENBQUM7Q0FDRixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvbWVtYmVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqLygkcm9vdFNjb3BlLCAkdHJhbnNsYXRlLCBjb250YWN0cykgPT4ge1xuXHRjb25zdCB0cmFuc2xhdGlvbnMgPSB7XG5cdFx0TEJfQU5EX09ORV9PVEhFUiA6ICcnLFxuXHRcdExCX0FORF9UV09fT1RIRVJTIDogJycsXG5cdFx0TEJfQU5EX09USEVSUyA6ICcnXG5cdH07XG5cblx0JHRyYW5zbGF0ZS5iaW5kQXNPYmplY3QodHJhbnNsYXRpb25zLCAnSU5CT1gnKTtcblxuXHRyZXR1cm4gKG1lbWJlcnNMaXN0KSA9PiB7XG5cdFx0bGV0IG1lbWJlcnNTdHJpbmcgPSBtZW1iZXJzTGlzdC5zbGljZSgwLCAyKS5qb2luKCcsICcpO1xuXHRcdGlmIChtZW1iZXJzTGlzdC5sZW5ndGggPT0gMylcblx0XHRcdG1lbWJlcnNTdHJpbmcgKz0gJyAnICsgdHJhbnNsYXRpb25zLkxCX0FORF9PTkVfT1RIRVI7XG5cdFx0ZWxzZSBpZiAobWVtYmVyc0xpc3QubGVuZ3RoID09IDQpXG5cdFx0XHRtZW1iZXJzU3RyaW5nICs9ICcgJyArIHRyYW5zbGF0aW9ucy5MQl9BTkRfVFdPX09USEVSUztcblx0XHRlbHNlIGlmIChtZW1iZXJzTGlzdC5sZW5ndGggPiA0KVxuXHRcdFx0bWVtYmVyc1N0cmluZyArPSAnICcgKyB0cmFuc2xhdGlvbnMuTEJfQU5EX09USEVSUztcblxuXHRcdHJldHVybiBtZW1iZXJzU3RyaW5nO1xuXHR9O1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/unread.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function () {\n\treturn function (number) {\n\t\tif (!number || number < 1) return '';\n\n\t\tif (number < 999) return number;\n\n\t\treturn '999+';\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZpbHRlcnMvdW5yZWFkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCO1FBQzdCLFVBQUEsTUFBTSxFQUFJO0FBQ1QsTUFBSSxDQUFDLE1BQU0sSUFBSSxNQUFNLEdBQUcsQ0FBQyxFQUN4QixPQUFPLEVBQUUsQ0FBQzs7QUFFWCxNQUFJLE1BQU0sR0FBRyxHQUFHLEVBQ2YsT0FBTyxNQUFNLENBQUM7O0FBRWYsU0FBTyxNQUFNLENBQUM7RUFDZDtDQUFBLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZmlsdGVycy91bnJlYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oKSA9PlxuXHRudW1iZXIgPT4ge1xuXHRcdGlmICghbnVtYmVyIHx8IG51bWJlciA8IDEpXG5cdFx0XHRyZXR1cm4gJyc7XG5cblx0XHRpZiAobnVtYmVyIDwgOTk5KVxuXHRcdFx0cmV0dXJuIG51bWJlcjtcblxuXHRcdHJldHVybiAnOTk5Kyc7XG5cdH07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/runs/rootScopeHelpers.js":{"source":"\"use strict\";\n\nmodule.exports = /*@ngInject*/function ($rootScope, router) {\n\t$rootScope.showPopup = router.showPopup;\n\t$rootScope.hidePopup = router.hidePopup;\n\t$rootScope.isPopupState = router.isPopupState;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3J1bnMvcm9vdFNjb3BlSGVscGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUs7QUFDckQsV0FBVSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO0FBQ3hDLFdBQVUsQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQztBQUN4QyxXQUFVLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7Q0FDOUMsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9ydW5zL3Jvb3RTY29wZUhlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHJvb3RTY29wZSwgcm91dGVyKSA9PiB7XG5cdCRyb290U2NvcGUuc2hvd1BvcHVwID0gcm91dGVyLnNob3dQb3B1cDtcblx0JHJvb3RTY29wZS5oaWRlUG9wdXAgPSByb3V0ZXIuaGlkZVBvcHVwO1xuXHQkcm9vdFNjb3BlLmlzUG9wdXBTdGF0ZSA9IHJvdXRlci5pc1BvcHVwU3RhdGU7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/composeHelpers.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $templateCache, $compile, co, utils) {\n\tvar self = this;\n\n\tvar compile = function compile(template, args) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar marker, templateFunction, isolatedScope, arg, body;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tmarker = utils.getRandomString(16);\n\t\t\t\t\t\ttemplateFunction = $compile(template + '<span ng-bind-html=\"marker\"></span>');\n\t\t\t\t\t\tisolatedScope = $rootScope.$new(true);\n\n\t\t\t\t\t\tfor (arg in args) {\n\t\t\t\t\t\t\tisolatedScope[arg] = args[arg];\n\t\t\t\t\t\t}isolatedScope.marker = marker;\n\n\t\t\t\t\t\tbody = templateFunction(isolatedScope);\n\n\t\t\t\t\t\tconsole.log('compile body(0)', body);\n\n\t\t\t\t\t\tcontext$3$0.next = 9;\n\t\t\t\t\t\treturn utils.wait(function () {\n\t\t\t\t\t\t\treturn body.text().includes(marker);\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 9:\n\n\t\t\t\t\t\tconsole.log('compile body(1)', body);\n\n\t\t\t\t\t\tangular.forEach(body.find('span'), function (e) {\n\t\t\t\t\t\t\te = angular.element(e);\n\t\t\t\t\t\t\tif (e.text() == marker) e.remove();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconsole.log('compile body(2)', body);\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', body.html());\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.buildForwardedTemplate = function (body, signature, forwardEmails) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar template;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn $templateCache.fetch('/partials/inbox/forwardedEmail.html');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttemplate = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn compile(template, {\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\tsignature: signature,\n\t\t\t\t\t\t\tforwardEmails: forwardEmails\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.buildRepliedTemplate = function (body, signature, replies) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar template;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn $templateCache.fetch('/partials/inbox/repliedEmail.html');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttemplate = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn compile(template, {\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\tsignature: signature,\n\t\t\t\t\t\t\treplies: replies\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.buildDirectTemplate = function (body, signature) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar template;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn $templateCache.fetch('/partials/inbox/directEmail.html');\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\ttemplate = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn compile(template, {\n\t\t\t\t\t\t\tbody: body,\n\t\t\t\t\t\t\tsignature: signature\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL2NvbXBvc2VIZWxwZXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQVUsVUFBVSxFQUFFLGNBQWMsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRTtBQUN4RixLQUFNLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWxCLEtBQU0sT0FBTyxHQUFHLFNBQVYsT0FBTyxDQUFJLFFBQVEsRUFBRSxJQUFJO1NBQUssRUFBRSx5QkFBQztPQUNoQyxNQUFNLEVBQ04sZ0JBQWdCLEVBRWhCLGFBQWEsRUFFWCxHQUFHLEVBSUwsSUFBSTs7OztBQVRKLFlBQU0sR0FBRyxLQUFLLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQztBQUNsQyxzQkFBZ0IsR0FBRyxRQUFRLENBQUMsUUFBUSxHQUFHLHFDQUFxQyxDQUFDO0FBRTdFLG1CQUFhLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7O0FBRTNDLFdBQVEsR0FBRyxJQUFJLElBQUk7QUFDbEIsb0JBQWEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7T0FBQSxBQUNoQyxhQUFhLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQzs7QUFFeEIsVUFBSSxHQUFHLGdCQUFnQixDQUFDLGFBQWEsQ0FBQzs7QUFDNUMsYUFBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsQ0FBQzs7O2FBRS9CLEtBQUssQ0FBQyxJQUFJLENBQUM7Y0FBTSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQztPQUFBLENBQUM7Ozs7QUFFcEQsYUFBTyxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsQ0FBQzs7QUFFckMsYUFBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFVBQUEsQ0FBQyxFQUFJO0FBQ3ZDLFFBQUMsR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3ZCLFdBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLE1BQU0sRUFDckIsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO09BQ1osQ0FBQyxDQUFDOztBQUVILGFBQU8sQ0FBQyxHQUFHLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLENBQUM7OzBDQUU5QixJQUFJLENBQUMsSUFBSSxFQUFFOzs7Ozs7O0dBQ2xCLEVBQUM7RUFBQSxDQUFDOztBQUVILEtBQUksQ0FBQyxzQkFBc0IsR0FBRyxVQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsYUFBYTtTQUFLLEVBQUUseUJBQUM7T0FDOUQsUUFBUTs7Ozs7YUFBUyxjQUFjLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxDQUFDOzs7QUFBNUUsY0FBUTs7YUFDRCxPQUFPLENBQUMsUUFBUSxFQUFFO0FBQzlCLFdBQUksRUFBSixJQUFJO0FBQ0osZ0JBQVMsRUFBVCxTQUFTO0FBQ1Qsb0JBQWEsRUFBYixhQUFhO09BQ2IsQ0FBQzs7Ozs7Ozs7OztHQUNGLEVBQUM7RUFBQSxDQUFDOztBQUVILEtBQUksQ0FBQyxvQkFBb0IsR0FBRyxVQUFDLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTztTQUFLLEVBQUUseUJBQUM7T0FDdEQsUUFBUTs7Ozs7YUFBUyxjQUFjLENBQUMsS0FBSyxDQUFDLG1DQUFtQyxDQUFDOzs7QUFBMUUsY0FBUTs7YUFDRCxPQUFPLENBQUMsUUFBUSxFQUFFO0FBQzlCLFdBQUksRUFBSixJQUFJO0FBQ0osZ0JBQVMsRUFBVCxTQUFTO0FBQ1QsY0FBTyxFQUFQLE9BQU87T0FDUCxDQUFDOzs7Ozs7Ozs7O0dBQ0YsRUFBQztFQUFBLENBQUM7O0FBRUgsS0FBSSxDQUFDLG1CQUFtQixHQUFHLFVBQUMsSUFBSSxFQUFFLFNBQVM7U0FBSyxFQUFFLHlCQUFDO09BQzVDLFFBQVE7Ozs7O2FBQVMsY0FBYyxDQUFDLEtBQUssQ0FBQyxrQ0FBa0MsQ0FBQzs7O0FBQXpFLGNBQVE7O2FBQ0QsT0FBTyxDQUFDLFFBQVEsRUFBRTtBQUM5QixXQUFJLEVBQUosSUFBSTtBQUNKLGdCQUFTLEVBQVQsU0FBUztPQUNULENBQUM7Ozs7Ozs7Ozs7R0FDRixFQUFDO0VBQUEsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vc2VydmljZXMvY29tcG9zZUhlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki9mdW5jdGlvbiAoJHJvb3RTY29wZSwgJHRlbXBsYXRlQ2FjaGUsICRjb21waWxlLCBjbywgdXRpbHMpIHtcblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0Y29uc3QgY29tcGlsZSA9ICh0ZW1wbGF0ZSwgYXJncykgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdGNvbnN0IG1hcmtlciA9IHV0aWxzLmdldFJhbmRvbVN0cmluZygxNik7XG5cdFx0Y29uc3QgdGVtcGxhdGVGdW5jdGlvbiA9ICRjb21waWxlKHRlbXBsYXRlICsgJzxzcGFuIG5nLWJpbmQtaHRtbD1cIm1hcmtlclwiPjwvc3Bhbj4nKTtcblxuXHRcdGNvbnN0IGlzb2xhdGVkU2NvcGUgPSAkcm9vdFNjb3BlLiRuZXcodHJ1ZSk7XG5cblx0XHRmb3IobGV0IGFyZyBpbiBhcmdzKVxuXHRcdFx0aXNvbGF0ZWRTY29wZVthcmddID0gYXJnc1thcmddO1xuXHRcdGlzb2xhdGVkU2NvcGUubWFya2VyID0gbWFya2VyO1xuXG5cdFx0Y29uc3QgYm9keSA9IHRlbXBsYXRlRnVuY3Rpb24oaXNvbGF0ZWRTY29wZSk7XG5cdFx0Y29uc29sZS5sb2coJ2NvbXBpbGUgYm9keSgwKScsIGJvZHkpO1xuXG5cdFx0eWllbGQgdXRpbHMud2FpdCgoKSA9PiBib2R5LnRleHQoKS5pbmNsdWRlcyhtYXJrZXIpKTtcblxuXHRcdGNvbnNvbGUubG9nKCdjb21waWxlIGJvZHkoMSknLCBib2R5KTtcblxuXHRcdGFuZ3VsYXIuZm9yRWFjaChib2R5LmZpbmQoJ3NwYW4nKSwgZSA9PiB7XG5cdFx0XHRlID0gYW5ndWxhci5lbGVtZW50KGUpO1xuXHRcdFx0aWYgKGUudGV4dCgpID09IG1hcmtlcilcblx0XHRcdFx0ZS5yZW1vdmUoKTtcblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKCdjb21waWxlIGJvZHkoMiknLCBib2R5KTtcblxuXHRcdHJldHVybiBib2R5Lmh0bWwoKTtcblx0fSk7XG5cblx0dGhpcy5idWlsZEZvcndhcmRlZFRlbXBsYXRlID0gKGJvZHksIHNpZ25hdHVyZSwgZm9yd2FyZEVtYWlscykgPT4gY28oZnVuY3Rpb24gKigpe1xuXHRcdGNvbnN0IHRlbXBsYXRlID0geWllbGQgJHRlbXBsYXRlQ2FjaGUuZmV0Y2goJy9wYXJ0aWFscy9pbmJveC9mb3J3YXJkZWRFbWFpbC5odG1sJyk7XG5cdFx0cmV0dXJuIHlpZWxkIGNvbXBpbGUodGVtcGxhdGUsIHtcblx0XHRcdGJvZHksXG5cdFx0XHRzaWduYXR1cmUsXG5cdFx0XHRmb3J3YXJkRW1haWxzXG5cdFx0fSk7XG5cdH0pO1xuXG5cdHRoaXMuYnVpbGRSZXBsaWVkVGVtcGxhdGUgPSAoYm9keSwgc2lnbmF0dXJlLCByZXBsaWVzKSA9PiBjbyhmdW5jdGlvbiAqKCl7XG5cdFx0Y29uc3QgdGVtcGxhdGUgPSB5aWVsZCAkdGVtcGxhdGVDYWNoZS5mZXRjaCgnL3BhcnRpYWxzL2luYm94L3JlcGxpZWRFbWFpbC5odG1sJyk7XG5cdFx0cmV0dXJuIHlpZWxkIGNvbXBpbGUodGVtcGxhdGUsIHtcblx0XHRcdGJvZHksXG5cdFx0XHRzaWduYXR1cmUsXG5cdFx0XHRyZXBsaWVzXG5cdFx0fSk7XG5cdH0pO1xuXG5cdHRoaXMuYnVpbGREaXJlY3RUZW1wbGF0ZSA9IChib2R5LCBzaWduYXR1cmUpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRjb25zdCB0ZW1wbGF0ZSA9IHlpZWxkICR0ZW1wbGF0ZUNhY2hlLmZldGNoKCcvcGFydGlhbHMvaW5ib3gvZGlyZWN0RW1haWwuaHRtbCcpO1xuXHRcdHJldHVybiB5aWVsZCBjb21waWxlKHRlbXBsYXRlLCB7XG5cdFx0XHRib2R5LFxuXHRcdFx0c2lnbmF0dXJlXG5cdFx0fSk7XG5cdH0pO1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/contacts.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($q, $rootScope, co, user, crypto, utils, LavaboomAPI, Contact) {\n\tvar self = this;\n\tvar emptyContact = null;\n\n\tvar deleteLocally = function deleteLocally(contactId) {\n\t\tif (self.people.has(contactId)) {\n\t\t\tself.people['delete'](contactId);\n\t\t}\n\t};\n\n\tthis.newContact = function () {\n\t\tif (emptyContact) return emptyContact;\n\n\t\tvar id = 'new';\n\t\temptyContact = new Contact({\n\t\t\tid: id,\n\t\t\tisSecured: true,\n\t\t\tisNew: true,\n\t\t\tname: 'New contact'\n\t\t});\n\t\tself.people.set(id, emptyContact);\n\n\t\t$rootScope.$broadcast('contacts-changed');\n\n\t\treturn emptyContact;\n\t};\n\n\tthis.list = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar contacts, list;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.contacts.list();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tcontacts = context$3$0.sent.body.contacts;\n\n\t\t\t\t\t\tif (!contacts) {\n\t\t\t\t\t\t\tcontext$3$0.next = 9;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn contacts.map(Contact.fromEnvelope);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.t30 = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tcontext$3$0.t30 = [];\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tlist = context$3$0.t30;\n\t\t\t\t\t\treturn context$3$0.abrupt('return', list.reduce(function (map, c) {\n\t\t\t\t\t\t\tmap.set(c.id, c);\n\t\t\t\t\t\t\treturn map;\n\t\t\t\t\t\t}, new Map()));\n\n\t\t\t\t\tcase 12:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tvar removedReplacedHiddenEmails = function removedReplacedHiddenEmails(contact) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar emails, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, e, c;\n\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\temails = utils.uniq([].concat(babelHelpers.toConsumableArray(contact.privateEmails.map(function (e) {\n\t\t\t\t\t\t\treturn e.email;\n\t\t\t\t\t\t})), babelHelpers.toConsumableArray(contact.businessEmails.map(function (e) {\n\t\t\t\t\t\t\treturn e.email;\n\t\t\t\t\t\t}))));\n\t\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\t\tcontext$3$0.prev = 4;\n\t\t\t\t\t\t_iterator = emails[Symbol.iterator]();\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tif (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n\t\t\t\t\t\t\tcontext$3$0.next = 16;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\te = _step.value;\n\t\t\t\t\t\tc = self.getContactByEmail(e);\n\n\t\t\t\t\t\tif (!c.isHidden()) {\n\t\t\t\t\t\t\tcontext$3$0.next = 13;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 12;\n\t\t\t\t\t\treturn self.deleteContact(c.id);\n\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\treturn context$3$0.abrupt('break', 16);\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\tcontext$3$0.next = 22;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\t\tcontext$3$0.prev = 18;\n\t\t\t\t\t\tcontext$3$0.t31 = context$3$0['catch'](4);\n\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t_iteratorError = context$3$0.t31;\n\n\t\t\t\t\tcase 22:\n\t\t\t\t\t\tcontext$3$0.prev = 22;\n\t\t\t\t\t\tcontext$3$0.prev = 23;\n\n\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t\t\t_iterator['return']();\n\t\t\t\t\t\t}\n\n\t\t\t\t\tcase 25:\n\t\t\t\t\t\tcontext$3$0.prev = 25;\n\n\t\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\t\tcontext$3$0.next = 28;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthrow _iteratorError;\n\n\t\t\t\t\tcase 28:\n\t\t\t\t\t\treturn context$3$0.finish(25);\n\n\t\t\t\t\tcase 29:\n\t\t\t\t\t\treturn context$3$0.finish(22);\n\n\t\t\t\t\tcase 30:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[4, 18, 22, 30], [23,, 25, 29]]);\n\t\t}));\n\t};\n\n\tthis.createContact = function (contact) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar envelope, r;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn Contact.toEnvelope(contact);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tenvelope = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn LavaboomAPI.contacts.create(envelope);\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tr = context$3$0.sent;\n\n\t\t\t\t\t\tif (contact.id) {\n\t\t\t\t\t\t\tif (contact.id == 'new') {\n\t\t\t\t\t\t\t\tdelete contact.isNew;\n\t\t\t\t\t\t\t\temptyContact = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdeleteLocally(contact.id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontact.id = r.body.contact.id;\n\t\t\t\t\t\tself.people.set(contact.id, contact);\n\n\t\t\t\t\t\tcontext$3$0.next = 11;\n\t\t\t\t\t\treturn removedReplacedHiddenEmails(contact);\n\n\t\t\t\t\tcase 11:\n\n\t\t\t\t\t\t$rootScope.$broadcast('contacts-changed');\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', contact.id);\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.updateContact = function (contact) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar envelope, r;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn Contact.toEnvelope(contact);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tenvelope = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn LavaboomAPI.contacts.update(contact.id, envelope);\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tr = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\treturn removedReplacedHiddenEmails(contact);\n\n\t\t\t\t\tcase 8:\n\n\t\t\t\t\t\t$rootScope.$broadcast('contacts-changed');\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', r.body.contact.id);\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.deleteContact = function (contactId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif (!(!emptyContact || contactId != emptyContact.id)) {\n\t\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn LavaboomAPI.contacts['delete'](contactId);\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\temptyContact = null;\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tdeleteLocally(contactId);\n\t\t\t\t\t\t$rootScope.$broadcast('contacts-changed');\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.initialize = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\temptyContact = null;\n\n\t\t\t\t\t\tif (user.isAuthenticated()) {\n\t\t\t\t\t\t\tself.myself = new Contact({\n\t\t\t\t\t\t\t\tname: user.styledName,\n\t\t\t\t\t\t\t\temail: user.styledEmail,\n\t\t\t\t\t\t\t\tisSecured: true\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else self.myself = null;\n\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn self.list();\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tself.people = context$3$0.sent;\n\n\t\t\t\t\t\t$rootScope.$on('keyring-updated', function () {\n\t\t\t\t\t\t\tself.people = new Map();\n\t\t\t\t\t\t\tco(regeneratorRuntime.mark(function callee$4$0() {\n\t\t\t\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$4$0$(context$5$0) {\n\t\t\t\t\t\t\t\t\twhile (1) switch (context$5$0.prev = context$5$0.next) {\n\t\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 2;\n\t\t\t\t\t\t\t\t\t\t\treturn self.list();\n\n\t\t\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t\t\tself.people = context$5$0.sent;\n\n\t\t\t\t\t\t\t\t\t\t\t$rootScope.$broadcast('contacts-changed');\n\n\t\t\t\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.stop();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, callee$4$0, this);\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.getContactById = function (id) {\n\t\treturn self.people.get(id);\n\t};\n\n\tthis.getContactByEmail = function (email) {\n\t\treturn [].concat(babelHelpers.toConsumableArray(self.people.values())).find(function (c) {\n\t\t\treturn c.isMatchEmail(email);\n\t\t});\n\t};\n\n\t$rootScope.$on('logout', function () {\n\t\tconsole.log('invalidate contacts cache');\n\t\tself.people = new Map();\n\t\tself.myself = null;\n\t});\n\n\t$rootScope.$on('user-authenticated', function () {\n\t\tself.myself = new Contact({\n\t\t\tname: user.name,\n\t\t\temail: user.email,\n\t\t\tisSecured: true\n\t\t});\n\n\t\t$rootScope.$broadcast('contacts-changed');\n\t});\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL2NvbnRhY3RzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQVMsRUFBRSxFQUFFLFVBQVUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUNyRyxLQUFNLElBQUksR0FBRyxJQUFJLENBQUM7QUFDbEIsS0FBSSxZQUFZLEdBQUcsSUFBSSxDQUFDOztBQUV4QixLQUFNLGFBQWEsR0FBRyxTQUFoQixhQUFhLENBQUksU0FBUyxFQUFLO0FBQ3BDLE1BQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEVBQUU7QUFDL0IsT0FBSSxDQUFDLE1BQU0sVUFBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDO0dBQzlCO0VBQ0QsQ0FBQzs7QUFFRixLQUFJLENBQUMsVUFBVSxHQUFHLFlBQU07QUFDdkIsTUFBSSxZQUFZLEVBQ2YsT0FBTyxZQUFZLENBQUM7O0FBRXJCLE1BQUksRUFBRSxHQUFHLEtBQUssQ0FBQztBQUNmLGNBQVksR0FBRyxJQUFJLE9BQU8sQ0FBQztBQUMxQixLQUFFLEVBQUUsRUFBRTtBQUNOLFlBQVMsRUFBRSxJQUFJO0FBQ2YsUUFBSyxFQUFFLElBQUk7QUFDWCxPQUFJLEVBQUUsYUFBYTtHQUNuQixDQUFDLENBQUM7QUFDSCxNQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsWUFBWSxDQUFDLENBQUM7O0FBRWxDLFlBQVUsQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7QUFFMUMsU0FBTyxZQUFZLENBQUM7RUFDcEIsQ0FBQzs7QUFFRixLQUFJLENBQUMsSUFBSSxHQUFHO1NBQU0sRUFBRSx5QkFBQztPQUNkLFFBQVEsRUFFVixJQUFJ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LENBQUM7T0FDSCxDQUFDLENBQUM7Ozs7Ozs7R0FDSCxFQUFDO0VBQUEsQ0FBQzs7QUFFSCxLQUFJLENBQUMsY0FBYyxHQUFHLFVBQUMsRUFBRTtTQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQztFQUFBLENBQUM7O0FBRWxELEtBQUksQ0FBQyxpQkFBaUIsR0FBRyxVQUFDLEtBQUs7U0FBSyx5Q0FBSSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxHQUFFLElBQUksQ0FBQyxVQUFBLENBQUM7VUFBSSxDQUFDLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQztHQUFBLENBQUM7RUFBQSxDQUFDOztBQUUvRixXQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsRUFBRSxZQUFNO0FBQzlCLFNBQU8sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUMsQ0FBQztBQUN6QyxNQUFJLENBQUMsTUFBTSxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7QUFDeEIsTUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7RUFDbkIsQ0FBQyxDQUFDOztBQUVILFdBQVUsQ0FBQyxHQUFHLENBQUMsb0JBQW9CLEVBQUUsWUFBTTtBQUMxQyxNQUFJLENBQUMsTUFBTSxHQUFHLElBQUksT0FBTyxDQUFDO0FBQ3pCLE9BQUksRUFBRSxJQUFJLENBQUMsSUFBSTtBQUNmLFFBQUssRUFBRSxJQUFJLENBQUMsS0FBSztBQUNqQixZQUFTLEVBQUUsSUFBSTtHQUNmLENBQUMsQ0FBQzs7QUFFSCxZQUFVLENBQUMsVUFBVSxDQUFDLGtCQUFrQixDQUFDLENBQUM7RUFDMUMsQ0FBQyxDQUFDO0NBQ0gsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9zZXJ2aWNlcy9jb250YWN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqL2Z1bmN0aW9uKCRxLCAkcm9vdFNjb3BlLCBjbywgdXNlciwgY3J5cHRvLCB1dGlscywgTGF2YWJvb21BUEksIENvbnRhY3QpIHtcblx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cdGxldCBlbXB0eUNvbnRhY3QgPSBudWxsO1xuXG5cdGNvbnN0IGRlbGV0ZUxvY2FsbHkgPSAoY29udGFjdElkKSA9PiB7XG5cdFx0aWYgKHNlbGYucGVvcGxlLmhhcyhjb250YWN0SWQpKSB7XG5cdFx0XHRzZWxmLnBlb3BsZS5kZWxldGUoY29udGFjdElkKTtcblx0XHR9XG5cdH07XG5cblx0dGhpcy5uZXdDb250YWN0ID0gKCkgPT4ge1xuXHRcdGlmIChlbXB0eUNvbnRhY3QpXG5cdFx0XHRyZXR1cm4gZW1wdHlDb250YWN0O1xuXG5cdFx0bGV0IGlkID0gJ25ldyc7XG5cdFx0ZW1wdHlDb250YWN0ID0gbmV3IENvbnRhY3Qoe1xuXHRcdFx0aWQ6IGlkLFxuXHRcdFx0aXNTZWN1cmVkOiB0cnVlLFxuXHRcdFx0aXNOZXc6IHRydWUsXG5cdFx0XHRuYW1lOiAnTmV3IGNvbnRhY3QnXG5cdFx0fSk7XG5cdFx0c2VsZi5wZW9wbGUuc2V0KGlkLCBlbXB0eUNvbnRhY3QpO1xuXG5cdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjb250YWN0cy1jaGFuZ2VkJyk7XG5cblx0XHRyZXR1cm4gZW1wdHlDb250YWN0O1xuXHR9O1xuXG5cdHRoaXMubGlzdCA9ICgpID0+IGNvKGZ1bmN0aW9uICooKSB7XG5cdFx0Y29uc3QgY29udGFjdHMgPSAoeWllbGQgTGF2YWJvb21BUEkuY29udGFjdHMubGlzdCgpKS5ib2R5LmNvbnRhY3RzO1xuXG5cdFx0bGV0IGxpc3QgPSBjb250YWN0cyA/IHlpZWxkIGNvbnRhY3RzLm1hcChDb250YWN0LmZyb21FbnZlbG9wZSkgOiBbXTtcblx0XHRyZXR1cm4gbGlzdC5yZWR1Y2UoKG1hcCwgYykgPT4ge1xuXHRcdFx0bWFwLnNldChjLmlkLCBjKTtcblx0XHRcdHJldHVybiBtYXA7XG5cdFx0fSwgbmV3IE1hcCgpKTtcblx0fSk7XG5cblx0Y29uc3QgcmVtb3ZlZFJlcGxhY2VkSGlkZGVuRW1haWxzID0gKGNvbnRhY3QpID0+IGNvKGZ1bmN0aW9uICooKXtcblx0XHRjb25zdCBlbWFpbHMgPSB1dGlscy51bmlxKFsuLi5jb250YWN0LnByaXZhdGVFbWFpbHMubWFwKGUgPT4gZS5lbWFpbCksIC4uLmNvbnRhY3QuYnVzaW5lc3NFbWFpbHMubWFwKGUgPT4gZS5lbWFpbCldKTtcblx0XHRmb3IobGV0IGUgb2YgZW1haWxzKSB7XG5cdFx0XHRjb25zdCBjID0gc2VsZi5nZXRDb250YWN0QnlFbWFpbChlKTtcblx0XHRcdGlmIChjLmlzSGlkZGVuKCkpIHtcblx0XHRcdFx0eWllbGQgc2VsZi5kZWxldGVDb250YWN0KGMuaWQpO1xuXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0dGhpcy5jcmVhdGVDb250YWN0ID0gKGNvbnRhY3QpID0+IGNvKGZ1bmN0aW9uICooKSB7XG5cdFx0bGV0IGVudmVsb3BlID0geWllbGQgQ29udGFjdC50b0VudmVsb3BlKGNvbnRhY3QpO1xuXHRcdGxldCByID0geWllbGQgTGF2YWJvb21BUEkuY29udGFjdHMuY3JlYXRlKGVudmVsb3BlKTtcblxuXHRcdGlmIChjb250YWN0LmlkKSB7XG5cdFx0XHRpZiAoY29udGFjdC5pZCA9PSAnbmV3Jykge1xuXHRcdFx0XHRkZWxldGUgY29udGFjdC5pc05ldztcblx0XHRcdFx0ZW1wdHlDb250YWN0ID0gbnVsbDtcblx0XHRcdH1cblx0XHRcdGRlbGV0ZUxvY2FsbHkoY29udGFjdC5pZCk7XG5cdFx0fVxuXG5cdFx0Y29udGFjdC5pZCA9IHIuYm9keS5jb250YWN0LmlkO1xuXHRcdHNlbGYucGVvcGxlLnNldChjb250YWN0LmlkLCBjb250YWN0KTtcblx0XHRcblx0XHR5aWVsZCByZW1vdmVkUmVwbGFjZWRIaWRkZW5FbWFpbHMoY29udGFjdCk7XG5cblx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NvbnRhY3RzLWNoYW5nZWQnKTtcblxuXHRcdHJldHVybiBjb250YWN0LmlkO1xuXHR9KTtcblxuXHR0aGlzLnVwZGF0ZUNvbnRhY3QgPSAoY29udGFjdCkgPT4gY28oZnVuY3Rpb24gKigpIHtcblx0XHRsZXQgZW52ZWxvcGUgPSB5aWVsZCBDb250YWN0LnRvRW52ZWxvcGUoY29udGFjdCk7XG5cdFx0bGV0IHIgPSB5aWVsZCBMYXZhYm9vbUFQSS5jb250YWN0cy51cGRhdGUoY29udGFjdC5pZCwgZW52ZWxvcGUpO1xuXG5cdFx0eWllbGQgcmVtb3ZlZFJlcGxhY2VkSGlkZGVuRW1haWxzKGNvbnRhY3QpO1xuXG5cdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjb250YWN0cy1jaGFuZ2VkJyk7XG5cblx0XHRyZXR1cm4gci5ib2R5LmNvbnRhY3QuaWQ7XG5cdH0pO1xuXG5cdHRoaXMuZGVsZXRlQ29udGFjdCA9IChjb250YWN0SWQpID0+IGNvKGZ1bmN0aW9uICooKSB7XG5cdFx0aWYgKCFlbXB0eUNvbnRhY3QgfHwgY29udGFjdElkICE9IGVtcHR5Q29udGFjdC5pZClcblx0XHRcdHlpZWxkIExhdmFib29tQVBJLmNvbnRhY3RzLmRlbGV0ZShjb250YWN0SWQpO1xuXHRcdGVsc2Vcblx0XHRcdGVtcHR5Q29udGFjdCA9IG51bGw7XG5cblx0XHRkZWxldGVMb2NhbGx5KGNvbnRhY3RJZCk7XG5cdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdjb250YWN0cy1jaGFuZ2VkJyk7XG5cdH0pO1xuXG5cdHRoaXMuaW5pdGlhbGl6ZSA9ICgpID0+IGNvKGZ1bmN0aW9uKigpe1xuXHRcdGVtcHR5Q29udGFjdCA9IG51bGw7XG5cblx0XHRpZiAodXNlci5pc0F1dGhlbnRpY2F0ZWQoKSkge1xuXHRcdFx0c2VsZi5teXNlbGYgPSBuZXcgQ29udGFjdCh7XG5cdFx0XHRcdG5hbWU6IHVzZXIuc3R5bGVkTmFtZSxcblx0XHRcdFx0ZW1haWw6IHVzZXIuc3R5bGVkRW1haWwsXG5cdFx0XHRcdGlzU2VjdXJlZDogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSBlbHNlXG5cdFx0XHRzZWxmLm15c2VsZiA9IG51bGw7XG5cblx0XHRzZWxmLnBlb3BsZSA9IHlpZWxkIHNlbGYubGlzdCgpO1xuXG5cdFx0JHJvb3RTY29wZS4kb24oJ2tleXJpbmctdXBkYXRlZCcsICgpID0+IHtcblx0XHRcdHNlbGYucGVvcGxlID0gbmV3IE1hcCgpO1xuXHRcdFx0Y28oZnVuY3Rpb24gKigpe1xuXHRcdFx0XHRzZWxmLnBlb3BsZSA9IHlpZWxkIHNlbGYubGlzdCgpO1xuXHRcdFx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NvbnRhY3RzLWNoYW5nZWQnKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9KTtcblxuXHR0aGlzLmdldENvbnRhY3RCeUlkID0gKGlkKSA9PiBzZWxmLnBlb3BsZS5nZXQoaWQpO1xuXG5cdHRoaXMuZ2V0Q29udGFjdEJ5RW1haWwgPSAoZW1haWwpID0+IFsuLi5zZWxmLnBlb3BsZS52YWx1ZXMoKV0uZmluZChjID0+IGMuaXNNYXRjaEVtYWlsKGVtYWlsKSk7XG5cblx0JHJvb3RTY29wZS4kb24oJ2xvZ291dCcsICgpID0+IHtcblx0XHRjb25zb2xlLmxvZygnaW52YWxpZGF0ZSBjb250YWN0cyBjYWNoZScpO1xuXHRcdHNlbGYucGVvcGxlID0gbmV3IE1hcCgpO1xuXHRcdHNlbGYubXlzZWxmID0gbnVsbDtcblx0fSk7XG5cblx0JHJvb3RTY29wZS4kb24oJ3VzZXItYXV0aGVudGljYXRlZCcsICgpID0+IHtcblx0XHRzZWxmLm15c2VsZiA9IG5ldyBDb250YWN0KHtcblx0XHRcdG5hbWU6IHVzZXIubmFtZSxcblx0XHRcdGVtYWlsOiB1c2VyLmVtYWlsLFxuXHRcdFx0aXNTZWN1cmVkOiB0cnVlXG5cdFx0fSk7XG5cblx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2NvbnRhY3RzLWNoYW5nZWQnKTtcblx0fSk7XG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/hotkey.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $translate, $state, hotkeys, router) {\n\tvar self = this;\n\n\tvar isActive = true;\n\tvar hotkeyList = {};\n\n\tself.initialize = function (isEnabled) {\n\t\tself.toggleHotkeys(isEnabled);\n\n\t\t$rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\n\t\t\tif (!toState.name.includes('.hotkeys') && !fromState.name.includes('.hotkeys')) {\n\t\t\t\tself.clearHotkeys();\n\t\t\t\tself.addGlobalHotkeys();\n\t\t\t}\n\t\t});\n\t};\n\n\tself.getKeys = function () {\n\t\treturn hotkeyList;\n\t};\n\n\tself.addHotkey = function (option) {\n\t\tif (!isActive || !option) return;\n\n\t\tvar key = angular.isArray(option.combo) ? option.combo[0] : option.combo;\n\t\tvar currentKey = hotkeys.get(key);\n\t\tif (currentKey) hotkeys.del(currentKey);\n\n\t\toption.description = $translate.instant(option.description);\n\t\thotkeys.add(option);\n\n\t\thotkeyList[key] = {\n\t\t\tcombo: option.combo,\n\t\t\tdescription: option.description\n\t\t};\n\t};\n\n\tself.toggleHotkeys = function (enable) {\n\t\tisActive = enable;\n\t\tif (enable) {\n\t\t\tself.addGlobalHotkeys();\n\t\t} else {\n\t\t\tself.clearHotkeys();\n\t\t}\n\n\t\t$rootScope.$broadcast('hotkeys-enabled', isActive);\n\t};\n\n\tself.clearHotkeys = function () {\n\t\tvar r = undefined;\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = Object.keys(hotkeyList)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar key = _step.value;\n\n\t\t\t\tif (key !== '?') {\n\t\t\t\t\tvar hotkey = hotkeys.get(key);\n\t\t\t\t\tif (hotkey) {\n\t\t\t\t\t\thotkeys.del(hotkey);\n\t\t\t\t\t}\n\t\t\t\t} else r = hotkeyList[key];\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t_iterator['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\thotkeyList = { '?': r };\n\t\tconsole.log('hotkeys.clearHotkeys()');\n\t};\n\n\tvar notWhenPopupOpened = function notWhenPopupOpened(callback) {\n\t\treturn function (event, key) {\n\t\t\tif (!router.isPopupState($state.current.name)) return callback(event, key);\n\t\t};\n\t};\n\n\tself.addGlobalHotkeys = function () {\n\t\tself.addHotkey({\n\t\t\tcombo: ['c', 'n'],\n\t\t\tdescription: 'HOTKEY.COMPOSE_EMAIL',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\trouter.showPopup('compose');\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+i', 'command+i'],\n\t\t\tdescription: 'HOTKEY.GOTO_INBOX',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.inbox.label', { labelName: 'Inbox' });\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+d', 'command+d'],\n\t\t\tdescription: 'HOTKEY.GOTO_DRAFTS',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.inbox.label', { labelName: 'Drafts' });\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+s', 'command+s'],\n\t\t\tdescription: 'HOTKEY.GOTO_SENT',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.inbox.label', { labelName: 'Sent' });\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+m', 'command+m'],\n\t\t\tdescription: 'HOTKEY.GOTO_SPAM',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.inbox.label', { labelName: 'Spam' });\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+t', 'command+t'],\n\t\t\tdescription: 'HOTKEY.GOTO_STARRED',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.inbox.label', { labelName: 'Starred' });\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+h', 'command+h'],\n\t\t\tdescription: 'HOTKEY.GOTO_TRASH',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.inbox.label', { labelName: 'Trash' });\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+x', 'command+x'],\n\t\t\tdescription: 'HOTKEY.GOTO_CONTACTS',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.contacts');\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: ['ctrl+e', 'command+e'],\n\t\t\tdescription: 'HOTKEY.GOTO_SETTINGS',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\t$state.go('main.settings.general');\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: '/',\n\t\t\tdescription: 'HOTKEY.FOCUS_ON_SEARCH',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tdocument.getElementById('top-search').focus();\n\t\t\t})\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: 'esc',\n\t\t\tdescription: 'HOTKEY.LEAVE_FROM_SEARCH',\n\t\t\tcallback: notWhenPopupOpened(function (event, key) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tdocument.getElementById('top-search').blur();\n\t\t\t}),\n\t\t\tallowIn: ['INPUT']\n\t\t});\n\n\t\tself.addHotkey({\n\t\t\tcombo: '?',\n\t\t\tdescription: 'HOTKEY.CHEATSHEET',\n\t\t\tcallback: function callback(event, key) {\n\t\t\t\tif ($state.current.name.includes('.hotkeys')) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\trouter.hidePopup();\n\t\t\t\t} else if (!router.isPopupState($state.current.name)) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\trouter.showPopup('hotkeys');\n\t\t\t\t}\n\t\t\t},\n\t\t\tallowIn: ['INPUT']\n\t\t});\n\n\t\tconsole.log('hotkeys.addGlobalHotkeys()');\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL2hvdGtleS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFVLFVBQVUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDeEYsS0FBTSxJQUFJLEdBQUcsSUFBSSxDQUFDOztBQUVsQixLQUFJLFFBQVEsR0FBRyxJQUFJLENBQUM7QUFDcEIsS0FBSSxVQUFVLEdBQUcsRUFBRyxDQUFDOztBQUVyQixLQUFJLENBQUMsVUFBVSxHQUFHLFVBQUMsU0FBUyxFQUFLO0FBQ2hDLE1BQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUM7O0FBRTlCLFlBQVUsQ0FBQyxHQUFHLENBQUMsbUJBQW1CLEVBQUUsVUFBQyxLQUFLLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFLO0FBQ3hGLE9BQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFFO0FBQy9FLFFBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztBQUNwQixRQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN4QjtHQUNELENBQUMsQ0FBQztFQUNILENBQUM7O0FBRUYsS0FBSSxDQUFDLE9BQU8sR0FBRztTQUFNLFVBQVU7RUFBQSxDQUFDOztBQUVoQyxLQUFJLENBQUMsU0FBUyxHQUFHLFVBQUMsTUFBTSxFQUFLO0FBQzVCLE1BQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxNQUFNLEVBQ3ZCLE9BQU87O0FBRVIsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxD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LFdBQU0sQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUM7S0FDNUI7SUFDRDtBQUNELFVBQU8sRUFBRSxDQUFDLE9BQU8sQ0FBQztHQUNsQixDQUFDLENBQUM7O0FBRUgsU0FBTyxDQUFDLEdBQUcsQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0VBQzFDLENBQUM7Q0FDRixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL2hvdGtleS5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gLypAbmdJbmplY3QqL2Z1bmN0aW9uICgkcm9vdFNjb3BlLCAkdHJhbnNsYXRlLCAkc3RhdGUsIGhvdGtleXMsIHJvdXRlcikge1xuXHRjb25zdCBzZWxmID0gdGhpcztcblxuXHRsZXQgaXNBY3RpdmUgPSB0cnVlO1xuXHRsZXQgaG90a2V5TGlzdCA9IHsgfTtcblxuXHRzZWxmLmluaXRpYWxpemUgPSAoaXNFbmFibGVkKSA9PiB7XG5cdFx0c2VsZi50b2dnbGVIb3RrZXlzKGlzRW5hYmxlZCk7XG5cblx0XHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLCAoZXZlbnQsIHRvU3RhdGUsIHRvUGFyYW1zLCBmcm9tU3RhdGUsIGZyb21QYXJhbXMpID0+IHtcblx0XHRcdGlmICghdG9TdGF0ZS5uYW1lLmluY2x1ZGVzKCcuaG90a2V5cycpICYmICFmcm9tU3RhdGUubmFtZS5pbmNsdWRlcygnLmhvdGtleXMnKSkge1xuXHRcdFx0XHRzZWxmLmNsZWFySG90a2V5cygpO1xuXHRcdFx0XHRzZWxmLmFkZEdsb2JhbEhvdGtleXMoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fTtcblxuXHRzZWxmLmdldEtleXMgPSAoKSA9PiBob3RrZXlMaXN0O1xuXG5cdHNlbGYuYWRkSG90a2V5ID0gKG9wdGlvbikgPT4ge1xuXHRcdGlmICghaXNBY3RpdmUgfHwgIW9wdGlvbilcblx0XHRcdHJldHVybjtcblxuXHRcdGNvbnN0IGtleSA9IGFuZ3VsYXIuaXNBcnJheShvcHRpb24uY29tYm8pID8gb3B0aW9uLmNvbWJvWzBdIDogb3B0aW9uLmNvbWJvO1xuXHRcdGNvbnN0IGN1cnJlbnRLZXkgPSBob3RrZXlzLmdldChrZXkpO1xuXHRcdGlmIChjdXJyZW50S2V5KVxuXHRcdFx0aG90a2V5cy5kZWwoY3VycmVudEtleSk7XG5cblx0XHRvcHRpb24uZGVzY3JpcHRpb24gPSAkdHJhbnNsYXRlLmluc3RhbnQob3B0aW9uLmRlc2NyaXB0aW9uKTtcblx0XHRob3RrZXlzLmFkZChvcHRpb24pO1xuXG5cdFx0aG90a2V5TGlzdFtrZXldID0ge1xuXHRcdFx0Y29tYm86IG9wdGlvbi5jb21ibyxcblx0XHRcdGRlc2NyaXB0aW9uOiBvcHRpb24uZGVzY3JpcHRpb25cblx0XHR9O1xuXHR9O1xuXG5cdHNlbGYudG9nZ2xlSG90a2V5cyA9IChlbmFibGUpID0+IHtcblx0XHRpc0FjdGl2ZSA9IGVuYWJsZTtcblx0XHRpZiAoZW5hYmxlKSB7XG5cdFx0XHRzZWxmLmFkZEdsb2JhbEhvdGtleXMoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2VsZi5jbGVhckhvdGtleXMoKTtcblx0XHR9XG5cblx0XHQkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2hvdGtleXMtZW5hYmxlZCcsIGlzQWN0aXZlKTtcblx0fTtcblxuXHRzZWxmLmNsZWFySG90a2V5cyA9ICgpID0+IHtcblx0XHRsZXQgcjtcblx0XHRmb3IgKGxldCBrZXkgb2YgT2JqZWN0LmtleXMoaG90a2V5TGlzdCkpIHtcblx0XHRcdGlmIChrZXkgIT09ICc/Jykge1xuXHRcdFx0XHRjb25zdCBob3RrZXkgPSBob3RrZXlzLmdldChrZXkpO1xuXHRcdFx0XHRpZiAoaG90a2V5KSB7XG5cdFx0XHRcdFx0aG90a2V5cy5kZWwoaG90a2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHIgPSBob3RrZXlMaXN0W2tleV07XG5cdFx0fVxuXG5cdFx0aG90a2V5TGlzdCA9IHsnPyc6IHJ9O1xuXHRcdGNvbnNvbGUubG9nKCdob3RrZXlzLmNsZWFySG90a2V5cygpJyk7XG5cdH07XG5cblx0Y29uc3Qgbm90V2hlblBvcHVwT3BlbmVkID0gKGNhbGxiYWNrKSA9PlxuXHRcdChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRpZiAoIXJvdXRlci5pc1BvcHVwU3RhdGUoJHN0YXRlLmN1cnJlbnQubmFtZSkpXG5cdFx0XHRcdHJldHVybiBjYWxsYmFjayhldmVudCwga2V5KTtcblx0XHR9O1xuXG5cdHNlbGYuYWRkR2xvYmFsSG90a2V5cyA9ICgpID0+IHtcblx0XHRzZWxmLmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogWydjJywgJ24nXSxcblx0XHRcdGRlc2NyaXB0aW9uOiAnSE9US0VZLkNPTVBPU0VfRU1BSUwnLFxuXHRcdFx0Y2FsbGJhY2s6IG5vdFdoZW5Qb3B1cE9wZW5lZCgoZXZlbnQsIGtleSkgPT4ge1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRyb3V0ZXIuc2hvd1BvcHVwKCdjb21wb3NlJyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnY3RybCtpJywgJ2NvbW1hbmQraSddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuR09UT19JTkJPWCcsXG5cdFx0XHRjYWxsYmFjazogbm90V2hlblBvcHVwT3BlbmVkKChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRzdGF0ZS5nbygnbWFpbi5pbmJveC5sYWJlbCcsIHtsYWJlbE5hbWU6ICdJbmJveCd9KTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0XHRzZWxmLmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogWydjdHJsK2QnLCAnY29tbWFuZCtkJ10sXG5cdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5HT1RPX0RSQUZUUycsXG5cdFx0XHRjYWxsYmFjazogbm90V2hlblBvcHVwT3BlbmVkKChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRzdGF0ZS5nbygnbWFpbi5pbmJveC5sYWJlbCcsIHtsYWJlbE5hbWU6ICdEcmFmdHMnfSk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnY3RybCtzJywgJ2NvbW1hbmQrcyddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuR09UT19TRU5UJyxcblx0XHRcdGNhbGxiYWNrOiBub3RXaGVuUG9wdXBPcGVuZWQoKGV2ZW50LCBrZXkpID0+IHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdtYWluLmluYm94LmxhYmVsJywge2xhYmVsTmFtZTogJ1NlbnQnfSk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnY3RybCttJywgJ2NvbW1hbmQrbSddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuR09UT19TUEFNJyxcblx0XHRcdGNhbGxiYWNrOiBub3RXaGVuUG9wdXBPcGVuZWQoKGV2ZW50LCBrZXkpID0+IHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdtYWluLmluYm94LmxhYmVsJywge2xhYmVsTmFtZTogJ1NwYW0nfSk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnY3RybCt0JywgJ2NvbW1hbmQrdCddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuR09UT19TVEFSUkVEJyxcblx0XHRcdGNhbGxiYWNrOiBub3RXaGVuUG9wdXBPcGVuZWQoKGV2ZW50LCBrZXkpID0+IHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdtYWluLmluYm94LmxhYmVsJywge2xhYmVsTmFtZTogJ1N0YXJyZWQnfSk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnY3RybCtoJywgJ2NvbW1hbmQraCddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuR09UT19UUkFTSCcsXG5cdFx0XHRjYWxsYmFjazogbm90V2hlblBvcHVwT3BlbmVkKChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRzdGF0ZS5nbygnbWFpbi5pbmJveC5sYWJlbCcsIHtsYWJlbE5hbWU6ICdUcmFzaCd9KTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0XHRzZWxmLmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogWydjdHJsK3gnLCAnY29tbWFuZCt4J10sXG5cdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5HT1RPX0NPTlRBQ1RTJyxcblx0XHRcdGNhbGxiYWNrOiBub3RXaGVuUG9wdXBPcGVuZWQoKGV2ZW50LCBrZXkpID0+IHtcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JHN0YXRlLmdvKCdtYWluLmNvbnRhY3RzJyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86IFsnY3RybCtlJywgJ2NvbW1hbmQrZSddLFxuXHRcdFx0ZGVzY3JpcHRpb246ICdIT1RLRVkuR09UT19TRVRUSU5HUycsXG5cdFx0XHRjYWxsYmFjazogbm90V2hlblBvcHVwT3BlbmVkKChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCRzdGF0ZS5nbygnbWFpbi5zZXR0aW5ncy5nZW5lcmFsJyk7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXG5cdFx0c2VsZi5hZGRIb3RrZXkoe1xuXHRcdFx0Y29tYm86ICcvJyxcblx0XHRcdGRlc2NyaXB0aW9uOiAnSE9US0VZLkZPQ1VTX09OX1NFQVJDSCcsXG5cdFx0XHRjYWxsYmFjazogbm90V2hlblBvcHVwT3BlbmVkKChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3Atc2VhcmNoJykuZm9jdXMoKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cblx0XHRzZWxmLmFkZEhvdGtleSh7XG5cdFx0XHRjb21ibzogJ2VzYycsXG5cdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5MRUFWRV9GUk9NX1NFQVJDSCcsXG5cdFx0XHRjYWxsYmFjazogbm90V2hlblBvcHVwT3BlbmVkKChldmVudCwga2V5KSA9PiB7XG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0b3Atc2VhcmNoJykuYmx1cigpO1xuXHRcdFx0fSksXG5cdFx0XHRhbGxvd0luOiBbJ0lOUFVUJ11cblx0XHR9KTtcblxuXHRcdHNlbGYuYWRkSG90a2V5KHtcblx0XHRcdGNvbWJvOiAnPycsXG5cdFx0XHRkZXNjcmlwdGlvbjogJ0hPVEtFWS5DSEVBVFNIRUVUJyxcblx0XHRcdGNhbGxiYWNrOiAoZXZlbnQsIGtleSkgPT4ge1xuXHRcdFx0XHRpZiAoJHN0YXRlLmN1cnJlbnQubmFtZS5pbmNsdWRlcygnLmhvdGtleXMnKSkge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0cm91dGVyLmhpZGVQb3B1cCgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYgKCFyb3V0ZXIuaXNQb3B1cFN0YXRlKCRzdGF0ZS5jdXJyZW50Lm5hbWUpKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRyb3V0ZXIuc2hvd1BvcHVwKCdob3RrZXlzJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRhbGxvd0luOiBbJ0lOUFVUJ11cblx0XHR9KTtcblxuXHRcdGNvbnNvbGUubG9nKCdob3RrZXlzLmFkZEdsb2JhbEhvdGtleXMoKScpO1xuXHR9O1xufTsiXX0=","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/inbox.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($q, $rootScope, $timeout, router, consts, co, LavaboomAPI, user, crypto, contacts, Email, Thread, Label) {\n\tvar self = this;\n\n\tvar newLineRegex = /(\\r\\n|\\n)/g;\n\n\tvar sortQuery = '-date_modified';\n\n\tthis.selectedTidByLabelName = {};\n\n\tthis.getSortQuery = function () {\n\t\treturn sortQuery;\n\t};\n\n\tthis.setSortQuery = function (query) {\n\t\tsortQuery = query;\n\t};\n\n\tthis.getThreadById = function (threadId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar thread;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.threads.get(threadId);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tthread = context$3$0.sent.body.thread;\n\n\t\t\t\t\t\tif (!thread) {\n\t\t\t\t\t\t\tcontext$3$0.next = 9;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn Thread.fromEnvelope(thread);\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.t32 = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tcontext$3$0.t32 = null;\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.t32);\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestRestoreFromSpam = function (thread) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\n\t\t\t\t\t\tif (thread.isLabel('Spam')) self.requestRemoveLabel(thread, 'Spam');\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestRestoreFromTrash = function (thread) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\n\t\t\t\t\t\tif (thread.isLabel('Trash')) self.requestRemoveLabel(thread, 'Trash');\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestDelete = function (thread) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels, trashLabelId, spamLabelId, draftsLabelId, lbs;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\t\t\t\t\t\ttrashLabelId = labels.byName.Trash.id;\n\t\t\t\t\t\tspamLabelId = labels.byName.Spam.id;\n\t\t\t\t\t\tdraftsLabelId = labels.byName.Drafts ? labels.byName.Drafts.id : null;\n\t\t\t\t\t\tlbs = thread.labels;\n\n\t\t\t\t\t\tif (!(lbs.includes(trashLabelId) || lbs.includes(spamLabelId) || draftsLabelId && lbs.includes(draftsLabelId))) {\n\t\t\t\t\t\t\tcontext$3$0.next = 13;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\treturn self.requestDeleteForcefully(thread);\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tcontext$3$0.t33 = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 16;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 13:\n\t\t\t\t\t\tcontext$3$0.next = 15;\n\t\t\t\t\t\treturn self.requestAddLabel(thread, 'Trash');\n\n\t\t\t\t\tcase 15:\n\t\t\t\t\t\tcontext$3$0.t33 = context$3$0.sent;\n\n\t\t\t\t\tcase 16:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.t33);\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestDeleteForcefully = function (thread) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.threads['delete'](thread.id);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestSetLabel = function (thread, labelName) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels, labelId, newLabels;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\t\t\t\t\t\tlabelId = labels.byName[labelName].id;\n\t\t\t\t\t\tnewLabels = [labelId];\n\t\t\t\t\t\tcontext$3$0.next = 7;\n\t\t\t\t\t\treturn LavaboomAPI.threads.update(thread.id, { labels: newLabels });\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', newLabels);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestSwitchLabel = function (thread, labelName) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tif (!thread.isLabel(labelName)) {\n\t\t\t\t\t\t\tcontext$3$0.next = 7;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconsole.log('label found - remove');\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn self.requestRemoveLabel(thread, labelName);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tconsole.log('label not found - add');\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\treturn self.requestAddLabel(thread, labelName);\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestRemoveLabel = function (thread, labelName) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar newLabels;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tnewLabels = thread.removeLabel(labelName);\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn LavaboomAPI.threads.update(thread.id, { labels: newLabels });\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', newLabels);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestAddLabel = function (thread, labelName) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar newLabels;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tnewLabels = thread.addLabel(labelName);\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn LavaboomAPI.threads.update(thread.id, { labels: newLabels });\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', newLabels);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.getEmailsByThreadId = function (threadId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar emails;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.emails.list({ thread: threadId, sort: '-date_created' });\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\temails = context$3$0.sent.body.emails;\n\n\t\t\t\t\t\tif (!emails) {\n\t\t\t\t\t\t\tcontext$3$0.next = 9;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn emails.map(function (e) {\n\t\t\t\t\t\t\treturn Email.fromEnvelope(e);\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tcontext$3$0.t34 = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 9:\n\t\t\t\t\t\tcontext$3$0.t34 = [];\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.t34);\n\n\t\t\t\t\tcase 11:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.setThreadReadStatus = function (threadId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar thread;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.threads.get(threadId);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tthread = context$3$0.sent.body.thread;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn LavaboomAPI.threads.update(threadId, {\n\t\t\t\t\t\t\tis_read: true,\n\n\t\t\t\t\t\t\t// todo: hack\n\t\t\t\t\t\t\tlabels: thread.labels\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.getLabels = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels, r;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.labels.list();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tlabels = context$3$0.sent.body.labels;\n\t\t\t\t\t\tr = labels.reduce(function (a, labelOpts) {\n\t\t\t\t\t\t\tvar label = new Label(labelOpts);\n\t\t\t\t\t\t\tif (label.name == 'Drafts') return a;\n\n\t\t\t\t\t\t\ta.byName[label.name] = a.byId[label.id] = label;\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}, { byName: {}, byId: {}, list: [] });\n\n\t\t\t\t\t\tr.list = consts.ORDERED_LABELS.map(function (labelName) {\n\t\t\t\t\t\t\treturn r.byName[labelName];\n\t\t\t\t\t\t}).filter(function (e) {\n\t\t\t\t\t\t\treturn !!e;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t$rootScope.$broadcast('inbox-labels', r);\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', r);\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.initialize = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar info, labels;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.info();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tinfo = context$3$0.sent;\n\n\t\t\t\t\t\tconsole.log('info', info);\n\n\t\t\t\t\t\tcontext$3$0.next = 6;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 6:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.createLabel = function (name) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.labels.create({ name: name });\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.downloadAttachment = function (email, attachmentId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar res, r;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.files.list({\n\t\t\t\t\t\t\temail: email,\n\t\t\t\t\t\t\tname: attachmentId + '.pgp'\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tres = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 5;\n\t\t\t\t\t\treturn crypto.decodeEnvelope(res.body.files[0], '', 'raw');\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\t\tr = context$3$0.sent.data;\n\n\t\t\t\t\t\tconsole.log('downloadAttachment', r);\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', r);\n\n\t\t\t\t\tcase 8:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.uploadAttachment = function (envelope) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.files.create(envelope);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.deleteAttachment = function (attachmentId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.files['delete'](attachmentId);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.sent);\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.getEmailById = function (emailId) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar res;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.emails.get(emailId);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tres = context$3$0.sent;\n\t\t\t\t\t\treturn context$3$0.abrupt('return', res.body.email ? Email.fromEnvelope(res.body.email) : null);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.requestList = function (labelName, offset, limit) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar labels, requestLabels, excludeSpam, excludeTrash, threads;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn self.getLabels();\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tlabels = context$3$0.sent;\n\t\t\t\t\t\trequestLabels = [labels.byName[labelName].id];\n\t\t\t\t\t\texcludeSpam = '-' + labels.byName.Spam.id;\n\t\t\t\t\t\texcludeTrash = '-' + labels.byName.Trash.id;\n\n\t\t\t\t\t\tif (labelName != 'Spam') requestLabels.push(excludeSpam);\n\t\t\t\t\t\tif (labelName != 'Trash') requestLabels.push(excludeTrash);\n\n\t\t\t\t\t\tcontext$3$0.next = 10;\n\t\t\t\t\t\treturn LavaboomAPI.threads.list({\n\t\t\t\t\t\t\tlabel: requestLabels.join(','),\n\t\t\t\t\t\t\tsort: sortQuery,\n\t\t\t\t\t\t\toffset: offset,\n\t\t\t\t\t\t\tlimit: limit\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 10:\n\t\t\t\t\t\tthreads = context$3$0.sent.body.threads;\n\n\t\t\t\t\t\tif (!threads) {\n\t\t\t\t\t\t\tcontext$3$0.next = 17;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\treturn threads.map(function (t) {\n\t\t\t\t\t\t\treturn co(regeneratorRuntime.mark(function callee$4$0() {\n\t\t\t\t\t\t\t\tvar cachedThread;\n\t\t\t\t\t\t\t\treturn regeneratorRuntime.wrap(function callee$4$0$(context$5$0) {\n\t\t\t\t\t\t\t\t\twhile (1) switch (context$5$0.prev = context$5$0.next) {\n\t\t\t\t\t\t\t\t\t\tcase 0:\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 2;\n\t\t\t\t\t\t\t\t\t\t\treturn self.getThreadById(t.id, true);\n\n\t\t\t\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t\t\t\tcachedThread = context$5$0.sent;\n\n\t\t\t\t\t\t\t\t\t\t\tif (!cachedThread) {\n\t\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 5;\n\t\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.abrupt('return', cachedThread);\n\n\t\t\t\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\t\t\t\tcontext$5$0.next = 7;\n\t\t\t\t\t\t\t\t\t\t\treturn co.def(Thread.fromEnvelope(t), null);\n\n\t\t\t\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.abrupt('return', context$5$0.sent);\n\n\t\t\t\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\t\t\tcase 'end':\n\t\t\t\t\t\t\t\t\t\t\treturn context$5$0.stop();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, callee$4$0, this);\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 14:\n\t\t\t\t\t\tcontext$3$0.t35 = context$3$0.sent;\n\t\t\t\t\t\tcontext$3$0.next = 18;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 17:\n\t\t\t\t\t\tcontext$3$0.t35 = [];\n\n\t\t\t\t\tcase 18:\n\t\t\t\t\t\treturn context$3$0.abrupt('return', context$3$0.t35);\n\n\t\t\t\t\tcase 19:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.getKeyForEmail = function (email) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar res;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.keys.get(email);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tres = context$3$0.sent;\n\t\t\t\t\t\treturn context$3$0.abrupt('return', res.body.key);\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tvar sendEnvelope = null;\n\tvar isSecured = false;\n\n\tthis.send = function (opts, manifest, keys) {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tisSecured = Email.isSecuredKeys(keys);\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn Email.toEnvelope(opts, manifest, keys);\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tsendEnvelope = context$3$0.sent;\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.getMumbledFormattedBody = function () {\n\t\treturn sendEnvelope && sendEnvelope.body ? sendEnvelope.body.replace(newLineRegex, '<br />') : '';\n\t};\n\n\tthis.confirmSend = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar res;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.next = 2;\n\t\t\t\t\t\treturn LavaboomAPI.emails.create(sendEnvelope);\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tres = context$3$0.sent;\n\n\t\t\t\t\t\tsendEnvelope = null;\n\n\t\t\t\t\t\treturn context$3$0.abrupt('return', res.body.id);\n\n\t\t\t\t\tcase 5:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\tthis.rejectSend = function () {\n\t\tsendEnvelope = null;\n\t};\n};\n\n/*if (!labels.byName.Drafts)\r\n\tyield self.createLabel('Drafts');*/\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL2luYm94LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQVMsRUFBRSxFQUFFLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO0FBQy9JLEtBQU0sSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFbEIsS0FBTSxZQUFZLEdBQUcsWUFBWSxDQUFDOztBQUVsQyxLQUFJLFNBQVMsR0FBRyxnQkFBZ0IsQ0FBQzs7QUFFakMsS0FBSSxDQUFDLHNCQUFzQixHQUFHLEVBQUUsQ0FBQzs7QUFFakMsS0FBSSxDQUFDLFlBQVksR0FBRztTQUFNLFNBQVM7RUFBQSxDQUFDOztBQUVwQyxLQUFJLENBQUMsWUFBWSxHQUFHLFVBQUMsS0FBSyxFQUFLO0FBQzlCLFdBQVMsR0FBRyxLQUFLLENBQUM7RUFDbEIsQ0FBQzs7QUFFRixLQUFJLENBQUMsYUFBYSxHQUFHLFVBQUMsUUFBUTtTQUFLLEVBQUUseUJBQUM7T0FDL0IsTUFBTTs7Ozs7YUFBVSxXQUFXLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUM7OztBQUFqRCxZQUFNLG9CQUE2QyxJQUFJLENBQUMsTUFBTTs7V0FFN0QsTUFBTTs7Ozs7O2FBQVMsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUM7Ozs7Ozs7O3dCQUFHLElBQUk7Ozs7Ozs7Ozs7R0FDeEQsRUFBQztFQUFBLENBQUM7O0FBRUgsS0FBSSxDQUFDLHNCQUFzQixHQUFHLFVBQUMsTUFBTTtTQUFLLEVBQUUseUJBQUM7T0FDdEMsTUFBTTs7Ozs7YUFBUyxJQUFJLENBQUMsU0FBUyxFQUFFOzs7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QUM7Ozs7QUFDeEMsZUFBUyxHQUFHLEtBQUssQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7O2FBQ2pCLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUM7OztBQUEzRCxrQkFBWTs7Ozs7OztHQUNaLEVBQUM7RUFBQSxDQUFDOztBQUVILEtBQUksQ0FBQyx1QkFBdUIsR0FBRyxZQUFNO0FBQ3BDLFNBQU8sWUFBWSxJQUFJLFlBQVksQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQztFQUNsRyxDQUFDOztBQUVGLEtBQUksQ0FBQyxXQUFXLEdBQUc7U0FBTyxFQUFFLHlCQUFDO09BQ3RCLEdBQUc7Ozs7O2FBQVMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDOzs7QUFBbkQsU0FBRzs7QUFFVCxrQkFBWSxHQUFHLElBQUksQ0FBQzs7MENBRWIsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFOzs7Ozs7O0dBQ2xCLEVBQUM7RUFBQSxDQUFDOztBQUVILEtBQUksQ0FBQyxVQUFVLEdBQUcsWUFBTTtBQUN2QixjQUFZLEdBQUcsSUFBSSxDQUFDO0VBQ3BCLENBQUM7Q0FDRixDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL2luYm94LmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovZnVuY3Rpb24oJHEsICRyb290U2NvcGUsICR0aW1lb3V0LCByb3V0ZXIsIGNvbnN0cywgY28sIExhdmFib29tQVBJLCB1c2VyLCBjcnlwdG8sIGNvbnRhY3RzLCBFbWFpbCwgVGhyZWFkLCBMYWJlbCkge1xyXG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xyXG5cclxuXHRjb25zdCBuZXdMaW5lUmVnZXggPSAvKFxcclxcbnxcXG4pL2c7XHJcblxyXG5cdGxldCBzb3J0UXVlcnkgPSAnLWRhdGVfbW9kaWZpZWQnO1xyXG5cclxuXHR0aGlzLnNlbGVjdGVkVGlkQnlMYWJlbE5hbWUgPSB7fTtcclxuXHJcblx0dGhpcy5nZXRTb3J0UXVlcnkgPSAoKSA9PiBzb3J0UXVlcnk7XHJcblxyXG5cdHRoaXMuc2V0U29ydFF1ZXJ5ID0gKHF1ZXJ5KSA9PiB7XHJcblx0XHRzb3J0UXVlcnkgPSBxdWVyeTtcclxuXHR9O1xyXG5cclxuXHR0aGlzLmdldFRocmVhZEJ5SWQgPSAodGhyZWFkSWQpID0+IGNvKGZ1bmN0aW9uICooKSB7XHJcblx0XHRjb25zdCB0aHJlYWQgPSAoeWllbGQgTGF2YWJvb21BUEkudGhyZWFkcy5nZXQodGhyZWFkSWQpKS5ib2R5LnRocmVhZDtcclxuXHJcblx0XHRyZXR1cm4gdGhyZWFkID8geWllbGQgVGhyZWFkLmZyb21FbnZlbG9wZSh0aHJlYWQpIDogbnVsbDtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5yZXF1ZXN0UmVzdG9yZUZyb21TcGFtID0gKHRocmVhZCkgPT4gY28oZnVuY3Rpb24gKigpIHtcclxuXHRcdGNvbnN0IGxhYmVscyA9IHlpZWxkIHNlbGYuZ2V0TGFiZWxzKCk7XHJcblxyXG5cdFx0aWYgKHRocmVhZC5pc0xhYmVsKCdTcGFtJykpXHJcblx0XHRcdHNlbGYucmVxdWVzdFJlbW92ZUxhYmVsKHRocmVhZCwgJ1NwYW0nKTtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5yZXF1ZXN0UmVzdG9yZUZyb21UcmFzaCA9ICh0aHJlYWQpID0+IGNvKGZ1bmN0aW9uICooKSB7XHJcblx0XHRjb25zdCBsYWJlbHMgPSB5aWVsZCBzZWxmLmdldExhYmVscygpO1xyXG5cclxuXHRcdGlmICh0aHJlYWQuaXNMYWJlbCgnVHJhc2gnKSlcclxuXHRcdFx0c2VsZi5yZXF1ZXN0UmVtb3ZlTGFiZWwodGhyZWFkLCAnVHJhc2gnKTtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5yZXF1ZXN0RGVsZXRlID0gKHRocmVhZCkgPT4gY28oZnVuY3Rpb24gKigpIHtcclxuXHRcdGNvbnN0IGxhYmVscyA9IHlpZWxkIHNlbGYuZ2V0TGFiZWxzKCk7XHJcblxyXG5cdFx0Y29uc3QgdHJhc2hMYWJlbElkID0gbGFiZWxzLmJ5TmFtZS5UcmFzaC5pZDtcclxuXHRcdGNvbnN0IHNwYW1MYWJlbElkID0gbGFiZWxzLmJ5TmFtZS5TcGFtLmlkO1xyXG5cdFx0Y29uc3QgZHJhZnRzTGFiZWxJZCA9IGxhYmVscy5ieU5hbWUuRHJhZnRzID8gbGFiZWxzLmJ5TmFtZS5EcmFmdHMuaWQgOiBudWxsO1xyXG5cclxuXHRcdGNvbnN0IGxicyA9IHRocmVhZC5sYWJlbHM7XHJcblx0XHRyZXR1cm4gbGJzLmluY2x1ZGVzKHRyYXNoTGFiZWxJZCkgfHwgbGJzLmluY2x1ZGVzKHNwYW1MYWJlbElkKSB8fCAoZHJhZnRzTGFiZWxJZCAmJiBsYnMuaW5jbHVkZXMoZHJhZnRzTGFiZWxJZCkpXHJcblx0XHRcdD8geWllbGQgc2VsZi5yZXF1ZXN0RGVsZXRlRm9yY2VmdWxseSh0aHJlYWQpXHJcblx0XHRcdDogeWllbGQgc2VsZi5yZXF1ZXN0QWRkTGFiZWwodGhyZWFkLCAnVHJhc2gnKTtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5yZXF1ZXN0RGVsZXRlRm9yY2VmdWxseSA9ICh0aHJlYWQpID0+IGNvKGZ1bmN0aW9uICooKSB7XHJcblx0XHR5aWVsZCBMYXZhYm9vbUFQSS50aHJlYWRzLmRlbGV0ZSh0aHJlYWQuaWQpO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLnJlcXVlc3RTZXRMYWJlbCA9ICh0aHJlYWQsIGxhYmVsTmFtZSkgPT4gY28oZnVuY3Rpb24gKigpIHtcclxuXHRcdGNvbnN0IGxhYmVscyA9IHlpZWxkIHNlbGYuZ2V0TGFiZWxzKCk7XHJcblx0XHRsZXQgbGFiZWxJZCA9IGxhYmVscy5ieU5hbWVbbGFiZWxOYW1lXS5pZDtcclxuXHJcblx0XHRjb25zdCBuZXdMYWJlbHMgPSBbbGFiZWxJZF07XHJcblx0XHR5aWVsZCBMYXZhYm9vbUFQSS50aHJlYWRzLnVwZGF0ZSh0aHJlYWQuaWQsIHtsYWJlbHM6IG5ld0xhYmVsc30pO1xyXG5cclxuXHRcdHJldHVybiBuZXdMYWJlbHM7XHJcblx0fSk7XHJcblxyXG5cdHRoaXMucmVxdWVzdFN3aXRjaExhYmVsID0gKHRocmVhZCwgbGFiZWxOYW1lKSA9PiBjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0aWYgKHRocmVhZC5pc0xhYmVsKGxhYmVsTmFtZSkpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ2xhYmVsIGZvdW5kIC0gcmVtb3ZlJyk7XHJcblx0XHRcdHJldHVybiB5aWVsZCBzZWxmLnJlcXVlc3RSZW1vdmVMYWJlbCh0aHJlYWQsIGxhYmVsTmFtZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZygnbGFiZWwgbm90IGZvdW5kIC0gYWRkJyk7XHJcblx0XHRcdHJldHVybiB5aWVsZCBzZWxmLnJlcXVlc3RBZGRMYWJlbCh0aHJlYWQsIGxhYmVsTmFtZSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdHRoaXMucmVxdWVzdFJlbW92ZUxhYmVsID0gKHRocmVhZCwgbGFiZWxOYW1lKSA9PiBjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0bGV0IG5ld0xhYmVscyA9IHRocmVhZC5yZW1vdmVMYWJlbChsYWJlbE5hbWUpO1xyXG5cdFx0eWllbGQgTGF2YWJvb21BUEkudGhyZWFkcy51cGRhdGUodGhyZWFkLmlkLCB7bGFiZWxzOiBuZXdMYWJlbHN9KTtcclxuXHJcblx0XHRyZXR1cm4gbmV3TGFiZWxzO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLnJlcXVlc3RBZGRMYWJlbCA9ICh0aHJlYWQsIGxhYmVsTmFtZSkgPT4gY28oZnVuY3Rpb24gKigpIHtcclxuXHRcdGNvbnN0IG5ld0xhYmVscyA9IHRocmVhZC5hZGRMYWJlbChsYWJlbE5hbWUpO1xyXG5cdFx0eWllbGQgTGF2YWJvb21BUEkudGhyZWFkcy51cGRhdGUodGhyZWFkLmlkLCB7bGFiZWxzOiBuZXdMYWJlbHN9KTtcclxuXHJcblx0XHRyZXR1cm4gbmV3TGFiZWxzO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLmdldEVtYWlsc0J5VGhyZWFkSWQgPSAodGhyZWFkSWQpID0+IGNvKGZ1bmN0aW9uICooKSB7XHJcblx0XHRjb25zdCBlbWFpbHMgPSAoeWllbGQgTGF2YWJvb21BUEkuZW1haWxzLmxpc3Qoe3RocmVhZDogdGhyZWFkSWQsIHNvcnQ6ICctZGF0ZV9jcmVhdGVkJ30pKS5ib2R5LmVtYWlscztcclxuXHJcblx0XHRyZXR1cm4gZW1haWxzID8geWllbGQgZW1haWxzLm1hcChlID0+IEVtYWlsLmZyb21FbnZlbG9wZShlKSkgOiBbXTtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5zZXRUaHJlYWRSZWFkU3RhdHVzID0gKHRocmVhZElkKSA9PiBjbyhmdW5jdGlvbiAqKCl7XHJcblx0XHRjb25zdCB0aHJlYWQgPSAoeWllbGQgTGF2YWJvb21BUEkudGhyZWFkcy5nZXQodGhyZWFkSWQpKS5ib2R5LnRocmVhZDtcclxuXHJcblx0XHR5aWVsZCBMYXZhYm9vbUFQSS50aHJlYWRzLnVwZGF0ZSh0aHJlYWRJZCwge1xyXG5cdFx0XHRpc19yZWFkOiB0cnVlLFxyXG5cclxuXHRcdFx0Ly8gdG9kbzogaGFja1xyXG5cdFx0XHRsYWJlbHM6IHRocmVhZC5sYWJlbHNcclxuXHRcdH0pO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLmdldExhYmVscyA9ICgpID0+IGNvKGZ1bmN0aW9uICooKSB7XHJcblx0XHRjb25zdCBsYWJlbHMgPSAoeWllbGQgTGF2YWJvb21BUEkubGFiZWxzLmxpc3QoKSkuYm9keS5sYWJlbHM7XHJcblxyXG5cdFx0Y29uc3QgciA9IGxhYmVscy5yZWR1Y2UoKGEsIGxhYmVsT3B0cykgPT4ge1xyXG5cdFx0XHRjb25zdCBsYWJlbCA9IG5ldyBMYWJlbChsYWJlbE9wdHMpO1xyXG5cdFx0XHRpZiAobGFiZWwubmFtZSA9PSAnRHJhZnRzJylcclxuXHRcdFx0XHRyZXR1cm4gYTtcclxuXHJcblx0XHRcdGEuYnlOYW1lW2xhYmVsLm5hbWVdID0gYS5ieUlkW2xhYmVsLmlkXSA9IGxhYmVsO1xyXG5cdFx0XHRyZXR1cm4gYTtcclxuXHRcdH0sIHtieU5hbWU6IHt9LCBieUlkOiB7fSwgbGlzdDogW119KTtcclxuXHJcblx0XHRyLmxpc3QgPSBjb25zdHMuT1JERVJFRF9MQUJFTFMubWFwKGxhYmVsTmFtZSA9PiByLmJ5TmFtZVtsYWJlbE5hbWVdKS5maWx0ZXIoZSA9PiAhIWUpO1xyXG5cclxuXHRcdCRyb290U2NvcGUuJGJyb2FkY2FzdCgnaW5ib3gtbGFiZWxzJywgcik7XHJcblxyXG5cdFx0cmV0dXJuIHI7XHJcblx0fSk7XHJcblxyXG5cdHRoaXMuaW5pdGlhbGl6ZSA9ICgpID0+IGNvKGZ1bmN0aW9uICooKXtcclxuXHRcdGNvbnN0IGluZm8gPSB5aWVsZCBMYXZhYm9vbUFQSS5pbmZvKCk7XHJcblx0XHRjb25zb2xlLmxvZygnaW5mbycsIGluZm8pO1xyXG5cclxuXHRcdGNvbnN0IGxhYmVscyA9IHlpZWxkIHNlbGYuZ2V0TGFiZWxzKCk7XHJcblxyXG5cdFx0LyppZiAoIWxhYmVscy5ieU5hbWUuRHJhZnRzKVxyXG5cdFx0XHR5aWVsZCBzZWxmLmNyZWF0ZUxhYmVsKCdEcmFmdHMnKTsqL1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLmNyZWF0ZUxhYmVsID0gKG5hbWUpID0+IGNvKGZ1bmN0aW9uICooKXtcclxuXHRcdHlpZWxkIExhdmFib29tQVBJLmxhYmVscy5jcmVhdGUoe25hbWV9KTtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5kb3dubG9hZEF0dGFjaG1lbnQgPSAoZW1haWwsIGF0dGFjaG1lbnRJZCkgPT4gY28oZnVuY3Rpb24gKigpe1xyXG5cdFx0Y29uc3QgcmVzID0gIHlpZWxkIExhdmFib29tQVBJLmZpbGVzLmxpc3Qoe1xyXG5cdFx0XHRlbWFpbDogZW1haWwsXHJcblx0XHRcdG5hbWU6IGF0dGFjaG1lbnRJZCArICcucGdwJ1xyXG5cdFx0fSk7XHJcblx0XHRsZXQgciA9ICh5aWVsZCBjcnlwdG8uZGVjb2RlRW52ZWxvcGUocmVzLmJvZHkuZmlsZXNbMF0sICcnLCAncmF3JykpLmRhdGE7XHJcblxyXG5cdFx0Y29uc29sZS5sb2coJ2Rvd25sb2FkQXR0YWNobWVudCcsIHIpO1xyXG5cclxuXHRcdHJldHVybiByO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLnVwbG9hZEF0dGFjaG1lbnQgPSAoZW52ZWxvcGUpID0+IGNvKGZ1bmN0aW9uICooKXtcclxuXHRcdHJldHVybiB5aWVsZCBMYXZhYm9vbUFQSS5maWxlcy5jcmVhdGUoZW52ZWxvcGUpO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLmRlbGV0ZUF0dGFjaG1lbnQgPSAoYXR0YWNobWVudElkKSA9PiBjbyhmdW5jdGlvbiAqKCl7XHJcblx0XHRyZXR1cm4geWllbGQgTGF2YWJvb21BUEkuZmlsZXMuZGVsZXRlKGF0dGFjaG1lbnRJZCk7XHJcblx0fSk7XHJcblxyXG5cdHRoaXMuZ2V0RW1haWxCeUlkID0gKGVtYWlsSWQpID0+IGNvKGZ1bmN0aW9uICooKXtcclxuXHRcdGNvbnN0IHJlcyA9IHlpZWxkIExhdmFib29tQVBJLmVtYWlscy5nZXQoZW1haWxJZCk7XHJcblxyXG5cdFx0cmV0dXJuIHJlcy5ib2R5LmVtYWlsID8gRW1haWwuZnJvbUVudmVsb3BlKHJlcy5ib2R5LmVtYWlsKSA6IG51bGw7XHJcblx0fSk7XHJcblxyXG5cdHRoaXMucmVxdWVzdExpc3QgPSAobGFiZWxOYW1lLCBvZmZzZXQsIGxpbWl0KSA9PiBjbyhmdW5jdGlvbiAqKCkge1xyXG5cdFx0Y29uc3QgbGFiZWxzID0geWllbGQgc2VsZi5nZXRMYWJlbHMoKTtcclxuXHRcdGNvbnN0IHJlcXVlc3RMYWJlbHMgPSBbbGFiZWxzLmJ5TmFtZVtsYWJlbE5hbWVdLmlkXTtcclxuXHJcblx0XHRjb25zdCBleGNsdWRlU3BhbSA9ICctJyArIGxhYmVscy5ieU5hbWUuU3BhbS5pZDtcclxuXHRcdGNvbnN0IGV4Y2x1ZGVUcmFzaCA9ICctJyArIGxhYmVscy5ieU5hbWUuVHJhc2guaWQ7XHJcblx0XHRpZiAobGFiZWxOYW1lICE9ICdTcGFtJylcclxuXHRcdFx0cmVxdWVzdExhYmVscy5wdXNoKGV4Y2x1ZGVTcGFtKTtcclxuXHRcdGlmIChsYWJlbE5hbWUgIT0gJ1RyYXNoJylcclxuXHRcdFx0cmVxdWVzdExhYmVscy5wdXNoKGV4Y2x1ZGVUcmFzaCk7XHJcblxyXG5cdFx0Y29uc3QgdGhyZWFkcyA9ICh5aWVsZCBMYXZhYm9vbUFQSS50aHJlYWRzLmxpc3Qoe1xyXG5cdFx0XHRsYWJlbDogcmVxdWVzdExhYmVscy5qb2luKCcsJyksXHJcblx0XHRcdHNvcnQ6IHNvcnRRdWVyeSxcclxuXHRcdFx0b2Zmc2V0OiBvZmZzZXQsXHJcblx0XHRcdGxpbWl0OiBsaW1pdFxyXG5cdFx0fSkpLmJvZHkudGhyZWFkcztcclxuXHJcblx0XHRyZXR1cm4gdGhyZWFkcyA/IHlpZWxkIHRocmVhZHMubWFwKHQgPT4gY28oZnVuY3Rpb24gKigpe1xyXG5cdFx0XHRjb25zdCBjYWNoZWRUaHJlYWQgPSB5aWVsZCBzZWxmLmdldFRocmVhZEJ5SWQodC5pZCwgdHJ1ZSk7XHJcblx0XHRcdGlmIChjYWNoZWRUaHJlYWQpXHJcblx0XHRcdFx0cmV0dXJuIGNhY2hlZFRocmVhZDtcclxuXHRcdFx0cmV0dXJuIHlpZWxkIGNvLmRlZihUaHJlYWQuZnJvbUVudmVsb3BlKHQpLCBudWxsKTtcclxuXHRcdH0pKSA6IFtdO1xyXG5cdH0pO1xyXG5cclxuXHR0aGlzLmdldEtleUZvckVtYWlsID0gKGVtYWlsKSA9PiBjbyhmdW5jdGlvbiAqICgpIHtcclxuXHRcdGNvbnN0IHJlcyA9IHlpZWxkIExhdmFib29tQVBJLmtleXMuZ2V0KGVtYWlsKTtcclxuXHRcdHJldHVybiByZXMuYm9keS5rZXk7XHJcblx0fSk7XHJcblxyXG5cdGxldCBzZW5kRW52ZWxvcGUgPSBudWxsO1xyXG5cdGxldCBpc1NlY3VyZWQgPSBmYWxzZTtcclxuXHJcblx0dGhpcy5zZW5kID0gKG9wdHMsIG1hbmlmZXN0LCBrZXlzKSA9PiBjbyhmdW5jdGlvbiAqICgpIHtcclxuXHRcdGlzU2VjdXJlZCA9IEVtYWlsLmlzU2VjdXJlZEtleXMoa2V5cyk7XHJcblx0XHRzZW5kRW52ZWxvcGUgPSB5aWVsZCBFbWFpbC50b0VudmVsb3BlKG9wdHMsIG1hbmlmZXN0LCBrZXlzKTtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5nZXRNdW1ibGVkRm9ybWF0dGVkQm9keSA9ICgpID0+IHtcclxuXHRcdHJldHVybiBzZW5kRW52ZWxvcGUgJiYgc2VuZEVudmVsb3BlLmJvZHkgPyBzZW5kRW52ZWxvcGUuYm9keS5yZXBsYWNlKG5ld0xpbmVSZWdleCwgJzxiciAvPicpIDogJyc7XHJcblx0fTtcclxuXHJcblx0dGhpcy5jb25maXJtU2VuZCA9ICgpID0+ICBjbyhmdW5jdGlvbiAqICgpIHtcclxuXHRcdGNvbnN0IHJlcyA9IHlpZWxkIExhdmFib29tQVBJLmVtYWlscy5jcmVhdGUoc2VuZEVudmVsb3BlKTtcclxuXHJcblx0XHRzZW5kRW52ZWxvcGUgPSBudWxsO1xyXG5cclxuXHRcdHJldHVybiByZXMuYm9keS5pZDtcclxuXHR9KTtcclxuXHJcblx0dGhpcy5yZWplY3RTZW5kID0gKCkgPT4ge1xyXG5cdFx0c2VuZEVudmVsb3BlID0gbnVsbDtcclxuXHR9O1xyXG59OyJdfQ==","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/router.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $state, $modal, $timeout) {\n\tvar self = this;\n\n\tvar isInitialized = false;\n\tvar delayedPopup = null;\n\n\t$rootScope.whenInitialized(function () {\n\t\tisInitialized = true;\n\t\tif (delayedPopup) {\n\t\t\tdelayedPopup.windowClass = 'no-animation-modal';\n\t\t\tself.createPopup(delayedPopup);\n\t\t\tdelayedPopup = null;\n\t\t}\n\t});\n\n\tthis.currentModal = null;\n\n\tthis.createPopup = function (opts) {\n\t\tif (isInitialized) {\n\t\t\tself.currentModal = $modal.open(opts);\n\t\t\tself.currentModal.result.then(function () {\n\t\t\t\tself.hidePopup();\n\t\t\t})['catch'](function () {\n\t\t\t\tself.hidePopup();\n\t\t\t});\n\t\t} else delayedPopup = opts;\n\t};\n\n\tthis.showPopup = function (stateName, params) {\n\t\tif (self.currentModal) {\n\t\t\tself.currentModal.close();\n\t\t\tself.currentModal = null;\n\t\t}\n\n\t\tstateName = '.popup.' + stateName;\n\t\tif (!params) params = {};\n\n\t\t$timeout(function () {\n\t\t\t$state.go(self.getPrimaryStateName($state.current.name) + stateName, params);\n\t\t});\n\t};\n\n\tthis.hidePopup = function () {\n\t\tif (self.currentModal) {\n\t\t\tself.currentModal.close();\n\t\t\tself.currentModal = null;\n\t\t}\n\n\t\t$timeout(function () {\n\t\t\t$state.go(self.getPrimaryStateName($state.current.name));\n\t\t});\n\t};\n\n\tthis.isPopupState = function (name) {\n\t\treturn name.includes('.popup.');\n\t};\n\n\tthis.getPrimaryStateName = function (name) {\n\t\treturn name.replace(/\\.popup\\..+/, '');\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL3JvdXRlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFVLFVBQVUsRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRTtBQUM3RSxLQUFNLElBQUksR0FBRyxJQUFJLENBQUM7O0FBRWxCLEtBQUksYUFBYSxHQUFHLEtBQUssQ0FBQztBQUMxQixLQUFJLFlBQVksR0FBRyxJQUFJLENBQUM7O0FBRXhCLFdBQVUsQ0FBQyxlQUFlLENBQUMsWUFBTTtBQUNoQyxlQUFhLEdBQUcsSUFBSSxDQUFDO0FBQ3JCLE1BQUksWUFBWSxFQUFFO0FBQ2pCLGVBQVksQ0FBQyxXQUFXLEdBQUcsb0JBQW9CLENBQUM7QUFDaEQsT0FBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUMvQixlQUFZLEdBQUcsSUFBSSxDQUFDO0dBQ3BCO0VBQ0QsQ0FBQyxDQUFDOztBQUVILEtBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDOztBQUV6QixLQUFJLENBQUMsV0FBVyxHQUFHLFVBQUMsSUFBSSxFQUFLO0FBQzVCLE1BQUksYUFBYSxFQUFFO0FBQ2xCLE9BQUksQ0FBQyxZQUFZLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN0QyxPQUFJLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FDdEIsSUFBSSxDQUFDLFlBQU07QUFDWCxRQUFJLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDakIsQ0FBQyxTQUNJLENBQUMsWUFBTTtBQUNaLFFBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNqQixDQUFDLENBQUM7R0FDSixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUM7RUFDM0IsQ0FBQzs7QUFFRixLQUFJLENBQUMsU0FBUyxHQUFHLFVBQUMsU0FBUyxFQUFFLE1BQU0sRUFBSztBQUN2QyxNQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7QUFDdEIsT0FBSSxDQUFDLFlBQVksQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUMxQixPQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztHQUN6Qjs7QUFFRCxXQUFTLGVBQWEsU0FBUyxBQUFFLENBQUM7QUFDbEMsTUFBSSxDQUFDLE1BQU0sRUFDVixNQUFNLEdBQUcsRUFBRSxDQUFDOztBQUViLFVBQVEsQ0FBQyxZQUFNO0FBQ2QsU0FBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7R0FDN0UsQ0FBQyxDQUFDO0VBQ0gsQ0FBQzs7QUFFRixLQUFJLENBQUMsU0FBUyxHQUFHLFlBQU07QUFDdEIsTUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFO0FBQ3RCLE9BQUksQ0FBQyxZQUFZLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDMUIsT0FBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7R0FDekI7O0FBRUQsVUFBUSxDQUFDLFlBQU07QUFDZCxTQUFNLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7R0FDekQsQ0FBQyxDQUFDO0VBQ0gsQ0FBQzs7QUFFRixLQUFJLENBQUMsWUFBWSxHQUFHLFVBQUMsSUFBSTtTQUFLLElBQUksQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO0VBQUEsQ0FBQzs7QUFFdkQsS0FBSSxDQUFDLG1CQUFtQixHQUFHLFVBQUMsSUFBSTtTQUFLLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUUsQ0FBQztFQUFBLENBQUM7Q0FDckUsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9zZXJ2aWNlcy9yb3V0ZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki9mdW5jdGlvbiAoJHJvb3RTY29wZSwgJHN0YXRlLCAkbW9kYWwsICR0aW1lb3V0KSB7XG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXG5cdGxldCBpc0luaXRpYWxpemVkID0gZmFsc2U7XG5cdGxldCBkZWxheWVkUG9wdXAgPSBudWxsO1xuXG5cdCRyb290U2NvcGUud2hlbkluaXRpYWxpemVkKCgpID0+IHtcblx0XHRpc0luaXRpYWxpemVkID0gdHJ1ZTtcblx0XHRpZiAoZGVsYXllZFBvcHVwKSB7XG5cdFx0XHRkZWxheWVkUG9wdXAud2luZG93Q2xhc3MgPSAnbm8tYW5pbWF0aW9uLW1vZGFsJztcblx0XHRcdHNlbGYuY3JlYXRlUG9wdXAoZGVsYXllZFBvcHVwKTtcblx0XHRcdGRlbGF5ZWRQb3B1cCA9IG51bGw7XG5cdFx0fVxuXHR9KTtcblxuXHR0aGlzLmN1cnJlbnRNb2RhbCA9IG51bGw7XG5cblx0dGhpcy5jcmVhdGVQb3B1cCA9IChvcHRzKSA9PiB7XG5cdFx0aWYgKGlzSW5pdGlhbGl6ZWQpIHtcblx0XHRcdHNlbGYuY3VycmVudE1vZGFsID0gJG1vZGFsLm9wZW4ob3B0cyk7XG5cdFx0XHRzZWxmLmN1cnJlbnRNb2RhbC5yZXN1bHRcblx0XHRcdFx0LnRoZW4oKCkgPT4ge1xuXHRcdFx0XHRcdHNlbGYuaGlkZVBvcHVwKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5jYXRjaCgoKSA9PiB7XG5cdFx0XHRcdFx0c2VsZi5oaWRlUG9wdXAoKTtcblx0XHRcdFx0fSk7XG5cdFx0fSBlbHNlIGRlbGF5ZWRQb3B1cCA9IG9wdHM7XG5cdH07XG5cblx0dGhpcy5zaG93UG9wdXAgPSAoc3RhdGVOYW1lLCBwYXJhbXMpID0+IHtcblx0XHRpZiAoc2VsZi5jdXJyZW50TW9kYWwpIHtcblx0XHRcdHNlbGYuY3VycmVudE1vZGFsLmNsb3NlKCk7XG5cdFx0XHRzZWxmLmN1cnJlbnRNb2RhbCA9IG51bGw7XG5cdFx0fVxuXG5cdFx0c3RhdGVOYW1lID0gYC5wb3B1cC4ke3N0YXRlTmFtZX1gO1xuXHRcdGlmICghcGFyYW1zKVxuXHRcdFx0cGFyYW1zID0ge307XG5cblx0XHQkdGltZW91dCgoKSA9PiB7XG5cdFx0XHQkc3RhdGUuZ28oc2VsZi5nZXRQcmltYXJ5U3RhdGVOYW1lKCRzdGF0ZS5jdXJyZW50Lm5hbWUpICsgc3RhdGVOYW1lLCBwYXJhbXMpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdHRoaXMuaGlkZVBvcHVwID0gKCkgPT4ge1xuXHRcdGlmIChzZWxmLmN1cnJlbnRNb2RhbCkge1xuXHRcdFx0c2VsZi5jdXJyZW50TW9kYWwuY2xvc2UoKTtcblx0XHRcdHNlbGYuY3VycmVudE1vZGFsID0gbnVsbDtcblx0XHR9XG5cblx0XHQkdGltZW91dCgoKSA9PiB7XG5cdFx0XHQkc3RhdGUuZ28oc2VsZi5nZXRQcmltYXJ5U3RhdGVOYW1lKCRzdGF0ZS5jdXJyZW50Lm5hbWUpKTtcblx0XHR9KTtcblx0fTtcblxuXHR0aGlzLmlzUG9wdXBTdGF0ZSA9IChuYW1lKSA9PiBuYW1lLmluY2x1ZGVzKCcucG9wdXAuJyk7XG5cblx0dGhpcy5nZXRQcmltYXJ5U3RhdGVOYW1lID0gKG5hbWUpID0+IG5hbWUucmVwbGFjZSgvXFwucG9wdXBcXC4uKy8sICcnKTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/textAngularHelpers.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function (utils, taSelection) {\n\tvar self = this;\n\tvar newLineRegex = /(\\r\\n|\\r|\\n)/g;\n\n\tthis.ctrlEnterCallback = null;\n\n\tfunction htmlToText(dom) {\n\t\tvar level = arguments[1] === undefined ? 0 : arguments[1];\n\n\t\tvar curText = '';\n\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = dom.childNodes[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar node = _step.value;\n\n\t\t\t\tif (node.nodeName == '#text') curText += node.data;\n\t\t\t\tif (node.nodeName == 'BR') curText += '\\n';\n\n\t\t\t\tif (node.childNodes) curText += htmlToText(node, level + 1);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t_iterator['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn curText;\n\t}\n\n\tfunction textToHtml(text) {\n\t\tvar replace = function replace(text) {\n\t\t\tvar r = text.replace(newLineRegex, '<br />');\n\n\t\t\treturn r;\n\t\t};\n\n\t\tvar i = 0;\n\t\tvar dom = utils.getDOM('<div>' + text + '</div>');\n\t\tvar parent = dom.childNodes[0];\n\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = parent.childNodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar node = _step2.value;\n\n\t\t\t\tif (node.nodeName == '#text') {\n\t\t\t\t\tvar newDom = utils.getDOM(replace(node.data));\n\t\t\t\t\tparent.insertBefore(newDom, node);\n\t\t\t\t\tparent.removeChild(node);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2['return']) {\n\t\t\t\t\t_iterator2['return']();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn dom.innerHTML;\n\t}\n\n\tthis.formatPaste = function (paste) {\n\t\tvar selection = taSelection.getSelection();\n\n\t\tvar formatted = '';\n\t\tif (selection.start.element.nodeName == 'PRE' && selection.end.element.nodeName == 'PRE') {\n\t\t\tvar dom = utils.getDOM(paste);\n\t\t\tformatted = htmlToText(dom);\n\t\t} else formatted = textToHtml(paste);\n\n\t\treturn formatted;\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL3NlcnZpY2VzL3RleHRBbmd1bGFySGVscGVycy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFVLEtBQUssRUFBRSxXQUFXLEVBQUU7QUFDM0QsS0FBTSxJQUFJLEdBQUcsSUFBSSxDQUFDO0FBQ2xCLEtBQU0sWUFBWSxHQUFHLGVBQWUsQ0FBQzs7QUFFckMsS0FBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQzs7QUFFOUIsVUFBUyxVQUFVLENBQUUsR0FBRyxFQUFhO01BQVgsS0FBSyxnQ0FBRyxDQUFDOztBQUNsQyxNQUFJLE9BQU8sR0FBRyxFQUFFLENBQUM7Ozs7Ozs7QUFFakIsd0JBQWdCLEdBQUcsQ0FBQyxVQUFVLDhIQUFFO1FBQXhCLElBQUk7O0FBQ1gsUUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLE9BQU8sRUFDM0IsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDdEIsUUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksRUFDeEIsT0FBTyxJQUFJLElBQUksQ0FBQzs7QUFFakIsUUFBSSxJQUFJLENBQUMsVUFBVSxFQUNsQixPQUFPLElBQUksVUFBVSxDQUFDLElBQUksRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDeEM7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFRCxTQUFPLE9BQU8sQ0FBQztFQUNmOztBQUVELFVBQVMsVUFBVSxDQUFFLElBQUksRUFBRTtBQUMxQixNQUFNLE9BQU8sR0FBRyxTQUFWLE9BQU8sQ0FBRyxJQUFJLEVBQUk7QUFDdkIsT0FBSSxDQUFDLEdBQUcsSUFBSSxDQUNWLE9BQU8sQ0FBQyxZQUFZLEVBQUUsUUFBUSxDQUFDLENBQUM7O0FBRWxDLFVBQU8sQ0FBQyxDQUFDO0dBQ1QsQ0FBQzs7QUFFRixNQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDVixNQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxXQUFTLElBQUksWUFBUyxDQUFDO0FBQzdDLE1BQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7Ozs7Ozs7QUFFL0IseUJBQWlCLE1BQU0sQ0FBQyxVQUFVLG1JQUFFO1FBQTNCLElBQUk7O0FBQ1osUUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLE9BQU8sRUFBRTtBQUM3QixTQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztBQUM5QyxXQUFNLENBQUMsWUFBWSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztBQUNsQyxXQUFNLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3pCO0lBQ0Q7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFRCxTQUFPLEdBQUcsQ0FBQyxTQUFTLENBQUM7RUFDckI7O0FBRUQsS0FBSSxDQUFDLFdBQVcsR0FBRyxVQUFDLEtBQUssRUFBSztBQUM3QixNQUFJLFNBQVMsR0FBRyxXQUFXLENBQUMsWUFBWSxFQUFFLENBQUM7O0FBRTNDLE1BQUksU0FBUyxHQUFHLEVBQUUsQ0FBQztBQUNuQixNQUFJLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsSUFBSSxLQUFLLElBQUksU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsUUFBUSxJQUFJLEtBQUssRUFBRTtBQUN6RixPQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQzlCLFlBQVMsR0FBRyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUM7R0FDNUIsTUFDQSxTQUFTLEdBQUcsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUUvQixTQUFPLFNBQVMsQ0FBQztFQUNqQixDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9zZXJ2aWNlcy90ZXh0QW5ndWxhckhlbHBlcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki9mdW5jdGlvbiAodXRpbHMsIHRhU2VsZWN0aW9uKSB7XG5cdGNvbnN0IHNlbGYgPSB0aGlzO1xuXHRjb25zdCBuZXdMaW5lUmVnZXggPSAvKFxcclxcbnxcXHJ8XFxuKS9nO1xuXG5cdHRoaXMuY3RybEVudGVyQ2FsbGJhY2sgPSBudWxsO1xuXG5cdGZ1bmN0aW9uIGh0bWxUb1RleHQgKGRvbSwgbGV2ZWwgPSAwKSB7XG5cdFx0bGV0IGN1clRleHQgPSAnJztcblxuXHRcdGZvcihsZXQgbm9kZSBvZiBkb20uY2hpbGROb2Rlcykge1xuXHRcdFx0aWYgKG5vZGUubm9kZU5hbWUgPT0gJyN0ZXh0Jylcblx0XHRcdFx0Y3VyVGV4dCArPSBub2RlLmRhdGE7XG5cdFx0XHRpZiAobm9kZS5ub2RlTmFtZSA9PSAnQlInKVxuXHRcdFx0XHRjdXJUZXh0ICs9ICdcXG4nO1xuXG5cdFx0XHRpZiAobm9kZS5jaGlsZE5vZGVzKVxuXHRcdFx0XHRjdXJUZXh0ICs9IGh0bWxUb1RleHQobm9kZSwgbGV2ZWwgKyAxKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gY3VyVGV4dDtcblx0fVxuXG5cdGZ1bmN0aW9uIHRleHRUb0h0bWwgKHRleHQpIHtcblx0XHRjb25zdCByZXBsYWNlID0gdGV4dCA9PiB7XG5cdFx0XHRsZXQgciA9IHRleHRcblx0XHRcdFx0LnJlcGxhY2UobmV3TGluZVJlZ2V4LCAnPGJyIC8+Jyk7XG5cblx0XHRcdHJldHVybiByO1xuXHRcdH07XG5cblx0XHRsZXQgaSA9IDA7XG5cdFx0bGV0IGRvbSA9IHV0aWxzLmdldERPTShgPGRpdj4ke3RleHR9PC9kaXY+YCk7XG5cdFx0bGV0IHBhcmVudCA9IGRvbS5jaGlsZE5vZGVzWzBdO1xuXG5cdFx0Zm9yIChsZXQgbm9kZSBvZiBwYXJlbnQuY2hpbGROb2Rlcykge1xuXHRcdFx0aWYgKG5vZGUubm9kZU5hbWUgPT0gJyN0ZXh0Jykge1xuXHRcdFx0XHRsZXQgbmV3RG9tID0gdXRpbHMuZ2V0RE9NKHJlcGxhY2Uobm9kZS5kYXRhKSk7XG5cdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUobmV3RG9tLCBub2RlKTtcblx0XHRcdFx0cGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBkb20uaW5uZXJIVE1MO1xuXHR9XG5cblx0dGhpcy5mb3JtYXRQYXN0ZSA9IChwYXN0ZSkgPT4ge1xuXHRcdGxldCBzZWxlY3Rpb24gPSB0YVNlbGVjdGlvbi5nZXRTZWxlY3Rpb24oKTtcblxuXHRcdGxldCBmb3JtYXR0ZWQgPSAnJztcblx0XHRpZiAoc2VsZWN0aW9uLnN0YXJ0LmVsZW1lbnQubm9kZU5hbWUgPT0gJ1BSRScgJiYgc2VsZWN0aW9uLmVuZC5lbGVtZW50Lm5vZGVOYW1lID09ICdQUkUnKSB7XG5cdFx0XHRsZXQgZG9tID0gdXRpbHMuZ2V0RE9NKHBhc3RlKTtcblx0XHRcdGZvcm1hdHRlZCA9IGh0bWxUb1RleHQoZG9tKTtcblx0XHR9IGVsc2Vcblx0XHRcdGZvcm1hdHRlZCA9IHRleHRUb0h0bWwocGFzdGUpO1xuXG5cdFx0cmV0dXJuIGZvcm1hdHRlZDtcblx0fTtcbn07Il19","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process/browser.js":{"source":"// shim for using process in browser\n\nvar process = module.exports = {};\nvar queue = [];\nvar draining = false;\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    draining = true;\n    var currentQueue;\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        var i = -1;\n        while (++i < len) {\n            currentQueue[i]();\n        }\n        len = queue.length;\n    }\n    draining = false;\n}\nprocess.nextTick = function (fun) {\n    queue.push(fun);\n    if (!draining) {\n        setTimeout(drainQueue, 0);\n    }\n};\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/helpers/angularApplication.js":{"source":"(function (process){\n\"use strict\";\n\nfunction AngularApplication(_ref) {\n\tvar _this = this;\n\n\tvar applicationName = _ref.applicationName;\n\tvar dependencies = _ref.dependencies;\n\tvar productionOnlyDependencies = _ref.productionOnlyDependencies;\n\n\tif (!productionOnlyDependencies) productionOnlyDependencies = [];\n\n\tvar capitalize = function capitalize(name) {\n\t\treturn name.substr(0, 1).toUpperCase() + name.substr(1);\n\t};\n\n\tvar applicationModule = angular.module(applicationName, (process.env.IS_PRODUCTION ? productionOnlyDependencies : []).concat(dependencies));\n\n\tthis.registerBulks = function (bulks) {\n\t\tif (bulks.runs) {\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = Object.keys(bulks.runs)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar runName = _step.value;\n\n\t\t\t\t\tapplicationModule.run(bulks.runs[runName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.configs) {\n\t\t\tvar _iteratorNormalCompletion2 = true;\n\t\t\tvar _didIteratorError2 = false;\n\t\t\tvar _iteratorError2 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator2 = Object.keys(bulks.configs)[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\t\tvar configName = _step2.value;\n\n\t\t\t\t\tapplicationModule.config(bulks.configs[configName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError2 = true;\n\t\t\t\t_iteratorError2 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2[\"return\"]) {\n\t\t\t\t\t\t_iterator2[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.constants) {\n\t\t\tvar _iteratorNormalCompletion3 = true;\n\t\t\tvar _didIteratorError3 = false;\n\t\t\tvar _iteratorError3 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator3 = Object.keys(bulks.constants)[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\t\tvar constsName = _step3.value;\n\n\t\t\t\t\tapplicationModule.constant(constsName, bulks.constants[constsName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError3 = true;\n\t\t\t\t_iteratorError3 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3[\"return\"]) {\n\t\t\t\t\t\t_iterator3[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.decorators) {\n\t\t\tvar _iteratorNormalCompletion4 = true;\n\t\t\tvar _didIteratorError4 = false;\n\t\t\tvar _iteratorError4 = undefined;\n\n\t\t\ttry {\n\t\t\t\tvar _loop = function () {\n\t\t\t\t\tvar decoratorName = _step4.value;\n\n\t\t\t\t\t// @ngInject\n\t\t\t\t\tvar provider = function provider($provide) {\n\t\t\t\t\t\t$provide.decorator(decoratorName, bulks.decorators[decoratorName]);\n\t\t\t\t\t};\n\t\t\t\t\tapplicationModule.config(provider);\n\t\t\t\t};\n\n\t\t\t\tfor (var _iterator4 = Object.keys(bulks.decorators)[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n\t\t\t\t\t_loop();\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError4 = true;\n\t\t\t\t_iteratorError4 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion4 && _iterator4[\"return\"]) {\n\t\t\t\t\t\t_iterator4[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError4) {\n\t\t\t\t\t\tthrow _iteratorError4;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.filters) {\n\t\t\tvar _iteratorNormalCompletion5 = true;\n\t\t\tvar _didIteratorError5 = false;\n\t\t\tvar _iteratorError5 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator5 = Object.keys(bulks.filters)[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n\t\t\t\t\tvar filterName = _step5.value;\n\n\t\t\t\t\tapplicationModule.filter(filterName, bulks.filters[filterName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError5 = true;\n\t\t\t\t_iteratorError5 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion5 && _iterator5[\"return\"]) {\n\t\t\t\t\t\t_iterator5[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError5) {\n\t\t\t\t\t\tthrow _iteratorError5;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.directives) {\n\t\t\tvar _iteratorNormalCompletion6 = true;\n\t\t\tvar _didIteratorError6 = false;\n\t\t\tvar _iteratorError6 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator6 = Object.keys(bulks.directives)[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n\t\t\t\t\tvar directiveName = _step6.value;\n\n\t\t\t\t\tapplicationModule.directive(directiveName, bulks.directives[directiveName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError6 = true;\n\t\t\t\t_iteratorError6 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion6 && _iterator6[\"return\"]) {\n\t\t\t\t\t\t_iterator6[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError6) {\n\t\t\t\t\t\tthrow _iteratorError6;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.factories) {\n\t\t\tvar _iteratorNormalCompletion7 = true;\n\t\t\tvar _didIteratorError7 = false;\n\t\t\tvar _iteratorError7 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator7 = Object.keys(bulks.factories)[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n\t\t\t\t\tvar factoryName = _step7.value;\n\n\t\t\t\t\tvar declarativeFactoryName = capitalize(factoryName);\n\t\t\t\t\tapplicationModule.factory(declarativeFactoryName, bulks.factories[factoryName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError7 = true;\n\t\t\t\t_iteratorError7 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion7 && _iterator7[\"return\"]) {\n\t\t\t\t\t\t_iterator7[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError7) {\n\t\t\t\t\t\tthrow _iteratorError7;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.services) {\n\t\t\tvar _iteratorNormalCompletion8 = true;\n\t\t\tvar _didIteratorError8 = false;\n\t\t\tvar _iteratorError8 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator8 = Object.keys(bulks.services)[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n\t\t\t\t\tvar serviceName = _step8.value;\n\n\t\t\t\t\tapplicationModule.service(serviceName, bulks.services[serviceName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError8 = true;\n\t\t\t\t_iteratorError8 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion8 && _iterator8[\"return\"]) {\n\t\t\t\t\t\t_iterator8[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError8) {\n\t\t\t\t\t\tthrow _iteratorError8;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (bulks.controllers) {\n\t\t\tvar _iteratorNormalCompletion9 = true;\n\t\t\tvar _didIteratorError9 = false;\n\t\t\tvar _iteratorError9 = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator9 = Object.keys(bulks.controllers)[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n\t\t\t\t\tvar controllerName = _step9.value;\n\n\t\t\t\t\tvar declarativeControllerName = capitalize(controllerName);\n\t\t\t\t\tapplicationModule.controller(declarativeControllerName, bulks.controllers[controllerName]);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError9 = true;\n\t\t\t\t_iteratorError9 = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion9 && _iterator9[\"return\"]) {\n\t\t\t\t\t\t_iterator9[\"return\"]();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError9) {\n\t\t\t\t\t\tthrow _iteratorError9;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn _this;\n\t};\n}\n\nmodule.exports = AngularApplication;\n\n}).call(this,require('_process'))\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9oZWxwZXJzL2FuZ3VsYXJBcHBsaWNhdGlvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSxTQUFTLGtCQUFrQixDQUFFLElBQTJELEVBQUU7OztLQUE1RCxlQUFlLEdBQWhCLElBQTJELENBQTFELGVBQWU7S0FBRSxZQUFZLEdBQTlCLElBQTJELENBQXpDLFlBQVk7S0FBRSwwQkFBMEIsR0FBMUQsSUFBMkQsQ0FBM0IsMEJBQTBCOztBQUN0RixLQUFJLENBQUMsMEJBQTBCLEVBQzlCLDBCQUEwQixHQUFHLEVBQUUsQ0FBQzs7QUFFakMsS0FBTSxVQUFVLEdBQUcsU0FBYixVQUFVLENBQUksSUFBSTtTQUFLLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0VBQUEsQ0FBQzs7QUFFOUUsS0FBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLGVBQWUsRUFBRSxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLDBCQUEwQixHQUFFLEVBQUUsQ0FBQSxDQUFFLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDOztBQUU3SSxLQUFJLENBQUMsYUFBYSxHQUFHLFVBQUMsS0FBSyxFQUFLO0FBQy9CLE1BQUksS0FBSyxDQUFDLElBQUksRUFBRTs7Ozs7O0FBQ2YseUJBQW9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyw4SEFBRTtTQUFwQyxPQUFPOztBQUNmLHNCQUFpQixDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7S0FDM0M7Ozs7Ozs7Ozs7Ozs7OztHQUNEOztBQUVELE1BQUksS0FBSyxDQUFDLE9BQU8sRUFBRTs7Ozs7O0FBQ2xCLDBCQUF1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QUMzRjs7Ozs7Ozs7Ozs7Ozs7O0dBQ0Q7O0FBRUQsZUFBWTtFQUNaLENBQUM7Q0FDRjs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGtCQUFrQixDQUFDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBBbmd1bGFyQXBwbGljYXRpb24gKHthcHBsaWNhdGlvbk5hbWUsIGRlcGVuZGVuY2llcywgcHJvZHVjdGlvbk9ubHlEZXBlbmRlbmNpZXN9KSB7XG5cdGlmICghcHJvZHVjdGlvbk9ubHlEZXBlbmRlbmNpZXMpXG5cdFx0cHJvZHVjdGlvbk9ubHlEZXBlbmRlbmNpZXMgPSBbXTtcblxuXHRjb25zdCBjYXBpdGFsaXplID0gKG5hbWUpID0+IG5hbWUuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnN1YnN0cigxKTtcblxuXHRjb25zdCBhcHBsaWNhdGlvbk1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKGFwcGxpY2F0aW9uTmFtZSwgKHByb2Nlc3MuZW52LklTX1BST0RVQ1RJT04gPyBwcm9kdWN0aW9uT25seURlcGVuZGVuY2llcyA6W10pLmNvbmNhdChkZXBlbmRlbmNpZXMpKTtcblxuXHR0aGlzLnJlZ2lzdGVyQnVsa3MgPSAoYnVsa3MpID0+IHtcblx0XHRpZiAoYnVsa3MucnVucykge1xuXHRcdFx0Zm9yIChsZXQgcnVuTmFtZSBvZiBPYmplY3Qua2V5cyhidWxrcy5ydW5zKSkge1xuXHRcdFx0XHRhcHBsaWNhdGlvbk1vZHVsZS5ydW4oYnVsa3MucnVuc1tydW5OYW1lXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGJ1bGtzLmNvbmZpZ3MpIHtcblx0XHRcdGZvciAobGV0IGNvbmZpZ05hbWUgb2YgT2JqZWN0LmtleXMoYnVsa3MuY29uZmlncykpIHtcblx0XHRcdFx0YXBwbGljYXRpb25Nb2R1bGUuY29uZmlnKGJ1bGtzLmNvbmZpZ3NbY29uZmlnTmFtZV0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChidWxrcy5jb25zdGFudHMpIHtcblx0XHRcdGZvciAobGV0IGNvbnN0c05hbWUgb2YgT2JqZWN0LmtleXMoYnVsa3MuY29uc3RhbnRzKSkge1xuXHRcdFx0XHRhcHBsaWNhdGlvbk1vZHVsZS5jb25zdGFudChjb25zdHNOYW1lLCBidWxrcy5jb25zdGFudHNbY29uc3RzTmFtZV0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChidWxrcy5kZWNvcmF0b3JzKSB7XG5cdFx0XHRmb3IgKGxldCBkZWNvcmF0b3JOYW1lIG9mIE9iamVjdC5rZXlzKGJ1bGtzLmRlY29yYXRvcnMpKSB7XG5cdFx0XHRcdC8vIEBuZ0luamVjdFxuXHRcdFx0XHRsZXQgcHJvdmlkZXIgPSAoJHByb3ZpZGUpID0+IHtcblx0XHRcdFx0XHQkcHJvdmlkZS5kZWNvcmF0b3IoZGVjb3JhdG9yTmFtZSwgYnVsa3MuZGVjb3JhdG9yc1tkZWNvcmF0b3JOYW1lXSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGFwcGxpY2F0aW9uTW9kdWxlLmNvbmZpZyhwcm92aWRlcik7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGJ1bGtzLmZpbHRlcnMpIHtcblx0XHRcdGZvciAobGV0IGZpbHRlck5hbWUgb2YgT2JqZWN0LmtleXMoYnVsa3MuZmlsdGVycykpIHtcblx0XHRcdFx0YXBwbGljYXRpb25Nb2R1bGUuZmlsdGVyKGZpbHRlck5hbWUsIGJ1bGtzLmZpbHRlcnNbZmlsdGVyTmFtZV0pO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmIChidWxrcy5kaXJlY3RpdmVzKSB7XG5cdFx0XHRmb3IgKGxldCBkaXJlY3RpdmVOYW1lIG9mIE9iamVjdC5rZXlzKGJ1bGtzLmRpcmVjdGl2ZXMpKSB7XG5cdFx0XHRcdGFwcGxpY2F0aW9uTW9kdWxlLmRpcmVjdGl2ZShkaXJlY3RpdmVOYW1lLCBidWxrcy5kaXJlY3RpdmVzW2RpcmVjdGl2ZU5hbWVdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoYnVsa3MuZmFjdG9yaWVzKSB7XG5cdFx0XHRmb3IgKGxldCBmYWN0b3J5TmFtZSBvZiBPYmplY3Qua2V5cyhidWxrcy5mYWN0b3JpZXMpKSB7XG5cdFx0XHRcdGxldCBkZWNsYXJhdGl2ZUZhY3RvcnlOYW1lID0gY2FwaXRhbGl6ZShmYWN0b3J5TmFtZSk7XG5cdFx0XHRcdGFwcGxpY2F0aW9uTW9kdWxlLmZhY3RvcnkoZGVjbGFyYXRpdmVGYWN0b3J5TmFtZSwgYnVsa3MuZmFjdG9yaWVzW2ZhY3RvcnlOYW1lXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGJ1bGtzLnNlcnZpY2VzKSB7XG5cdFx0XHRmb3IgKGxldCBzZXJ2aWNlTmFtZSBvZiBPYmplY3Qua2V5cyhidWxrcy5zZXJ2aWNlcykpIHtcblx0XHRcdFx0YXBwbGljYXRpb25Nb2R1bGUuc2VydmljZShzZXJ2aWNlTmFtZSwgYnVsa3Muc2VydmljZXNbc2VydmljZU5hbWVdKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoYnVsa3MuY29udHJvbGxlcnMpIHtcblx0XHRcdGZvciAobGV0IGNvbnRyb2xsZXJOYW1lIG9mIE9iamVjdC5rZXlzKGJ1bGtzLmNvbnRyb2xsZXJzKSkge1xuXHRcdFx0XHRsZXQgZGVjbGFyYXRpdmVDb250cm9sbGVyTmFtZSA9IGNhcGl0YWxpemUoY29udHJvbGxlck5hbWUpO1xuXHRcdFx0XHRhcHBsaWNhdGlvbk1vZHVsZS5jb250cm9sbGVyKGRlY2xhcmF0aXZlQ29udHJvbGxlck5hbWUsIGJ1bGtzLmNvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQW5ndWxhckFwcGxpY2F0aW9uOyJdfQ==","deps":{"_process":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process/browser.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/content-types.js":{"source":"'use strict';\n\n// list of mime types\nmodule.exports = {\n    'doc': 'application/msword',\n    'docx': 'application/msword',\n    'pdf': 'application/pdf',\n    'rss': 'application/rss+xml',\n    'xls': 'application/vnd.ms-excel',\n    'xlsx': 'application/vnd.ms-excel',\n    'pps': 'application/vnd.ms-powerpoint',\n    'ppt': 'application/vnd.ms-powerpoint',\n    'pptx': 'application/vnd.ms-powerpoint',\n    'odp': 'application/vnd.oasis.opendocument.presentation',\n    'ods': 'application/vnd.oasis.opendocument.spreadsheet',\n    'odt': 'application/vnd.oasis.opendocument.text',\n    'sxc': 'application/vnd.sun.xml.calc',\n    'sxw': 'application/vnd.sun.xml.writer',\n    'au': 'audio/basic',\n    'snd': 'audio/basic',\n    'flac': 'audio/flac',\n    'mid': 'audio/mid',\n    'rmi': 'audio/mid',\n    'm4a': 'audio/mp4',\n    'mp3': 'audio/mpeg',\n    'oga': 'audio/ogg',\n    'ogg': 'audio/ogg',\n    'aif': 'audio/x-aiff',\n    'aifc': 'audio/x-aiff',\n    'aiff': 'audio/x-aiff',\n    'wav': 'audio/x-wav',\n    'gif': 'image/gif',\n    'jpeg': 'image/jpeg',\n    'jpg': 'image/jpeg',\n    'jpe': 'image/jpeg',\n    'png': 'image/png',\n    'tiff': 'image/tiff',\n    'tif': 'image/tiff',\n    'wbmp': 'image/vnd.wap.wbmp',\n    'bmp': 'image/x-ms-bmp',\n    'ics': 'text/calendar',\n    'csv': 'text/comma-separated-values',\n    'css': 'text/css',\n    'htm': 'text/html',\n    'html': 'text/html',\n    'text': 'text/plain',\n    'txt': 'text/plain',\n    'asc': 'text/plain',\n    'diff': 'text/plain',\n    'pot': 'text/plain',\n    'vcf': 'text/x-vcard',\n    'mp4': 'video/mp4',\n    'mpeg': 'video/mpeg',\n    'mpg': 'video/mpeg',\n    'mpe': 'video/mpeg',\n    'ogv': 'video/ogg',\n    'qt': 'video/quicktime',\n    'mov': 'video/quicktime',\n    'avi': 'video/x-msvideo',\n    'zip': 'application/zip',\n    'rar': 'application/x-rar-compressed'\n};","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/content-types-reversed.js":{"source":"'use strict';\n\n// list of mime types\nmodule.exports = {\n    'application/msword': 'doc',\n    'application/pdf': 'pdf',\n    'application/rss+xml': 'rss',\n    'application/vnd.ms-excel': 'xls',\n    'application/vnd.ms-powerpoint': 'ppt',\n    'application/vnd.oasis.opendocument.presentation': 'odp',\n    'application/vnd.oasis.opendocument.spreadsheet': 'ods',\n    'application/vnd.oasis.opendocument.text': 'odt',\n    'application/vnd.sun.xml.calc': 'sxc',\n    'application/vnd.sun.xml.writer': 'sxw',\n    'audio/basic': 'au',\n    'audio/flac': 'flac',\n    'audio/mid': 'mid',\n    'audio/mp4': 'm4a',\n    'audio/mpeg': 'mp3',\n    'audio/ogg': 'ogg',\n    'audio/x-aiff': 'aif',\n    'audio/x-wav': 'wav',\n    'image/gif': 'gif',\n    'image/jpeg': 'jpg',\n    'image/png': 'png',\n    'image/tiff': 'tif',\n    'image/vnd.wap.wbmp': 'wbmp',\n    'image/x-ms-bmp': 'bmp',\n    'text/calendar': 'ics',\n    'text/comma-separated-values': 'csv',\n    'text/css': 'css',\n    'text/html': 'html',\n    'text/plain': 'txt',\n    'text/x-vcard': 'vcf',\n    'video/mp4': 'mp4',\n    'video/mpeg': 'mpeg',\n    'video/ogg': 'ogv',\n    'video/quicktime': 'mov',\n    'video/x-msvideo': 'avi',\n    'application/zip': 'zip',\n    'application/x-rar-compressed': 'rar'\n};","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser/src/addressparser.js":{"source":"'use strict';\n\n// expose to the world\nmodule.exports = addressparser;\n\n/**\n * Parses structured e-mail addresses from an address field\n *\n * Example:\n *\n *    'Name <address@domain>'\n *\n * will be converted to\n *\n *     [{name: 'Name', address: 'address@domain'}]\n *\n * @param {String} str Address field\n * @return {Array} An array of address objects\n */\nfunction addressparser(str) {\n    var tokenizer = new Tokenizer(str),\n        tokens = tokenizer.tokenize();\n\n    var addresses = [],\n        address = [],\n        parsedAddresses = [];\n\n    tokens.forEach(function(token) {\n        if (token.type === 'operator' && (token.value === ',' || token.value === ';')) {\n            if (address.length) {\n                addresses.push(address);\n            }\n            address = [];\n        } else {\n            address.push(token);\n        }\n    });\n\n    if (address.length) {\n        addresses.push(address);\n    }\n\n    addresses.forEach(function(address) {\n        address = _handleAddress(address);\n        if (address.length) {\n            parsedAddresses = parsedAddresses.concat(address);\n        }\n    });\n\n    return parsedAddresses;\n}\n\n/**\n * Converts tokens for a single address into an address object\n *\n * @param {Array} tokens Tokens object\n * @return {Object} Address object\n */\nfunction _handleAddress(tokens) {\n    var token,\n        isGroup = false,\n        state = 'text',\n        address,\n        addresses = [],\n        data = {\n            address: [],\n            comment: [],\n            group: [],\n            text: []\n        },\n        i, len;\n\n    // Filter out <addresses>, (comments) and regular text\n    for (i = 0, len = tokens.length; i < len; i++) {\n        token = tokens[i];\n\n        if (token.type === 'operator') {\n            switch (token.value) {\n                case '<':\n                    state = 'address';\n                    break;\n                case '(':\n                    state = 'comment';\n                    break;\n                case ':':\n                    state = 'group';\n                    isGroup = true;\n                    break;\n                default:\n                    state = 'text';\n            }\n        } else {\n            if (token.value) {\n                data[state].push(token.value);\n            }\n        }\n    }\n\n    // If there is no text but a comment, replace the two\n    if (!data.text.length && data.comment.length) {\n        data.text = data.comment;\n        data.comment = [];\n    }\n\n    if (isGroup) {\n        // http://tools.ietf.org/html/rfc2822#appendix-A.1.3\n        data.text = data.text.join(' ');\n        addresses.push({\n            name: data.text || (address && address.name),\n            group: data.group.length ? addressparser(data.group.join(',')) : []\n        });\n    } else {\n        // If no address was found, try to detect one from regular text\n        if (!data.address.length && data.text.length) {\n            for (i = data.text.length - 1; i >= 0; i--) {\n                if (data.text[i].match(/^[^@\\s]+@[^@\\s]+$/)) {\n                    data.address = data.text.splice(i, 1);\n                    break;\n                }\n            }\n\n            var _regexHandler = function(address) {\n                if (!data.address.length) {\n                    data.address = [address.trim()];\n                    return ' ';\n                } else {\n                    return address;\n                }\n            };\n\n            // still no address\n            if (!data.address.length) {\n                for (i = data.text.length - 1; i >= 0; i--) {\n                    data.text[i] = data.text[i].replace(/\\s*\\b[^@\\s]+@[^@\\s]+\\b\\s*/, _regexHandler).trim();\n                    if (data.address.length) {\n                        break;\n                    }\n                }\n            }\n        }\n\n        // If there's still is no text but a comment exixts, replace the two\n        if (!data.text.length && data.comment.length) {\n            data.text = data.comment;\n            data.comment = [];\n        }\n\n        // Keep only the first address occurence, push others to regular text\n        if (data.address.length > 1) {\n            data.text = data.text.concat(data.address.splice(1));\n        }\n\n        // Join values with spaces\n        data.text = data.text.join(' ');\n        data.address = data.address.join(' ');\n\n        if (!data.address && isGroup) {\n            return [];\n        } else {\n            address = {\n                address: data.address || data.text || '',\n                name: data.text || data.address || ''\n            };\n\n            if (address.address === address.name) {\n                if ((address.address || '').match(/@/)) {\n                    address.name = '';\n                } else {\n                    address.address = '';\n                }\n\n            }\n\n            addresses.push(address);\n        }\n    }\n\n    return addresses;\n}\n\n/**\n * Creates a Tokenizer object for tokenizing address field strings\n *\n * @constructor\n * @param {String} str Address field string\n */\nfunction Tokenizer(str) {\n    this.str = (str || '').toString();\n    this.operatorCurrent = '';\n    this.operatorExpecting = '';\n    this.node = null;\n    this.escaped = false;\n\n    this.list = [];\n}\n\n/**\n * Operator tokens and which tokens are expected to end the sequence\n */\nTokenizer.prototype.operators = {\n    '\"': '\"',\n    '(': ')',\n    '<': '>',\n    ',': '',\n    ':': ';',\n    // Semicolons are not a legal delimiter per the RFC2822 grammar other\n    // than for terminating a group, but they are also not valid for any\n    // other use in this context.  Given that some mail clients have\n    // historically allowed the semicolon as a delimiter equivalent to the\n    // comma in their UI, it makes sense to treat them the same as a comma\n    // when used outside of a group.\n    ';': ''\n};\n\n/**\n * Tokenizes the original input string\n *\n * @return {Array} An array of operator|text tokens\n */\nTokenizer.prototype.tokenize = function() {\n    var chr, list = [];\n    for (var i = 0, len = this.str.length; i < len; i++) {\n        chr = this.str.charAt(i);\n        this.checkChar(chr);\n    }\n\n    this.list.forEach(function(node) {\n        node.value = (node.value || '').toString().trim();\n        if (node.value) {\n            list.push(node);\n        }\n    });\n\n    return list;\n};\n\n/**\n * Checks if a character is an operator or text and acts accordingly\n *\n * @param {String} chr Character from the address field\n */\nTokenizer.prototype.checkChar = function(chr) {\n    if ((chr in this.operators || chr === '\\\\') && this.escaped) {\n        this.escaped = false;\n    } else if (this.operatorExpecting && chr === this.operatorExpecting) {\n        this.node = {\n            type: 'operator',\n            value: chr\n        };\n        this.list.push(this.node);\n        this.node = null;\n        this.operatorExpecting = '';\n        this.escaped = false;\n        return;\n    } else if (!this.operatorExpecting && chr in this.operators) {\n        this.node = {\n            type: 'operator',\n            value: chr\n        };\n        this.list.push(this.node);\n        this.node = null;\n        this.operatorExpecting = this.operators[chr];\n        this.escaped = false;\n        return;\n    }\n\n    if (!this.escaped && chr === '\\\\') {\n        this.escaped = true;\n        return;\n    }\n\n    if (!this.node) {\n        this.node = {\n            type: 'text',\n            value: ''\n        };\n        this.list.push(this.node);\n    }\n\n    if (this.escaped && chr !== '\\\\') {\n        this.node.value += '\\\\';\n    }\n\n    this.node.value += chr;\n    this.escaped = false;\n};","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js":{"source":"exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      nBits = -7,\n      i = isLE ? (nBytes - 1) : 0,\n      d = isLE ? -1 : 1,\n      s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c,\n      eLen = nBytes * 8 - mLen - 1,\n      eMax = (1 << eLen) - 1,\n      eBias = eMax >> 1,\n      rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0),\n      i = isLE ? 0 : (nBytes - 1),\n      d = isLE ? 1 : -1,\n      s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js":{"source":"var lookup = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n;(function (exports) {\n\t'use strict';\n\n  var Arr = (typeof Uint8Array !== 'undefined')\n    ? Uint8Array\n    : Array\n\n\tvar PLUS   = '+'.charCodeAt(0)\n\tvar SLASH  = '/'.charCodeAt(0)\n\tvar NUMBER = '0'.charCodeAt(0)\n\tvar LOWER  = 'a'.charCodeAt(0)\n\tvar UPPER  = 'A'.charCodeAt(0)\n\tvar PLUS_URL_SAFE = '-'.charCodeAt(0)\n\tvar SLASH_URL_SAFE = '_'.charCodeAt(0)\n\n\tfunction decode (elt) {\n\t\tvar code = elt.charCodeAt(0)\n\t\tif (code === PLUS ||\n\t\t    code === PLUS_URL_SAFE)\n\t\t\treturn 62 // '+'\n\t\tif (code === SLASH ||\n\t\t    code === SLASH_URL_SAFE)\n\t\t\treturn 63 // '/'\n\t\tif (code < NUMBER)\n\t\t\treturn -1 //no match\n\t\tif (code < NUMBER + 10)\n\t\t\treturn code - NUMBER + 26 + 26\n\t\tif (code < UPPER + 26)\n\t\t\treturn code - UPPER\n\t\tif (code < LOWER + 26)\n\t\t\treturn code - LOWER + 26\n\t}\n\n\tfunction b64ToByteArray (b64) {\n\t\tvar i, j, l, tmp, placeHolders, arr\n\n\t\tif (b64.length % 4 > 0) {\n\t\t\tthrow new Error('Invalid string. Length must be a multiple of 4')\n\t\t}\n\n\t\t// the number of equal signs (place holders)\n\t\t// if there are two placeholders, than the two characters before it\n\t\t// represent one byte\n\t\t// if there is only one, then the three characters before it represent 2 bytes\n\t\t// this is just a cheap hack to not do indexOf twice\n\t\tvar len = b64.length\n\t\tplaceHolders = '=' === b64.charAt(len - 2) ? 2 : '=' === b64.charAt(len - 1) ? 1 : 0\n\n\t\t// base64 is 4/3 + up to two characters of the original data\n\t\tarr = new Arr(b64.length * 3 / 4 - placeHolders)\n\n\t\t// if there are placeholders, only get up to the last complete 4 chars\n\t\tl = placeHolders > 0 ? b64.length - 4 : b64.length\n\n\t\tvar L = 0\n\n\t\tfunction push (v) {\n\t\t\tarr[L++] = v\n\t\t}\n\n\t\tfor (i = 0, j = 0; i < l; i += 4, j += 3) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3))\n\t\t\tpush((tmp & 0xFF0000) >> 16)\n\t\t\tpush((tmp & 0xFF00) >> 8)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\tif (placeHolders === 2) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4)\n\t\t\tpush(tmp & 0xFF)\n\t\t} else if (placeHolders === 1) {\n\t\t\ttmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2)\n\t\t\tpush((tmp >> 8) & 0xFF)\n\t\t\tpush(tmp & 0xFF)\n\t\t}\n\n\t\treturn arr\n\t}\n\n\tfunction uint8ToBase64 (uint8) {\n\t\tvar i,\n\t\t\textraBytes = uint8.length % 3, // if we have 1 byte left, pad 2 bytes\n\t\t\toutput = \"\",\n\t\t\ttemp, length\n\n\t\tfunction encode (num) {\n\t\t\treturn lookup.charAt(num)\n\t\t}\n\n\t\tfunction tripletToBase64 (num) {\n\t\t\treturn encode(num >> 18 & 0x3F) + encode(num >> 12 & 0x3F) + encode(num >> 6 & 0x3F) + encode(num & 0x3F)\n\t\t}\n\n\t\t// go through the array every three bytes, we'll deal with trailing stuff later\n\t\tfor (i = 0, length = uint8.length - extraBytes; i < length; i += 3) {\n\t\t\ttemp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n\t\t\toutput += tripletToBase64(temp)\n\t\t}\n\n\t\t// pad the end with zeros, but make sure to not forget the extra bytes\n\t\tswitch (extraBytes) {\n\t\t\tcase 1:\n\t\t\t\ttemp = uint8[uint8.length - 1]\n\t\t\t\toutput += encode(temp >> 2)\n\t\t\t\toutput += encode((temp << 4) & 0x3F)\n\t\t\t\toutput += '=='\n\t\t\t\tbreak\n\t\t\tcase 2:\n\t\t\t\ttemp = (uint8[uint8.length - 2] << 8) + (uint8[uint8.length - 1])\n\t\t\t\toutput += encode(temp >> 10)\n\t\t\t\toutput += encode((temp >> 4) & 0x3F)\n\t\t\t\toutput += encode((temp << 2) & 0x3F)\n\t\t\t\toutput += '='\n\t\t\t\tbreak\n\t\t}\n\n\t\treturn output\n\t}\n\n\texports.toByteArray = b64ToByteArray\n\texports.fromByteArray = uint8ToBase64\n}(typeof exports === 'undefined' ? (this.base64js = {}) : exports))\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js":{"source":"\n/**\n * isArray\n */\n\nvar isArray = Array.isArray;\n\n/**\n * toString\n */\n\nvar str = Object.prototype.toString;\n\n/**\n * Whether or not the given `val`\n * is an array.\n *\n * example:\n *\n *        isArray([]);\n *        // > true\n *        isArray(arguments);\n *        // > false\n *        isArray('');\n *        // > false\n *\n * @param {mixed} val\n * @return {bool}\n */\n\nmodule.exports = isArray || function (val) {\n  return !! val && '[object Array]' == str.call(val);\n};\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js":{"source":"/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('is-array')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\nBuffer.poolSize = 8192 // not used by this implementation\n\nvar kMaxLength = 0x3fffffff\nvar rootParent = {}\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Note:\n *\n * - Implementation must support adding new properties to `Uint8Array` instances.\n *   Firefox 4-29 lacked support, fixed in Firefox 30+.\n *   See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *  - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *  - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *    incorrect length in some situations.\n *\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they will\n * get the Object implementation, which is slower but will work correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = (function () {\n  try {\n    var buf = new ArrayBuffer(0)\n    var arr = new Uint8Array(buf)\n    arr.foo = function () { return 42 }\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        new Uint8Array(1).subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n})()\n\n/**\n * Class: Buffer\n * =============\n *\n * The Buffer constructor returns instances of `Uint8Array` that are augmented\n * with function properties for all the node `Buffer` API functions. We use\n * `Uint8Array` so that square bracket notation works as expected -- it returns\n * a single octet.\n *\n * By augmenting the instances, we can avoid modifying the `Uint8Array`\n * prototype.\n */\nfunction Buffer (arg) {\n  if (!(this instanceof Buffer)) {\n    // Avoid going through an ArgumentsAdaptorTrampoline in the common case.\n    if (arguments.length > 1) return new Buffer(arg, arguments[1])\n    return new Buffer(arg)\n  }\n\n  this.length = 0\n  this.parent = undefined\n\n  // Common case.\n  if (typeof arg === 'number') {\n    return fromNumber(this, arg)\n  }\n\n  // Slightly less common case.\n  if (typeof arg === 'string') {\n    return fromString(this, arg, arguments.length > 1 ? arguments[1] : 'utf8')\n  }\n\n  // Unusual.\n  return fromObject(this, arg)\n}\n\nfunction fromNumber (that, length) {\n  that = allocate(that, length < 0 ? 0 : checked(length) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < length; i++) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') encoding = 'utf8'\n\n  // Assumption: byteLength() return value is always < kMaxLength.\n  var length = byteLength(string, encoding) | 0\n  that = allocate(that, length)\n\n  that.write(string, encoding)\n  return that\n}\n\nfunction fromObject (that, object) {\n  if (Buffer.isBuffer(object)) return fromBuffer(that, object)\n\n  if (isArray(object)) return fromArray(that, object)\n\n  if (object == null) {\n    throw new TypeError('must start with number, buffer, array or string')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && object.buffer instanceof ArrayBuffer) {\n    return fromTypedArray(that, object)\n  }\n\n  if (object.length) return fromArrayLike(that, object)\n\n  return fromJsonObject(that, object)\n}\n\nfunction fromBuffer (that, buffer) {\n  var length = checked(buffer.length) | 0\n  that = allocate(that, length)\n  buffer.copy(that, 0, 0, length)\n  return that\n}\n\nfunction fromArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Duplicate of fromArray() to keep fromArray() monomorphic.\nfunction fromTypedArray (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  // Truncating the elements is probably not what people expect from typed\n  // arrays with BYTES_PER_ELEMENT > 1 but it's compatible with the behavior\n  // of the old Buffer constructor.\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = checked(array.length) | 0\n  that = allocate(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\n// Deserialize { type: 'Buffer', data: [1,2,3,...] } into a Buffer object.\n// Returns a zero-length buffer for inputs that don't conform to the spec.\nfunction fromJsonObject (that, object) {\n  var array\n  var length = 0\n\n  if (object.type === 'Buffer' && isArray(object.data)) {\n    array = object.data\n    length = checked(array.length) | 0\n  }\n  that = allocate(that, length)\n\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction allocate (that, length) {\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = Buffer._augment(new Uint8Array(length))\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that.length = length\n    that._isBuffer = true\n  }\n\n  var fromPool = length !== 0 && length <= Buffer.poolSize >>> 1\n  if (fromPool) that.parent = rootParent\n\n  return that\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (subject, encoding) {\n  if (!(this instanceof SlowBuffer)) return new SlowBuffer(subject, encoding)\n\n  var buf = new Buffer(subject, encoding)\n  delete buf.parent\n  return buf\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  var i = 0\n  var len = Math.min(x, y)\n  while (i < len) {\n    if (a[i] !== b[i]) break\n\n    ++i\n  }\n\n  if (i !== len) {\n    x = a[i]\n    y = b[i]\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'binary':\n    case 'base64':\n    case 'raw':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) throw new TypeError('list argument must be an Array of Buffers.')\n\n  if (list.length === 0) {\n    return new Buffer(0)\n  } else if (list.length === 1) {\n    return list[0]\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; i++) {\n      length += list[i].length\n    }\n  }\n\n  var buf = new Buffer(length)\n  var pos = 0\n  for (i = 0; i < list.length; i++) {\n    var item = list[i]\n    item.copy(buf, pos)\n    pos += item.length\n  }\n  return buf\n}\n\nfunction byteLength (string, encoding) {\n  if (typeof string !== 'string') string = String(string)\n\n  if (string.length === 0) return 0\n\n  switch (encoding || 'utf8') {\n    case 'ascii':\n    case 'binary':\n    case 'raw':\n      return string.length\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return string.length * 2\n    case 'hex':\n      return string.length >>> 1\n    case 'utf8':\n    case 'utf-8':\n      return utf8ToBytes(string).length\n    case 'base64':\n      return base64ToBytes(string).length\n    default:\n      return string.length\n  }\n}\nBuffer.byteLength = byteLength\n\n// pre-set for values that may exist in the future\nBuffer.prototype.length = undefined\nBuffer.prototype.parent = undefined\n\n// toString(encoding, start=0, end=buffer.length)\nBuffer.prototype.toString = function toString (encoding, start, end) {\n  var loweredCase = false\n\n  start = start | 0\n  end = end === undefined || end === Infinity ? this.length : end | 0\n\n  if (!encoding) encoding = 'utf8'\n  if (start < 0) start = 0\n  if (end > this.length) end = this.length\n  if (end <= start) return ''\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'binary':\n        return binarySlice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return 0\n  return Buffer.compare(this, b)\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset) {\n  if (byteOffset > 0x7fffffff) byteOffset = 0x7fffffff\n  else if (byteOffset < -0x80000000) byteOffset = -0x80000000\n  byteOffset >>= 0\n\n  if (this.length === 0) return -1\n  if (byteOffset >= this.length) return -1\n\n  // Negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = Math.max(this.length + byteOffset, 0)\n\n  if (typeof val === 'string') {\n    if (val.length === 0) return -1 // special case: looking for empty string always fails\n    return String.prototype.indexOf.call(this, val, byteOffset)\n  }\n  if (Buffer.isBuffer(val)) {\n    return arrayIndexOf(this, val, byteOffset)\n  }\n  if (typeof val === 'number') {\n    if (Buffer.TYPED_ARRAY_SUPPORT && Uint8Array.prototype.indexOf === 'function') {\n      return Uint8Array.prototype.indexOf.call(this, val, byteOffset)\n    }\n    return arrayIndexOf(this, [ val ], byteOffset)\n  }\n\n  function arrayIndexOf (arr, val, byteOffset) {\n    var foundIndex = -1\n    for (var i = 0; byteOffset + i < arr.length; i++) {\n      if (arr[byteOffset + i] === val[foundIndex === -1 ? 0 : i - foundIndex]) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === val.length) return byteOffset + foundIndex\n      } else {\n        foundIndex = -1\n      }\n    }\n    return -1\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\n// `get` will be removed in Node 0.13+\nBuffer.prototype.get = function get (offset) {\n  console.log('.get() is deprecated. Access using array indexes instead.')\n  return this.readUInt8(offset)\n}\n\n// `set` will be removed in Node 0.13+\nBuffer.prototype.set = function set (v, offset) {\n  console.log('.set() is deprecated. Access using array indexes instead.')\n  return this.writeUInt8(v, offset)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new Error('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; i++) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) throw new Error('Invalid hex string')\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction binaryWrite (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    var swap = encoding\n    encoding = offset\n    offset = length | 0\n    length = swap\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'binary':\n        return binaryWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  var res = ''\n  var tmp = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    if (buf[i] <= 0x7F) {\n      res += decodeUtf8Char(tmp) + String.fromCharCode(buf[i])\n      tmp = ''\n    } else {\n      tmp += '%' + buf[i].toString(16)\n    }\n  }\n\n  return res + decodeUtf8Char(tmp)\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction binarySlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; i++) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; i++) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = Buffer._augment(this.subarray(start, end))\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; i++) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  if (newBuf.length) newBuf.parent = this.parent || this\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('buffer must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkInt(this, value, offset, byteLength, Math.pow(2, 8 * byteLength), 0)\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = value\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; i++) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = value\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; i++) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = value\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = value\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = value < 0 ? 1 : 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = value\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = value\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = value\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = value\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (value > max || value < min) throw new RangeError('value is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('index out of range')\n  if (offset < 0) throw new RangeError('index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < len; i++) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    target._set(this.subarray(start, start + len), targetStart)\n  }\n\n  return len\n}\n\n// fill(value, start=0, end=buffer.length)\nBuffer.prototype.fill = function fill (value, start, end) {\n  if (!value) value = 0\n  if (!start) start = 0\n  if (!end) end = this.length\n\n  if (end < start) throw new RangeError('end < start')\n\n  // Fill 0 bytes; we're done\n  if (end === start) return\n  if (this.length === 0) return\n\n  if (start < 0 || start >= this.length) throw new RangeError('start out of bounds')\n  if (end < 0 || end > this.length) throw new RangeError('end out of bounds')\n\n  var i\n  if (typeof value === 'number') {\n    for (i = start; i < end; i++) {\n      this[i] = value\n    }\n  } else {\n    var bytes = utf8ToBytes(value.toString())\n    var len = bytes.length\n    for (i = start; i < end; i++) {\n      this[i] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n/**\n * Creates a new `ArrayBuffer` with the *copied* memory of the buffer instance.\n * Added in Node 0.12. Only available in browsers that support ArrayBuffer.\n */\nBuffer.prototype.toArrayBuffer = function toArrayBuffer () {\n  if (typeof Uint8Array !== 'undefined') {\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n      return (new Buffer(this)).buffer\n    } else {\n      var buf = new Uint8Array(this.length)\n      for (var i = 0, len = buf.length; i < len; i += 1) {\n        buf[i] = this[i]\n      }\n      return buf.buffer\n    }\n  } else {\n    throw new TypeError('Buffer.toArrayBuffer not supported in this browser')\n  }\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar BP = Buffer.prototype\n\n/**\n * Augment a Uint8Array *instance* (not the Uint8Array class!) with Buffer methods\n */\nBuffer._augment = function _augment (arr) {\n  arr.constructor = Buffer\n  arr._isBuffer = true\n\n  // save reference to original Uint8Array set method before overwriting\n  arr._set = arr.set\n\n  // deprecated, will be removed in node 0.13+\n  arr.get = BP.get\n  arr.set = BP.set\n\n  arr.write = BP.write\n  arr.toString = BP.toString\n  arr.toLocaleString = BP.toString\n  arr.toJSON = BP.toJSON\n  arr.equals = BP.equals\n  arr.compare = BP.compare\n  arr.indexOf = BP.indexOf\n  arr.copy = BP.copy\n  arr.slice = BP.slice\n  arr.readUIntLE = BP.readUIntLE\n  arr.readUIntBE = BP.readUIntBE\n  arr.readUInt8 = BP.readUInt8\n  arr.readUInt16LE = BP.readUInt16LE\n  arr.readUInt16BE = BP.readUInt16BE\n  arr.readUInt32LE = BP.readUInt32LE\n  arr.readUInt32BE = BP.readUInt32BE\n  arr.readIntLE = BP.readIntLE\n  arr.readIntBE = BP.readIntBE\n  arr.readInt8 = BP.readInt8\n  arr.readInt16LE = BP.readInt16LE\n  arr.readInt16BE = BP.readInt16BE\n  arr.readInt32LE = BP.readInt32LE\n  arr.readInt32BE = BP.readInt32BE\n  arr.readFloatLE = BP.readFloatLE\n  arr.readFloatBE = BP.readFloatBE\n  arr.readDoubleLE = BP.readDoubleLE\n  arr.readDoubleBE = BP.readDoubleBE\n  arr.writeUInt8 = BP.writeUInt8\n  arr.writeUIntLE = BP.writeUIntLE\n  arr.writeUIntBE = BP.writeUIntBE\n  arr.writeUInt16LE = BP.writeUInt16LE\n  arr.writeUInt16BE = BP.writeUInt16BE\n  arr.writeUInt32LE = BP.writeUInt32LE\n  arr.writeUInt32BE = BP.writeUInt32BE\n  arr.writeIntLE = BP.writeIntLE\n  arr.writeIntBE = BP.writeIntBE\n  arr.writeInt8 = BP.writeInt8\n  arr.writeInt16LE = BP.writeInt16LE\n  arr.writeInt16BE = BP.writeInt16BE\n  arr.writeInt32LE = BP.writeInt32LE\n  arr.writeInt32BE = BP.writeInt32BE\n  arr.writeFloatLE = BP.writeFloatLE\n  arr.writeFloatBE = BP.writeFloatBE\n  arr.writeDoubleLE = BP.writeDoubleLE\n  arr.writeDoubleBE = BP.writeDoubleBE\n  arr.fill = BP.fill\n  arr.inspect = BP.inspect\n  arr.toArrayBuffer = BP.toArrayBuffer\n\n  return arr\n}\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-z\\-]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n  var i = 0\n\n  for (; i < length; i++) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (leadSurrogate) {\n        // 2 leads in a row\n        if (codePoint < 0xDC00) {\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          leadSurrogate = codePoint\n          continue\n        } else {\n          // valid surrogate pair\n          codePoint = leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00 | 0x10000\n          leadSurrogate = null\n        }\n      } else {\n        // no lead yet\n\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else {\n          // valid lead\n          leadSurrogate = codePoint\n          continue\n        }\n      }\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n      leadSurrogate = null\n    }\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x200000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; i++) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; i++) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction decodeUtf8Char (str) {\n  try {\n    return decodeURIComponent(str)\n  } catch (err) {\n    return String.fromCharCode(0xFFFD) // UTF 8 invalid char\n  }\n}\n","deps":{"ieee754":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js","is-array":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js","base64-js":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve/empty.js":{"source":"","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/sbcs-data.js":{"source":"\n// Manually added data to be used by sbcs codec in addition to generated one.\n\nmodule.exports = {\n    // Not supported by iconv, not sure why.\n    \"10029\": \"maccenteuro\",\n    \"maccenteuro\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"808\": \"cp808\",\n    \"ibm808\": \"cp808\",\n    \"cp808\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    // Aliases of generated encodings.\n    \"ascii8bit\": \"ascii\",\n    \"usascii\": \"ascii\",\n    \"ansix34\": \"ascii\",\n    \"ansix341968\": \"ascii\",\n    \"ansix341986\": \"ascii\",\n    \"csascii\": \"ascii\",\n    \"cp367\": \"ascii\",\n    \"ibm367\": \"ascii\",\n    \"isoir6\": \"ascii\",\n    \"iso646us\": \"ascii\",\n    \"iso646irv\": \"ascii\",\n    \"us\": \"ascii\",\n\n    \"latin1\": \"iso88591\",\n    \"latin2\": \"iso88592\",\n    \"latin3\": \"iso88593\",\n    \"latin4\": \"iso88594\",\n    \"latin5\": \"iso88599\",\n    \"latin6\": \"iso885910\",\n    \"latin7\": \"iso885913\",\n    \"latin8\": \"iso885914\",\n    \"latin9\": \"iso885915\",\n    \"latin10\": \"iso885916\",\n\n    \"csisolatin1\": \"iso88591\",\n    \"csisolatin2\": \"iso88592\",\n    \"csisolatin3\": \"iso88593\",\n    \"csisolatin4\": \"iso88594\",\n    \"csisolatincyrillic\": \"iso88595\",\n    \"csisolatinarabic\": \"iso88596\",\n    \"csisolatingreek\" : \"iso88597\",\n    \"csisolatinhebrew\": \"iso88598\",\n    \"csisolatin5\": \"iso88599\",\n    \"csisolatin6\": \"iso885910\",\n\n    \"l1\": \"iso88591\",\n    \"l2\": \"iso88592\",\n    \"l3\": \"iso88593\",\n    \"l4\": \"iso88594\",\n    \"l5\": \"iso88599\",\n    \"l6\": \"iso885910\",\n    \"l7\": \"iso885913\",\n    \"l8\": \"iso885914\",\n    \"l9\": \"iso885915\",\n    \"l10\": \"iso885916\",\n\n    \"isoir14\": \"iso646jp\",\n    \"isoir57\": \"iso646cn\",\n    \"isoir100\": \"iso88591\",\n    \"isoir101\": \"iso88592\",\n    \"isoir109\": \"iso88593\",\n    \"isoir110\": \"iso88594\",\n    \"isoir144\": \"iso88595\",\n    \"isoir127\": \"iso88596\",\n    \"isoir126\": \"iso88597\",\n    \"isoir138\": \"iso88598\",\n    \"isoir148\": \"iso88599\",\n    \"isoir157\": \"iso885910\",\n    \"isoir166\": \"tis620\",\n    \"isoir179\": \"iso885913\",\n    \"isoir199\": \"iso885914\",\n    \"isoir203\": \"iso885915\",\n    \"isoir226\": \"iso885916\",\n\n    \"cp819\": \"iso88591\",\n    \"ibm819\": \"iso88591\",\n\n    \"cyrillic\": \"iso88595\",\n\n    \"arabic\": \"iso88596\",\n    \"arabic8\": \"iso88596\",\n    \"ecma114\": \"iso88596\",\n    \"asmo708\": \"iso88596\",\n\n    \"greek\" : \"iso88597\",\n    \"greek8\" : \"iso88597\",\n    \"ecma118\" : \"iso88597\",\n    \"elot928\" : \"iso88597\",\n\n    \"hebrew\": \"iso88598\",\n    \"hebrew8\": \"iso88598\",\n\n    \"turkish\": \"iso88599\",\n    \"turkish8\": \"iso88599\",\n\n    \"thai\": \"iso885911\",\n    \"thai8\": \"iso885911\",\n\n    \"celtic\": \"iso885914\",\n    \"celtic8\": \"iso885914\",\n    \"isoceltic\": \"iso885914\",\n\n    \"tis6200\": \"tis620\",\n    \"tis62025291\": \"tis620\",\n    \"tis62025330\": \"tis620\",\n\n    \"10000\": \"macroman\",\n    \"10006\": \"macgreek\",\n    \"10007\": \"maccyrillic\",\n    \"10079\": \"maciceland\",\n    \"10081\": \"macturkish\",\n\n    \"cspc8codepage437\": \"cp437\",\n    \"cspc775baltic\": \"cp775\",\n    \"cspc850multilingual\": \"cp850\",\n    \"cspcp852\": \"cp852\",\n    \"cspc862latinhebrew\": \"cp862\",\n    \"cpgr\": \"cp869\",\n\n    \"msee\": \"cp1250\",\n    \"mscyrl\": \"cp1251\",\n    \"msansi\": \"cp1252\",\n    \"msgreek\": \"cp1253\",\n    \"msturk\": \"cp1254\",\n    \"mshebr\": \"cp1255\",\n    \"msarab\": \"cp1256\",\n    \"winbaltrim\": \"cp1257\",\n\n    \"cp20866\": \"koi8r\",\n    \"20866\": \"koi8r\",\n    \"ibm878\": \"koi8r\",\n    \"cskoi8r\": \"koi8r\",\n\n    \"cp21866\": \"koi8u\",\n    \"21866\": \"koi8u\",\n    \"ibm1168\": \"koi8u\",\n\n    \"strk10482002\": \"rk1048\",\n\n    \"tcvn5712\": \"tcvn\",\n    \"tcvn57121\": \"tcvn\",\n\n    \"gb198880\": \"iso646cn\",\n    \"cn\": \"iso646cn\",\n\n    \"csiso14jisc6220ro\": \"iso646jp\",\n    \"jisc62201969ro\": \"iso646jp\",\n    \"jp\": \"iso646jp\",\n\n    \"cshproman8\": \"hproman8\",\n    \"r8\": \"hproman8\",\n    \"roman8\": \"hproman8\",\n    \"xroman8\": \"hproman8\",\n    \"ibm1051\": \"hproman8\",\n\n    \"mac\": \"macintosh\",\n    \"csmacintosh\": \"macintosh\",\n};\n\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/sbcs-data-generated.js":{"source":"\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\nmodule.exports = {\n  \"437\": \"cp437\",\n  \"737\": \"cp737\",\n  \"775\": \"cp775\",\n  \"850\": \"cp850\",\n  \"852\": \"cp852\",\n  \"855\": \"cp855\",\n  \"856\": \"cp856\",\n  \"857\": \"cp857\",\n  \"858\": \"cp858\",\n  \"860\": \"cp860\",\n  \"861\": \"cp861\",\n  \"862\": \"cp862\",\n  \"863\": \"cp863\",\n  \"864\": \"cp864\",\n  \"865\": \"cp865\",\n  \"866\": \"cp866\",\n  \"869\": \"cp869\",\n  \"874\": \"windows874\",\n  \"922\": \"cp922\",\n  \"1046\": \"cp1046\",\n  \"1124\": \"cp1124\",\n  \"1125\": \"cp1125\",\n  \"1129\": \"cp1129\",\n  \"1133\": \"cp1133\",\n  \"1161\": \"cp1161\",\n  \"1162\": \"cp1162\",\n  \"1163\": \"cp1163\",\n  \"1250\": \"windows1250\",\n  \"1251\": \"windows1251\",\n  \"1252\": \"windows1252\",\n  \"1253\": \"windows1253\",\n  \"1254\": \"windows1254\",\n  \"1255\": \"windows1255\",\n  \"1256\": \"windows1256\",\n  \"1257\": \"windows1257\",\n  \"1258\": \"windows1258\",\n  \"28591\": \"iso88591\",\n  \"28592\": \"iso88592\",\n  \"28593\": \"iso88593\",\n  \"28594\": \"iso88594\",\n  \"28595\": \"iso88595\",\n  \"28596\": \"iso88596\",\n  \"28597\": \"iso88597\",\n  \"28598\": \"iso88598\",\n  \"28599\": \"iso88599\",\n  \"28600\": \"iso885910\",\n  \"28601\": \"iso885911\",\n  \"28603\": \"iso885913\",\n  \"28604\": \"iso885914\",\n  \"28605\": \"iso885915\",\n  \"28606\": \"iso885916\",\n  \"windows874\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win874\": \"windows874\",\n  \"cp874\": \"windows874\",\n  \"windows1250\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1250\": \"windows1250\",\n  \"cp1250\": \"windows1250\",\n  \"windows1251\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1251\": \"windows1251\",\n  \"cp1251\": \"windows1251\",\n  \"windows1252\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1252\": \"windows1252\",\n  \"cp1252\": \"windows1252\",\n  \"windows1253\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1253\": \"windows1253\",\n  \"cp1253\": \"windows1253\",\n  \"windows1254\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1254\": \"windows1254\",\n  \"cp1254\": \"windows1254\",\n  \"windows1255\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1255\": \"windows1255\",\n  \"cp1255\": \"windows1255\",\n  \"windows1256\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1256\": \"windows1256\",\n  \"cp1256\": \"windows1256\",\n  \"windows1257\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1257\": \"windows1257\",\n  \"cp1257\": \"windows1257\",\n  \"windows1258\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1258\": \"windows1258\",\n  \"cp1258\": \"windows1258\",\n  \"iso88591\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28591\": \"iso88591\",\n  \"iso88592\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28592\": \"iso88592\",\n  \"iso88593\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28593\": \"iso88593\",\n  \"iso88594\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28594\": \"iso88594\",\n  \"iso88595\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28595\": \"iso88595\",\n  \"iso88596\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28596\": \"iso88596\",\n  \"iso88597\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28597\": \"iso88597\",\n  \"iso88598\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28598\": \"iso88598\",\n  \"iso88599\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28599\": \"iso88599\",\n  \"iso885910\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28600\": \"iso885910\",\n  \"iso885911\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28601\": \"iso885911\",\n  \"iso885913\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28603\": \"iso885913\",\n  \"iso885914\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28604\": \"iso885914\",\n  \"iso885915\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28605\": \"iso885915\",\n  \"iso885916\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28606\": \"iso885916\",\n  \"cp437\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm437\": \"cp437\",\n  \"csibm437\": \"cp437\",\n  \"cp737\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm737\": \"cp737\",\n  \"csibm737\": \"cp737\",\n  \"cp775\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm775\": \"cp775\",\n  \"csibm775\": \"cp775\",\n  \"cp850\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm850\": \"cp850\",\n  \"csibm850\": \"cp850\",\n  \"cp852\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm852\": \"cp852\",\n  \"csibm852\": \"cp852\",\n  \"cp855\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm855\": \"cp855\",\n  \"csibm855\": \"cp855\",\n  \"cp856\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm856\": \"cp856\",\n  \"csibm856\": \"cp856\",\n  \"cp857\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm857\": \"cp857\",\n  \"csibm857\": \"cp857\",\n  \"cp858\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm858\": \"cp858\",\n  \"csibm858\": \"cp858\",\n  \"cp860\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm860\": \"cp860\",\n  \"csibm860\": \"cp860\",\n  \"cp861\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm861\": \"cp861\",\n  \"csibm861\": \"cp861\",\n  \"cp862\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm862\": \"cp862\",\n  \"csibm862\": \"cp862\",\n  \"cp863\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm863\": \"cp863\",\n  \"csibm863\": \"cp863\",\n  \"cp864\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"ibm864\": \"cp864\",\n  \"csibm864\": \"cp864\",\n  \"cp865\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm865\": \"cp865\",\n  \"csibm865\": \"cp865\",\n  \"cp866\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm866\": \"cp866\",\n  \"csibm866\": \"cp866\",\n  \"cp869\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm869\": \"cp869\",\n  \"csibm869\": \"cp869\",\n  \"cp922\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm922\": \"cp922\",\n  \"csibm922\": \"cp922\",\n  \"cp1046\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1046\": \"cp1046\",\n  \"csibm1046\": \"cp1046\",\n  \"cp1124\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1124\": \"cp1124\",\n  \"csibm1124\": \"cp1124\",\n  \"cp1125\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1125\": \"cp1125\",\n  \"csibm1125\": \"cp1125\",\n  \"cp1129\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1129\": \"cp1129\",\n  \"csibm1129\": \"cp1129\",\n  \"cp1133\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1133\": \"cp1133\",\n  \"csibm1133\": \"cp1133\",\n  \"cp1161\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1161\": \"cp1161\",\n  \"csibm1161\": \"cp1161\",\n  \"cp1162\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1162\": \"cp1162\",\n  \"csibm1162\": \"cp1162\",\n  \"cp1163\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1163\": \"cp1163\",\n  \"csibm1163\": \"cp1163\",\n  \"maccroatian\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maccyrillic\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macgreek\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maciceland\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macroman\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macromania\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macthai\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macturkish\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macukraine\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8r\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8u\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8ru\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8t\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"armscii8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \")(.,-\"\n  },\n  \"rk1048\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tcvn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0003\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"georgianacademy\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"georgianps\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"pt154\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"viscii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0003\\u0004\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0015\\u0016\\u0017\\u0018\\u001a\\u001b\\u001c\\u001d\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"iso646cn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"iso646jp\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"hproman8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macintosh\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ascii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tis620\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  }\n}","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/utf16.js":{"source":"(function (Buffer){\n\n\n// == UTF16-BE codec. ==========================================================\n\nexports.utf16be = function(options) {\n    return {\n        encoder: utf16beEncoder,\n        decoder: utf16beDecoder,\n\n        bom: new Buffer([0xFE, 0xFF]),\n    };\n};\n\n\n// -- Encoding\n\nfunction utf16beEncoder(options) {\n    return {\n        write: utf16beEncoderWrite,\n        end: function() {},\n    }\n}\n\nfunction utf16beEncoderWrite(str) {\n    var buf = new Buffer(str, 'ucs2');\n    for (var i = 0; i < buf.length; i += 2) {\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\n    }\n    return buf;\n}\n\n\n// -- Decoding\n\nfunction utf16beDecoder(options) {\n    return {\n        write: utf16beDecoderWrite,\n        end: function() {},\n\n        overflowByte: -1,\n    };\n}\n\nfunction utf16beDecoderWrite(buf) {\n    if (buf.length == 0)\n        return '';\n\n    var buf2 = new Buffer(buf.length + 1),\n        i = 0, j = 0;\n\n    if (this.overflowByte !== -1) {\n        buf2[0] = buf[0];\n        buf2[1] = this.overflowByte;\n        i = 1; j = 2;\n    }\n\n    for (; i < buf.length-1; i += 2, j+= 2) {\n        buf2[j] = buf[i+1];\n        buf2[j+1] = buf[i];\n    }\n\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\n\n    return buf2.slice(0, j).toString('ucs2');\n}\n\n\n// == UTF-16 codec =============================================================\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\n// Defaults to UTF-16BE, according to RFC 2781, although it is against some industry practices, see\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {default: 'utf-16le'});\n\n// Encoder prepends BOM and uses UTF-16BE.\n// Endianness can also be changed: iconv.encode(str, 'utf16', {use: 'utf-16le'});\n\nexports.utf16 = function(options) {\n    return {\n        encoder: utf16Encoder,\n        decoder: utf16Decoder,\n\n        getCodec: options.iconv.getCodec,\n    };\n};\n\n// -- Encoding\n\nfunction utf16Encoder(options) {\n    options = options || {};\n    var codec = this.getCodec(options.use || 'utf-16be');\n    if (!codec.bom)\n        throw new Error(\"iconv-lite: in UTF-16 encoder, 'use' parameter should be either UTF-16BE or UTF16-LE.\");\n\n    return {\n        write: utf16EncoderWrite,\n        end: utf16EncoderEnd,\n\n        bom: codec.bom,\n        internalEncoder: codec.encoder(options),\n    };\n}\n\nfunction utf16EncoderWrite(str) {\n    var buf = this.internalEncoder.write(str);\n\n    if (this.bom) {\n        buf = Buffer.concat([this.bom, buf]);\n        this.bom = null;\n    }\n\n    return buf;\n}\n\nfunction utf16EncoderEnd() {\n    return this.internalEncoder.end();\n}\n\n\n// -- Decoding\n\nfunction utf16Decoder(options) {\n    return {\n        write: utf16DecoderWrite,\n        end: utf16DecoderEnd,\n\n        internalDecoder: null,\n        initialBytes: [],\n        initialBytesLen: 0,\n\n        options: options || {},\n        getCodec: this.getCodec,\n    };\n}\n\nfunction utf16DecoderWrite(buf) {\n    if (this.internalDecoder)\n        return this.internalDecoder.write(buf);\n\n    // Codec is not chosen yet. Accumulate initial bytes.\n    this.initialBytes.push(buf);\n    this.initialBytesLen += buf.length;\n    \n    if (this.initialBytesLen < 16) // We need > 2 bytes to use space heuristic (see below)\n        return '';\n\n    // We have enough bytes -> decide endianness.\n    return utf16DecoderDecideEndianness.call(this);\n}\n\nfunction utf16DecoderEnd() {\n    if (this.internalDecoder)\n        return this.internalDecoder.end();\n\n    var res = utf16DecoderDecideEndianness.call(this);\n    var trail;\n\n    if (this.internalDecoder)\n        trail = this.internalDecoder.end();\n\n    return (trail && trail.length > 0) ? (res + trail) : res;\n}\n\nfunction utf16DecoderDecideEndianness() {\n    var buf = Buffer.concat(this.initialBytes);\n    this.initialBytes.length = this.initialBytesLen = 0;\n\n    if (buf.length < 2)\n        return ''; // Not a valid UTF-16 sequence anyway.\n\n    // Default encoding.\n    var enc = this.options.default || 'utf-16be';\n\n    // Check BOM.\n    if (buf[0] == 0xFE && buf[1] == 0xFF) { // UTF-16BE BOM\n        enc = 'utf-16be'; buf = buf.slice(2);\n    }\n    else if (buf[0] == 0xFF && buf[1] == 0xFE) { // UTF-16LE BOM\n        enc = 'utf-16le'; buf = buf.slice(2);\n    }\n    else {\n        // No BOM found. Try to deduce encoding from initial content.\n        // Most of the time, the content has spaces (U+0020), but the opposite (U+2000) is very uncommon.\n        // So, we count spaces as if it was LE or BE, and decide from that.\n        var spaces = [0, 0], // Counts of space chars in both positions\n            _len = Math.min(buf.length - (buf.length % 2), 64); // Len is always even.\n\n        for (var i = 0; i < _len; i += 2) {\n            if (buf[i] == 0x00 && buf[i+1] == 0x20) spaces[0]++;\n            if (buf[i] == 0x20 && buf[i+1] == 0x00) spaces[1]++;\n        }\n\n        if (spaces[0] > 0 && spaces[1] == 0)  \n            enc = 'utf-16be';\n        else if (spaces[0] == 0 && spaces[1] > 0)\n            enc = 'utf-16le';\n    }\n\n    this.internalDecoder = this.getCodec(enc).decoder(this.options);\n    return this.internalDecoder.write(buf);\n}\n\n\n\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9ub2RlX21vZHVsZXMvaWNvbnYtbGl0ZS9lbmNvZGluZ3MvdXRmMTYuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlxuXG4vLyA9PSBVVEYxNi1CRSBjb2RlYy4gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnRzLnV0ZjE2YmUgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5jb2RlcjogdXRmMTZiZUVuY29kZXIsXG4gICAgICAgIGRlY29kZXI6IHV0ZjE2YmVEZWNvZGVyLFxuXG4gICAgICAgIGJvbTogbmV3IEJ1ZmZlcihbMHhGRSwgMHhGRl0pLFxuICAgIH07XG59O1xuXG5cbi8vIC0tIEVuY29kaW5nXG5cbmZ1bmN0aW9uIHV0ZjE2YmVFbmNvZGVyKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogdXRmMTZiZUVuY29kZXJXcml0ZSxcbiAgICAgICAgZW5kOiBmdW5jdGlvbigpIHt9LFxuICAgIH1cbn1cblxuZnVuY3Rpb24gdXRmMTZiZUVuY29kZXJXcml0ZShzdHIpIHtcbiAgICB2YXIgYnVmID0gbmV3IEJ1ZmZlcihzdHIsICd1Y3MyJyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgICAgdmFyIHRtcCA9IGJ1ZltpXTsgYnVmW2ldID0gYnVmW2krMV07IGJ1ZltpKzFdID0gdG1wO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xufVxuXG5cbi8vIC0tIERlY29kaW5nXG5cbmZ1bmN0aW9uIHV0ZjE2YmVEZWNvZGVyKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogdXRmMTZiZURlY29kZXJXcml0ZSxcbiAgICAgICAgZW5kOiBmdW5jdGlvbigpIHt9LFxuXG4gICAgICAgIG92ZXJmbG93Qnl0ZTogLTEsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdXRmMTZiZURlY29kZXJXcml0ZShidWYpIHtcbiAgICBpZiAoYnVmLmxlbmd0aCA9PSAwKVxuICAgICAgICByZXR1cm4gJyc7XG5cbiAgICB2YXIgYnVmMiA9IG5ldyBCdWZmZXIoYnVmLmxlbmd0aCArIDEpLFxuICAgICAgICBpID0gMCwgaiA9IDA7XG5cbiAgICBpZiAodGhpcy5vdmVyZmxvd0J5dGUgIT09IC0xKSB7XG4gICAgICAgIGJ1ZjJbMF0gPSBidWZbMF07XG4gICAgICAgIGJ1ZjJbMV0gPSB0aGlzLm92ZXJmbG93Qnl0ZTtcbiAgICAgICAgaSA9IDE7IGogPSAyO1xuICAgIH1cblxuICAgIGZvciAoOyBpIDwgYnVmLmxlbmd0aC0xOyBpICs9IDIsIGorPSAyKSB7XG4gICAgICAgIGJ1ZjJbal0gPSBidWZbaSsxXTtcbiAgICAgICAgYnVmMltqKzFdID0gYnVmW2ldO1xuICAgIH1cblxuICAgIHRoaXMub3ZlcmZsb3dCeXRlID0gKGkgPT0gYnVmLmxlbmd0aC0xKSA/IGJ1ZltidWYubGVuZ3RoLTFdIDogLTE7XG5cbiAgICByZXR1cm4gYnVmMi5zbGljZSgwLCBqKS50b1N0cmluZygndWNzMicpO1xufVxuXG5cbi8vID09IFVURi0xNiBjb2RlYyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBEZWNvZGVyIGNob29zZXMgYXV0b21hdGljYWxseSBmcm9tIFVURi0xNkxFIGFuZCBVVEYtMTZCRSB1c2luZyBCT00gYW5kIHNwYWNlLWJhc2VkIGhldXJpc3RpYy5cbi8vIERlZmF1bHRzIHRvIFVURi0xNkJFLCBhY2NvcmRpbmcgdG8gUkZDIDI3ODEsIGFsdGhvdWdoIGl0IGlzIGFnYWluc3Qgc29tZSBpbmR1c3RyeSBwcmFjdGljZXMsIHNlZVxuLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9VVEYtMTYgYW5kIGh0dHA6Ly9lbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcvI3V0Zi0xNmxlXG4vLyBEZWNvZGVyIGRlZmF1bHQgY2FuIGJlIGNoYW5nZWQ6IGljb252LmRlY29kZShidWYsICd1dGYxNicsIHtkZWZhdWx0OiAndXRmLTE2bGUnfSk7XG5cbi8vIEVuY29kZXIgcHJlcGVuZHMgQk9NIGFuZCB1c2VzIFVURi0xNkJFLlxuLy8gRW5kaWFubmVzcyBjYW4gYWxzbyBiZSBjaGFuZ2VkOiBpY29udi5lbmNvZGUoc3RyLCAndXRmMTYnLCB7dXNlOiAndXRmLTE2bGUnfSk7XG5cbmV4cG9ydHMudXRmMTYgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5jb2RlcjogdXRmMTZFbmNvZGVyLFxuICAgICAgICBkZWNvZGVyOiB1dGYxNkRlY29kZXIsXG5cbiAgICAgICAgZ2V0Q29kZWM6IG9wdGlvbnMuaWNvbnYuZ2V0Q29kZWMsXG4gICAgfTtcbn07XG5cbi8vIC0tIEVuY29kaW5nXG5cbmZ1bmN0aW9uIHV0ZjE2RW5jb2RlcihvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgdmFyIGNvZGVjID0gdGhpcy5nZXRDb2RlYyhvcHRpb25zLnVzZSB8fCAndXRmLTE2YmUnKTtcbiAgICBpZiAoIWNvZGVjLmJvbSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWNvbnYtbGl0ZTogaW4gVVRGLTE2IGVuY29kZXIsICd1c2UnIHBhcmFtZXRlciBzaG91bGQgYmUgZWl0aGVyIFVURi0xNkJFIG9yIFVURjE2LUxFLlwiKTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiB1dGYxNkVuY29kZXJXcml0ZSxcbiAgICAgICAgZW5kOiB1dGYxNkVuY29kZXJFbmQsXG5cbiAgICAgICAgYm9tOiBjb2RlYy5ib20sXG4gICAgICAgIGludGVybmFsRW5jb2RlcjogY29kZWMuZW5jb2RlcihvcHRpb25zKSxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB1dGYxNkVuY29kZXJXcml0ZShzdHIpIHtcbiAgICB2YXIgYnVmID0gdGhpcy5pbnRlcm5hbEVuY29kZXIud3JpdGUoc3RyKTtcblxuICAgIGlmICh0aGlzLmJvbSkge1xuICAgICAgICBidWYgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmJvbSwgYnVmXSk7XG4gICAgICAgIHRoaXMuYm9tID0gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYnVmO1xufVxuXG5mdW5jdGlvbiB1dGYxNkVuY29kZXJFbmQoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxFbmNvZGVyLmVuZCgpO1xufVxuXG5cbi8vIC0tIERlY29kaW5nXG5cbmZ1bmN0aW9uIHV0ZjE2RGVjb2RlcihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IHV0ZjE2RGVjb2RlcldyaXRlLFxuICAgICAgICBlbmQ6IHV0ZjE2RGVjb2RlckVuZCxcblxuICAgICAgICBpbnRlcm5hbERlY29kZXI6IG51bGwsXG4gICAgICAgIGluaXRpYWxCeXRlczogW10sXG4gICAgICAgIGluaXRpYWxCeXRlc0xlbjogMCxcblxuICAgICAgICBvcHRpb25zOiBvcHRpb25zIHx8IHt9LFxuICAgICAgICBnZXRDb2RlYzogdGhpcy5nZXRDb2RlYyxcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB1dGYxNkRlY29kZXJXcml0ZShidWYpIHtcbiAgICBpZiAodGhpcy5pbnRlcm5hbERlY29kZXIpXG4gICAgICAgIHJldHVybiB0aGlzLmludGVybmFsRGVjb2Rlci53cml0ZShidWYpO1xuXG4gICAgLy8gQ29kZWMgaXMgbm90IGNob3NlbiB5ZXQuIEFjY3VtdWxhdGUgaW5pdGlhbCBieXRlcy5cbiAgICB0aGlzLmluaXRpYWxCeXRlcy5wdXNoKGJ1Zik7XG4gICAgdGhpcy5pbml0aWFsQnl0ZXNMZW4gKz0gYnVmLmxlbmd0aDtcbiAgICBcbiAgICBpZiAodGhpcy5pbml0aWFsQnl0ZXNMZW4gPCAxNikgLy8gV2UgbmVlZCA+IDIgYnl0ZXMgdG8gdXNlIHNwYWNlIGhldXJpc3RpYyAoc2VlIGJlbG93KVxuICAgICAgICByZXR1cm4gJyc7XG5cbiAgICAvLyBXZSBoYXZlIGVub3VnaCBieXRlcyAtPiBkZWNpZGUgZW5kaWFubmVzcy5cbiAgICByZXR1cm4gdXRmMTZEZWNvZGVyRGVjaWRlRW5kaWFubmVzcy5jYWxsKHRoaXMpO1xufVxuXG5mdW5jdGlvbiB1dGYxNkRlY29kZXJFbmQoKSB7XG4gICAgaWYgKHRoaXMuaW50ZXJuYWxEZWNvZGVyKVxuICAgICAgICByZXR1cm4gdGhpcy5pbnRlcm5hbERlY29kZXIuZW5kKCk7XG5cbiAgICB2YXIgcmVzID0gdXRmMTZEZWNvZGVyRGVjaWRlRW5kaWFubmVzcy5jYWxsKHRoaXMpO1xuICAgIHZhciB0cmFpbDtcblxuICAgIGlmICh0aGlzLmludGVybmFsRGVjb2RlcilcbiAgICAgICAgdHJhaWwgPSB0aGlzLmludGVybmFsRGVjb2Rlci5lbmQoKTtcblxuICAgIHJldHVybiAodHJhaWwgJiYgdHJhaWwubGVuZ3RoID4gMCkgPyAocmVzICsgdHJhaWwpIDogcmVzO1xufVxuXG5mdW5jdGlvbiB1dGYxNkRlY29kZXJEZWNpZGVFbmRpYW5uZXNzKCkge1xuICAgIHZhciBidWYgPSBCdWZmZXIuY29uY2F0KHRoaXMuaW5pdGlhbEJ5dGVzKTtcbiAgICB0aGlzLmluaXRpYWxCeXRlcy5sZW5ndGggPSB0aGlzLmluaXRpYWxCeXRlc0xlbiA9IDA7XG5cbiAgICBpZiAoYnVmLmxlbmd0aCA8IDIpXG4gICAgICAgIHJldHVybiAnJzsgLy8gTm90IGEgdmFsaWQgVVRGLTE2IHNlcXVlbmNlIGFueXdheS5cblxuICAgIC8vIERlZmF1bHQgZW5jb2RpbmcuXG4gICAgdmFyIGVuYyA9IHRoaXMub3B0aW9ucy5kZWZhdWx0IHx8ICd1dGYtMTZiZSc7XG5cbiAgICAvLyBDaGVjayBCT00uXG4gICAgaWYgKGJ1ZlswXSA9PSAweEZFICYmIGJ1ZlsxXSA9PSAweEZGKSB7IC8vIFVURi0xNkJFIEJPTVxuICAgICAgICBlbmMgPSAndXRmLTE2YmUnOyBidWYgPSBidWYuc2xpY2UoMik7XG4gICAgfVxuICAgIGVsc2UgaWYgKGJ1ZlswXSA9PSAweEZGICYmIGJ1ZlsxXSA9PSAweEZFKSB7IC8vIFVURi0xNkxFIEJPTVxuICAgICAgICBlbmMgPSAndXRmLTE2bGUnOyBidWYgPSBidWYuc2xpY2UoMik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICAvLyBObyBCT00gZm91bmQuIFRyeSB0byBkZWR1Y2UgZW5jb2RpbmcgZnJvbSBpbml0aWFsIGNvbnRlbnQuXG4gICAgICAgIC8vIE1vc3Qgb2YgdGhlIHRpbWUsIHRoZSBjb250ZW50IGhhcyBzcGFjZXMgKFUrMDAyMCksIGJ1dCB0aGUgb3Bwb3NpdGUgKFUrMjAwMCkgaXMgdmVyeSB1bmNvbW1vbi5cbiAgICAgICAgLy8gU28sIHdlIGNvdW50IHNwYWNlcyBhcyBpZiBpdCB3YXMgTEUgb3IgQkUsIGFuZCBkZWNpZGUgZnJvbSB0aGF0LlxuICAgICAgICB2YXIgc3BhY2VzID0gWzAsIDBdLCAvLyBDb3VudHMgb2Ygc3BhY2UgY2hhcnMgaW4gYm90aCBwb3NpdGlvbnNcbiAgICAgICAgICAgIF9sZW4gPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gKGJ1Zi5sZW5ndGggJSAyKSwgNjQpOyAvLyBMZW4gaXMgYWx3YXlzIGV2ZW4uXG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfbGVuOyBpICs9IDIpIHtcbiAgICAgICAgICAgIGlmIChidWZbaV0gPT0gMHgwMCAmJiBidWZbaSsxXSA9PSAweDIwKSBzcGFjZXNbMF0rKztcbiAgICAgICAgICAgIGlmIChidWZbaV0gPT0gMHgyMCAmJiBidWZbaSsxXSA9PSAweDAwKSBzcGFjZXNbMV0rKztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzcGFjZXNbMF0gPiAwICYmIHNwYWNlc1sxXSA9PSAwKSAgXG4gICAgICAgICAgICBlbmMgPSAndXRmLTE2YmUnO1xuICAgICAgICBlbHNlIGlmIChzcGFjZXNbMF0gPT0gMCAmJiBzcGFjZXNbMV0gPiAwKVxuICAgICAgICAgICAgZW5jID0gJ3V0Zi0xNmxlJztcbiAgICB9XG5cbiAgICB0aGlzLmludGVybmFsRGVjb2RlciA9IHRoaXMuZ2V0Q29kZWMoZW5jKS5kZWNvZGVyKHRoaXMub3B0aW9ucyk7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJuYWxEZWNvZGVyLndyaXRlKGJ1Zik7XG59XG5cblxuIl19","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/utf7.js":{"source":"(function (Buffer){\n\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\n// Below is UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\n\nexports.utf7 = function(options) {\n    return {\n        encoder: function utf7Encoder() {\n            return {\n                write: utf7EncoderWrite,\n                end: function() {},\n\n                iconv: options.iconv,\n            };\n        },\n        decoder: function utf7Decoder() {\n            return {\n                write: utf7DecoderWrite,\n                end: utf7DecoderEnd,\n\n                iconv: options.iconv,\n                inBase64: false,\n                base64Accum: '',\n            };\n        },\n    };\n};\n\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\n\n\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\n\nfunction utf7EncoderWrite(str) {\n    // Naive implementation.\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\n    return new Buffer(str.replace(nonDirectChars, function(chunk) {\n        return \"+\" + (chunk === '+' ? '' : \n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \n            + \"-\";\n    }.bind(this)));\n}\n\n\nvar base64Regex = /[A-Za-z0-9\\/+]/;\nvar base64Chars = [];\nfor (var i = 0; i < 256; i++)\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\n\nvar plusChar = '+'.charCodeAt(0), \n    minusChar = '-'.charCodeAt(0),\n    andChar = '&'.charCodeAt(0);\n\nfunction utf7DecoderWrite(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '+'\n            if (buf[i] == plusChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64Chars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\n                    res += \"+\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString();\n                    res += this.iconv.decode(new Buffer(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString();\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(new Buffer(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nfunction utf7DecoderEnd() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(new Buffer(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n// UTF-7-IMAP codec.\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\n// Differences:\n//  * Base64 part is started by \"&\" instead of \"+\"\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\n//  * In Base64, \",\" is used instead of \"/\"\n//  * Base64 must not be used to represent direct characters.\n//  * No implicit shift back from Base64 (should always end with '-')\n//  * String must end in non-shifted position.\n//  * \"-&\" while in base64 is not allowed.\n\n\nexports.utf7imap = function(options) {\n    return {\n        encoder: function utf7ImapEncoder() {\n            return {\n                write: utf7ImapEncoderWrite,\n                end: utf7ImapEncoderEnd,\n\n                iconv: options.iconv,\n                inBase64: false,\n                base64Accum: new Buffer(6),\n                base64AccumIdx: 0,\n            };\n        },\n        decoder: function utf7ImapDecoder() {\n            return {\n                write: utf7ImapDecoderWrite,\n                end: utf7ImapDecoderEnd,\n\n                iconv: options.iconv,\n                inBase64: false,\n                base64Accum: '',\n            };\n        },\n    };\n};\n\n\nfunction utf7ImapEncoderWrite(str) {\n    var inBase64 = this.inBase64,\n        base64Accum = this.base64Accum,\n        base64AccumIdx = this.base64AccumIdx,\n        buf = new Buffer(str.length*5 + 10), bufIdx = 0;\n\n    for (var i = 0; i < str.length; i++) {\n        var uChar = str.charCodeAt(i);\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\n            if (inBase64) {\n                if (base64AccumIdx > 0) {\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n                    base64AccumIdx = 0;\n                }\n\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n                inBase64 = false;\n            }\n\n            if (!inBase64) {\n                buf[bufIdx++] = uChar; // Write direct character\n\n                if (uChar === andChar)  // Ampersand -> '&-'\n                    buf[bufIdx++] = minusChar;\n            }\n\n        } else { // Non-direct character\n            if (!inBase64) {\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\n                inBase64 = true;\n            }\n            if (inBase64) {\n                base64Accum[base64AccumIdx++] = uChar >> 8;\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\n\n                if (base64AccumIdx == base64Accum.length) {\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\n                    base64AccumIdx = 0;\n                }\n            }\n        }\n    }\n\n    this.inBase64 = inBase64;\n    this.base64AccumIdx = base64AccumIdx;\n\n    return buf.slice(0, bufIdx);\n}\n\nfunction utf7ImapEncoderEnd() {\n    var buf = new Buffer(10), bufIdx = 0;\n    if (this.inBase64) {\n        if (this.base64AccumIdx > 0) {\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n            this.base64AccumIdx = 0;\n        }\n\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n        this.inBase64 = false;\n    }\n\n    return buf.slice(0, bufIdx);\n}\n\n\nvar base64IMAPChars = base64Chars.slice();\nbase64IMAPChars[','.charCodeAt(0)] = true;\n\nfunction utf7ImapDecoderWrite(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '&'\n            if (buf[i] == andChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\n                    res += \"&\";\n                } else {\n                    var b64str = base64Accum + buf.slice(lastI, i).toString().replace(/,/g, '/');\n                    res += this.iconv.decode(new Buffer(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + buf.slice(lastI).toString().replace(/,/g, '/');\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(new Buffer(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nfunction utf7ImapDecoderEnd() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(new Buffer(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9ub2RlX21vZHVsZXMvaWNvbnYtbGl0ZS9lbmNvZGluZ3MvdXRmNy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyBVVEYtNyBjb2RlYywgYWNjb3JkaW5nIHRvIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMyMTUyXG4vLyBCZWxvdyBpcyBVVEYtNy1JTUFQIGNvZGVjLCBhY2NvcmRpbmcgdG8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzUwMSNzZWN0aW9uLTUuMS4zXG5cbmV4cG9ydHMudXRmNyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlbmNvZGVyOiBmdW5jdGlvbiB1dGY3RW5jb2RlcigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd3JpdGU6IHV0ZjdFbmNvZGVyV3JpdGUsXG4gICAgICAgICAgICAgICAgZW5kOiBmdW5jdGlvbigpIHt9LFxuXG4gICAgICAgICAgICAgICAgaWNvbnY6IG9wdGlvbnMuaWNvbnYsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBkZWNvZGVyOiBmdW5jdGlvbiB1dGY3RGVjb2RlcigpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd3JpdGU6IHV0ZjdEZWNvZGVyV3JpdGUsXG4gICAgICAgICAgICAgICAgZW5kOiB1dGY3RGVjb2RlckVuZCxcblxuICAgICAgICAgICAgICAgIGljb252OiBvcHRpb25zLmljb252LFxuICAgICAgICAgICAgICAgIGluQmFzZTY0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBiYXNlNjRBY2N1bTogJycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59O1xuXG5leHBvcnRzLnVuaWNvZGUxMXV0ZjcgPSAndXRmNyc7IC8vIEFsaWFzIFVOSUNPREUtMS0xLVVURi03XG5cblxudmFyIG5vbkRpcmVjdENoYXJzID0gL1teQS1aYS16MC05J1xcKFxcKSwtXFwuXFwvOlxcPyBcXG5cXHJcXHRdKy9nO1xuXG5mdW5jdGlvbiB1dGY3RW5jb2RlcldyaXRlKHN0cikge1xuICAgIC8vIE5haXZlIGltcGxlbWVudGF0aW9uLlxuICAgIC8vIE5vbi1kaXJlY3QgY2hhcnMgYXJlIGVuY29kZWQgYXMgXCIrPGJhc2U2ND4tXCI7IHNpbmdsZSBcIitcIiBjaGFyIGlzIGVuY29kZWQgYXMgXCIrLVwiLlxuICAgIHJldHVybiBuZXcgQnVmZmVyKHN0ci5yZXBsYWNlKG5vbkRpcmVjdENoYXJzLCBmdW5jdGlvbihjaHVuaykge1xuICAgICAgICByZXR1cm4gXCIrXCIgKyAoY2h1bmsgPT09ICcrJyA/ICcnIDogXG4gICAgICAgICAgICB0aGlzLmljb252LmVuY29kZShjaHVuaywgJ3V0ZjE2LWJlJykudG9TdHJpbmcoJ2Jhc2U2NCcpLnJlcGxhY2UoLz0rJC8sICcnKSkgXG4gICAgICAgICAgICArIFwiLVwiO1xuICAgIH0uYmluZCh0aGlzKSkpO1xufVxuXG5cbnZhciBiYXNlNjRSZWdleCA9IC9bQS1aYS16MC05XFwvK10vO1xudmFyIGJhc2U2NENoYXJzID0gW107XG5mb3IgKHZhciBpID0gMDsgaSA8IDI1NjsgaSsrKVxuICAgIGJhc2U2NENoYXJzW2ldID0gYmFzZTY0UmVnZXgudGVzdChTdHJpbmcuZnJvbUNoYXJDb2RlKGkpKTtcblxudmFyIHBsdXNDaGFyID0gJysnLmNoYXJDb2RlQXQoMCksIFxuICAgIG1pbnVzQ2hhciA9ICctJy5jaGFyQ29kZUF0KDApLFxuICAgIGFuZENoYXIgPSAnJicuY2hhckNvZGVBdCgwKTtcblxuZnVuY3Rpb24gdXRmN0RlY29kZXJXcml0ZShidWYpIHtcbiAgICB2YXIgcmVzID0gXCJcIiwgbGFzdEkgPSAwLFxuICAgICAgICBpbkJhc2U2NCA9IHRoaXMuaW5CYXNlNjQsXG4gICAgICAgIGJhc2U2NEFjY3VtID0gdGhpcy5iYXNlNjRBY2N1bTtcblxuICAgIC8vIFRoZSBkZWNvZGVyIGlzIG1vcmUgaW52b2x2ZWQgYXMgd2UgbXVzdCBoYW5kbGUgY2h1bmtzIGluIHN0cmVhbS5cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghaW5CYXNlNjQpIHsgLy8gV2UncmUgaW4gZGlyZWN0IG1vZGUuXG4gICAgICAgICAgICAvLyBXcml0ZSBkaXJlY3QgY2hhcnMgdW50aWwgJysnXG4gICAgICAgICAgICBpZiAoYnVmW2ldID09IHBsdXNDaGFyKSB7XG4gICAgICAgICAgICAgICAgcmVzICs9IHRoaXMuaWNvbnYuZGVjb2RlKGJ1Zi5zbGljZShsYXN0SSwgaSksIFwiYXNjaWlcIik7IC8vIFdyaXRlIGRpcmVjdCBjaGFycy5cbiAgICAgICAgICAgICAgICBsYXN0SSA9IGkrMTtcbiAgICAgICAgICAgICAgICBpbkJhc2U2NCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8vIFdlIGRlY29kZSBiYXNlNjQuXG4gICAgICAgICAgICBpZiAoIWJhc2U2NENoYXJzW2J1ZltpXV0pIHsgLy8gQmFzZTY0IGVuZGVkLlxuICAgICAgICAgICAgICAgIGlmIChpID09IGxhc3RJICYmIGJ1ZltpXSA9PSBtaW51c0NoYXIpIHsvLyBcIistXCIgLT4gXCIrXCJcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IFwiK1wiO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiNjRzdHIgPSBiYXNlNjRBY2N1bSArIGJ1Zi5zbGljZShsYXN0SSwgaSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgcmVzICs9IHRoaXMuaWNvbnYuZGVjb2RlKG5ldyBCdWZmZXIoYjY0c3RyLCAnYmFzZTY0JyksIFwidXRmMTYtYmVcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGJ1ZltpXSAhPSBtaW51c0NoYXIpIC8vIE1pbnVzIGlzIGFic29yYmVkIGFmdGVyIGJhc2U2NC5cbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuXG4gICAgICAgICAgICAgICAgbGFzdEkgPSBpKzE7XG4gICAgICAgICAgICAgICAgaW5CYXNlNjQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBiYXNlNjRBY2N1bSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpbkJhc2U2NCkge1xuICAgICAgICByZXMgKz0gdGhpcy5pY29udi5kZWNvZGUoYnVmLnNsaWNlKGxhc3RJKSwgXCJhc2NpaVwiKTsgLy8gV3JpdGUgZGlyZWN0IGNoYXJzLlxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBiNjRzdHIgPSBiYXNlNjRBY2N1bSArIGJ1Zi5zbGljZShsYXN0SSkudG9TdHJpbmcoKTtcblxuICAgICAgICB2YXIgY2FuQmVEZWNvZGVkID0gYjY0c3RyLmxlbmd0aCAtIChiNjRzdHIubGVuZ3RoICUgOCk7IC8vIE1pbmltYWwgY2h1bms6IDIgcXVhZHMgLT4gMngzIGJ5dGVzIC0+IDMgY2hhcnMuXG4gICAgICAgIGJhc2U2NEFjY3VtID0gYjY0c3RyLnNsaWNlKGNhbkJlRGVjb2RlZCk7IC8vIFRoZSByZXN0IHdpbGwgYmUgZGVjb2RlZCBpbiBmdXR1cmUuXG4gICAgICAgIGI2NHN0ciA9IGI2NHN0ci5zbGljZSgwLCBjYW5CZURlY29kZWQpO1xuXG4gICAgICAgIHJlcyArPSB0aGlzLmljb252LmRlY29kZShuZXcgQnVmZmVyKGI2NHN0ciwgJ2Jhc2U2NCcpLCBcInV0ZjE2LWJlXCIpO1xuICAgIH1cblxuICAgIHRoaXMuaW5CYXNlNjQgPSBpbkJhc2U2NDtcbiAgICB0aGlzLmJhc2U2NEFjY3VtID0gYmFzZTY0QWNjdW07XG5cbiAgICByZXR1cm4gcmVzO1xufVxuXG5mdW5jdGlvbiB1dGY3RGVjb2RlckVuZCgpIHtcbiAgICB2YXIgcmVzID0gXCJcIjtcbiAgICBpZiAodGhpcy5pbkJhc2U2NCAmJiB0aGlzLmJhc2U2NEFjY3VtLmxlbmd0aCA+IDApXG4gICAgICAgIHJlcyA9IHRoaXMuaWNvbnYuZGVjb2RlKG5ldyBCdWZmZXIodGhpcy5iYXNlNjRBY2N1bSwgJ2Jhc2U2NCcpLCBcInV0ZjE2LWJlXCIpO1xuXG4gICAgdGhpcy5pbkJhc2U2NCA9IGZhbHNlO1xuICAgIHRoaXMuYmFzZTY0QWNjdW0gPSAnJztcbiAgICByZXR1cm4gcmVzO1xufVxuXG5cbi8vIFVURi03LUlNQVAgY29kZWMuXG4vLyBSRkMzNTAxIFNlYy4gNS4xLjMgTW9kaWZpZWQgVVRGLTcgKGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM1MDEjc2VjdGlvbi01LjEuMylcbi8vIERpZmZlcmVuY2VzOlxuLy8gICogQmFzZTY0IHBhcnQgaXMgc3RhcnRlZCBieSBcIiZcIiBpbnN0ZWFkIG9mIFwiK1wiXG4vLyAgKiBEaXJlY3QgY2hhcmFjdGVycyBhcmUgMHgyMC0weDdFLCBleGNlcHQgXCImXCIgKDB4MjYpXG4vLyAgKiBJbiBCYXNlNjQsIFwiLFwiIGlzIHVzZWQgaW5zdGVhZCBvZiBcIi9cIlxuLy8gICogQmFzZTY0IG11c3Qgbm90IGJlIHVzZWQgdG8gcmVwcmVzZW50IGRpcmVjdCBjaGFyYWN0ZXJzLlxuLy8gICogTm8gaW1wbGljaXQgc2hpZnQgYmFjayBmcm9tIEJhc2U2NCAoc2hvdWxkIGFsd2F5cyBlbmQgd2l0aCAnLScpXG4vLyAgKiBTdHJpbmcgbXVzdCBlbmQgaW4gbm9uLXNoaWZ0ZWQgcG9zaXRpb24uXG4vLyAgKiBcIi0mXCIgd2hpbGUgaW4gYmFzZTY0IGlzIG5vdCBhbGxvd2VkLlxuXG5cbmV4cG9ydHMudXRmN2ltYXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5jb2RlcjogZnVuY3Rpb24gdXRmN0ltYXBFbmNvZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3cml0ZTogdXRmN0ltYXBFbmNvZGVyV3JpdGUsXG4gICAgICAgICAgICAgICAgZW5kOiB1dGY3SW1hcEVuY29kZXJFbmQsXG5cbiAgICAgICAgICAgICAgICBpY29udjogb3B0aW9ucy5pY29udixcbiAgICAgICAgICAgICAgICBpbkJhc2U2NDogZmFsc2UsXG4gICAgICAgICAgICAgICAgYmFzZTY0QWNjdW06IG5ldyBCdWZmZXIoNiksXG4gICAgICAgICAgICAgICAgYmFzZTY0QWNjdW1JZHg6IDAsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBkZWNvZGVyOiBmdW5jdGlvbiB1dGY3SW1hcERlY29kZXIoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdyaXRlOiB1dGY3SW1hcERlY29kZXJXcml0ZSxcbiAgICAgICAgICAgICAgICBlbmQ6IHV0ZjdJbWFwRGVjb2RlckVuZCxcblxuICAgICAgICAgICAgICAgIGljb252OiBvcHRpb25zLmljb252LFxuICAgICAgICAgICAgICAgIGluQmFzZTY0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBiYXNlNjRBY2N1bTogJycsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgIH07XG59O1xuXG5cbmZ1bmN0aW9uIHV0ZjdJbWFwRW5jb2RlcldyaXRlKHN0cikge1xuICAgIHZhciBpbkJhc2U2NCA9IHRoaXMuaW5CYXNlNjQsXG4gICAgICAgIGJhc2U2NEFjY3VtID0gdGhpcy5iYXNlNjRBY2N1bSxcbiAgICAgICAgYmFzZTY0QWNjdW1JZHggPSB0aGlzLmJhc2U2NEFjY3VtSWR4LFxuICAgICAgICBidWYgPSBuZXcgQnVmZmVyKHN0ci5sZW5ndGgqNSArIDEwKSwgYnVmSWR4ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB1Q2hhciA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICBpZiAoMHgyMCA8PSB1Q2hhciAmJiB1Q2hhciA8PSAweDdFKSB7IC8vIERpcmVjdCBjaGFyYWN0ZXIgb3IgJyYnLlxuICAgICAgICAgICAgaWYgKGluQmFzZTY0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGJhc2U2NEFjY3VtSWR4ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidWZJZHggKz0gYnVmLndyaXRlKGJhc2U2NEFjY3VtLnNsaWNlKDAsIGJhc2U2NEFjY3VtSWR4KS50b1N0cmluZygnYmFzZTY0JykucmVwbGFjZSgvXFwvL2csICcsJykucmVwbGFjZSgvPSskLywgJycpLCBidWZJZHgpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlNjRBY2N1bUlkeCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnVmW2J1ZklkeCsrXSA9IG1pbnVzQ2hhcjsgLy8gV3JpdGUgJy0nLCB0aGVuIGdvIHRvIGRpcmVjdCBtb2RlLlxuICAgICAgICAgICAgICAgIGluQmFzZTY0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghaW5CYXNlNjQpIHtcbiAgICAgICAgICAgICAgICBidWZbYnVmSWR4KytdID0gdUNoYXI7IC8vIFdyaXRlIGRpcmVjdCBjaGFyYWN0ZXJcblxuICAgICAgICAgICAgICAgIGlmICh1Q2hhciA9PT0gYW5kQ2hhcikgIC8vIEFtcGVyc2FuZCAtPiAnJi0nXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltidWZJZHgrK10gPSBtaW51c0NoYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHsgLy8gTm9uLWRpcmVjdCBjaGFyYWN0ZXJcbiAgICAgICAgICAgIGlmICghaW5CYXNlNjQpIHtcbiAgICAgICAgICAgICAgICBidWZbYnVmSWR4KytdID0gYW5kQ2hhcjsgLy8gV3JpdGUgJyYnLCB0aGVuIGdvIHRvIGJhc2U2NCBtb2RlLlxuICAgICAgICAgICAgICAgIGluQmFzZTY0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpbkJhc2U2NCkge1xuICAgICAgICAgICAgICAgIGJhc2U2NEFjY3VtW2Jhc2U2NEFjY3VtSWR4KytdID0gdUNoYXIgPj4gODtcbiAgICAgICAgICAgICAgICBiYXNlNjRBY2N1bVtiYXNlNjRBY2N1bUlkeCsrXSA9IHVDaGFyICYgMHhGRjtcblxuICAgICAgICAgICAgICAgIGlmIChiYXNlNjRBY2N1bUlkeCA9PSBiYXNlNjRBY2N1bS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmSWR4ICs9IGJ1Zi53cml0ZShiYXNlNjRBY2N1bS50b1N0cmluZygnYmFzZTY0JykucmVwbGFjZSgvXFwvL2csICcsJyksIGJ1ZklkeCk7XG4gICAgICAgICAgICAgICAgICAgIGJhc2U2NEFjY3VtSWR4ID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmluQmFzZTY0ID0gaW5CYXNlNjQ7XG4gICAgdGhpcy5iYXNlNjRBY2N1bUlkeCA9IGJhc2U2NEFjY3VtSWR4O1xuXG4gICAgcmV0dXJuIGJ1Zi5zbGljZSgwLCBidWZJZHgpO1xufVxuXG5mdW5jdGlvbiB1dGY3SW1hcEVuY29kZXJFbmQoKSB7XG4gICAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIoMTApLCBidWZJZHggPSAwO1xuICAgIGlmICh0aGlzLmluQmFzZTY0KSB7XG4gICAgICAgIGlmICh0aGlzLmJhc2U2NEFjY3VtSWR4ID4gMCkge1xuICAgICAgICAgICAgYnVmSWR4ICs9IGJ1Zi53cml0ZSh0aGlzLmJhc2U2NEFjY3VtLnNsaWNlKDAsIHRoaXMuYmFzZTY0QWNjdW1JZHgpLnRvU3RyaW5nKCdiYXNlNjQnKS5yZXBsYWNlKC9cXC8vZywgJywnKS5yZXBsYWNlKC89KyQvLCAnJyksIGJ1ZklkeCk7XG4gICAgICAgICAgICB0aGlzLmJhc2U2NEFjY3VtSWR4ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1ZltidWZJZHgrK10gPSBtaW51c0NoYXI7IC8vIFdyaXRlICctJywgdGhlbiBnbyB0byBkaXJlY3QgbW9kZS5cbiAgICAgICAgdGhpcy5pbkJhc2U2NCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBidWYuc2xpY2UoMCwgYnVmSWR4KTtcbn1cblxuXG52YXIgYmFzZTY0SU1BUENoYXJzID0gYmFzZTY0Q2hhcnMuc2xpY2UoKTtcbmJhc2U2NElNQVBDaGFyc1snLCcuY2hhckNvZGVBdCgwKV0gPSB0cnVlO1xuXG5mdW5jdGlvbiB1dGY3SW1hcERlY29kZXJXcml0ZShidWYpIHtcbiAgICB2YXIgcmVzID0gXCJcIiwgbGFzdEkgPSAwLFxuICAgICAgICBpbkJhc2U2NCA9IHRoaXMuaW5CYXNlNjQsXG4gICAgICAgIGJhc2U2NEFjY3VtID0gdGhpcy5iYXNlNjRBY2N1bTtcblxuICAgIC8vIFRoZSBkZWNvZGVyIGlzIG1vcmUgaW52b2x2ZWQgYXMgd2UgbXVzdCBoYW5kbGUgY2h1bmtzIGluIHN0cmVhbS5cbiAgICAvLyBJdCBpcyBmb3JnaXZpbmcsIGNsb3NlciB0byBzdGFuZGFyZCBVVEYtNyAoZm9yIGV4YW1wbGUsICctJyBpcyBvcHRpb25hbCBhdCB0aGUgZW5kKS5cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghaW5CYXNlNjQpIHsgLy8gV2UncmUgaW4gZGlyZWN0IG1vZGUuXG4gICAgICAgICAgICAvLyBXcml0ZSBkaXJlY3QgY2hhcnMgdW50aWwgJyYnXG4gICAgICAgICAgICBpZiAoYnVmW2ldID09IGFuZENoYXIpIHtcbiAgICAgICAgICAgICAgICByZXMgKz0gdGhpcy5pY29udi5kZWNvZGUoYnVmLnNsaWNlKGxhc3RJLCBpKSwgXCJhc2NpaVwiKTsgLy8gV3JpdGUgZGlyZWN0IGNoYXJzLlxuICAgICAgICAgICAgICAgIGxhc3RJID0gaSsxO1xuICAgICAgICAgICAgICAgIGluQmFzZTY0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHsgLy8gV2UgZGVjb2RlIGJhc2U2NC5cbiAgICAgICAgICAgIGlmICghYmFzZTY0SU1BUENoYXJzW2J1ZltpXV0pIHsgLy8gQmFzZTY0IGVuZGVkLlxuICAgICAgICAgICAgICAgIGlmIChpID09IGxhc3RJICYmIGJ1ZltpXSA9PSBtaW51c0NoYXIpIHsgLy8gXCImLVwiIC0+IFwiJlwiXG4gICAgICAgICAgICAgICAgICAgIHJlcyArPSBcIiZcIjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYjY0c3RyID0gYmFzZTY0QWNjdW0gKyBidWYuc2xpY2UobGFzdEksIGkpLnRvU3RyaW5nKCkucmVwbGFjZSgvLC9nLCAnLycpO1xuICAgICAgICAgICAgICAgICAgICByZXMgKz0gdGhpcy5pY29udi5kZWNvZGUobmV3IEJ1ZmZlcihiNjRzdHIsICdiYXNlNjQnKSwgXCJ1dGYxNi1iZVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYnVmW2ldICE9IG1pbnVzQ2hhcikgLy8gTWludXMgbWF5IGJlIGFic29yYmVkIGFmdGVyIGJhc2U2NC5cbiAgICAgICAgICAgICAgICAgICAgaS0tO1xuXG4gICAgICAgICAgICAgICAgbGFzdEkgPSBpKzE7XG4gICAgICAgICAgICAgICAgaW5CYXNlNjQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBiYXNlNjRBY2N1bSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpbkJhc2U2NCkge1xuICAgICAgICByZXMgKz0gdGhpcy5pY29udi5kZWNvZGUoYnVmLnNsaWNlKGxhc3RJKSwgXCJhc2NpaVwiKTsgLy8gV3JpdGUgZGlyZWN0IGNoYXJzLlxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBiNjRzdHIgPSBiYXNlNjRBY2N1bSArIGJ1Zi5zbGljZShsYXN0SSkudG9TdHJpbmcoKS5yZXBsYWNlKC8sL2csICcvJyk7XG5cbiAgICAgICAgdmFyIGNhbkJlRGVjb2RlZCA9IGI2NHN0ci5sZW5ndGggLSAoYjY0c3RyLmxlbmd0aCAlIDgpOyAvLyBNaW5pbWFsIGNodW5rOiAyIHF1YWRzIC0+IDJ4MyBieXRlcyAtPiAzIGNoYXJzLlxuICAgICAgICBiYXNlNjRBY2N1bSA9IGI2NHN0ci5zbGljZShjYW5CZURlY29kZWQpOyAvLyBUaGUgcmVzdCB3aWxsIGJlIGRlY29kZWQgaW4gZnV0dXJlLlxuICAgICAgICBiNjRzdHIgPSBiNjRzdHIuc2xpY2UoMCwgY2FuQmVEZWNvZGVkKTtcblxuICAgICAgICByZXMgKz0gdGhpcy5pY29udi5kZWNvZGUobmV3IEJ1ZmZlcihiNjRzdHIsICdiYXNlNjQnKSwgXCJ1dGYxNi1iZVwiKTtcbiAgICB9XG5cbiAgICB0aGlzLmluQmFzZTY0ID0gaW5CYXNlNjQ7XG4gICAgdGhpcy5iYXNlNjRBY2N1bSA9IGJhc2U2NEFjY3VtO1xuXG4gICAgcmV0dXJuIHJlcztcbn1cblxuZnVuY3Rpb24gdXRmN0ltYXBEZWNvZGVyRW5kKCkge1xuICAgIHZhciByZXMgPSBcIlwiO1xuICAgIGlmICh0aGlzLmluQmFzZTY0ICYmIHRoaXMuYmFzZTY0QWNjdW0ubGVuZ3RoID4gMClcbiAgICAgICAgcmVzID0gdGhpcy5pY29udi5kZWNvZGUobmV3IEJ1ZmZlcih0aGlzLmJhc2U2NEFjY3VtLCAnYmFzZTY0JyksIFwidXRmMTYtYmVcIik7XG5cbiAgICB0aGlzLmluQmFzZTY0ID0gZmFsc2U7XG4gICAgdGhpcy5iYXNlNjRBY2N1bSA9ICcnO1xuICAgIHJldHVybiByZXM7XG59XG5cblxuIl19","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/sbcs-codec.js":{"source":"(function (Buffer){\n\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \n\nexports._sbcs = function(options) {\n    if (!options)\n        throw new Error(\"SBCS codec is called without the data.\")\n    \n    // Prepare char buffer for decoding.\n    if (!options.chars || (options.chars.length !== 128 && options.chars.length !== 256))\n        throw new Error(\"Encoding '\"+options.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\n    \n    if (options.chars.length === 128) {\n        var asciiString = \"\";\n        for (var i = 0; i < 128; i++)\n            asciiString += String.fromCharCode(i);\n        options.chars = asciiString + options.chars;\n    }\n\n    var decodeBuf = new Buffer(options.chars, 'ucs2');\n    \n    // Encoding buffer.\n    var encodeBuf = new Buffer(65536);\n    encodeBuf.fill(options.iconv.defaultCharSingleByte.charCodeAt(0));\n\n    for (var i = 0; i < options.chars.length; i++)\n        encodeBuf[options.chars.charCodeAt(i)] = i;\n\n    return {\n        encoder: encoderSBCS,\n        decoder: decoderSBCS,\n\n        encodeBuf: encodeBuf,\n        decodeBuf: decodeBuf,\n    };\n}\n\nfunction encoderSBCS(options) {\n    return {\n        write: encoderSBCSWrite,\n        end: function() {},\n\n        encodeBuf: this.encodeBuf,\n    };\n}\n\nfunction encoderSBCSWrite(str) {\n    var buf = new Buffer(str.length);\n    for (var i = 0; i < str.length; i++)\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\n    \n    return buf;\n}\n\n\nfunction decoderSBCS(options) {\n    return {\n        write: decoderSBCSWrite,\n        end: function() {},\n        \n        decodeBuf: this.decodeBuf,\n    };\n}\n\nfunction decoderSBCSWrite(buf) {\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\n    var decodeBuf = this.decodeBuf;\n    var newBuf = new Buffer(buf.length*2);\n    var idx1 = 0, idx2 = 0;\n    for (var i = 0, _len = buf.length; i < _len; i++) {\n        idx1 = buf[i]*2; idx2 = i*2;\n        newBuf[idx2] = decodeBuf[idx1];\n        newBuf[idx2+1] = decodeBuf[idx1+1];\n    }\n    return newBuf.toString('ucs2');\n}\n\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9ub2RlX21vZHVsZXMvaWNvbnYtbGl0ZS9lbmNvZGluZ3Mvc2Jjcy1jb2RlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiXG4vLyBTaW5nbGUtYnl0ZSBjb2RlYy4gTmVlZHMgYSAnY2hhcnMnIHN0cmluZyBwYXJhbWV0ZXIgdGhhdCBjb250YWlucyAyNTYgb3IgMTI4IGNoYXJzIHRoYXRcbi8vIGNvcnJlc3BvbmQgdG8gZW5jb2RlZCBieXRlcyAoaWYgMTI4IC0gdGhlbiBsb3dlciBoYWxmIGlzIEFTQ0lJKS4gXG5cbmV4cG9ydHMuX3NiY3MgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTQkNTIGNvZGVjIGlzIGNhbGxlZCB3aXRob3V0IHRoZSBkYXRhLlwiKVxuICAgIFxuICAgIC8vIFByZXBhcmUgY2hhciBidWZmZXIgZm9yIGRlY29kaW5nLlxuICAgIGlmICghb3B0aW9ucy5jaGFycyB8fCAob3B0aW9ucy5jaGFycy5sZW5ndGggIT09IDEyOCAmJiBvcHRpb25zLmNoYXJzLmxlbmd0aCAhPT0gMjU2KSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW5jb2RpbmcgJ1wiK29wdGlvbnMudHlwZStcIicgaGFzIGluY29ycmVjdCAnY2hhcnMnIChtdXN0IGJlIG9mIGxlbiAxMjggb3IgMjU2KVwiKTtcbiAgICBcbiAgICBpZiAob3B0aW9ucy5jaGFycy5sZW5ndGggPT09IDEyOCkge1xuICAgICAgICB2YXIgYXNjaWlTdHJpbmcgPSBcIlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyODsgaSsrKVxuICAgICAgICAgICAgYXNjaWlTdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShpKTtcbiAgICAgICAgb3B0aW9ucy5jaGFycyA9IGFzY2lpU3RyaW5nICsgb3B0aW9ucy5jaGFycztcbiAgICB9XG5cbiAgICB2YXIgZGVjb2RlQnVmID0gbmV3IEJ1ZmZlcihvcHRpb25zLmNoYXJzLCAndWNzMicpO1xuICAgIFxuICAgIC8vIEVuY29kaW5nIGJ1ZmZlci5cbiAgICB2YXIgZW5jb2RlQnVmID0gbmV3IEJ1ZmZlcig2NTUzNik7XG4gICAgZW5jb2RlQnVmLmZpbGwob3B0aW9ucy5pY29udi5kZWZhdWx0Q2hhclNpbmdsZUJ5dGUuY2hhckNvZGVBdCgwKSk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMuY2hhcnMubGVuZ3RoOyBpKyspXG4gICAgICAgIGVuY29kZUJ1ZltvcHRpb25zLmNoYXJzLmNoYXJDb2RlQXQoaSldID0gaTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGVuY29kZXI6IGVuY29kZXJTQkNTLFxuICAgICAgICBkZWNvZGVyOiBkZWNvZGVyU0JDUyxcblxuICAgICAgICBlbmNvZGVCdWY6IGVuY29kZUJ1ZixcbiAgICAgICAgZGVjb2RlQnVmOiBkZWNvZGVCdWYsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZW5jb2RlclNCQ1Mob3B0aW9ucykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBlbmNvZGVyU0JDU1dyaXRlLFxuICAgICAgICBlbmQ6IGZ1bmN0aW9uKCkge30sXG5cbiAgICAgICAgZW5jb2RlQnVmOiB0aGlzLmVuY29kZUJ1ZixcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBlbmNvZGVyU0JDU1dyaXRlKHN0cikge1xuICAgIHZhciBidWYgPSBuZXcgQnVmZmVyKHN0ci5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKVxuICAgICAgICBidWZbaV0gPSB0aGlzLmVuY29kZUJ1ZltzdHIuY2hhckNvZGVBdChpKV07XG4gICAgXG4gICAgcmV0dXJuIGJ1Zjtcbn1cblxuXG5mdW5jdGlvbiBkZWNvZGVyU0JDUyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGRlY29kZXJTQkNTV3JpdGUsXG4gICAgICAgIGVuZDogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgXG4gICAgICAgIGRlY29kZUJ1ZjogdGhpcy5kZWNvZGVCdWYsXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZGVjb2RlclNCQ1NXcml0ZShidWYpIHtcbiAgICAvLyBTdHJpbmdzIGFyZSBpbW11dGFibGUgaW4gSlMgLT4gd2UgdXNlIHVjczIgYnVmZmVyIHRvIHNwZWVkIHVwIGNvbXB1dGF0aW9ucy5cbiAgICB2YXIgZGVjb2RlQnVmID0gdGhpcy5kZWNvZGVCdWY7XG4gICAgdmFyIG5ld0J1ZiA9IG5ldyBCdWZmZXIoYnVmLmxlbmd0aCoyKTtcbiAgICB2YXIgaWR4MSA9IDAsIGlkeDIgPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBfbGVuID0gYnVmLmxlbmd0aDsgaSA8IF9sZW47IGkrKykge1xuICAgICAgICBpZHgxID0gYnVmW2ldKjI7IGlkeDIgPSBpKjI7XG4gICAgICAgIG5ld0J1ZltpZHgyXSA9IGRlY29kZUJ1ZltpZHgxXTtcbiAgICAgICAgbmV3QnVmW2lkeDIrMV0gPSBkZWNvZGVCdWZbaWR4MSsxXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0J1Zi50b1N0cmluZygndWNzMicpO1xufVxuIl19","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/dbcs-codec.js":{"source":"(function (Buffer){\n\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\n// To save memory and loading time, we read table files only when requested.\n\nexports._dbcs = function(options) {\n    return new DBCSCodec(options);\n}\n\nvar UNASSIGNED = -1,\n    GB18030_CODE = -2,\n    SEQ_START  = -10,\n    NODE_START = -1000,\n    UNASSIGNED_NODE = new Array(0x100),\n    DEF_CHAR = -1;\n\nfor (var i = 0; i < 0x100; i++)\n    UNASSIGNED_NODE[i] = UNASSIGNED;\n\n\n// Class DBCSCodec reads and initializes mapping tables.\nfunction DBCSCodec(options) {\n    this.options = options;\n    if (!options)\n        throw new Error(\"DBCS codec is called without the data.\")\n    if (!options.table)\n        throw new Error(\"Encoding '\" + options.encodingName + \"' has no data.\");\n\n    // Load tables.\n    var mappingTable = options.table();\n\n\n    // Decode tables: MBCS -> Unicode.\n\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\n    // Trie root is decodeTables[0].\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\n    //         == UNASSIGNED -> unknown/unassigned sequence.\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\n    this.decodeTables = [];\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\n\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \n    this.decodeTableSeq = [];\n\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\n    for (var i = 0; i < mappingTable.length; i++)\n        this._addDecodeChunk(mappingTable[i]);\n\n    this.defaultCharUnicode = options.iconv.defaultCharUnicode;\n\n    \n    // Encode tables: Unicode -> DBCS.\n\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\n    //         == UNASSIGNED -> no conversion found. Output a default char.\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\n    this.encodeTable = [];\n    \n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\n    // Objects are kept separately from encodeTable to increase performance.\n    this.encodeTableSeq = [];\n\n    // Some chars can be decoded, but need not be encoded.\n    var skipEncodeChars = {};\n    if (options.encodeSkipVals)\n        for (var i = 0; i < options.encodeSkipVals.length; i++) {\n            var range = options.encodeSkipVals[i];\n            for (var j = range.from; j <= range.to; j++)\n                skipEncodeChars[j] = true;\n        }\n        \n    // Use decode trie to recursively fill out encode tables.\n    this._fillEncodeTable(0, 0, skipEncodeChars);\n\n    // Add more encoding pairs when needed.\n    if (options.encodeAdd) {\n        for (var uChar in options.encodeAdd)\n            if (Object.prototype.hasOwnProperty.call(options.encodeAdd, uChar))\n                this._setEncodeChar(uChar.charCodeAt(0), options.encodeAdd[uChar]);\n    }\n\n    this.defCharSB  = this.encodeTable[0][options.iconv.defaultCharSingleByte.charCodeAt(0)];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\n\n\n    // Load & create GB18030 tables when needed.\n    if (typeof options.gb18030 === 'function') {\n        this.gb18030 = options.gb18030(); // Load GB18030 ranges.\n\n        // Add GB18030 decode tables.\n        var thirdByteNodeIdx = this.decodeTables.length;\n        var thirdByteNode = this.decodeTables[thirdByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        var fourthByteNodeIdx = this.decodeTables.length;\n        var fourthByteNode = this.decodeTables[fourthByteNodeIdx] = UNASSIGNED_NODE.slice(0);\n\n        for (var i = 0x81; i <= 0xFE; i++) {\n            var secondByteNodeIdx = NODE_START - this.decodeTables[0][i];\n            var secondByteNode = this.decodeTables[secondByteNodeIdx];\n            for (var j = 0x30; j <= 0x39; j++)\n                secondByteNode[j] = NODE_START - thirdByteNodeIdx;\n        }\n        for (var i = 0x81; i <= 0xFE; i++)\n            thirdByteNode[i] = NODE_START - fourthByteNodeIdx;\n        for (var i = 0x30; i <= 0x39; i++)\n            fourthByteNode[i] = GB18030_CODE\n    }        \n}\n\n// Public interface: create encoder and decoder objects. \n// The methods (write, end) are simple functions to not inhibit optimizations.\nDBCSCodec.prototype.encoder = function encoderDBCS(options) {\n    return {\n        // Methods\n        write: encoderDBCSWrite,\n        end: encoderDBCSEnd,\n\n        // Encoder state\n        leadSurrogate: -1,\n        seqObj: undefined,\n        \n        // Static data\n        encodeTable: this.encodeTable,\n        encodeTableSeq: this.encodeTableSeq,\n        defaultCharSingleByte: this.defCharSB,\n        gb18030: this.gb18030,\n\n        // Export for testing\n        findIdx: findIdx,\n    }\n}\n\nDBCSCodec.prototype.decoder = function decoderDBCS(options) {\n    return {\n        // Methods\n        write: decoderDBCSWrite,\n        end: decoderDBCSEnd,\n\n        // Decoder state\n        nodeIdx: 0,\n        prevBuf: new Buffer(0),\n\n        // Static data\n        decodeTables: this.decodeTables,\n        decodeTableSeq: this.decodeTableSeq,\n        defaultCharUnicode: this.defaultCharUnicode,\n        gb18030: this.gb18030,\n    }\n}\n\n\n\n// Decoder helpers\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\n    var bytes = [];\n    for (; addr > 0; addr >>= 8)\n        bytes.push(addr & 0xFF);\n    if (bytes.length == 0)\n        bytes.push(0);\n\n    var node = this.decodeTables[0];\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\n        var val = node[bytes[i]];\n\n        if (val == UNASSIGNED) { // Create new node.\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\n        }\n        else if (val <= NODE_START) { // Existing node.\n            node = this.decodeTables[NODE_START - val];\n        }\n        else\n            throw new Error(\"Overwrite byte in \" + this.options.encodingName + \", addr: \" + addr.toString(16));\n    }\n    return node;\n}\n\n\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\n    // First element of chunk is the hex mbcs code where we start.\n    var curAddr = parseInt(chunk[0], 16);\n\n    // Choose the decoding node where we'll write our chars.\n    var writeTable = this._getDecodeTrieNode(curAddr);\n    curAddr = curAddr & 0xFF;\n\n    // Write all other elements of the chunk to the table.\n    for (var k = 1; k < chunk.length; k++) {\n        var part = chunk[k];\n        if (typeof part === \"string\") { // String, write as-is.\n            for (var l = 0; l < part.length;) {\n                var code = part.charCodeAt(l++);\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\n                    var codeTrail = part.charCodeAt(l++);\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\n                    else\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.options.encodingName + \" at chunk \" + chunk[0]);\n                }\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\n                    var len = 0xFFF - code + 2;\n                    var seq = [];\n                    for (var m = 0; m < len; m++)\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\n\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\n                    this.decodeTableSeq.push(seq);\n                }\n                else\n                    writeTable[curAddr++] = code; // Basic char\n            }\n        } \n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\n            var charCode = writeTable[curAddr - 1] + 1;\n            for (var l = 0; l < part; l++)\n                writeTable[curAddr++] = charCode++;\n        }\n        else\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.options.encodingName + \" at chunk \" + chunk[0]);\n    }\n    if (curAddr > 0xFF)\n        throw new Error(\"Incorrect chunk in \"  + this.options.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\n}\n\n// Encoder helpers\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\n    if (this.encodeTable[high] === undefined)\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\n    return this.encodeTable[high];\n}\n\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n    if (bucket[low] <= SEQ_START)\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\n    else if (bucket[low] == UNASSIGNED)\n        bucket[low] = dbcsCode;\n}\n\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\n    \n    // Get the root of character tree according to first character of the sequence.\n    var uCode = seq[0];\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n\n    var node;\n    if (bucket[low] <= SEQ_START) {\n        // There's already a sequence with  - use it.\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\n    }\n    else {\n        // There was no sequence object - allocate a new one.\n        node = {};\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\n        this.encodeTableSeq.push(node);\n    }\n\n    // Traverse the character tree, allocating new nodes as needed.\n    for (var j = 1; j < seq.length-1; j++) {\n        var oldVal = node[uCode];\n        if (typeof oldVal === 'object')\n            node = oldVal;\n        else {\n            node = node[uCode] = {}\n            if (oldVal !== undefined)\n                node[DEF_CHAR] = oldVal\n        }\n    }\n\n    // Set the leaf to given dbcsCode.\n    uCode = seq[seq.length-1];\n    node[uCode] = dbcsCode;\n}\n\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\n    var node = this.decodeTables[nodeIdx];\n    for (var i = 0; i < 0x100; i++) {\n        var uCode = node[i];\n        var mbCode = prefix + i;\n        if (skipEncodeChars[mbCode])\n            continue;\n\n        if (uCode >= 0)\n            this._setEncodeChar(uCode, mbCode);\n        else if (uCode <= NODE_START)\n            this._fillEncodeTable(NODE_START - uCode, mbCode << 8, skipEncodeChars);\n        else if (uCode <= SEQ_START)\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\n    }\n}\n\n\n\n// == Actual Encoding ==========================================================\n\n\nfunction encoderDBCSWrite(str) {\n    var newBuf = new Buffer(str.length * (this.gb18030 ? 4 : 3)), \n        leadSurrogate = this.leadSurrogate,\n        seqObj = this.seqObj, nextChar = -1,\n        i = 0, j = 0;\n\n    while (true) {\n        // 0. Get next character.\n        if (nextChar === -1) {\n            if (i == str.length) break;\n            var uCode = str.charCodeAt(i++);\n        }\n        else {\n            var uCode = nextChar;\n            nextChar = -1;    \n        }\n\n        // 1. Handle surrogates.\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\n            if (uCode < 0xDC00) { // We've got lead surrogate.\n                if (leadSurrogate === -1) {\n                    leadSurrogate = uCode;\n                    continue;\n                } else {\n                    leadSurrogate = uCode;\n                    // Double lead surrogate found.\n                    uCode = UNASSIGNED;\n                }\n            } else { // We've got trail surrogate.\n                if (leadSurrogate !== -1) {\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\n                    leadSurrogate = -1;\n                } else {\n                    // Incomplete surrogate pair - only trail surrogate found.\n                    uCode = UNASSIGNED;\n                }\n                \n            }\n        }\n        else if (leadSurrogate !== -1) {\n            // Incomplete surrogate pair - only lead surrogate found.\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\n            leadSurrogate = -1;\n        }\n\n        // 2. Convert uCode character.\n        var dbcsCode = UNASSIGNED;\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\n            var resCode = seqObj[uCode];\n            if (typeof resCode === 'object') { // Sequence continues.\n                seqObj = resCode;\n                continue;\n\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\n                dbcsCode = resCode;\n\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\n\n                // Try default character for this sequence\n                resCode = seqObj[DEF_CHAR];\n                if (resCode !== undefined) {\n                    dbcsCode = resCode; // Found. Write it.\n                    nextChar = uCode; // Current character will be written too in the next iteration.\n\n                } else {\n                    // TODO: What if we have no default? (resCode == undefined)\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\n                    // Didn't do it for now because no encoding has this situation yet.\n                    // Currently, just skip the sequence and write current char.\n                }\n            }\n            seqObj = undefined;\n        }\n        else if (uCode >= 0) {  // Regular character\n            var subtable = this.encodeTable[uCode >> 8];\n            if (subtable !== undefined)\n                dbcsCode = subtable[uCode & 0xFF];\n            \n            if (dbcsCode <= SEQ_START) { // Sequence start\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\n                continue;\n            }\n\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\n                // Use GB18030 algorithm to find character(s) to write.\n                var idx = findIdx(this.gb18030.uChars, uCode);\n                if (idx != -1) {\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\n                    newBuf[j++] = 0x30 + dbcsCode;\n                    continue;\n                }\n            }\n        }\n\n        // 3. Write dbcsCode character.\n        if (dbcsCode === UNASSIGNED)\n            dbcsCode = this.defaultCharSingleByte;\n        \n        if (dbcsCode < 0x100) {\n            newBuf[j++] = dbcsCode;\n        }\n        else if (dbcsCode < 0x10000) {\n            newBuf[j++] = dbcsCode >> 8;   // high byte\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\n        }\n        else {\n            newBuf[j++] = dbcsCode >> 16;\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        }\n    }\n\n    this.seqObj = seqObj;\n    this.leadSurrogate = leadSurrogate;\n    return newBuf.slice(0, j);\n}\n\nfunction encoderDBCSEnd() {\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\n        return; // All clean. Most often case.\n\n    var newBuf = new Buffer(10), j = 0;\n\n    if (this.seqObj) { // We're in the sequence.\n        var dbcsCode = this.seqObj[DEF_CHAR];\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\n            if (dbcsCode < 0x100) {\n                newBuf[j++] = dbcsCode;\n            }\n            else {\n                newBuf[j++] = dbcsCode >> 8;   // high byte\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\n            }\n        } else {\n            // See todo above.\n        }\n        this.seqObj = undefined;\n    }\n\n    if (this.leadSurrogate !== -1) {\n        // Incomplete surrogate pair - only lead surrogate found.\n        newBuf[j++] = this.defaultCharSingleByte;\n        this.leadSurrogate = -1;\n    }\n    \n    return newBuf.slice(0, j);\n}\n\n\n// == Actual Decoding ==========================================================\n\n\nfunction decoderDBCSWrite(buf) {\n    var newBuf = new Buffer(buf.length*2),\n        nodeIdx = this.nodeIdx, \n        prevBuf = this.prevBuf, prevBufOffset = this.prevBuf.length,\n        seqStart = -this.prevBuf.length, // idx of the start of current parsed sequence.\n        uCode;\n\n    if (prevBufOffset > 0) // Make prev buf overlap a little to make it easier to slice later.\n        prevBuf = Buffer.concat([prevBuf, buf.slice(0, 10)]);\n    \n    for (var i = 0, j = 0; i < buf.length; i++) {\n        var curByte = (i >= 0) ? buf[i] : prevBuf[i + prevBufOffset];\n\n        // Lookup in current trie node.\n        var uCode = this.decodeTables[nodeIdx][curByte];\n\n        if (uCode >= 0) { \n            // Normal character, just use it.\n        }\n        else if (uCode === UNASSIGNED) { // Unknown char.\n            // TODO: Callback with seq.\n            //var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            i = seqStart; // Try to parse again, after skipping first byte of the sequence ('i' will be incremented by 'for' cycle).\n            uCode = this.defaultCharUnicode.charCodeAt(0);\n        }\n        else if (uCode === GB18030_CODE) {\n            var curSeq = (seqStart >= 0) ? buf.slice(seqStart, i+1) : prevBuf.slice(seqStart + prevBufOffset, i+1 + prevBufOffset);\n            var ptr = (curSeq[0]-0x81)*12600 + (curSeq[1]-0x30)*1260 + (curSeq[2]-0x81)*10 + (curSeq[3]-0x30);\n            var idx = findIdx(this.gb18030.gbChars, ptr);\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\n        }\n        else if (uCode <= NODE_START) { // Go to next trie node.\n            nodeIdx = NODE_START - uCode;\n            continue;\n        }\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\n            for (var k = 0; k < seq.length - 1; k++) {\n                uCode = seq[k];\n                newBuf[j++] = uCode & 0xFF;\n                newBuf[j++] = uCode >> 8;\n            }\n            uCode = seq[seq.length-1];\n        }\n        else\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\n\n        // Write the character to buffer, handling higher planes using surrogate pair.\n        if (uCode > 0xFFFF) { \n            uCode -= 0x10000;\n            var uCodeLead = 0xD800 + Math.floor(uCode / 0x400);\n            newBuf[j++] = uCodeLead & 0xFF;\n            newBuf[j++] = uCodeLead >> 8;\n\n            uCode = 0xDC00 + uCode % 0x400;\n        }\n        newBuf[j++] = uCode & 0xFF;\n        newBuf[j++] = uCode >> 8;\n\n        // Reset trie node.\n        nodeIdx = 0; seqStart = i+1;\n    }\n\n    this.nodeIdx = nodeIdx;\n    this.prevBuf = (seqStart >= 0) ? buf.slice(seqStart) : prevBuf.slice(seqStart + prevBufOffset);\n    return newBuf.slice(0, j).toString('ucs2');\n}\n\nfunction decoderDBCSEnd() {\n    var ret = '';\n\n    // Try to parse all remaining chars.\n    while (this.prevBuf.length > 0) {\n        // Skip 1 character in the buffer.\n        ret += this.defaultCharUnicode;\n        var buf = this.prevBuf.slice(1);\n\n        // Parse remaining as usual.\n        this.prevBuf = new Buffer(0);\n        this.nodeIdx = 0;\n        if (buf.length > 0)\n            ret += decoderDBCSWrite.call(this, buf);\n    }\n\n    this.nodeIdx = 0;\n    return ret;\n}\n\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\nfunction findIdx(table, val) {\n    if (table[0] > val)\n        return -1;\n\n    var l = 0, r = table.length;\n    while (l < r-1) { // always table[l] <= val < table[r]\n        var mid = l + Math.floor((r-l+1)/2);\n        if (table[mid] <= val)\n            l = mid;\n        else\n            r = mid;\n    }\n    return l;\n}\n\n\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9ub2RlX21vZHVsZXMvaWNvbnYtbGl0ZS9lbmNvZGluZ3MvZGJjcy1jb2RlYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlxuLy8gTXVsdGlieXRlIGNvZGVjLiBJbiB0aGlzIHNjaGVtZSwgYSBjaGFyYWN0ZXIgaXMgcmVwcmVzZW50ZWQgYnkgMSBvciBtb3JlIGJ5dGVzLlxuLy8gT3VyIGNvZGVjIHN1cHBvcnRzIFVURi0xNiBzdXJyb2dhdGVzLCBleHRlbnNpb25zIGZvciBHQjE4MDMwIGFuZCB1bmljb2RlIHNlcXVlbmNlcy5cbi8vIFRvIHNhdmUgbWVtb3J5IGFuZCBsb2FkaW5nIHRpbWUsIHdlIHJlYWQgdGFibGUgZmlsZXMgb25seSB3aGVuIHJlcXVlc3RlZC5cblxuZXhwb3J0cy5fZGJjcyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IERCQ1NDb2RlYyhvcHRpb25zKTtcbn1cblxudmFyIFVOQVNTSUdORUQgPSAtMSxcbiAgICBHQjE4MDMwX0NPREUgPSAtMixcbiAgICBTRVFfU1RBUlQgID0gLTEwLFxuICAgIE5PREVfU1RBUlQgPSAtMTAwMCxcbiAgICBVTkFTU0lHTkVEX05PREUgPSBuZXcgQXJyYXkoMHgxMDApLFxuICAgIERFRl9DSEFSID0gLTE7XG5cbmZvciAodmFyIGkgPSAwOyBpIDwgMHgxMDA7IGkrKylcbiAgICBVTkFTU0lHTkVEX05PREVbaV0gPSBVTkFTU0lHTkVEO1xuXG5cbi8vIENsYXNzIERCQ1NDb2RlYyByZWFkcyBhbmQgaW5pdGlhbGl6ZXMgbWFwcGluZyB0YWJsZXMuXG5mdW5jdGlvbiBEQkNTQ29kZWMob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgaWYgKCFvcHRpb25zKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEQkNTIGNvZGVjIGlzIGNhbGxlZCB3aXRob3V0IHRoZSBkYXRhLlwiKVxuICAgIGlmICghb3B0aW9ucy50YWJsZSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW5jb2RpbmcgJ1wiICsgb3B0aW9ucy5lbmNvZGluZ05hbWUgKyBcIicgaGFzIG5vIGRhdGEuXCIpO1xuXG4gICAgLy8gTG9hZCB0YWJsZXMuXG4gICAgdmFyIG1hcHBpbmdUYWJsZSA9IG9wdGlvbnMudGFibGUoKTtcblxuXG4gICAgLy8gRGVjb2RlIHRhYmxlczogTUJDUyAtPiBVbmljb2RlLlxuXG4gICAgLy8gZGVjb2RlVGFibGVzIGlzIGEgdHJpZSwgZW5jb2RlZCBhcyBhbiBhcnJheSBvZiBhcnJheXMgb2YgaW50ZWdlcnMuIEludGVybmFsIGFycmF5cyBhcmUgdHJpZSBub2RlcyBhbmQgYWxsIGhhdmUgbGVuID0gMjU2LlxuICAgIC8vIFRyaWUgcm9vdCBpcyBkZWNvZGVUYWJsZXNbMF0uXG4gICAgLy8gVmFsdWVzOiA+PSAgMCAtPiB1bmljb2RlIGNoYXJhY3RlciBjb2RlLiBjYW4gYmUgPiAweEZGRkZcbiAgICAvLyAgICAgICAgID09IFVOQVNTSUdORUQgLT4gdW5rbm93bi91bmFzc2lnbmVkIHNlcXVlbmNlLlxuICAgIC8vICAgICAgICAgPT0gR0IxODAzMF9DT0RFIC0+IHRoaXMgaXMgdGhlIGVuZCBvZiBhIEdCMTgwMzAgNC1ieXRlIHNlcXVlbmNlLlxuICAgIC8vICAgICAgICAgPD0gTk9ERV9TVEFSVCAtPiBpbmRleCBvZiB0aGUgbmV4dCBub2RlIGluIG91ciB0cmllIHRvIHByb2Nlc3MgbmV4dCBieXRlLlxuICAgIC8vICAgICAgICAgPD0gU0VRX1NUQVJUICAtPiBpbmRleCBvZiB0aGUgc3RhcnQgb2YgYSBjaGFyYWN0ZXIgY29kZSBzZXF1ZW5jZSwgaW4gZGVjb2RlVGFibGVTZXEuXG4gICAgdGhpcy5kZWNvZGVUYWJsZXMgPSBbXTtcbiAgICB0aGlzLmRlY29kZVRhYmxlc1swXSA9IFVOQVNTSUdORURfTk9ERS5zbGljZSgwKTsgLy8gQ3JlYXRlIHJvb3Qgbm9kZS5cblxuICAgIC8vIFNvbWV0aW1lcyBhIE1CQ1MgY2hhciBjb3JyZXNwb25kcyB0byBhIHNlcXVlbmNlIG9mIHVuaWNvZGUgY2hhcnMuIFdlIHN0b3JlIHRoZW0gYXMgYXJyYXlzIG9mIGludGVnZXJzIGhlcmUuIFxuICAgIHRoaXMuZGVjb2RlVGFibGVTZXEgPSBbXTtcblxuICAgIC8vIEFjdHVhbCBtYXBwaW5nIHRhYmxlcyBjb25zaXN0IG9mIGNodW5rcy4gVXNlIHRoZW0gdG8gZmlsbCB1cCBkZWNvZGUgdGFibGVzLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFwcGluZ1RhYmxlLmxlbmd0aDsgaSsrKVxuICAgICAgICB0aGlzLl9hZGREZWNvZGVDaHVuayhtYXBwaW5nVGFibGVbaV0pO1xuXG4gICAgdGhpcy5kZWZhdWx0Q2hhclVuaWNvZGUgPSBvcHRpb25zLmljb252LmRlZmF1bHRDaGFyVW5pY29kZTtcblxuICAgIFxuICAgIC8vIEVuY29kZSB0YWJsZXM6IFVuaWNvZGUgLT4gREJDUy5cblxuICAgIC8vIGBlbmNvZGVUYWJsZWAgaXMgYXJyYXkgbWFwcGluZyBmcm9tIHVuaWNvZGUgY2hhciB0byBlbmNvZGVkIGNoYXIuIEFsbCBpdHMgdmFsdWVzIGFyZSBpbnRlZ2VycyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgLy8gQmVjYXVzZSBpdCBjYW4gYmUgc3BhcnNlLCBpdCBpcyByZXByZXNlbnRlZCBhcyBhcnJheSBvZiBidWNrZXRzIGJ5IDI1NiBjaGFycyBlYWNoLiBCdWNrZXQgY2FuIGJlIG51bGwuXG4gICAgLy8gVmFsdWVzOiA+PSAgMCAtPiBpdCBpcyBhIG5vcm1hbCBjaGFyLiBXcml0ZSB0aGUgdmFsdWUgKGlmIDw9MjU2IHRoZW4gMSBieXRlLCBpZiA8PTY1NTM2IHRoZW4gMiBieXRlcywgZXRjLikuXG4gICAgLy8gICAgICAgICA9PSBVTkFTU0lHTkVEIC0+IG5vIGNvbnZlcnNpb24gZm91bmQuIE91dHB1dCBhIGRlZmF1bHQgY2hhci5cbiAgICAvLyAgICAgICAgIDw9IFNFUV9TVEFSVCAgLT4gaXQncyBhbiBpbmRleCBpbiBlbmNvZGVUYWJsZVNlcSwgc2VlIGJlbG93LiBUaGUgY2hhcmFjdGVyIHN0YXJ0cyBhIHNlcXVlbmNlLlxuICAgIHRoaXMuZW5jb2RlVGFibGUgPSBbXTtcbiAgICBcbiAgICAvLyBgZW5jb2RlVGFibGVTZXFgIGlzIHVzZWQgd2hlbiBhIHNlcXVlbmNlIG9mIHVuaWNvZGUgY2hhcmFjdGVycyBpcyBlbmNvZGVkIGFzIGEgc2luZ2xlIGNvZGUuIFdlIHVzZSBhIHRyZWUgb2ZcbiAgICAvLyBvYmplY3RzIHdoZXJlIGtleXMgY29ycmVzcG9uZCB0byBjaGFyYWN0ZXJzIGluIHNlcXVlbmNlIGFuZCBsZWFmcyBhcmUgdGhlIGVuY29kZWQgZGJjcyB2YWx1ZXMuIEEgc3BlY2lhbCBERUZfQ0hBUiBrZXlcbiAgICAvLyBtZWFucyBlbmQgb2Ygc2VxdWVuY2UgKG5lZWRlZCB3aGVuIG9uZSBzZXF1ZW5jZSBpcyBhIHN0cmljdCBzdWJzZXF1ZW5jZSBvZiBhbm90aGVyKS5cbiAgICAvLyBPYmplY3RzIGFyZSBrZXB0IHNlcGFyYXRlbHkgZnJvbSBlbmNvZGVUYWJsZSB0byBpbmNyZWFzZSBwZXJmb3JtYW5jZS5cbiAgICB0aGlzLmVuY29kZVRhYmxlU2VxID0gW107XG5cbiAgICAvLyBTb21lIGNoYXJzIGNhbiBiZSBkZWNvZGVkLCBidXQgbmVlZCBub3QgYmUgZW5jb2RlZC5cbiAgICB2YXIgc2tpcEVuY29kZUNoYXJzID0ge307XG4gICAgaWYgKG9wdGlvbnMuZW5jb2RlU2tpcFZhbHMpXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3B0aW9ucy5lbmNvZGVTa2lwVmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJhbmdlID0gb3B0aW9ucy5lbmNvZGVTa2lwVmFsc1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSByYW5nZS5mcm9tOyBqIDw9IHJhbmdlLnRvOyBqKyspXG4gICAgICAgICAgICAgICAgc2tpcEVuY29kZUNoYXJzW2pdID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAvLyBVc2UgZGVjb2RlIHRyaWUgdG8gcmVjdXJzaXZlbHkgZmlsbCBvdXQgZW5jb2RlIHRhYmxlcy5cbiAgICB0aGlzLl9maWxsRW5jb2RlVGFibGUoMCwgMCwgc2tpcEVuY29kZUNoYXJzKTtcblxuICAgIC8vIEFkZCBtb3JlIGVuY29kaW5nIHBhaXJzIHdoZW4gbmVlZGVkLlxuICAgIGlmIChvcHRpb25zLmVuY29kZUFkZCkge1xuICAgICAgICBmb3IgKHZhciB1Q2hhciBpbiBvcHRpb25zLmVuY29kZUFkZClcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob3B0aW9ucy5lbmNvZGVBZGQsIHVDaGFyKSlcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRFbmNvZGVDaGFyKHVDaGFyLmNoYXJDb2RlQXQoMCksIG9wdGlvbnMuZW5jb2RlQWRkW3VDaGFyXSk7XG4gICAgfVxuXG4gICAgdGhpcy5kZWZDaGFyU0IgID0gdGhpcy5lbmNvZGVUYWJsZVswXVtvcHRpb25zLmljb252LmRlZmF1bHRDaGFyU2luZ2xlQnl0ZS5jaGFyQ29kZUF0KDApXTtcbiAgICBpZiAodGhpcy5kZWZDaGFyU0IgPT09IFVOQVNTSUdORUQpIHRoaXMuZGVmQ2hhclNCID0gdGhpcy5lbmNvZGVUYWJsZVswXVsnPyddO1xuICAgIGlmICh0aGlzLmRlZkNoYXJTQiA9PT0gVU5BU1NJR05FRCkgdGhpcy5kZWZDaGFyU0IgPSBcIj9cIi5jaGFyQ29kZUF0KDApO1xuXG5cbiAgICAvLyBMb2FkICYgY3JlYXRlIEdCMTgwMzAgdGFibGVzIHdoZW4gbmVlZGVkLlxuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5nYjE4MDMwID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuZ2IxODAzMCA9IG9wdGlvbnMuZ2IxODAzMCgpOyAvLyBMb2FkIEdCMTgwMzAgcmFuZ2VzLlxuXG4gICAgICAgIC8vIEFkZCBHQjE4MDMwIGRlY29kZSB0YWJsZXMuXG4gICAgICAgIHZhciB0aGlyZEJ5dGVOb2RlSWR4ID0gdGhpcy5kZWNvZGVUYWJsZXMubGVuZ3RoO1xuICAgICAgICB2YXIgdGhpcmRCeXRlTm9kZSA9IHRoaXMuZGVjb2RlVGFibGVzW3RoaXJkQnl0ZU5vZGVJZHhdID0gVU5BU1NJR05FRF9OT0RFLnNsaWNlKDApO1xuXG4gICAgICAgIHZhciBmb3VydGhCeXRlTm9kZUlkeCA9IHRoaXMuZGVjb2RlVGFibGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGZvdXJ0aEJ5dGVOb2RlID0gdGhpcy5kZWNvZGVUYWJsZXNbZm91cnRoQnl0ZU5vZGVJZHhdID0gVU5BU1NJR05FRF9OT0RFLnNsaWNlKDApO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAweDgxOyBpIDw9IDB4RkU7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNlY29uZEJ5dGVOb2RlSWR4ID0gTk9ERV9TVEFSVCAtIHRoaXMuZGVjb2RlVGFibGVzWzBdW2ldO1xuICAgICAgICAgICAgdmFyIHNlY29uZEJ5dGVOb2RlID0gdGhpcy5kZWNvZGVUYWJsZXNbc2Vjb25kQnl0ZU5vZGVJZHhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDB4MzA7IGogPD0gMHgzOTsgaisrKVxuICAgICAgICAgICAgICAgIHNlY29uZEJ5dGVOb2RlW2pdID0gTk9ERV9TVEFSVCAtIHRoaXJkQnl0ZU5vZGVJZHg7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDB4ODE7IGkgPD0gMHhGRTsgaSsrKVxuICAgICAgICAgICAgdGhpcmRCeXRlTm9kZVtpXSA9IE5PREVfU1RBUlQgLSBmb3VydGhCeXRlTm9kZUlkeDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDB4MzA7IGkgPD0gMHgzOTsgaSsrKVxuICAgICAgICAgICAgZm91cnRoQnl0ZU5vZGVbaV0gPSBHQjE4MDMwX0NPREVcbiAgICB9ICAgICAgICBcbn1cblxuLy8gUHVibGljIGludGVyZmFjZTogY3JlYXRlIGVuY29kZXIgYW5kIGRlY29kZXIgb2JqZWN0cy4gXG4vLyBUaGUgbWV0aG9kcyAod3JpdGUsIGVuZCkgYXJlIHNpbXBsZSBmdW5jdGlvbnMgdG8gbm90IGluaGliaXQgb3B0aW1pemF0aW9ucy5cbkRCQ1NDb2RlYy5wcm90b3R5cGUuZW5jb2RlciA9IGZ1bmN0aW9uIGVuY29kZXJEQkNTKG9wdGlvbnMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICAvLyBNZXRob2RzXG4gICAgICAgIHdyaXRlOiBlbmNvZGVyREJDU1dyaXRlLFxuICAgICAgICBlbmQ6IGVuY29kZXJEQkNTRW5kLFxuXG4gICAgICAgIC8vIEVuY29kZXIgc3RhdGVcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZTogLTEsXG4gICAgICAgIHNlcU9iajogdW5kZWZpbmVkLFxuICAgICAgICBcbiAgICAgICAgLy8gU3RhdGljIGRhdGFcbiAgICAgICAgZW5jb2RlVGFibGU6IHRoaXMuZW5jb2RlVGFibGUsXG4gICAgICAgIGVuY29kZVRhYmxlU2VxOiB0aGlzLmVuY29kZVRhYmxlU2VxLFxuICAgICAgICBkZWZhdWx0Q2hhclNpbmdsZUJ5dGU6IHRoaXMuZGVmQ2hhclNCLFxuICAgICAgICBnYjE4MDMwOiB0aGlzLmdiMTgwMzAsXG5cbiAgICAgICAgLy8gRXhwb3J0IGZvciB0ZXN0aW5nXG4gICAgICAgIGZpbmRJZHg6IGZpbmRJZHgsXG4gICAgfVxufVxuXG5EQkNTQ29kZWMucHJvdG90eXBlLmRlY29kZXIgPSBmdW5jdGlvbiBkZWNvZGVyREJDUyhvcHRpb25zKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLy8gTWV0aG9kc1xuICAgICAgICB3cml0ZTogZGVjb2RlckRCQ1NXcml0ZSxcbiAgICAgICAgZW5kOiBkZWNvZGVyREJDU0VuZCxcblxuICAgICAgICAvLyBEZWNvZGVyIHN0YXRlXG4gICAgICAgIG5vZGVJZHg6IDAsXG4gICAgICAgIHByZXZCdWY6IG5ldyBCdWZmZXIoMCksXG5cbiAgICAgICAgLy8gU3RhdGljIGRhdGFcbiAgICAgICAgZGVjb2RlVGFibGVzOiB0aGlzLmRlY29kZVRhYmxlcyxcbiAgICAgICAgZGVjb2RlVGFibGVTZXE6IHRoaXMuZGVjb2RlVGFibGVTZXEsXG4gICAgICAgIGRlZmF1bHRDaGFyVW5pY29kZTogdGhpcy5kZWZhdWx0Q2hhclVuaWNvZGUsXG4gICAgICAgIGdiMTgwMzA6IHRoaXMuZ2IxODAzMCxcbiAgICB9XG59XG5cblxuXG4vLyBEZWNvZGVyIGhlbHBlcnNcbkRCQ1NDb2RlYy5wcm90b3R5cGUuX2dldERlY29kZVRyaWVOb2RlID0gZnVuY3Rpb24oYWRkcikge1xuICAgIHZhciBieXRlcyA9IFtdO1xuICAgIGZvciAoOyBhZGRyID4gMDsgYWRkciA+Pj0gOClcbiAgICAgICAgYnl0ZXMucHVzaChhZGRyICYgMHhGRik7XG4gICAgaWYgKGJ5dGVzLmxlbmd0aCA9PSAwKVxuICAgICAgICBieXRlcy5wdXNoKDApO1xuXG4gICAgdmFyIG5vZGUgPSB0aGlzLmRlY29kZVRhYmxlc1swXTtcbiAgICBmb3IgKHZhciBpID0gYnl0ZXMubGVuZ3RoLTE7IGkgPiAwOyBpLS0pIHsgLy8gVHJhdmVyc2Ugbm9kZXMgZGVlcGVyIGludG8gdGhlIHRyaWUuXG4gICAgICAgIHZhciB2YWwgPSBub2RlW2J5dGVzW2ldXTtcblxuICAgICAgICBpZiAodmFsID09IFVOQVNTSUdORUQpIHsgLy8gQ3JlYXRlIG5ldyBub2RlLlxuICAgICAgICAgICAgbm9kZVtieXRlc1tpXV0gPSBOT0RFX1NUQVJUIC0gdGhpcy5kZWNvZGVUYWJsZXMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5kZWNvZGVUYWJsZXMucHVzaChub2RlID0gVU5BU1NJR05FRF9OT0RFLnNsaWNlKDApKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh2YWwgPD0gTk9ERV9TVEFSVCkgeyAvLyBFeGlzdGluZyBub2RlLlxuICAgICAgICAgICAgbm9kZSA9IHRoaXMuZGVjb2RlVGFibGVzW05PREVfU1RBUlQgLSB2YWxdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk92ZXJ3cml0ZSBieXRlIGluIFwiICsgdGhpcy5vcHRpb25zLmVuY29kaW5nTmFtZSArIFwiLCBhZGRyOiBcIiArIGFkZHIudG9TdHJpbmcoMTYpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG59XG5cblxuREJDU0NvZGVjLnByb3RvdHlwZS5fYWRkRGVjb2RlQ2h1bmsgPSBmdW5jdGlvbihjaHVuaykge1xuICAgIC8vIEZpcnN0IGVsZW1lbnQgb2YgY2h1bmsgaXMgdGhlIGhleCBtYmNzIGNvZGUgd2hlcmUgd2Ugc3RhcnQuXG4gICAgdmFyIGN1ckFkZHIgPSBwYXJzZUludChjaHVua1swXSwgMTYpO1xuXG4gICAgLy8gQ2hvb3NlIHRoZSBkZWNvZGluZyBub2RlIHdoZXJlIHdlJ2xsIHdyaXRlIG91ciBjaGFycy5cbiAgICB2YXIgd3JpdGVUYWJsZSA9IHRoaXMuX2dldERlY29kZVRyaWVOb2RlKGN1ckFkZHIpO1xuICAgIGN1ckFkZHIgPSBjdXJBZGRyICYgMHhGRjtcblxuICAgIC8vIFdyaXRlIGFsbCBvdGhlciBlbGVtZW50cyBvZiB0aGUgY2h1bmsgdG8gdGhlIHRhYmxlLlxuICAgIGZvciAodmFyIGsgPSAxOyBrIDwgY2h1bmsubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIHBhcnQgPSBjaHVua1trXTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXJ0ID09PSBcInN0cmluZ1wiKSB7IC8vIFN0cmluZywgd3JpdGUgYXMtaXMuXG4gICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IHBhcnQubGVuZ3RoOykge1xuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gcGFydC5jaGFyQ29kZUF0KGwrKyk7XG4gICAgICAgICAgICAgICAgaWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPCAweERDMDApIHsgLy8gRGVjb2RlIHN1cnJvZ2F0ZVxuICAgICAgICAgICAgICAgICAgICB2YXIgY29kZVRyYWlsID0gcGFydC5jaGFyQ29kZUF0KGwrKyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgweERDMDAgPD0gY29kZVRyYWlsICYmIGNvZGVUcmFpbCA8IDB4RTAwMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlVGFibGVbY3VyQWRkcisrXSA9IDB4MTAwMDAgKyAoY29kZSAtIDB4RDgwMCkgKiAweDQwMCArIChjb2RlVHJhaWwgLSAweERDMDApO1xuICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3Qgc3Vycm9nYXRlIHBhaXIgaW4gXCIgICsgdGhpcy5vcHRpb25zLmVuY29kaW5nTmFtZSArIFwiIGF0IGNodW5rIFwiICsgY2h1bmtbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgweDBGRjAgPCBjb2RlICYmIGNvZGUgPD0gMHgwRkZGKSB7IC8vIENoYXJhY3RlciBzZXF1ZW5jZSAob3VyIG93biBlbmNvZGluZyB1c2VkKVxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gMHhGRkYgLSBjb2RlICsgMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IGxlbjsgbSsrKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VxLnB1c2gocGFydC5jaGFyQ29kZUF0KGwrKykpOyAvLyBTaW1wbGUgdmFyaWF0aW9uOiBkb24ndCBzdXBwb3J0IHN1cnJvZ2F0ZXMgb3Igc3Vic2VxdWVuY2VzIGluIHNlcS5cblxuICAgICAgICAgICAgICAgICAgICB3cml0ZVRhYmxlW2N1ckFkZHIrK10gPSBTRVFfU1RBUlQgLSB0aGlzLmRlY29kZVRhYmxlU2VxLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNvZGVUYWJsZVNlcS5wdXNoKHNlcSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVUYWJsZVtjdXJBZGRyKytdID0gY29kZTsgLy8gQmFzaWMgY2hhclxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGFydCA9PT0gXCJudW1iZXJcIikgeyAvLyBJbnRlZ2VyLCBtZWFuaW5nIGluY3JlYXNpbmcgc2VxdWVuY2Ugc3RhcnRpbmcgd2l0aCBwcmV2IGNoYXJhY3Rlci5cbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IHdyaXRlVGFibGVbY3VyQWRkciAtIDFdICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgcGFydDsgbCsrKVxuICAgICAgICAgICAgICAgIHdyaXRlVGFibGVbY3VyQWRkcisrXSA9IGNoYXJDb2RlKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0IHR5cGUgJ1wiICsgdHlwZW9mIHBhcnQgKyBcIicgZ2l2ZW4gaW4gXCIgICsgdGhpcy5vcHRpb25zLmVuY29kaW5nTmFtZSArIFwiIGF0IGNodW5rIFwiICsgY2h1bmtbMF0pO1xuICAgIH1cbiAgICBpZiAoY3VyQWRkciA+IDB4RkYpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCBjaHVuayBpbiBcIiAgKyB0aGlzLm9wdGlvbnMuZW5jb2RpbmdOYW1lICsgXCIgYXQgYWRkciBcIiArIGNodW5rWzBdICsgXCI6IHRvbyBsb25nXCIgKyBjdXJBZGRyKTtcbn1cblxuLy8gRW5jb2RlciBoZWxwZXJzXG5EQkNTQ29kZWMucHJvdG90eXBlLl9nZXRFbmNvZGVCdWNrZXQgPSBmdW5jdGlvbih1Q29kZSkge1xuICAgIHZhciBoaWdoID0gdUNvZGUgPj4gODsgLy8gVGhpcyBjb3VsZCBiZSA+IDB4RkYgYmVjYXVzZSBvZiBhc3RyYWwgY2hhcmFjdGVycy5cbiAgICBpZiAodGhpcy5lbmNvZGVUYWJsZVtoaWdoXSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICB0aGlzLmVuY29kZVRhYmxlW2hpZ2hdID0gVU5BU1NJR05FRF9OT0RFLnNsaWNlKDApOyAvLyBDcmVhdGUgYnVja2V0IG9uIGRlbWFuZC5cbiAgICByZXR1cm4gdGhpcy5lbmNvZGVUYWJsZVtoaWdoXTtcbn1cblxuREJDU0NvZGVjLnByb3RvdHlwZS5fc2V0RW5jb2RlQ2hhciA9IGZ1bmN0aW9uKHVDb2RlLCBkYmNzQ29kZSkge1xuICAgIHZhciBidWNrZXQgPSB0aGlzLl9nZXRFbmNvZGVCdWNrZXQodUNvZGUpO1xuICAgIHZhciBsb3cgPSB1Q29kZSAmIDB4RkY7XG4gICAgaWYgKGJ1Y2tldFtsb3ddIDw9IFNFUV9TVEFSVClcbiAgICAgICAgdGhpcy5lbmNvZGVUYWJsZVNlcVtTRVFfU1RBUlQtYnVja2V0W2xvd11dW0RFRl9DSEFSXSA9IGRiY3NDb2RlOyAvLyBUaGVyZSdzIGFscmVhZHkgYSBzZXF1ZW5jZSwgc2V0IGEgc2luZ2xlLWNoYXIgc3Vic2VxdWVuY2Ugb2YgaXQuXG4gICAgZWxzZSBpZiAoYnVja2V0W2xvd10gPT0gVU5BU1NJR05FRClcbiAgICAgICAgYnVja2V0W2xvd10gPSBkYmNzQ29kZTtcbn1cblxuREJDU0NvZGVjLnByb3RvdHlwZS5fc2V0RW5jb2RlU2VxdWVuY2UgPSBmdW5jdGlvbihzZXEsIGRiY3NDb2RlKSB7XG4gICAgXG4gICAgLy8gR2V0IHRoZSByb290IG9mIGNoYXJhY3RlciB0cmVlIGFjY29yZGluZyB0byBmaXJzdCBjaGFyYWN0ZXIgb2YgdGhlIHNlcXVlbmNlLlxuICAgIHZhciB1Q29kZSA9IHNlcVswXTtcbiAgICB2YXIgYnVja2V0ID0gdGhpcy5fZ2V0RW5jb2RlQnVja2V0KHVDb2RlKTtcbiAgICB2YXIgbG93ID0gdUNvZGUgJiAweEZGO1xuXG4gICAgdmFyIG5vZGU7XG4gICAgaWYgKGJ1Y2tldFtsb3ddIDw9IFNFUV9TVEFSVCkge1xuICAgICAgICAvLyBUaGVyZSdzIGFscmVhZHkgYSBzZXF1ZW5jZSB3aXRoICAtIHVzZSBpdC5cbiAgICAgICAgbm9kZSA9IHRoaXMuZW5jb2RlVGFibGVTZXFbU0VRX1NUQVJULWJ1Y2tldFtsb3ddXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIFRoZXJlIHdhcyBubyBzZXF1ZW5jZSBvYmplY3QgLSBhbGxvY2F0ZSBhIG5ldyBvbmUuXG4gICAgICAgIG5vZGUgPSB7fTtcbiAgICAgICAgaWYgKGJ1Y2tldFtsb3ddICE9PSBVTkFTU0lHTkVEKSBub2RlW0RFRl9DSEFSXSA9IGJ1Y2tldFtsb3ddOyAvLyBJZiBhIGNoYXIgd2FzIHNldCBiZWZvcmUgLSBtYWtlIGl0IGEgc2luZ2xlLWNoYXIgc3Vic2VxdWVuY2UuXG4gICAgICAgIGJ1Y2tldFtsb3ddID0gU0VRX1NUQVJUIC0gdGhpcy5lbmNvZGVUYWJsZVNlcS5sZW5ndGg7XG4gICAgICAgIHRoaXMuZW5jb2RlVGFibGVTZXEucHVzaChub2RlKTtcbiAgICB9XG5cbiAgICAvLyBUcmF2ZXJzZSB0aGUgY2hhcmFjdGVyIHRyZWUsIGFsbG9jYXRpbmcgbmV3IG5vZGVzIGFzIG5lZWRlZC5cbiAgICBmb3IgKHZhciBqID0gMTsgaiA8IHNlcS5sZW5ndGgtMTsgaisrKSB7XG4gICAgICAgIHZhciBvbGRWYWwgPSBub2RlW3VDb2RlXTtcbiAgICAgICAgaWYgKHR5cGVvZiBvbGRWYWwgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgbm9kZSA9IG9sZFZhbDtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBub2RlID0gbm9kZVt1Q29kZV0gPSB7fVxuICAgICAgICAgICAgaWYgKG9sZFZhbCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIG5vZGVbREVGX0NIQVJdID0gb2xkVmFsXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdGhlIGxlYWYgdG8gZ2l2ZW4gZGJjc0NvZGUuXG4gICAgdUNvZGUgPSBzZXFbc2VxLmxlbmd0aC0xXTtcbiAgICBub2RlW3VDb2RlXSA9IGRiY3NDb2RlO1xufVxuXG5EQkNTQ29kZWMucHJvdG90eXBlLl9maWxsRW5jb2RlVGFibGUgPSBmdW5jdGlvbihub2RlSWR4LCBwcmVmaXgsIHNraXBFbmNvZGVDaGFycykge1xuICAgIHZhciBub2RlID0gdGhpcy5kZWNvZGVUYWJsZXNbbm9kZUlkeF07XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAweDEwMDsgaSsrKSB7XG4gICAgICAgIHZhciB1Q29kZSA9IG5vZGVbaV07XG4gICAgICAgIHZhciBtYkNvZGUgPSBwcmVmaXggKyBpO1xuICAgICAgICBpZiAoc2tpcEVuY29kZUNoYXJzW21iQ29kZV0pXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICBpZiAodUNvZGUgPj0gMClcbiAgICAgICAgICAgIHRoaXMuX3NldEVuY29kZUNoYXIodUNvZGUsIG1iQ29kZSk7XG4gICAgICAgIGVsc2UgaWYgKHVDb2RlIDw9IE5PREVfU1RBUlQpXG4gICAgICAgICAgICB0aGlzLl9maWxsRW5jb2RlVGFibGUoTk9ERV9TVEFSVCAtIHVDb2RlLCBtYkNvZGUgPDwgOCwgc2tpcEVuY29kZUNoYXJzKTtcbiAgICAgICAgZWxzZSBpZiAodUNvZGUgPD0gU0VRX1NUQVJUKVxuICAgICAgICAgICAgdGhpcy5fc2V0RW5jb2RlU2VxdWVuY2UodGhpcy5kZWNvZGVUYWJsZVNlcVtTRVFfU1RBUlQgLSB1Q29kZV0sIG1iQ29kZSk7XG4gICAgfVxufVxuXG5cblxuLy8gPT0gQWN0dWFsIEVuY29kaW5nID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuXG5mdW5jdGlvbiBlbmNvZGVyREJDU1dyaXRlKHN0cikge1xuICAgIHZhciBuZXdCdWYgPSBuZXcgQnVmZmVyKHN0ci5sZW5ndGggKiAodGhpcy5nYjE4MDMwID8gNCA6IDMpKSwgXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSB0aGlzLmxlYWRTdXJyb2dhdGUsXG4gICAgICAgIHNlcU9iaiA9IHRoaXMuc2VxT2JqLCBuZXh0Q2hhciA9IC0xLFxuICAgICAgICBpID0gMCwgaiA9IDA7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAvLyAwLiBHZXQgbmV4dCBjaGFyYWN0ZXIuXG4gICAgICAgIGlmIChuZXh0Q2hhciA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChpID09IHN0ci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgICAgdmFyIHVDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1Q29kZSA9IG5leHRDaGFyO1xuICAgICAgICAgICAgbmV4dENoYXIgPSAtMTsgICAgXG4gICAgICAgIH1cblxuICAgICAgICAvLyAxLiBIYW5kbGUgc3Vycm9nYXRlcy5cbiAgICAgICAgaWYgKDB4RDgwMCA8PSB1Q29kZSAmJiB1Q29kZSA8IDB4RTAwMCkgeyAvLyBDaGFyIGlzIG9uZSBvZiBzdXJyb2dhdGVzLlxuICAgICAgICAgICAgaWYgKHVDb2RlIDwgMHhEQzAwKSB7IC8vIFdlJ3ZlIGdvdCBsZWFkIHN1cnJvZ2F0ZS5cbiAgICAgICAgICAgICAgICBpZiAobGVhZFN1cnJvZ2F0ZSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IHVDb2RlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gdUNvZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvdWJsZSBsZWFkIHN1cnJvZ2F0ZSBmb3VuZC5cbiAgICAgICAgICAgICAgICAgICAgdUNvZGUgPSBVTkFTU0lHTkVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIFdlJ3ZlIGdvdCB0cmFpbCBzdXJyb2dhdGUuXG4gICAgICAgICAgICAgICAgaWYgKGxlYWRTdXJyb2dhdGUgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHVDb2RlID0gMHgxMDAwMCArIChsZWFkU3Vycm9nYXRlIC0gMHhEODAwKSAqIDB4NDAwICsgKHVDb2RlIC0gMHhEQzAwKTtcbiAgICAgICAgICAgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluY29tcGxldGUgc3Vycm9nYXRlIHBhaXIgLSBvbmx5IHRyYWlsIHN1cnJvZ2F0ZSBmb3VuZC5cbiAgICAgICAgICAgICAgICAgICAgdUNvZGUgPSBVTkFTU0lHTkVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZWFkU3Vycm9nYXRlICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gSW5jb21wbGV0ZSBzdXJyb2dhdGUgcGFpciAtIG9ubHkgbGVhZCBzdXJyb2dhdGUgZm91bmQuXG4gICAgICAgICAgICBuZXh0Q2hhciA9IHVDb2RlOyB1Q29kZSA9IFVOQVNTSUdORUQ7IC8vIFdyaXRlIGFuIGVycm9yLCB0aGVuIGN1cnJlbnQgY2hhci5cbiAgICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIuIENvbnZlcnQgdUNvZGUgY2hhcmFjdGVyLlxuICAgICAgICB2YXIgZGJjc0NvZGUgPSBVTkFTU0lHTkVEO1xuICAgICAgICBpZiAoc2VxT2JqICE9PSB1bmRlZmluZWQgJiYgdUNvZGUgIT0gVU5BU1NJR05FRCkgeyAvLyBXZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIHZhciByZXNDb2RlID0gc2VxT2JqW3VDb2RlXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzQ29kZSA9PT0gJ29iamVjdCcpIHsgLy8gU2VxdWVuY2UgY29udGludWVzLlxuICAgICAgICAgICAgICAgIHNlcU9iaiA9IHJlc0NvZGU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc0NvZGUgPT0gJ251bWJlcicpIHsgLy8gU2VxdWVuY2UgZmluaXNoZWQuIFdyaXRlIGl0LlxuICAgICAgICAgICAgICAgIGRiY3NDb2RlID0gcmVzQ29kZTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNDb2RlID09IHVuZGVmaW5lZCkgeyAvLyBDdXJyZW50IGNoYXJhY3RlciBpcyBub3QgcGFydCBvZiB0aGUgc2VxdWVuY2UuXG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgZGVmYXVsdCBjaGFyYWN0ZXIgZm9yIHRoaXMgc2VxdWVuY2VcbiAgICAgICAgICAgICAgICByZXNDb2RlID0gc2VxT2JqW0RFRl9DSEFSXTtcbiAgICAgICAgICAgICAgICBpZiAocmVzQ29kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiY3NDb2RlID0gcmVzQ29kZTsgLy8gRm91bmQuIFdyaXRlIGl0LlxuICAgICAgICAgICAgICAgICAgICBuZXh0Q2hhciA9IHVDb2RlOyAvLyBDdXJyZW50IGNoYXJhY3RlciB3aWxsIGJlIHdyaXR0ZW4gdG9vIGluIHRoZSBuZXh0IGl0ZXJhdGlvbi5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFdoYXQgaWYgd2UgaGF2ZSBubyBkZWZhdWx0PyAocmVzQ29kZSA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZW4sIHdlIHNob3VsZCB3cml0ZSBmaXJzdCBjaGFyIG9mIHRoZSBzZXF1ZW5jZSBhcy1pcyBhbmQgdHJ5IHRoZSByZXN0IHJlY3Vyc2l2ZWx5LlxuICAgICAgICAgICAgICAgICAgICAvLyBEaWRuJ3QgZG8gaXQgZm9yIG5vdyBiZWNhdXNlIG5vIGVuY29kaW5nIGhhcyB0aGlzIHNpdHVhdGlvbiB5ZXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnRseSwganVzdCBza2lwIHRoZSBzZXF1ZW5jZSBhbmQgd3JpdGUgY3VycmVudCBjaGFyLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcU9iaiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1Q29kZSA+PSAwKSB7ICAvLyBSZWd1bGFyIGNoYXJhY3RlclxuICAgICAgICAgICAgdmFyIHN1YnRhYmxlID0gdGhpcy5lbmNvZGVUYWJsZVt1Q29kZSA+PiA4XTtcbiAgICAgICAgICAgIGlmIChzdWJ0YWJsZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRiY3NDb2RlID0gc3VidGFibGVbdUNvZGUgJiAweEZGXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRiY3NDb2RlIDw9IFNFUV9TVEFSVCkgeyAvLyBTZXF1ZW5jZSBzdGFydFxuICAgICAgICAgICAgICAgIHNlcU9iaiA9IHRoaXMuZW5jb2RlVGFibGVTZXFbU0VRX1NUQVJULWRiY3NDb2RlXTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRiY3NDb2RlID09IFVOQVNTSUdORUQgJiYgdGhpcy5nYjE4MDMwKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIEdCMTgwMzAgYWxnb3JpdGhtIHRvIGZpbmQgY2hhcmFjdGVyKHMpIHRvIHdyaXRlLlxuICAgICAgICAgICAgICAgIHZhciBpZHggPSBmaW5kSWR4KHRoaXMuZ2IxODAzMC51Q2hhcnMsIHVDb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYmNzQ29kZSA9IHRoaXMuZ2IxODAzMC5nYkNoYXJzW2lkeF0gKyAodUNvZGUgLSB0aGlzLmdiMTgwMzAudUNoYXJzW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICBuZXdCdWZbaisrXSA9IDB4ODEgKyBNYXRoLmZsb29yKGRiY3NDb2RlIC8gMTI2MDApOyBkYmNzQ29kZSA9IGRiY3NDb2RlICUgMTI2MDA7XG4gICAgICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gMHgzMCArIE1hdGguZmxvb3IoZGJjc0NvZGUgLyAxMjYwKTsgZGJjc0NvZGUgPSBkYmNzQ29kZSAlIDEyNjA7XG4gICAgICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gMHg4MSArIE1hdGguZmxvb3IoZGJjc0NvZGUgLyAxMCk7IGRiY3NDb2RlID0gZGJjc0NvZGUgJSAxMDtcbiAgICAgICAgICAgICAgICAgICAgbmV3QnVmW2orK10gPSAweDMwICsgZGJjc0NvZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMuIFdyaXRlIGRiY3NDb2RlIGNoYXJhY3Rlci5cbiAgICAgICAgaWYgKGRiY3NDb2RlID09PSBVTkFTU0lHTkVEKVxuICAgICAgICAgICAgZGJjc0NvZGUgPSB0aGlzLmRlZmF1bHRDaGFyU2luZ2xlQnl0ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYmNzQ29kZSA8IDB4MTAwKSB7XG4gICAgICAgICAgICBuZXdCdWZbaisrXSA9IGRiY3NDb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRiY3NDb2RlIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSA+PiA4OyAgIC8vIGhpZ2ggYnl0ZVxuICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSAmIDB4RkY7IC8vIGxvdyBieXRlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdCdWZbaisrXSA9IGRiY3NDb2RlID4+IDE2O1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSAoZGJjc0NvZGUgPj4gOCkgJiAweEZGO1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSAmIDB4RkY7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNlcU9iaiA9IHNlcU9iajtcbiAgICB0aGlzLmxlYWRTdXJyb2dhdGUgPSBsZWFkU3Vycm9nYXRlO1xuICAgIHJldHVybiBuZXdCdWYuc2xpY2UoMCwgaik7XG59XG5cbmZ1bmN0aW9uIGVuY29kZXJEQkNTRW5kKCkge1xuICAgIGlmICh0aGlzLmxlYWRTdXJyb2dhdGUgPT09IC0xICYmIHRoaXMuc2VxT2JqID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybjsgLy8gQWxsIGNsZWFuLiBNb3N0IG9mdGVuIGNhc2UuXG5cbiAgICB2YXIgbmV3QnVmID0gbmV3IEJ1ZmZlcigxMCksIGogPSAwO1xuXG4gICAgaWYgKHRoaXMuc2VxT2JqKSB7IC8vIFdlJ3JlIGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAgdmFyIGRiY3NDb2RlID0gdGhpcy5zZXFPYmpbREVGX0NIQVJdO1xuICAgICAgICBpZiAoZGJjc0NvZGUgIT09IHVuZGVmaW5lZCkgeyAvLyBXcml0ZSBiZWdpbm5pbmcgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAgICAgICAgaWYgKGRiY3NDb2RlIDwgMHgxMDApIHtcbiAgICAgICAgICAgICAgICBuZXdCdWZbaisrXSA9IGRiY3NDb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSA+PiA4OyAgIC8vIGhpZ2ggYnl0ZVxuICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gZGJjc0NvZGUgJiAweEZGOyAvLyBsb3cgYnl0ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2VlIHRvZG8gYWJvdmUuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXFPYmogPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubGVhZFN1cnJvZ2F0ZSAhPT0gLTEpIHtcbiAgICAgICAgLy8gSW5jb21wbGV0ZSBzdXJyb2dhdGUgcGFpciAtIG9ubHkgbGVhZCBzdXJyb2dhdGUgZm91bmQuXG4gICAgICAgIG5ld0J1ZltqKytdID0gdGhpcy5kZWZhdWx0Q2hhclNpbmdsZUJ5dGU7XG4gICAgICAgIHRoaXMubGVhZFN1cnJvZ2F0ZSA9IC0xO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbmV3QnVmLnNsaWNlKDAsIGopO1xufVxuXG5cbi8vID09IEFjdHVhbCBEZWNvZGluZyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuZnVuY3Rpb24gZGVjb2RlckRCQ1NXcml0ZShidWYpIHtcbiAgICB2YXIgbmV3QnVmID0gbmV3IEJ1ZmZlcihidWYubGVuZ3RoKjIpLFxuICAgICAgICBub2RlSWR4ID0gdGhpcy5ub2RlSWR4LCBcbiAgICAgICAgcHJldkJ1ZiA9IHRoaXMucHJldkJ1ZiwgcHJldkJ1Zk9mZnNldCA9IHRoaXMucHJldkJ1Zi5sZW5ndGgsXG4gICAgICAgIHNlcVN0YXJ0ID0gLXRoaXMucHJldkJ1Zi5sZW5ndGgsIC8vIGlkeCBvZiB0aGUgc3RhcnQgb2YgY3VycmVudCBwYXJzZWQgc2VxdWVuY2UuXG4gICAgICAgIHVDb2RlO1xuXG4gICAgaWYgKHByZXZCdWZPZmZzZXQgPiAwKSAvLyBNYWtlIHByZXYgYnVmIG92ZXJsYXAgYSBsaXR0bGUgdG8gbWFrZSBpdCBlYXNpZXIgdG8gc2xpY2UgbGF0ZXIuXG4gICAgICAgIHByZXZCdWYgPSBCdWZmZXIuY29uY2F0KFtwcmV2QnVmLCBidWYuc2xpY2UoMCwgMTApXSk7XG4gICAgXG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSAwOyBpIDwgYnVmLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjdXJCeXRlID0gKGkgPj0gMCkgPyBidWZbaV0gOiBwcmV2QnVmW2kgKyBwcmV2QnVmT2Zmc2V0XTtcblxuICAgICAgICAvLyBMb29rdXAgaW4gY3VycmVudCB0cmllIG5vZGUuXG4gICAgICAgIHZhciB1Q29kZSA9IHRoaXMuZGVjb2RlVGFibGVzW25vZGVJZHhdW2N1ckJ5dGVdO1xuXG4gICAgICAgIGlmICh1Q29kZSA+PSAwKSB7IFxuICAgICAgICAgICAgLy8gTm9ybWFsIGNoYXJhY3RlciwganVzdCB1c2UgaXQuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodUNvZGUgPT09IFVOQVNTSUdORUQpIHsgLy8gVW5rbm93biBjaGFyLlxuICAgICAgICAgICAgLy8gVE9ETzogQ2FsbGJhY2sgd2l0aCBzZXEuXG4gICAgICAgICAgICAvL3ZhciBjdXJTZXEgPSAoc2VxU3RhcnQgPj0gMCkgPyBidWYuc2xpY2Uoc2VxU3RhcnQsIGkrMSkgOiBwcmV2QnVmLnNsaWNlKHNlcVN0YXJ0ICsgcHJldkJ1Zk9mZnNldCwgaSsxICsgcHJldkJ1Zk9mZnNldCk7XG4gICAgICAgICAgICBpID0gc2VxU3RhcnQ7IC8vIFRyeSB0byBwYXJzZSBhZ2FpbiwgYWZ0ZXIgc2tpcHBpbmcgZmlyc3QgYnl0ZSBvZiB0aGUgc2VxdWVuY2UgKCdpJyB3aWxsIGJlIGluY3JlbWVudGVkIGJ5ICdmb3InIGN5Y2xlKS5cbiAgICAgICAgICAgIHVDb2RlID0gdGhpcy5kZWZhdWx0Q2hhclVuaWNvZGUuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1Q29kZSA9PT0gR0IxODAzMF9DT0RFKSB7XG4gICAgICAgICAgICB2YXIgY3VyU2VxID0gKHNlcVN0YXJ0ID49IDApID8gYnVmLnNsaWNlKHNlcVN0YXJ0LCBpKzEpIDogcHJldkJ1Zi5zbGljZShzZXFTdGFydCArIHByZXZCdWZPZmZzZXQsIGkrMSArIHByZXZCdWZPZmZzZXQpO1xuICAgICAgICAgICAgdmFyIHB0ciA9IChjdXJTZXFbMF0tMHg4MSkqMTI2MDAgKyAoY3VyU2VxWzFdLTB4MzApKjEyNjAgKyAoY3VyU2VxWzJdLTB4ODEpKjEwICsgKGN1clNlcVszXS0weDMwKTtcbiAgICAgICAgICAgIHZhciBpZHggPSBmaW5kSWR4KHRoaXMuZ2IxODAzMC5nYkNoYXJzLCBwdHIpO1xuICAgICAgICAgICAgdUNvZGUgPSB0aGlzLmdiMTgwMzAudUNoYXJzW2lkeF0gKyBwdHIgLSB0aGlzLmdiMTgwMzAuZ2JDaGFyc1tpZHhdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVDb2RlIDw9IE5PREVfU1RBUlQpIHsgLy8gR28gdG8gbmV4dCB0cmllIG5vZGUuXG4gICAgICAgICAgICBub2RlSWR4ID0gTk9ERV9TVEFSVCAtIHVDb2RlO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodUNvZGUgPD0gU0VRX1NUQVJUKSB7IC8vIE91dHB1dCBhIHNlcXVlbmNlIG9mIGNoYXJzLlxuICAgICAgICAgICAgdmFyIHNlcSA9IHRoaXMuZGVjb2RlVGFibGVTZXFbU0VRX1NUQVJUIC0gdUNvZGVdO1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzZXEubGVuZ3RoIC0gMTsgaysrKSB7XG4gICAgICAgICAgICAgICAgdUNvZGUgPSBzZXFba107XG4gICAgICAgICAgICAgICAgbmV3QnVmW2orK10gPSB1Q29kZSAmIDB4RkY7XG4gICAgICAgICAgICAgICAgbmV3QnVmW2orK10gPSB1Q29kZSA+PiA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdUNvZGUgPSBzZXFbc2VxLmxlbmd0aC0xXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJpY29udi1saXRlIGludGVybmFsIGVycm9yOiBpbnZhbGlkIGRlY29kaW5nIHRhYmxlIHZhbHVlIFwiICsgdUNvZGUgKyBcIiBhdCBcIiArIG5vZGVJZHggKyBcIi9cIiArIGN1ckJ5dGUpO1xuXG4gICAgICAgIC8vIFdyaXRlIHRoZSBjaGFyYWN0ZXIgdG8gYnVmZmVyLCBoYW5kbGluZyBoaWdoZXIgcGxhbmVzIHVzaW5nIHN1cnJvZ2F0ZSBwYWlyLlxuICAgICAgICBpZiAodUNvZGUgPiAweEZGRkYpIHsgXG4gICAgICAgICAgICB1Q29kZSAtPSAweDEwMDAwO1xuICAgICAgICAgICAgdmFyIHVDb2RlTGVhZCA9IDB4RDgwMCArIE1hdGguZmxvb3IodUNvZGUgLyAweDQwMCk7XG4gICAgICAgICAgICBuZXdCdWZbaisrXSA9IHVDb2RlTGVhZCAmIDB4RkY7XG4gICAgICAgICAgICBuZXdCdWZbaisrXSA9IHVDb2RlTGVhZCA+PiA4O1xuXG4gICAgICAgICAgICB1Q29kZSA9IDB4REMwMCArIHVDb2RlICUgMHg0MDA7XG4gICAgICAgIH1cbiAgICAgICAgbmV3QnVmW2orK10gPSB1Q29kZSAmIDB4RkY7XG4gICAgICAgIG5ld0J1ZltqKytdID0gdUNvZGUgPj4gODtcblxuICAgICAgICAvLyBSZXNldCB0cmllIG5vZGUuXG4gICAgICAgIG5vZGVJZHggPSAwOyBzZXFTdGFydCA9IGkrMTtcbiAgICB9XG5cbiAgICB0aGlzLm5vZGVJZHggPSBub2RlSWR4O1xuICAgIHRoaXMucHJldkJ1ZiA9IChzZXFTdGFydCA+PSAwKSA/IGJ1Zi5zbGljZShzZXFTdGFydCkgOiBwcmV2QnVmLnNsaWNlKHNlcVN0YXJ0ICsgcHJldkJ1Zk9mZnNldCk7XG4gICAgcmV0dXJuIG5ld0J1Zi5zbGljZSgwLCBqKS50b1N0cmluZygndWNzMicpO1xufVxuXG5mdW5jdGlvbiBkZWNvZGVyREJDU0VuZCgpIHtcbiAgICB2YXIgcmV0ID0gJyc7XG5cbiAgICAvLyBUcnkgdG8gcGFyc2UgYWxsIHJlbWFpbmluZyBjaGFycy5cbiAgICB3aGlsZSAodGhpcy5wcmV2QnVmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2tpcCAxIGNoYXJhY3RlciBpbiB0aGUgYnVmZmVyLlxuICAgICAgICByZXQgKz0gdGhpcy5kZWZhdWx0Q2hhclVuaWNvZGU7XG4gICAgICAgIHZhciBidWYgPSB0aGlzLnByZXZCdWYuc2xpY2UoMSk7XG5cbiAgICAgICAgLy8gUGFyc2UgcmVtYWluaW5nIGFzIHVzdWFsLlxuICAgICAgICB0aGlzLnByZXZCdWYgPSBuZXcgQnVmZmVyKDApO1xuICAgICAgICB0aGlzLm5vZGVJZHggPSAwO1xuICAgICAgICBpZiAoYnVmLmxlbmd0aCA+IDApXG4gICAgICAgICAgICByZXQgKz0gZGVjb2RlckRCQ1NXcml0ZS5jYWxsKHRoaXMsIGJ1Zik7XG4gICAgfVxuXG4gICAgdGhpcy5ub2RlSWR4ID0gMDtcbiAgICByZXR1cm4gcmV0O1xufVxuXG4vLyBCaW5hcnkgc2VhcmNoIGZvciBHQjE4MDMwLiBSZXR1cm5zIGxhcmdlc3QgaSBzdWNoIHRoYXQgdGFibGVbaV0gPD0gdmFsLlxuZnVuY3Rpb24gZmluZElkeCh0YWJsZSwgdmFsKSB7XG4gICAgaWYgKHRhYmxlWzBdID4gdmFsKVxuICAgICAgICByZXR1cm4gLTE7XG5cbiAgICB2YXIgbCA9IDAsIHIgPSB0YWJsZS5sZW5ndGg7XG4gICAgd2hpbGUgKGwgPCByLTEpIHsgLy8gYWx3YXlzIHRhYmxlW2xdIDw9IHZhbCA8IHRhYmxlW3JdXG4gICAgICAgIHZhciBtaWQgPSBsICsgTWF0aC5mbG9vcigoci1sKzEpLzIpO1xuICAgICAgICBpZiAodGFibGVbbWlkXSA8PSB2YWwpXG4gICAgICAgICAgICBsID0gbWlkO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByID0gbWlkO1xuICAgIH1cbiAgICByZXR1cm4gbDtcbn1cblxuIl19","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/shiftjis.json":{"source":"[\n[\"0\",\"\\u0000\",128],\n[\"a1\",\"\",62],\n[\"8140\",\"\",9,\"\"],\n[\"8180\",\"\"],\n[\"81b8\",\"\"],\n[\"81c8\",\"\"],\n[\"81da\",\"\"],\n[\"81f0\",\"\"],\n[\"81fc\",\"\"],\n[\"824f\",\"\",9],\n[\"8260\",\"\",25],\n[\"8281\",\"\",25],\n[\"829f\",\"\",82],\n[\"8340\",\"\",62],\n[\"8380\",\"\",22],\n[\"839f\",\"\",16,\"\",6],\n[\"83bf\",\"\",16,\"\",6],\n[\"8440\",\"\",5,\"\",25],\n[\"8470\",\"\",5,\"\",7],\n[\"8480\",\"\",17],\n[\"849f\",\"\"],\n[\"8740\",\"\",19,\"\",9],\n[\"875f\",\"\"],\n[\"877e\",\"\"],\n[\"8780\",\"\",4,\"\"],\n[\"889f\",\"\"],\n[\"8940\",\"\"],\n[\"8980\",\"\"],\n[\"8a40\",\"\"],\n[\"8a80\",\"\"],\n[\"8b40\",\"\"],\n[\"8b80\",\"\"],\n[\"8c40\",\"\"],\n[\"8c80\",\"\"],\n[\"8d40\",\"\"],\n[\"8d80\",\"\"],\n[\"8e40\",\"\"],\n[\"8e80\",\"\"],\n[\"8f40\",\"\"],\n[\"8f80\",\"\"],\n[\"9040\",\"\"],\n[\"9080\",\"\"],\n[\"9140\",\"\"],\n[\"9180\",\"\"],\n[\"9240\",\"\"],\n[\"9280\",\"\"],\n[\"9340\",\"\"],\n[\"9380\",\"\"],\n[\"9440\",\"\"],\n[\"9480\",\"\"],\n[\"9540\",\"\"],\n[\"9580\",\"\"],\n[\"9640\",\"\"],\n[\"9680\",\"\"],\n[\"9740\",\"\"],\n[\"9780\",\"\"],\n[\"9840\",\"\"],\n[\"989f\",\"\"],\n[\"9940\",\"\"],\n[\"9980\",\"\"],\n[\"9a40\",\"\"],\n[\"9a80\",\"\"],\n[\"9b40\",\"\"],\n[\"9b80\",\"\"],\n[\"9c40\",\"\"],\n[\"9c80\",\"\"],\n[\"9d40\",\"\"],\n[\"9d80\",\"\"],\n[\"9e40\",\"\"],\n[\"9e80\",\"\"],\n[\"9f40\",\"\"],\n[\"9f80\",\"\"],\n[\"e040\",\"\"],\n[\"e080\",\"\"],\n[\"e140\",\"\"],\n[\"e180\",\"\"],\n[\"e240\",\"\"],\n[\"e280\",\"\"],\n[\"e340\",\"\"],\n[\"e380\",\"\"],\n[\"e440\",\"\"],\n[\"e480\",\"\"],\n[\"e540\",\"\"],\n[\"e580\",\"\"],\n[\"e640\",\"\"],\n[\"e680\",\"\"],\n[\"e740\",\"\"],\n[\"e780\",\"\"],\n[\"e840\",\"\"],\n[\"e880\",\"\"],\n[\"e940\",\"\"],\n[\"e980\",\"\"],\n[\"ea40\",\"\"],\n[\"ea80\",\"\"],\n[\"ed40\",\"\"],\n[\"ed80\",\"\"],\n[\"ee40\",\"\"],\n[\"ee80\",\"\"],\n[\"eeef\",\"\",9,\"\"],\n[\"f040\",\"\",62],\n[\"f080\",\"\",124],\n[\"f140\",\"\",62],\n[\"f180\",\"\",124],\n[\"f240\",\"\",62],\n[\"f280\",\"\",124],\n[\"f340\",\"\",62],\n[\"f380\",\"\",124],\n[\"f440\",\"\",62],\n[\"f480\",\"\",124],\n[\"f540\",\"\",62],\n[\"f580\",\"\",124],\n[\"f640\",\"\",62],\n[\"f680\",\"\",124],\n[\"f740\",\"\",62],\n[\"f780\",\"\",124],\n[\"f840\",\"\",62],\n[\"f880\",\"\",124],\n[\"f940\",\"\"],\n[\"fa40\",\"\",9,\"\",9,\"\"],\n[\"fa80\",\"\"],\n[\"fb40\",\"\"],\n[\"fb80\",\"\"],\n[\"fc40\",\"\"]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/eucjp.json":{"source":"[\n[\"0\",\"\\u0000\",127],\n[\"8ea1\",\"\",62],\n[\"a1a1\",\"\",9,\"\"],\n[\"a2a1\",\"\"],\n[\"a2ba\",\"\"],\n[\"a2ca\",\"\"],\n[\"a2dc\",\"\"],\n[\"a2f2\",\"\"],\n[\"a2fe\",\"\"],\n[\"a3b0\",\"\",9],\n[\"a3c1\",\"\",25],\n[\"a3e1\",\"\",25],\n[\"a4a1\",\"\",82],\n[\"a5a1\",\"\",85],\n[\"a6a1\",\"\",16,\"\",6],\n[\"a6c1\",\"\",16,\"\",6],\n[\"a7a1\",\"\",5,\"\",25],\n[\"a7d1\",\"\",5,\"\",25],\n[\"a8a1\",\"\"],\n[\"ada1\",\"\",19,\"\",9],\n[\"adc0\",\"\"],\n[\"addf\",\"\",4,\"\"],\n[\"b0a1\",\"\"],\n[\"b1a1\",\"\"],\n[\"b2a1\",\"\"],\n[\"b3a1\",\"\"],\n[\"b4a1\",\"\"],\n[\"b5a1\",\"\"],\n[\"b6a1\",\"\"],\n[\"b7a1\",\"\"],\n[\"b8a1\",\"\"],\n[\"b9a1\",\"\"],\n[\"baa1\",\"\"],\n[\"bba1\",\"\"],\n[\"bca1\",\"\"],\n[\"bda1\",\"\"],\n[\"bea1\",\"\"],\n[\"bfa1\",\"\"],\n[\"c0a1\",\"\"],\n[\"c1a1\",\"\"],\n[\"c2a1\",\"\"],\n[\"c3a1\",\"\"],\n[\"c4a1\",\"\"],\n[\"c5a1\",\"\"],\n[\"c6a1\",\"\"],\n[\"c7a1\",\"\"],\n[\"c8a1\",\"\"],\n[\"c9a1\",\"\"],\n[\"caa1\",\"\"],\n[\"cba1\",\"\"],\n[\"cca1\",\"\"],\n[\"cda1\",\"\"],\n[\"cea1\",\"\"],\n[\"cfa1\",\"\"],\n[\"d0a1\",\"\"],\n[\"d1a1\",\"\"],\n[\"d2a1\",\"\"],\n[\"d3a1\",\"\"],\n[\"d4a1\",\"\"],\n[\"d5a1\",\"\"],\n[\"d6a1\",\"\"],\n[\"d7a1\",\"\"],\n[\"d8a1\",\"\"],\n[\"d9a1\",\"\"],\n[\"daa1\",\"\"],\n[\"dba1\",\"\"],\n[\"dca1\",\"\"],\n[\"dda1\",\"\"],\n[\"dea1\",\"\"],\n[\"dfa1\",\"\"],\n[\"e0a1\",\"\"],\n[\"e1a1\",\"\"],\n[\"e2a1\",\"\"],\n[\"e3a1\",\"\"],\n[\"e4a1\",\"\"],\n[\"e5a1\",\"\"],\n[\"e6a1\",\"\"],\n[\"e7a1\",\"\"],\n[\"e8a1\",\"\"],\n[\"e9a1\",\"\"],\n[\"eaa1\",\"\"],\n[\"eba1\",\"\"],\n[\"eca1\",\"\"],\n[\"eda1\",\"\"],\n[\"eea1\",\"\"],\n[\"efa1\",\"\"],\n[\"f0a1\",\"\"],\n[\"f1a1\",\"\"],\n[\"f2a1\",\"\"],\n[\"f3a1\",\"\"],\n[\"f4a1\",\"\"],\n[\"f9a1\",\"\"],\n[\"faa1\",\"\"],\n[\"fba1\",\"\"],\n[\"fca1\",\"\"],\n[\"fcf1\",\"\",9,\"\"],\n[\"8fa2af\",\"\"],\n[\"8fa2c2\",\"\"],\n[\"8fa2eb\",\"\"],\n[\"8fa6e1\",\"\"],\n[\"8fa6e7\",\"\"],\n[\"8fa6e9\",\"\"],\n[\"8fa6ec\",\"\"],\n[\"8fa6f1\",\"\"],\n[\"8fa7c2\",\"\",10,\"\"],\n[\"8fa7f2\",\"\",10,\"\"],\n[\"8fa9a1\",\"\"],\n[\"8fa9a4\",\"\"],\n[\"8fa9a6\",\"\"],\n[\"8fa9a8\",\"\"],\n[\"8fa9ab\",\"\"],\n[\"8fa9af\",\"\"],\n[\"8fa9c1\",\"\"],\n[\"8faaa1\",\"\"],\n[\"8faaba\",\"\"],\n[\"8faba1\",\"\"],\n[\"8fabbd\",\"\"],\n[\"8fabc5\",\"\"],\n[\"8fb0a1\",\"\"],\n[\"8fb1a1\",\"\"],\n[\"8fb2a1\",\"\",4,\"\"],\n[\"8fb3a1\",\"\"],\n[\"8fb4a1\",\"\"],\n[\"8fb5a1\",\"\"],\n[\"8fb6a1\",\"\",5,\"\",4,\"\"],\n[\"8fb7a1\",\"\",4,\"\"],\n[\"8fb8a1\",\"\"],\n[\"8fb9a1\",\"\"],\n[\"8fbaa1\",\"\",4,\"\"],\n[\"8fbba1\",\"\"],\n[\"8fbca1\",\"\",4,\"\"],\n[\"8fbda1\",\"\",4,\"\"],\n[\"8fbea1\",\"\",4,\"\"],\n[\"8fbfa1\",\"\"],\n[\"8fc0a1\",\"\"],\n[\"8fc1a1\",\"\"],\n[\"8fc2a1\",\"\"],\n[\"8fc3a1\",\"\",4,\"\"],\n[\"8fc4a1\",\"\"],\n[\"8fc5a1\",\"\"],\n[\"8fc6a1\",\"\"],\n[\"8fc7a1\",\"\"],\n[\"8fc8a1\",\"\"],\n[\"8fc9a1\",\"\",4,\"\",4,\"\"],\n[\"8fcaa1\",\"\"],\n[\"8fcba1\",\"\"],\n[\"8fcca1\",\"\",9,\"\"],\n[\"8fcda1\",\"\",5,\"\"],\n[\"8fcea1\",\"\",6,\"\"],\n[\"8fcfa1\",\"\"],\n[\"8fd0a1\",\"\"],\n[\"8fd1a1\",\"\"],\n[\"8fd2a1\",\"\",5],\n[\"8fd3a1\",\"\"],\n[\"8fd4a1\",\"\",4,\"\"],\n[\"8fd5a1\",\"\"],\n[\"8fd6a1\",\"\"],\n[\"8fd7a1\",\"\"],\n[\"8fd8a1\",\"\"],\n[\"8fd9a1\",\"\",4,\"\",6,\"\"],\n[\"8fdaa1\",\"\",4,\"\"],\n[\"8fdba1\",\"\",6,\"\"],\n[\"8fdca1\",\"\",4,\"\"],\n[\"8fdda1\",\"\",4,\"\"],\n[\"8fdea1\",\"\",4,\"\"],\n[\"8fdfa1\",\"\"],\n[\"8fe0a1\",\"\"],\n[\"8fe1a1\",\"\",4,\"\"],\n[\"8fe2a1\",\"\"],\n[\"8fe3a1\",\"\",5,\"\",4,\"\"],\n[\"8fe4a1\",\"\",4,\"\"],\n[\"8fe5a1\",\"\",4,\"\"],\n[\"8fe6a1\",\"\"],\n[\"8fe7a1\",\"\"],\n[\"8fe8a1\",\"\",4,\"\"],\n[\"8fe9a1\",\"\",4],\n[\"8feaa1\",\"\",4,\"\"],\n[\"8feba1\",\"\",4,\"\"],\n[\"8feca1\",\"\"],\n[\"8feda1\",\"\",4,\"\",4,\"\"]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/cp936.json":{"source":"[\n[\"0\",\"\\u0000\",127,\"\"],\n[\"8140\",\"\",5,\"\",9,\"\",6,\"\"],\n[\"8180\",\"\",6,\"\",4,\"\",4,\"\",5,\"\"],\n[\"8240\",\"\",4,\"\",8,\"\",4,\"\",11],\n[\"8280\",\"\",10,\"\",4,\"\",7,\"\",5,\"\",8,\"\",20,\"\",4,\"\",6,\"\"],\n[\"8340\",\"\",17,\"\",5,\"\",10,\"\",4,\"\",9,\"\"],\n[\"8380\",\"\",5,\"\",13,\"\",28,\"\",4,\"\",4,\"\",5],\n[\"8440\",\"\",5,\"\",5,\"\"],\n[\"8480\",\"\",9,\"\",4,\"\",6,\"\",6,\"\",9,\"\",5,\"\",10,\"\",7,\"\"],\n[\"8540\",\"\",9,\"\"],\n[\"8580\",\"\",4,\"\",6,\"\",4,\"\",4,\"\",7,\"\"],\n[\"8640\",\"\",4,\"\",5,\"\",4,\"\",5,\"\"],\n[\"8680\",\"\",4,\"\",4,\"\",5,\"\",6,\"\",8,\"\",4,\"\",4,\"\",4,\"\"],\n[\"8740\",\"\",7,\"\",11,\"\",4,\"\",4],\n[\"8780\",\"\",7,\"\",6,\"\",14,\"\",10,\"\",6,\"\",12,\"\",8,\"\",5,\"\",6],\n[\"8840\",\"\",9,\"\",4,\"\",4,\"\"],\n[\"8880\",\"\",4,\"\",6,\"\",8,\"\",6,\"\",7,\"\",4,\"\",4,\"\",7],\n[\"8940\",\"\",5,\"\",6,\"\",4,\"\",5,\"\",4,\"\",16,\"\"],\n[\"8980\",\"\",4,\"\",4,\"\",7,\"\",17,\"\",10,\"\",13,\"\",5,\"\",7,\"\",4,\"\"],\n[\"8a40\",\"\",4,\"\",12,\"\"],\n[\"8a80\",\"\",5,\"\",6,\"\",4,\"\",11,\"\",6,\"\",4,\"\",4,\"\",9,\"\",5],\n[\"8b40\",\"\",8,\"\",17,\"\",6,\"\",13,\"\"],\n[\"8b80\",\"\",4,\"\",4,\"\",5,\"\",4,\"\",4,\"\",22,\"\",11,\"\",25,\"\",7,\"\",6],\n[\"8c40\",\"\",7,\"\"],\n[\"8c80\",\"\",8,\"\",4,\"\",6,\"\",6,\"\",6,\"\",4,\"\",4,\"\",4],\n[\"8d40\",\"\",5,\"\",5,\"\",5,\"\",6,\"\",9,\"\",4],\n[\"8d80\",\"\",5,\"\",4,\"\",4,\"\",4,\"\",7,\"\",7,\"\",10,\"\",10,\"\",12,\"\",21,\"\"],\n[\"8e40\",\"\",21,\"\",12,\"\",6,\"\",12,\"\"],\n[\"8e80\",\"\",4,\"\",7,\"\",4,\"\",4,\"\",5,\"\",6,\"\",4,\"\",14,\"\",4,\"\",4,\"\",6],\n[\"8f40\",\"\",5,\"\",11,\"\",8,\"\"],\n[\"8f80\",\"\",6,\"\",14,\"\",5,\"\",5,\"\",4,\"\"],\n[\"9040\",\"\",4,\"\",4,\"\",6,\"\"],\n[\"9080\",\"\",7,\"\",4,\"\",4,\"\",4,\"\",4,\"\",18,\"\",6],\n[\"9140\",\"\",6,\"\",6,\"\",18,\"\",4,\"\"],\n[\"9180\",\"\",6,\"\",8,\"\",9,\"\",5,\"\",4,\"\",4,\"\",16,\"\",13,\"\",8,\"\",5,\"\",4,\"\"],\n[\"9240\",\"\",6,\"\",5,\"\"],\n[\"9280\",\"\",5,\"\",7,\"\",6,\"\"],\n[\"9340\",\"\",6,\"\",4,\"\",4,\"\",5,\"\"],\n[\"9380\",\"\",5,\"\",4,\"\",6,\"\",4,\"\",7,\"\",9,\"\",6,\"\",8,\"\",4,\"\",6,\"\"],\n[\"9440\",\"\",24,\"\",7,\"\",7,\"\",4,\"\",8],\n[\"9480\",\"\",4,\"\",4,\"\",14,\"\",7,\"\",7,\"\"],\n[\"9540\",\"\",4,\"\",4,\"\",6,\"\"],\n[\"9580\",\"\",4,\"\",4,\"\",8,\"\",4,\"\",4,\"\",25,\"\",7,\"\",5,\"\"],\n[\"9640\",\"\",5,\"\",4,\"\"],\n[\"9680\",\"\",7,\"\",9,\"\",7,\"\",4,\"\",6,\"\",6,\"\",5],\n[\"9740\",\"\",7,\"\",8,\"\",7,\"\",9,\"\"],\n[\"9780\",\"\",6,\"\",5,\"\",4,\"\",9,\"\",4,\"\",11,\"\",7,\"\",16,\"\"],\n[\"9840\",\"\",4,\"\",5,\"\",9,\"\"],\n[\"9880\",\"\",7,\"\",5,\"\",11,\"\",9,\"\",9,\"\",11,\"\",5,\"\",5,\"\",6,\"\",4,\"\",7,\"\",6,\"\"],\n[\"9940\",\"\",4,\"\",10,\"\",6,\"\",8,\"\",4,\"\",7,\"\",5],\n[\"9980\",\"\",114,\"\",6],\n[\"9a40\",\"\",11,\"\",7,\"\",13,\"\"],\n[\"9a80\",\"\",4,\"\",7,\"\",7,\"\",6,\"\",4,\"\",4,\"\",7,\"\",6,\"\",4,\"\",4,\"\"],\n[\"9b40\",\"\",4,\"\"],\n[\"9b80\",\"\",5,\"\",4,\"\",4,\"\",5,\"\"],\n[\"9c40\",\"\",7,\"\"],\n[\"9c80\",\"\",7,\"\",7,\"\",10,\"\",14,\"\",4,\"\",6,\"\",5],\n[\"9d40\",\"\",7,\"\",4,\"\",9,\"\",6,\"\"],\n[\"9d80\",\"\",9,\"\",5,\"\",6,\"\",12,\"\",4,\"\",10,\"\",5,\"\",5,\"\",6,\"\",10,\"\"],\n[\"9e40\",\"\",7,\"\",32,\"\",7,\"\",6,\"\",6],\n[\"9e80\",\"\",9,\"\",17,\"\",13,\"\",11,\"\",12,\"\",12,\"\"],\n[\"9f40\",\"\",6,\"\",10,\"\",4,\"\",10,\"\",7,\"\"],\n[\"9f80\",\"\",13,\"\",12,\"\",4,\"\",4,\"\",5,\"\",4,\"\",4,\"\",6,\"\",5,\"\",8,\"\",9,\"\",4],\n[\"a040\",\"\",9,\"\",5,\"\",9,\"\",11,\"\",19],\n[\"a080\",\"\",9,\"\",6,\"\",4,\"\",11,\"\",11,\"\",6,\"\"],\n[\"a1a1\",\"\",7,\"\"],\n[\"a2a1\",\"\",9],\n[\"a2b1\",\"\",19,\"\",19,\"\",9],\n[\"a2e5\",\"\",9],\n[\"a2f1\",\"\",11],\n[\"a3a1\",\"\",88,\"\"],\n[\"a4a1\",\"\",82],\n[\"a5a1\",\"\",85],\n[\"a6a1\",\"\",16,\"\",6],\n[\"a6c1\",\"\",16,\"\",6],\n[\"a6e0\",\"\"],\n[\"a6ee\",\"\"],\n[\"a6f4\",\"\"],\n[\"a7a1\",\"\",5,\"\",25],\n[\"a7d1\",\"\",5,\"\",25],\n[\"a840\",\"\",35,\"\",6],\n[\"a880\",\"\",7,\"\"],\n[\"a8a1\",\"\"],\n[\"a8bd\",\"\"],\n[\"a8c0\",\"\"],\n[\"a8c5\",\"\",36],\n[\"a940\",\"\",8,\"\"],\n[\"a959\",\"\"],\n[\"a95c\",\"\"],\n[\"a960\",\"\",9,\"\",8],\n[\"a980\",\"\",4,\"\"],\n[\"a996\",\"\"],\n[\"a9a4\",\"\",75],\n[\"aa40\",\"\",5,\"\",5,\"\",8],\n[\"aa80\",\"\",7,\"\",10,\"\"],\n[\"ab40\",\"\",11,\"\",4,\"\",5,\"\",4],\n[\"ab80\",\"\",6,\"\",4],\n[\"ac40\",\"\",10,\"\",8,\"\",5,\"\",4,\"\",11],\n[\"ac80\",\"\",6,\"\",12,\"\",4,\"\"],\n[\"ad40\",\"\",10,\"\",7,\"\",15,\"\",12],\n[\"ad80\",\"\",9,\"\",8,\"\",6,\"\"],\n[\"ae40\",\"\",6,\"\",7,\"\",4,\"\"],\n[\"ae80\",\"\",7,\"\",6,\"\",4,\"\"],\n[\"af40\",\"\",4,\"\"],\n[\"af80\",\"\"],\n[\"b040\",\"\",6,\"\",5,\"\",4,\"\",6,\"\",7,\"\"],\n[\"b080\",\"\",7,\"\",8,\"\",9,\"\"],\n[\"b140\",\"\",4,\"\",7,\"\",10,\"\"],\n[\"b180\",\"\",4,\"\",7,\"\",7,\"\"],\n[\"b240\",\"\",11,\"\",5,\"\",11,\"\",4],\n[\"b280\",\"\",12,\"\",8,\"\",4,\"\"],\n[\"b340\",\"\",5,\"\"],\n[\"b380\",\"\",11,\"\",7,\"\",6,\"\"],\n[\"b440\",\"\",7,\"\",9],\n[\"b480\",\"\",4,\"\",5,\"\",6,\"\"],\n[\"b540\",\"\",5,\"\",9,\"\",4,\"\",14,\"\",4,\"\",8,\"\"],\n[\"b580\",\"\",6,\"\",4,\"\"],\n[\"b640\",\"\",6,\"\",11,\"\",10,\"\",4,\"\",5,\"\"],\n[\"b680\",\"\",6,\"\",4,\"\"],\n[\"b740\",\"\",14,\"\",5,\"\",9,\"\",4,\"\",16],\n[\"b780\",\"\",6,\"\"],\n[\"b840\",\"\",4,\"\",10,\"\",10,\"\",9,\"\",5,\"\"],\n[\"b880\",\"\",4,\"\"],\n[\"b940\",\"\",5,\"\",10,\"\",6,\"\"],\n[\"b980\",\"\",7,\"\"],\n[\"ba40\",\"\",4,\"\",4,\"\",7,\"\",5,\"\"],\n[\"ba80\",\"\",4,\"\",5,\"\",12,\"\",5,\"\"],\n[\"bb40\",\"\",9,\"\",36,\"\",5,\"\",9],\n[\"bb80\",\"\",6,\"\",4,\"\"],\n[\"bc40\",\"\",6,\"\",6,\"\",5,\"\",7,\"\",13,\"\",5],\n[\"bc80\",\"\",14,\"\",6,\"\"],\n[\"bd40\",\"\",54,\"\",7],\n[\"bd80\",\"\",32,\"\"],\n[\"be40\",\"\",12,\"\",6,\"\",42],\n[\"be80\",\"\",32,\"\"],\n[\"bf40\",\"\",62],\n[\"bf80\",\"\",4,\"\",4,\"\",21,\"\"],\n[\"c040\",\"\",35,\"\",23,\"\"],\n[\"c080\",\"\",6,\"\",9,\"\"],\n[\"c140\",\"\",4,\"\",7,\"\",4,\"\",4,\"\",6,\"\"],\n[\"c180\",\"\",4,\"\",4,\"\",5,\"\"],\n[\"c240\",\"\",6,\"\",5,\"\"],\n[\"c280\",\"\",13,\"\",5,\"\",11,\"\"],\n[\"c340\",\"\",5,\"\",4,\"\",6,\"\"],\n[\"c380\",\"\",12,\"\",4,\"\"],\n[\"c440\",\"\",5,\"\",4,\"\",4,\"\",5,\"\",4,\"\"],\n[\"c480\",\"\",7,\"\",5,\"\",6,\"\"],\n[\"c540\",\"\",14,\"\",4,\"\",5,\"\",4,\"\",5,\"\"],\n[\"c580\",\"\",7,\"\",7,\"\"],\n[\"c640\",\"\"],\n[\"c680\",\"\",4,\"\",9,\"\"],\n[\"c740\",\"\",4,\"\",4,\"\",6,\"\",6,\"\",6,\"\"],\n[\"c780\",\"\"],\n[\"c840\",\"\",4,\"\",5,\"\",5,\"\",7,\"\",5,\"\",7,\"\"],\n[\"c880\",\"\",6,\"\",4,\"\",4,\"\"],\n[\"c940\",\"\",4,\"\",7,\"\",12,\"\"],\n[\"c980\",\"\",4,\"\",4,\"\",10,\"\"],\n[\"ca40\",\"\",8,\"\",8,\"\",9,\"\",4,\"\",10],\n[\"ca80\",\"\",4,\"\",8,\"\"],\n[\"cb40\",\"\",6,\"\",10,\"\",6,\"\",5,\"\",6,\"\",6,\"\",4,\"\"],\n[\"cb80\",\"\",5,\"\",6,\"\",14,\"\"],\n[\"cc40\",\"\",4,\"\",10,\"\",15,\"\",13,\"\"],\n[\"cc80\",\"\",11,\"\",4,\"\",7,\"\"],\n[\"cd40\",\"\",6,\"\",6,\"\",4,\"\",5,\"\",4,\"\",4,\"\"],\n[\"cd80\",\"\"],\n[\"ce40\",\"\",6,\"\",5,\"\",7,\"\"],\n[\"ce80\",\"\",4,\"\",6,\"\",4,\"\"],\n[\"cf40\",\"\",4,\"\",4,\"\",6,\"\",9],\n[\"cf80\",\"\",5,\"\",7,\"\",4,\"\"],\n[\"d040\",\"\",13,\"\",5,\"\",5,\"\",5,\"\",6,\"\"],\n[\"d080\",\"\",4,\"\",4,\"\",5,\"\"],\n[\"d140\",\"\",4,\"\",4,\"\",6,\"\",5],\n[\"d180\",\"\",4,\"\",4,\"\",4,\"\"],\n[\"d240\",\"\",8,\"\",24,\"\",5,\"\",19,\"\"],\n[\"d280\",\"\",26,\"\"],\n[\"d340\",\"\",30,\"\",6],\n[\"d380\",\"\",4,\"\",5,\"\",21,\"\"],\n[\"d440\",\"\",31,\"\",8,\"\",21],\n[\"d480\",\"\",25,\"\",6,\"\"],\n[\"d540\",\"\",7,\"\",7,\"\",46],\n[\"d580\",\"\",32,\"\"],\n[\"d640\",\"\",34,\"\",27],\n[\"d680\",\"\",30,\"\"],\n[\"d740\",\"\",31,\"\",4,\"\",25],\n[\"d780\",\"\",24,\"\"],\n[\"d840\",\"\",8,\"\",7,\"\",5,\"\",6,\"\",6,\"\",6,\"\"],\n[\"d880\",\"\",6,\"\",20,\"\"],\n[\"d940\",\"\",62],\n[\"d980\",\"\",32,\"\"],\n[\"da40\",\"\",14,\"\",8,\"\",4,\"\",9,\"\"],\n[\"da80\",\"\",12,\"\"],\n[\"db40\",\"\",6,\"\",7,\"\",4,\"\"],\n[\"db80\",\"\",4,\"\",5,\"\",11,\"\"],\n[\"dc40\",\"\",4,\"\",6,\"\",6,\"\",11,\"\",6,\"\",7],\n[\"dc80\",\"\",10,\"\",21,\"\"],\n[\"dd40\",\"\",62],\n[\"dd80\",\"\",32,\"\"],\n[\"de40\",\"\",32,\"\"],\n[\"de80\",\"\",4,\"\"],\n[\"df40\",\"\",5,\"\",4,\"\",4,\"\",5,\"\",4,\"\",6,\"\"],\n[\"df80\",\"\",4,\"\"],\n[\"e040\",\"\",19,\"\"],\n[\"e080\",\"\",10,\"\",6,\"\",8,\"\"],\n[\"e140\",\"\",4,\"\",6,\"\",5,\"\",5,\"\"],\n[\"e180\",\"\",10,\"\",9,\"\",8,\"\"],\n[\"e240\",\"\",62],\n[\"e280\",\"\",32,\"\",5,\"\"],\n[\"e340\",\"\",45,\"\",16],\n[\"e380\",\"\",7,\"\",24,\"\"],\n[\"e440\",\"\",5,\"\",24,\"\",31],\n[\"e480\",\"\",32,\"\"],\n[\"e540\",\"\",51,\"\",10],\n[\"e580\",\"\",31,\"\"],\n[\"e640\",\"\",34,\"\",27],\n[\"e680\",\"\",29,\"\"],\n[\"e740\",\"\",7,\"\",54],\n[\"e780\",\"\",32,\"\",6,\"\",4,\"\"],\n[\"e840\",\"\",14,\"\",43,\"\"],\n[\"e880\",\"\",20,\"\"],\n[\"e940\",\"\",7,\"\",42],\n[\"e980\",\"\",32,\"\"],\n[\"ea40\",\"\",27,\"\",6,\"\"],\n[\"ea80\",\"\",4,\"\",12,\"\"],\n[\"eb40\",\"\",9,\"\",7,\"\",9,\"\",6,\"\"],\n[\"eb80\",\"\",4,\"\"],\n[\"ec40\",\"\",8,\"\",4,\"\",18,\"\",7],\n[\"ec80\",\"\",4,\"\",7,\"\",4,\"\",4,\"\"],\n[\"ed40\",\"\",6,\"\",46],\n[\"ed80\",\"\",4,\"\",23,\"\"],\n[\"ee40\",\"\",62],\n[\"ee80\",\"\",32,\"\",4,\"\",6,\"\"],\n[\"ef40\",\"\",5,\"\",37,\"\",4],\n[\"ef80\",\"\",30,\"\",4,\"\",8,\"\"],\n[\"f040\",\"\",4,\"\",28,\"\",26],\n[\"f080\",\"\",9,\"\",12,\"\",4,\"\",6,\"\"],\n[\"f140\",\"\",10,\"\",47],\n[\"f180\",\"\",32,\"\"],\n[\"f240\",\"\",62],\n[\"f280\",\"\",32,\"\"],\n[\"f340\",\"\",17,\"\",6,\"\",4,\"\"],\n[\"f380\",\"\",8,\"\",6,\"\"],\n[\"f440\",\"\",5,\"\",10,\"\",10,\"\",7,\"\",5],\n[\"f480\",\"\",32,\"\"],\n[\"f540\",\"\",62],\n[\"f580\",\"\",32,\"\"],\n[\"f640\",\"\",62],\n[\"f680\",\"\",32,\"\",5,\"\",5,\"\",4,\"\",7,\"\"],\n[\"f740\",\"\",62],\n[\"f780\",\"\",4,\"\",4,\"\"],\n[\"f840\",\"\",62],\n[\"f880\",\"\",32],\n[\"f940\",\"\",62],\n[\"f980\",\"\",32],\n[\"fa40\",\"\",62],\n[\"fa80\",\"\",32],\n[\"fb40\",\"\",27,\"\",9,\"\"],\n[\"fb80\",\"\",5,\"\",8,\"\",5,\"\"],\n[\"fc40\",\"\",8,\"\",4,\"\",8,\"\",6],\n[\"fc80\",\"\",4,\"\",5,\"\",8,\"\"],\n[\"fd40\",\"\",4,\"\",4,\"\",10,\"\",38],\n[\"fd80\",\"\",5,\"\",11,\"\",4,\"\"],\n[\"fe40\",\"\"]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/gbk-added.json":{"source":"[\n[\"a140\",\"\",62],\n[\"a180\",\"\",32],\n[\"a240\",\"\",62],\n[\"a280\",\"\",32],\n[\"a2ab\",\"\",5],\n[\"a2e3\",\"\"],\n[\"a2ef\",\"\"],\n[\"a2fd\",\"\"],\n[\"a340\",\"\",62],\n[\"a380\",\"\",31,\"\"],\n[\"a440\",\"\",62],\n[\"a480\",\"\",32],\n[\"a4f4\",\"\",10],\n[\"a540\",\"\",62],\n[\"a580\",\"\",32],\n[\"a5f7\",\"\",7],\n[\"a640\",\"\",62],\n[\"a680\",\"\",32],\n[\"a6b9\",\"\",7],\n[\"a6d9\",\"\",6],\n[\"a6ec\",\"\"],\n[\"a6f3\",\"\"],\n[\"a6f6\",\"\",8],\n[\"a740\",\"\",62],\n[\"a780\",\"\",32],\n[\"a7c2\",\"\",14],\n[\"a7f2\",\"\",12],\n[\"a896\",\"\",10],\n[\"a8bc\",\"\"],\n[\"a8bf\",\"\"],\n[\"a8c1\",\"\"],\n[\"a8ea\",\"\",20],\n[\"a958\",\"\"],\n[\"a95b\",\"\"],\n[\"a95d\",\"\"],\n[\"a989\",\"\",11],\n[\"a997\",\"\",12],\n[\"a9f0\",\"\",14],\n[\"aaa1\",\"\",93],\n[\"aba1\",\"\",93],\n[\"aca1\",\"\",93],\n[\"ada1\",\"\",93],\n[\"aea1\",\"\",93],\n[\"afa1\",\"\",93],\n[\"d7fa\",\"\",4],\n[\"f8a1\",\"\",93],\n[\"f9a1\",\"\",93],\n[\"faa1\",\"\",93],\n[\"fba1\",\"\",93],\n[\"fca1\",\"\",93],\n[\"fda1\",\"\",93],\n[\"fe50\",\"\"],\n[\"fe80\",\"\",6,\"\",93]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/gb18030-ranges.json":{"source":"{\"uChars\":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],\"gbChars\":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/cp949.json":{"source":"[\n[\"0\",\"\\u0000\",127],\n[\"8141\",\"\",4,\"\",6,\"\"],\n[\"8161\",\"\",9,\"\",5,\"\"],\n[\"8181\",\"\",18,\"\",4,\"\",6,\"\",5,\"\",6,\"\",7,\"\",7,\"\",4,\"\",4,\"\"],\n[\"8241\",\"\",7,\"\",5],\n[\"8261\",\"\",6,\"\",5,\"\"],\n[\"8281\",\"\",7,\"\",7,\"\",4,\"\",10,\"\",5,\"\",17,\"\",7,\"\",6,\"\",7,\"\",18],\n[\"8341\",\"\",5,\"\",5,\"\",7],\n[\"8361\",\"\",18,\"\"],\n[\"8381\",\"\",4,\"\",6,\"\",5,\"\",5,\"\",46,\"\",6,\"\",5,\"\",8],\n[\"8441\",\"\",5,\"\",8],\n[\"8461\",\"\",18],\n[\"8481\",\"\",7,\"\",6,\"\",5,\"\",10,\"\",5,\"\",18,\"\",5,\"\",6,\"\",5,\"\",26,\"\"],\n[\"8541\",\"\",5,\"\",4,\"\",6,\"\",4],\n[\"8561\",\"\",5,\"\",5,\"\",6,\"\"],\n[\"8581\",\"\",6,\"\",6,\"\",9,\"\",26,\"\",29,\"\",6,\"\",5,\"\"],\n[\"8641\",\"\",6,\"\",5,\"\"],\n[\"8661\",\"\",6,\"\",10],\n[\"8681\",\"\",22,\"\",4,\"\",6,\"\",5,\"\",6,\"\",22,\"\",4,\"\"],\n[\"8741\",\"\",9,\"\",15],\n[\"8761\",\"\",18,\"\"],\n[\"8781\",\"\",5,\"\",7,\"\",7,\"\",5,\"\",6,\"\",5,\"\",18,\"\",6,\"\",26,\"\",6,\"\",4],\n[\"8841\",\"\",4,\"\",5,\"\",6,\"\",4],\n[\"8861\",\"\",4,\"\"],\n[\"8881\",\"\",15,\"\",4,\"\",6,\"\",5,\"\",54,\"\"],\n[\"8941\",\"\",6,\"\",5,\"\"],\n[\"8961\",\"\",10,\"\",5,\"\"],\n[\"8981\",\"\",21,\"\",18,\"\",18,\"\",6,\"\",6,\"\",7,\"\",15],\n[\"8a41\",\"\",10,\"\",6,\"\"],\n[\"8a61\",\"\",4,\"\",18,\"\"],\n[\"8a81\",\"\",4,\"\",19,\"\",5,\"\",7,\"\",5,\"\",6,\"\",5,\"\",4,\"\",5,\"\",26,\"\"],\n[\"8b41\",\"\",5,\"\",4,\"\",6,\"\"],\n[\"8b61\",\"\",6,\"\",8],\n[\"8b81\",\"\",52,\"\",4,\"\",6,\"\",5,\"\",18,\"\",18],\n[\"8c41\",\"\",15,\"\",4],\n[\"8c61\",\"\",6,\"\",5,\"\",6,\"\",5],\n[\"8c81\",\"\",12,\"\",26,\"\",50,\"\",5,\"\",16],\n[\"8d41\",\"\",16,\"\",8],\n[\"8d61\",\"\",17,\"\"],\n[\"8d81\",\"\",4,\"\",33,\"\",6,\"\",7,\"\",6,\"\",9,\"\",6,\"\",5,\"\",6,\"\"],\n[\"8e41\",\"\",6,\"\",5,\"\",8],\n[\"8e61\",\"\",4,\"\",19],\n[\"8e81\",\"\",13,\"\",6,\"\",4,\"\",6,\"\",5,\"\",6,\"\",5,\"\",11,\"\",7,\"\",6,\"\",5,\"\",7],\n[\"8f41\",\"\",7,\"\",17],\n[\"8f61\",\"\",7,\"\",6,\"\",4],\n[\"8f81\",\"\",5,\"\",7,\"\",5,\"\",6,\"\",5,\"\",18,\"\",6,\"\",26,\"\",6,\"\",5],\n[\"9041\",\"\",6,\"\",5,\"\"],\n[\"9061\",\"\",5,\"\",15],\n[\"9081\",\"\",12,\"\",6,\"\",5,\"\",4,\"\",6,\"\",4,\"\",5,\"\",11,\"\",33,\"\"],\n[\"9141\",\"\",6,\"\",5],\n[\"9161\",\"\",9,\"\",5],\n[\"9181\",\"\",20,\"\",4,\"\",5,\"\",14,\"\",33,\"\",7,\"\",5,\"\",6],\n[\"9241\",\"\",7,\"\",4,\"\"],\n[\"9261\",\"\",7,\"\",7,\"\",4],\n[\"9281\",\"\",21,\"\",18,\"\",6,\"\",7,\"\",6,\"\",35,\"\"],\n[\"9341\",\"\",4,\"\"],\n[\"9361\",\"\",6,\"\",8],\n[\"9381\",\"\",37,\"\",4,\"\",4,\"\",6,\"\",5,\"\",7,\"\",22,\"\"],\n[\"9441\",\"\",5,\"\",5,\"\",8],\n[\"9461\",\"\",5,\"\",6,\"\",12],\n[\"9481\",\"\",5,\"\",6,\"\",6,\"\",9,\"\",22,\"\",4,\"\",6,\"\",10,\"\",6,\"\",24],\n[\"9541\",\"\",11,\"\",5,\"\"],\n[\"9561\",\"\",6,\"\",5,\"\"],\n[\"9581\",\"\",6,\"\",35,\"\",4,\"\",4,\"\",4,\"\",6,\"\",5,\"\",13,\"\",14],\n[\"9641\",\"\",23,\"\"],\n[\"9661\",\"\",6,\"\",5,\"\",8],\n[\"9681\",\"\",10,\"\",5,\"\",13,\"\",33,\"\",6,\"\",44],\n[\"9741\",\"\",16,\"\",8],\n[\"9761\",\"\",17,\"\",7],\n[\"9781\",\"\",11,\"\",5,\"\",6,\"\",89,\"\"],\n[\"9841\",\"\",16,\"\",5,\"\"],\n[\"9861\",\"\",6,\"\",15],\n[\"9881\",\"\",21,\"\",6,\"\",5,\"\",4,\"\",6,\"\",5,\"\",6,\"\",5,\"\",6,\"\",5,\"\"],\n[\"9941\",\"\",6,\"\",5,\"\"],\n[\"9961\",\"\",6,\"\",5,\"\"],\n[\"9981\",\"\",8,\"\",5,\"\",4,\"\",11,\"\",5,\"\",6,\"\",6,\"\",6,\"\",7,\"\",6,\"\",5,\"\"],\n[\"9a41\",\"\",16],\n[\"9a61\",\"\",6,\"\",6,\"\"],\n[\"9a81\",\"\",4,\"\",6,\"\",5,\"\",5,\"\",6,\"\",5,\"\",5,\"\",33,\"\",5,\"\",6,\"\"],\n[\"9b41\",\"\",6,\"\",8],\n[\"9b61\",\"\",17,\"\",7],\n[\"9b81\",\"\",25,\"\",4,\"\",5,\"\",50,\"\",22,\"\"],\n[\"9c41\",\"\",4,\"\",5,\"\",5],\n[\"9c61\",\"\",8,\"\",6,\"\",9],\n[\"9c81\",\"\",8,\"\",6,\"\",6,\"\",9,\"\",26,\"\",6,\"\",5,\"\",18,\"\",6,\"\",12],\n[\"9d41\",\"\",13,\"\",8],\n[\"9d61\",\"\",25],\n[\"9d81\",\"\",8,\"\",5,\"\",9,\"\",6,\"\",10,\"\",6,\"\",5,\"\",6,\"\",5,\"\"],\n[\"9e41\",\"\",7,\"\",9,\"\"],\n[\"9e61\",\"\",4,\"\",6,\"\"],\n[\"9e81\",\"\",6,\"\",6,\"\",6,\"\",5,\"\",10,\"\",5,\"\",6,\"\",5,\"\",6,\"\"],\n[\"9f41\",\"\",5,\"\",4,\"\",5,\"\"],\n[\"9f61\",\"\",6,\"\",5,\"\"],\n[\"9f81\",\"\",4,\"\",5,\"\",6,\"\",5,\"\",6,\"\",4,\"\",6,\"\",7,\"\",4,\"\",4,\"\"],\n[\"a041\",\"\",5,\"\",6,\"\"],\n[\"a061\",\"\",5,\"\",13],\n[\"a081\",\"\",4,\"\",4,\"\",4,\"\",6,\"\",5,\"\",6,\"\",5,\"\",26,\"\",4,\"\",5,\"\",7,\"\"],\n[\"a141\",\"\",18,\"\"],\n[\"a161\",\"\",6,\"\",5,\"\"],\n[\"a181\",\"\",14,\"\",5,\"\",4,\"\",9,\"\"],\n[\"a241\",\"\",5,\"\",18],\n[\"a261\",\"\",6,\"\",18],\n[\"a281\",\"\",7,\"\",6,\"\",7,\"\"],\n[\"a341\",\"\",6,\"\",10,\"\"],\n[\"a361\",\"\",6,\"\",16],\n[\"a381\",\"\",16,\"\",4,\"\",58,\"\",32,\"\"],\n[\"a441\",\"\",5,\"\"],\n[\"a461\",\"\",5,\"\",12],\n[\"a481\",\"\",28,\"\",93],\n[\"a541\",\"\",4,\"\",6,\"\",5,\"\"],\n[\"a561\",\"\",17,\"\",5,\"\"],\n[\"a581\",\"\",16,\"\",14,\"\",9],\n[\"a5b0\",\"\",9],\n[\"a5c1\",\"\",16,\"\",6],\n[\"a5e1\",\"\",16,\"\",6],\n[\"a641\",\"\",19,\"\"],\n[\"a661\",\"\",5,\"\",5,\"\",6],\n[\"a681\",\"\",6,\"\",18,\"\",7],\n[\"a741\",\"\",4,\"\",6,\"\",7],\n[\"a761\",\"\",22,\"\"],\n[\"a781\",\"\",6,\"\",5,\"\",7,\"\",9,\"\",9,\"\",4,\"\",5,\"\",4,\"\"],\n[\"a841\",\"\",10,\"\",14],\n[\"a861\",\"\",18,\"\",6],\n[\"a881\",\"\",19,\"\",11,\"\"],\n[\"a8a6\",\"\"],\n[\"a8a8\",\"\"],\n[\"a8b1\",\"\",27,\"\",25,\"\",14,\"\"],\n[\"a941\",\"\",14,\"\",10],\n[\"a961\",\"\",18],\n[\"a981\",\"\",14,\"\",6,\"\",27,\"\",25,\"\",14,\"\"],\n[\"aa41\",\"\",6,\"\",4,\"\"],\n[\"aa61\",\"\",4,\"\",5,\"\",6,\"\"],\n[\"aa81\",\"\",29,\"\",82],\n[\"ab41\",\"\",6,\"\",5,\"\"],\n[\"ab61\",\"\",6,\"\",5,\"\",5],\n[\"ab81\",\"\",8,\"\",6,\"\",12,\"\",85],\n[\"ac41\",\"\",5,\"\",6,\"\"],\n[\"ac61\",\"\",11,\"\",4],\n[\"ac81\",\"\",28,\"\",5,\"\",25],\n[\"acd1\",\"\",5,\"\",25],\n[\"ad41\",\"\",6,\"\",5,\"\",7],\n[\"ad61\",\"\",6,\"\",10,\"\"],\n[\"ad81\",\"\",5,\"\",18,\"\"],\n[\"ae41\",\"\",5,\"\",16],\n[\"ae61\",\"\",5,\"\",6,\"\",4],\n[\"ae81\",\"\",6,\"\",5,\"\"],\n[\"af41\",\"\",19],\n[\"af61\",\"\",13,\"\",5,\"\"],\n[\"af81\",\"\",5,\"\",6,\"\",5,\"\"],\n[\"b041\",\"\",5,\"\",5,\"\",12],\n[\"b061\",\"\",5,\"\",19],\n[\"b081\",\"\",13,\"\",6,\"\",5,\"\",7,\"\",4,\"\"],\n[\"b141\",\"\",6,\"\",5,\"\"],\n[\"b161\",\"\",6,\"\",5,\"\",11],\n[\"b181\",\"\",14,\"\",6,\"\"],\n[\"b241\",\"\",6,\"\",5,\"\"],\n[\"b261\",\"\",18,\"\",5,\"\"],\n[\"b281\",\"\",5,\"\",18,\"\",6,\"\"],\n[\"b341\",\"\",19,\"\"],\n[\"b361\",\"\",5,\"\",5,\"\",5],\n[\"b381\",\"\",5,\"\",5,\"\",19,\"\",4,\"\"],\n[\"b441\",\"\",5,\"\",6,\"\",5],\n[\"b461\",\"\",6,\"\",10,\"\"],\n[\"b481\",\"\",6,\"\",18,\"\",4,\"\",4,\"\"],\n[\"b541\",\"\",14,\"\",5],\n[\"b561\",\"\",5,\"\",5,\"\",4],\n[\"b581\",\"\",6,\"\",5,\"\",11,\"\"],\n[\"b641\",\"\",7,\"\",17],\n[\"b661\",\"\",15,\"\"],\n[\"b681\",\"\",5,\"\",6,\"\",5,\"\"],\n[\"b741\",\"\",13,\"\",6,\"\"],\n[\"b761\",\"\",20,\"\"],\n[\"b781\",\"\",6,\"\",14,\"\"],\n[\"b841\",\"\",7,\"\",17],\n[\"b861\",\"\",8,\"\",13],\n[\"b881\",\"\",5,\"\",24,\"\",4,\"\"],\n[\"b941\",\"\",6,\"\",5,\"\"],\n[\"b961\",\"\",14,\"\",6,\"\"],\n[\"b981\",\"\",22,\"\",4,\"\",4,\"\"],\n[\"ba41\",\"\",5,\"\",6,\"\"],\n[\"ba61\",\"\",5,\"\",4,\"\",5],\n[\"ba81\",\"\",6,\"\",9,\"\"],\n[\"bb41\",\"\",4,\"\",5,\"\",4,\"\"],\n[\"bb61\",\"\",6,\"\",5,\"\"],\n[\"bb81\",\"\",31,\"\"],\n[\"bc41\",\"\",17,\"\"],\n[\"bc61\",\"\",5,\"\",6,\"\"],\n[\"bc81\",\"\",4,\"\",6,\"\",5,\"\",5,\"\",4,\"\"],\n[\"bd41\",\"\",7,\"\",7,\"\"],\n[\"bd61\",\"\",5,\"\",13],\n[\"bd81\",\"\",5,\"\",25,\"\"],\n[\"be41\",\"\",7,\"\",14],\n[\"be61\",\"\",7,\"\",7,\"\"],\n[\"be81\",\"\",4,\"\",4,\"\",5,\"\",8,\"\",6,\"\"],\n[\"bf41\",\"\",10,\"\",14],\n[\"bf61\",\"\",18,\"\"],\n[\"bf81\",\"\",5,\"\",7,\"\",6,\"\",5,\"\"],\n[\"c041\",\"\",5,\"\",6,\"\",5],\n[\"c061\",\"\",25],\n[\"c081\",\"\",6,\"\",5,\"\",7,\"\"],\n[\"c141\",\"\",5,\"\",6,\"\"],\n[\"c161\",\"\",19,\"\"],\n[\"c181\",\"\",31,\"\"],\n[\"c241\",\"\",4,\"\",5,\"\"],\n[\"c261\",\"\",4,\"\",5,\"\",6,\"\"],\n[\"c281\",\"\",5,\"\",7,\"\",9,\"\"],\n[\"c341\",\"\",4],\n[\"c361\",\"\",4,\"\",5,\"\",11],\n[\"c381\",\"\",5,\"\",7,\"\",5,\"\"],\n[\"c441\",\"\",7,\"\",7,\"\"],\n[\"c461\",\"\",5,\"\",4],\n[\"c481\",\"\",5,\"\",11,\"\"],\n[\"c541\",\"\",6,\"\",5,\"\"],\n[\"c561\",\"\",6,\"\",5,\"\",4],\n[\"c581\",\"\",6,\"\",5,\"\"],\n[\"c641\",\"\",6,\"\",5],\n[\"c6a1\",\"\"],\n[\"c7a1\",\"\"],\n[\"c8a1\",\"\"],\n[\"caa1\",\"\"],\n[\"cba1\",\"\"],\n[\"cca1\",\"\"],\n[\"cda1\",\"\"],\n[\"cea1\",\"\"],\n[\"cfa1\",\"\"],\n[\"d0a1\",\"\"],\n[\"d1a1\",\"\",5,\"\",4,\"\"],\n[\"d2a1\",\"\",4,\"\",5,\"\",10,\"\",7,\"\",5,\"\"],\n[\"d3a1\",\"\"],\n[\"d4a1\",\"\"],\n[\"d5a1\",\"\"],\n[\"d6a1\",\"\"],\n[\"d7a1\",\"\"],\n[\"d8a1\",\"\"],\n[\"d9a1\",\"\"],\n[\"daa1\",\"\"],\n[\"dba1\",\"\"],\n[\"dca1\",\"\"],\n[\"dda1\",\"\"],\n[\"dea1\",\"\"],\n[\"dfa1\",\"\"],\n[\"e0a1\",\"\"],\n[\"e1a1\",\"\"],\n[\"e2a1\",\"\"],\n[\"e3a1\",\"\"],\n[\"e4a1\",\"\"],\n[\"e5a1\",\"\"],\n[\"e6a1\",\"\"],\n[\"e7a1\",\"\"],\n[\"e8a1\",\"\"],\n[\"e9a1\",\"\"],\n[\"eaa1\",\"\"],\n[\"eba1\",\"\"],\n[\"eca1\",\"\"],\n[\"eda1\",\"\"],\n[\"eea1\",\"\"],\n[\"efa1\",\"\"],\n[\"f0a1\",\"\"],\n[\"f1a1\",\"\"],\n[\"f2a1\",\"\"],\n[\"f3a1\",\"\"],\n[\"f4a1\",\"\"],\n[\"f5a1\",\"\"],\n[\"f6a1\",\"\"],\n[\"f7a1\",\"\"],\n[\"f8a1\",\"\"],\n[\"f9a1\",\"\"],\n[\"faa1\",\"\"],\n[\"fba1\",\"\"],\n[\"fca1\",\"\"],\n[\"fda1\",\"\"]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/cp950.json":{"source":"[\n[\"0\",\"\\u0000\",127],\n[\"a140\",\"\"],\n[\"a1a1\",\"\",4,\"\"],\n[\"a240\",\"\",7,\"\"],\n[\"a2a1\",\"\",9,\"\",9,\"\",8,\"\",25,\"\",21],\n[\"a340\",\"\",16,\"\",6,\"\",16,\"\",6,\"\",10],\n[\"a3a1\",\"\",25,\"\"],\n[\"a3e1\",\"\"],\n[\"a440\",\"\"],\n[\"a4a1\",\"\"],\n[\"a540\",\"\"],\n[\"a5a1\",\"\"],\n[\"a640\",\"\"],\n[\"a6a1\",\"\"],\n[\"a740\",\"\"],\n[\"a7a1\",\"\"],\n[\"a840\",\"\"],\n[\"a8a1\",\"\"],\n[\"a940\",\"\"],\n[\"a9a1\",\"\"],\n[\"aa40\",\"\"],\n[\"aaa1\",\"\"],\n[\"ab40\",\"\"],\n[\"aba1\",\"\"],\n[\"ac40\",\"\"],\n[\"aca1\",\"\"],\n[\"ad40\",\"\"],\n[\"ada1\",\"\"],\n[\"ae40\",\"\"],\n[\"aea1\",\"\"],\n[\"af40\",\"\"],\n[\"afa1\",\"\"],\n[\"b040\",\"\"],\n[\"b0a1\",\"\"],\n[\"b140\",\"\"],\n[\"b1a1\",\"\"],\n[\"b240\",\"\"],\n[\"b2a1\",\"\"],\n[\"b340\",\"\"],\n[\"b3a1\",\"\"],\n[\"b440\",\"\"],\n[\"b4a1\",\"\"],\n[\"b540\",\"\"],\n[\"b5a1\",\"\"],\n[\"b640\",\"\"],\n[\"b6a1\",\"\"],\n[\"b740\",\"\"],\n[\"b7a1\",\"\"],\n[\"b840\",\"\"],\n[\"b8a1\",\"\"],\n[\"b940\",\"\"],\n[\"b9a1\",\"\"],\n[\"ba40\",\"\"],\n[\"baa1\",\"\"],\n[\"bb40\",\"\"],\n[\"bba1\",\"\"],\n[\"bc40\",\"\"],\n[\"bca1\",\"\"],\n[\"bd40\",\"\"],\n[\"bda1\",\"\"],\n[\"be40\",\"\"],\n[\"bea1\",\"\"],\n[\"bf40\",\"\"],\n[\"bfa1\",\"\"],\n[\"c040\",\"\"],\n[\"c0a1\",\"\"],\n[\"c140\",\"\"],\n[\"c1a1\",\"\"],\n[\"c240\",\"\"],\n[\"c2a1\",\"\"],\n[\"c340\",\"\"],\n[\"c3a1\",\"\"],\n[\"c440\",\"\"],\n[\"c4a1\",\"\"],\n[\"c540\",\"\"],\n[\"c5a1\",\"\"],\n[\"c640\",\"\"],\n[\"c940\",\"\"],\n[\"c9a1\",\"\"],\n[\"ca40\",\"\"],\n[\"caa1\",\"\"],\n[\"cb40\",\"\"],\n[\"cba1\",\"\"],\n[\"cc40\",\"\"],\n[\"cca1\",\"\"],\n[\"cd40\",\"\"],\n[\"cda1\",\"\"],\n[\"ce40\",\"\"],\n[\"cea1\",\"\"],\n[\"cf40\",\"\"],\n[\"cfa1\",\"\"],\n[\"d040\",\"\"],\n[\"d0a1\",\"\"],\n[\"d140\",\"\"],\n[\"d1a1\",\"\"],\n[\"d240\",\"\"],\n[\"d2a1\",\"\"],\n[\"d340\",\"\"],\n[\"d3a1\",\"\"],\n[\"d440\",\"\"],\n[\"d4a1\",\"\"],\n[\"d540\",\"\"],\n[\"d5a1\",\"\"],\n[\"d640\",\"\"],\n[\"d6a1\",\"\"],\n[\"d740\",\"\"],\n[\"d7a1\",\"\"],\n[\"d840\",\"\"],\n[\"d8a1\",\"\"],\n[\"d940\",\"\"],\n[\"d9a1\",\"\"],\n[\"da40\",\"\"],\n[\"daa1\",\"\"],\n[\"db40\",\"\"],\n[\"dba1\",\"\"],\n[\"dc40\",\"\"],\n[\"dca1\",\"\"],\n[\"dd40\",\"\"],\n[\"dda1\",\"\"],\n[\"de40\",\"\"],\n[\"dea1\",\"\"],\n[\"df40\",\"\"],\n[\"dfa1\",\"\"],\n[\"e040\",\"\"],\n[\"e0a1\",\"\"],\n[\"e140\",\"\"],\n[\"e1a1\",\"\"],\n[\"e240\",\"\"],\n[\"e2a1\",\"\"],\n[\"e340\",\"\"],\n[\"e3a1\",\"\"],\n[\"e440\",\"\"],\n[\"e4a1\",\"\"],\n[\"e540\",\"\"],\n[\"e5a1\",\"\"],\n[\"e640\",\"\"],\n[\"e6a1\",\"\"],\n[\"e740\",\"\"],\n[\"e7a1\",\"\"],\n[\"e840\",\"\"],\n[\"e8a1\",\"\"],\n[\"e940\",\"\"],\n[\"e9a1\",\"\"],\n[\"ea40\",\"\"],\n[\"eaa1\",\"\"],\n[\"eb40\",\"\"],\n[\"eba1\",\"\"],\n[\"ec40\",\"\"],\n[\"eca1\",\"\"],\n[\"ed40\",\"\"],\n[\"eda1\",\"\"],\n[\"ee40\",\"\"],\n[\"eea1\",\"\"],\n[\"ef40\",\"\"],\n[\"efa1\",\"\"],\n[\"f040\",\"\"],\n[\"f0a1\",\"\"],\n[\"f140\",\"\"],\n[\"f1a1\",\"\"],\n[\"f240\",\"\"],\n[\"f2a1\",\"\"],\n[\"f340\",\"\"],\n[\"f3a1\",\"\"],\n[\"f440\",\"\"],\n[\"f4a1\",\"\"],\n[\"f540\",\"\"],\n[\"f5a1\",\"\"],\n[\"f640\",\"\"],\n[\"f6a1\",\"\"],\n[\"f740\",\"\"],\n[\"f7a1\",\"\"],\n[\"f840\",\"\"],\n[\"f8a1\",\"\"],\n[\"f940\",\"\"],\n[\"f9a1\",\"\"]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/big5-added.json":{"source":"[\n[\"8740\",\"\"],\n[\"8767\",\"\"],\n[\"87a1\",\"\"],\n[\"8840\",\"\",4,\"\"],\n[\"88a1\",\"\"],\n[\"8940\",\"\"],\n[\"8943\",\"\"],\n[\"8946\",\"\"],\n[\"894c\",\"\"],\n[\"89a1\",\"\"],\n[\"89ab\",\"\"],\n[\"89b0\",\"\"],\n[\"89b5\",\"\"],\n[\"89c1\",\"\"],\n[\"89c5\",\"\"],\n[\"8a40\",\"\"],\n[\"8a43\",\"\"],\n[\"8a64\",\"\"],\n[\"8a76\",\"\"],\n[\"8aa1\",\"\"],\n[\"8aac\",\"\"],\n[\"8ab2\",\"\"],\n[\"8abb\",\"\"],\n[\"8ac9\",\"\"],\n[\"8ace\",\"\"],\n[\"8adf\",\"\"],\n[\"8af6\",\"\"],\n[\"8b40\",\"\"],\n[\"8b55\",\"\"],\n[\"8ba1\",\"\"],\n[\"8bde\",\"\"],\n[\"8c40\",\"\"],\n[\"8ca1\",\"\"],\n[\"8ca7\",\"\"],\n[\"8cc9\",\"\"],\n[\"8cce\",\"\"],\n[\"8ce6\",\"\"],\n[\"8d40\",\"\"],\n[\"8d42\",\"\"],\n[\"8da1\",\"\"],\n[\"8e40\",\"\"],\n[\"8ea1\",\"\"],\n[\"8f40\",\"\"],\n[\"8fa1\",\"\"],\n[\"9040\",\"\"],\n[\"90a1\",\"\"],\n[\"9140\",\"\"],\n[\"91a1\",\"\"],\n[\"9240\",\"\"],\n[\"92a1\",\"\"],\n[\"9340\",\"\"],\n[\"93a1\",\"\"],\n[\"9440\",\"\"],\n[\"94a1\",\"\"],\n[\"9540\",\"\"],\n[\"95a1\",\"\"],\n[\"9640\",\"\"],\n[\"96a1\",\"\"],\n[\"9740\",\"\"],\n[\"97a1\",\"\"],\n[\"9840\",\"\"],\n[\"98a1\",\"\"],\n[\"9940\",\"\"],\n[\"99a1\",\"\"],\n[\"9a40\",\"\"],\n[\"9aa1\",\"\"],\n[\"9b40\",\"\"],\n[\"9b62\",\"\"],\n[\"9ba1\",\"\"],\n[\"9c40\",\"\"],\n[\"9ca1\",\"\"],\n[\"9d40\",\"\"],\n[\"9da1\",\"\"],\n[\"9e40\",\"\"],\n[\"9ea1\",\"\"],\n[\"9ead\",\"\"],\n[\"9ec5\",\"\"],\n[\"9ef5\",\"\"],\n[\"9f40\",\"\"],\n[\"9f4f\",\"\"],\n[\"9fa1\",\"\"],\n[\"9fae\",\"\"],\n[\"9fb2\",\"\"],\n[\"9fc1\",\"\"],\n[\"9fc9\",\"\"],\n[\"9fdb\",\"\"],\n[\"9fe7\",\"\"],\n[\"9feb\",\"\"],\n[\"9ff0\",\"\"],\n[\"a040\",\"\"],\n[\"a055\",\"\"],\n[\"a058\",\"\"],\n[\"a05b\",\"\"],\n[\"a063\",\"\"],\n[\"a073\",\"\"],\n[\"a0a1\",\"\"],\n[\"a0a6\",\"\"],\n[\"a0ae\",\"\"],\n[\"a0b0\",\"\"],\n[\"a0d4\",\"\"],\n[\"a0e2\",\"\"],\n[\"a3c0\",\"\",31,\"\"],\n[\"c6a1\",\"\",9,\"\",9,\"\",9,\"\",23],\n[\"c740\",\"\",58,\"\"],\n[\"c7a1\",\"\",81,\"\",5,\"\",4],\n[\"c840\",\"\",26,\"\",25,\"\"],\n[\"c8a1\",\"\"],\n[\"c8cd\",\"\"],\n[\"c8f5\",\"\"],\n[\"f9fe\",\"\"],\n[\"fa40\",\"\"],\n[\"faa1\",\"\"],\n[\"fb40\",\"\"],\n[\"fba1\",\"\"],\n[\"fc40\",\"\"],\n[\"fca1\",\"\"],\n[\"fd40\",\"\"],\n[\"fda1\",\"\"],\n[\"fe40\",\"\"],\n[\"fea1\",\"\"]\n]\n","deps":{}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/dbcs-data.js":{"source":"\n// Description of supported double byte encodings and aliases.\n// Tables are not require()-d until they are needed to speed up library load.\n// require()-s are direct to support Browserify.\n\nmodule.exports = {\n    \n    // == Japanese/ShiftJIS ====================================================\n    // All japanese encodings are based on JIS X set of standards:\n    // JIS X 0201 - Single-byte encoding of ASCII +  + Kana chars at 0xA1-0xDF.\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \n    //              Has several variations in 1978, 1983, 1990 and 1997.\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\n    //              2 planes, first is superset of 0208, second - revised 0212.\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\n\n    // Byte encodings are:\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\n    //               0x00-0x7F       - lower part of 0201\n    //               0x8E, 0xA1-0xDF - upper part of 0201\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\n    //               Used as-is in ISO2022 family.\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \n    //                0201-1976 Roman, 0208-1978, 0208-1983.\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\n    //\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\n    //\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\n\n\n    'shiftjis': {\n        type: '_dbcs',\n        table: function() { return require('./tables/shiftjis.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\n    },\n    'csshiftjis': 'shiftjis',\n    'mskanji': 'shiftjis',\n    'sjis': 'shiftjis',\n    'windows31j': 'shiftjis',\n    'xsjis': 'shiftjis',\n    'windows932': 'shiftjis',\n    '932': 'shiftjis',\n    'cp932': 'shiftjis',\n\n    'eucjp': {\n        type: '_dbcs',\n        table: function() { return require('./tables/eucjp.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n    },\n\n    // TODO: KDDI extension to Shift_JIS\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\n\n    // == Chinese/GBK ==========================================================\n    // http://en.wikipedia.org/wiki/GBK\n\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\n    'gb2312': 'cp936',\n    'gb231280': 'cp936',\n    'gb23121980': 'cp936',\n    'csgb2312': 'cp936',\n    'csiso58gb231280': 'cp936',\n    'euccn': 'cp936',\n    'isoir58': 'gbk',\n\n    // Microsoft's CP936 is a subset and approximation of GBK.\n    // TODO: Euro = 0x80 in cp936, but not in GBK (where it's valid but undefined)\n    'windows936': 'cp936',\n    '936': 'cp936',\n    'cp936': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json') },\n    },\n\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\n    'gbk': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n    },\n    'xgbk': 'gbk',\n\n    // GB18030 is an algorithmic extension of GBK.\n    'gb18030': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\n    },\n\n    'chinese': 'gb18030',\n\n    // TODO: Support GB18030 (~27000 chars + whole unicode mapping, cp54936)\n    // http://icu-project.org/docs/papers/gb18030.html\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\n\n    // == Korean ===============================================================\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\n    'windows949': 'cp949',\n    '949': 'cp949',\n    'cp949': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp949.json') },\n    },\n\n    'cseuckr': 'cp949',\n    'csksc56011987': 'cp949',\n    'euckr': 'cp949',\n    'isoir149': 'cp949',\n    'korean': 'cp949',\n    'ksc56011987': 'cp949',\n    'ksc56011989': 'cp949',\n    'ksc5601': 'cp949',\n\n\n    // == Big5/Taiwan/Hong Kong ================================================\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\n    // Variations, in roughly number of defined chars:\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\n    //    Plus, it has 4 combining sequences.\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\n    // \n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\n\n    'windows950': 'cp950',\n    '950': 'cp950',\n    'cp950': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json') },\n    },\n\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\n    'big5': 'big5hkscs',\n    'big5hkscs': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\n    },\n\n    'cnbig5': 'big5hkscs',\n    'csbig5': 'big5hkscs',\n    'xxbig5': 'big5hkscs',\n\n};\n","deps":{"./tables/gbk-added.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/gbk-added.json","./tables/cp950.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/cp950.json","./tables/shiftjis.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/shiftjis.json","./tables/eucjp.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/eucjp.json","./tables/gb18030-ranges.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/gb18030-ranges.json","./tables/cp949.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/cp949.json","./tables/big5-added.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/big5-added.json","./tables/cp936.json":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/cp936.json"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/string_decoder/index.js":{"source":"// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar Buffer = require('buffer').Buffer;\n\nvar isBufferEncoding = Buffer.isEncoding\n  || function(encoding) {\n       switch (encoding && encoding.toLowerCase()) {\n         case 'hex': case 'utf8': case 'utf-8': case 'ascii': case 'binary': case 'base64': case 'ucs2': case 'ucs-2': case 'utf16le': case 'utf-16le': case 'raw': return true;\n         default: return false;\n       }\n     }\n\n\nfunction assertEncoding(encoding) {\n  if (encoding && !isBufferEncoding(encoding)) {\n    throw new Error('Unknown encoding: ' + encoding);\n  }\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters. CESU-8 is handled as part of the UTF-8 encoding.\n//\n// @TODO Handling all encodings inside a single object makes it very difficult\n// to reason about this code, so it should be split up in the future.\n// @TODO There should be a utf8-strict encoding that rejects invalid UTF-8 code\n// points as used by CESU-8.\nvar StringDecoder = exports.StringDecoder = function(encoding) {\n  this.encoding = (encoding || 'utf8').toLowerCase().replace(/[-_]/, '');\n  assertEncoding(encoding);\n  switch (this.encoding) {\n    case 'utf8':\n      // CESU-8 represents each of Surrogate Pair by 3-bytes\n      this.surrogateSize = 3;\n      break;\n    case 'ucs2':\n    case 'utf16le':\n      // UTF-16 represents each of Surrogate Pair by 2-bytes\n      this.surrogateSize = 2;\n      this.detectIncompleteChar = utf16DetectIncompleteChar;\n      break;\n    case 'base64':\n      // Base-64 stores 3 bytes in 4 chars, and pads the remainder.\n      this.surrogateSize = 3;\n      this.detectIncompleteChar = base64DetectIncompleteChar;\n      break;\n    default:\n      this.write = passThroughWrite;\n      return;\n  }\n\n  // Enough space to store all bytes of a single character. UTF-8 needs 4\n  // bytes, but CESU-8 may require up to 6 (3 bytes per surrogate).\n  this.charBuffer = new Buffer(6);\n  // Number of bytes received for the current incomplete multi-byte character.\n  this.charReceived = 0;\n  // Number of bytes expected for the current incomplete multi-byte character.\n  this.charLength = 0;\n};\n\n\n// write decodes the given buffer and returns it as JS string that is\n// guaranteed to not contain any partial multi-byte characters. Any partial\n// character found at the end of the buffer is buffered up, and will be\n// returned when calling write again with the remaining bytes.\n//\n// Note: Converting a Buffer containing an orphan surrogate to a String\n// currently works, but converting a String to a Buffer (via `new Buffer`, or\n// Buffer#write) will replace incomplete surrogates with the unicode\n// replacement character. See https://codereview.chromium.org/121173009/ .\nStringDecoder.prototype.write = function(buffer) {\n  var charStr = '';\n  // if our last write ended with an incomplete multibyte character\n  while (this.charLength) {\n    // determine how many remaining bytes this buffer has to offer for this char\n    var available = (buffer.length >= this.charLength - this.charReceived) ?\n        this.charLength - this.charReceived :\n        buffer.length;\n\n    // add the new bytes to the char buffer\n    buffer.copy(this.charBuffer, this.charReceived, 0, available);\n    this.charReceived += available;\n\n    if (this.charReceived < this.charLength) {\n      // still not enough chars in this buffer? wait for more ...\n      return '';\n    }\n\n    // remove bytes belonging to the current character from the buffer\n    buffer = buffer.slice(available, buffer.length);\n\n    // get the character that was split\n    charStr = this.charBuffer.slice(0, this.charLength).toString(this.encoding);\n\n    // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n    var charCode = charStr.charCodeAt(charStr.length - 1);\n    if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n      this.charLength += this.surrogateSize;\n      charStr = '';\n      continue;\n    }\n    this.charReceived = this.charLength = 0;\n\n    // if there are no more bytes in this buffer, just emit our char\n    if (buffer.length === 0) {\n      return charStr;\n    }\n    break;\n  }\n\n  // determine and set charLength / charReceived\n  this.detectIncompleteChar(buffer);\n\n  var end = buffer.length;\n  if (this.charLength) {\n    // buffer the incomplete character bytes we got\n    buffer.copy(this.charBuffer, 0, buffer.length - this.charReceived, end);\n    end -= this.charReceived;\n  }\n\n  charStr += buffer.toString(this.encoding, 0, end);\n\n  var end = charStr.length - 1;\n  var charCode = charStr.charCodeAt(end);\n  // CESU-8: lead surrogate (D800-DBFF) is also the incomplete character\n  if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n    var size = this.surrogateSize;\n    this.charLength += size;\n    this.charReceived += size;\n    this.charBuffer.copy(this.charBuffer, size, 0, size);\n    buffer.copy(this.charBuffer, 0, 0, size);\n    return charStr.substring(0, end);\n  }\n\n  // or just emit the charStr\n  return charStr;\n};\n\n// detectIncompleteChar determines if there is an incomplete UTF-8 character at\n// the end of the given buffer. If so, it sets this.charLength to the byte\n// length that character, and sets this.charReceived to the number of bytes\n// that are available for this character.\nStringDecoder.prototype.detectIncompleteChar = function(buffer) {\n  // determine how many bytes we have to check at the end of this buffer\n  var i = (buffer.length >= 3) ? 3 : buffer.length;\n\n  // Figure out if one of the last i bytes of our buffer announces an\n  // incomplete char.\n  for (; i > 0; i--) {\n    var c = buffer[buffer.length - i];\n\n    // See http://en.wikipedia.org/wiki/UTF-8#Description\n\n    // 110XXXXX\n    if (i == 1 && c >> 5 == 0x06) {\n      this.charLength = 2;\n      break;\n    }\n\n    // 1110XXXX\n    if (i <= 2 && c >> 4 == 0x0E) {\n      this.charLength = 3;\n      break;\n    }\n\n    // 11110XXX\n    if (i <= 3 && c >> 3 == 0x1E) {\n      this.charLength = 4;\n      break;\n    }\n  }\n  this.charReceived = i;\n};\n\nStringDecoder.prototype.end = function(buffer) {\n  var res = '';\n  if (buffer && buffer.length)\n    res = this.write(buffer);\n\n  if (this.charReceived) {\n    var cr = this.charReceived;\n    var buf = this.charBuffer;\n    var enc = this.encoding;\n    res += buf.slice(0, cr).toString(enc);\n  }\n\n  return res;\n};\n\nfunction passThroughWrite(buffer) {\n  return buffer.toString(this.encoding);\n}\n\nfunction utf16DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 2;\n  this.charLength = this.charReceived ? 2 : 0;\n}\n\nfunction base64DetectIncompleteChar(buffer) {\n  this.charReceived = buffer.length % 3;\n  this.charLength = this.charReceived ? 3 : 0;\n}\n","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/internal.js":{"source":"(function (Buffer){\n\n// Export Node.js internal encodings.\n\nvar utf16lebom = new Buffer([0xFF, 0xFE]);\n\nmodule.exports = {\n    // Encodings\n    utf8:   { type: \"_internal\", enc: \"utf8\" },\n    cesu8:  { type: \"_internal\", enc: \"utf8\" },\n    unicode11utf8: { type: \"_internal\", enc: \"utf8\" },\n    ucs2:   { type: \"_internal\", enc: \"ucs2\", bom: utf16lebom },\n    utf16le:{ type: \"_internal\", enc: \"ucs2\", bom: utf16lebom },\n    binary: { type: \"_internal\", enc: \"binary\" },\n    base64: { type: \"_internal\", enc: \"base64\" },\n    hex:    { type: \"_internal\", enc: \"hex\" },\n\n    // Codec.\n    _internal: function(options) {\n        if (!options || !options.enc)\n            throw new Error(\"Internal codec is called without encoding type.\")\n\n        return {\n            encoder: options.enc == \"base64\" ? encoderBase64 : encoderInternal,\n            decoder: decoderInternal,\n\n            enc: options.enc,\n            bom: options.bom,\n        };\n    },\n};\n\n// We use node.js internal decoder. It's signature is the same as ours.\nvar StringDecoder = require('string_decoder').StringDecoder;\n\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\n    StringDecoder.prototype.end = function() {};\n\nfunction decoderInternal() {\n    return new StringDecoder(this.enc);\n}\n\n// Encoder is mostly trivial\n\nfunction encoderInternal() {\n    return {\n        write: encodeInternal,\n        end: function() {},\n        \n        enc: this.enc,\n    }\n}\n\nfunction encodeInternal(str) {\n    return new Buffer(str, this.enc);\n}\n\n\n// Except base64 encoder, which must keep its state.\n\nfunction encoderBase64() {\n    return {\n        write: encodeBase64Write,\n        end: encodeBase64End,\n\n        prevStr: '',\n    };\n}\n\nfunction encodeBase64Write(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n\n    return new Buffer(str, \"base64\");\n}\n\nfunction encodeBase64End() {\n    return new Buffer(this.prevStr, \"base64\");\n}\n\n\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9ub2RlX21vZHVsZXMvaWNvbnYtbGl0ZS9lbmNvZGluZ3MvaW50ZXJuYWwuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIEV4cG9ydCBOb2RlLmpzIGludGVybmFsIGVuY29kaW5ncy5cblxudmFyIHV0ZjE2bGVib20gPSBuZXcgQnVmZmVyKFsweEZGLCAweEZFXSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAgIC8vIEVuY29kaW5nc1xuICAgIHV0Zjg6ICAgeyB0eXBlOiBcIl9pbnRlcm5hbFwiLCBlbmM6IFwidXRmOFwiIH0sXG4gICAgY2VzdTg6ICB7IHR5cGU6IFwiX2ludGVybmFsXCIsIGVuYzogXCJ1dGY4XCIgfSxcbiAgICB1bmljb2RlMTF1dGY4OiB7IHR5cGU6IFwiX2ludGVybmFsXCIsIGVuYzogXCJ1dGY4XCIgfSxcbiAgICB1Y3MyOiAgIHsgdHlwZTogXCJfaW50ZXJuYWxcIiwgZW5jOiBcInVjczJcIiwgYm9tOiB1dGYxNmxlYm9tIH0sXG4gICAgdXRmMTZsZTp7IHR5cGU6IFwiX2ludGVybmFsXCIsIGVuYzogXCJ1Y3MyXCIsIGJvbTogdXRmMTZsZWJvbSB9LFxuICAgIGJpbmFyeTogeyB0eXBlOiBcIl9pbnRlcm5hbFwiLCBlbmM6IFwiYmluYXJ5XCIgfSxcbiAgICBiYXNlNjQ6IHsgdHlwZTogXCJfaW50ZXJuYWxcIiwgZW5jOiBcImJhc2U2NFwiIH0sXG4gICAgaGV4OiAgICB7IHR5cGU6IFwiX2ludGVybmFsXCIsIGVuYzogXCJoZXhcIiB9LFxuXG4gICAgLy8gQ29kZWMuXG4gICAgX2ludGVybmFsOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucyB8fCAhb3B0aW9ucy5lbmMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnRlcm5hbCBjb2RlYyBpcyBjYWxsZWQgd2l0aG91dCBlbmNvZGluZyB0eXBlLlwiKVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBlbmNvZGVyOiBvcHRpb25zLmVuYyA9PSBcImJhc2U2NFwiID8gZW5jb2RlckJhc2U2NCA6IGVuY29kZXJJbnRlcm5hbCxcbiAgICAgICAgICAgIGRlY29kZXI6IGRlY29kZXJJbnRlcm5hbCxcblxuICAgICAgICAgICAgZW5jOiBvcHRpb25zLmVuYyxcbiAgICAgICAgICAgIGJvbTogb3B0aW9ucy5ib20sXG4gICAgICAgIH07XG4gICAgfSxcbn07XG5cbi8vIFdlIHVzZSBub2RlLmpzIGludGVybmFsIGRlY29kZXIuIEl0J3Mgc2lnbmF0dXJlIGlzIHRoZSBzYW1lIGFzIG91cnMuXG52YXIgU3RyaW5nRGVjb2RlciA9IHJlcXVpcmUoJ3N0cmluZ19kZWNvZGVyJykuU3RyaW5nRGVjb2RlcjtcblxuaWYgKCFTdHJpbmdEZWNvZGVyLnByb3RvdHlwZS5lbmQpIC8vIE5vZGUgdjAuOCBkb2Vzbid0IGhhdmUgdGhpcyBtZXRob2QuXG4gICAgU3RyaW5nRGVjb2Rlci5wcm90b3R5cGUuZW5kID0gZnVuY3Rpb24oKSB7fTtcblxuZnVuY3Rpb24gZGVjb2RlckludGVybmFsKCkge1xuICAgIHJldHVybiBuZXcgU3RyaW5nRGVjb2Rlcih0aGlzLmVuYyk7XG59XG5cbi8vIEVuY29kZXIgaXMgbW9zdGx5IHRyaXZpYWxcblxuZnVuY3Rpb24gZW5jb2RlckludGVybmFsKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHdyaXRlOiBlbmNvZGVJbnRlcm5hbCxcbiAgICAgICAgZW5kOiBmdW5jdGlvbigpIHt9LFxuICAgICAgICBcbiAgICAgICAgZW5jOiB0aGlzLmVuYyxcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVuY29kZUludGVybmFsKHN0cikge1xuICAgIHJldHVybiBuZXcgQnVmZmVyKHN0ciwgdGhpcy5lbmMpO1xufVxuXG5cbi8vIEV4Y2VwdCBiYXNlNjQgZW5jb2Rlciwgd2hpY2ggbXVzdCBrZWVwIGl0cyBzdGF0ZS5cblxuZnVuY3Rpb24gZW5jb2RlckJhc2U2NCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogZW5jb2RlQmFzZTY0V3JpdGUsXG4gICAgICAgIGVuZDogZW5jb2RlQmFzZTY0RW5kLFxuXG4gICAgICAgIHByZXZTdHI6ICcnLFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGVuY29kZUJhc2U2NFdyaXRlKHN0cikge1xuICAgIHN0ciA9IHRoaXMucHJldlN0ciArIHN0cjtcbiAgICB2YXIgY29tcGxldGVRdWFkcyA9IHN0ci5sZW5ndGggLSAoc3RyLmxlbmd0aCAlIDQpO1xuICAgIHRoaXMucHJldlN0ciA9IHN0ci5zbGljZShjb21wbGV0ZVF1YWRzKTtcbiAgICBzdHIgPSBzdHIuc2xpY2UoMCwgY29tcGxldGVRdWFkcyk7XG5cbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihzdHIsIFwiYmFzZTY0XCIpO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVCYXNlNjRFbmQoKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIodGhpcy5wcmV2U3RyLCBcImJhc2U2NFwiKTtcbn1cblxuIl19","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js","string_decoder":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/string_decoder/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/index.js":{"source":"\n// Update this array if you add/rename/remove files in this directory.\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\nvar modules = [\n    require(\"./internal\"),\n    require(\"./utf16\"),\n    require(\"./utf7\"),\n    require(\"./sbcs-codec\"),\n    require(\"./sbcs-data\"),\n    require(\"./sbcs-data-generated\"),\n    require(\"./dbcs-codec\"),\n    require(\"./dbcs-data\"),\n];\n\n// Put all encoding/alias/codec definitions to single object and export it. \nfor (var i = 0; i < modules.length; i++) {\n    var module = modules[i];\n    for (var enc in module)\n        if (Object.prototype.hasOwnProperty.call(module, enc))\n            exports[enc] = module[enc];\n}\n","deps":{"./sbcs-data":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/sbcs-data.js","./sbcs-data-generated":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/sbcs-data-generated.js","./utf16":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/utf16.js","./utf7":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/utf7.js","./sbcs-codec":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/sbcs-codec.js","./dbcs-codec":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/dbcs-codec.js","./internal":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/internal.js","./dbcs-data":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/dbcs-data.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/lib/index.js":{"source":"(function (process,Buffer){\n\nvar iconv = module.exports;\n\n// All codecs and aliases are kept here, keyed by encoding name/alias.\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\niconv.encodings = null;\n\n// Characters emitted in case of error.\niconv.defaultCharUnicode = '';\niconv.defaultCharSingleByte = '?';\n\n// Public API.\niconv.encode = function encode(str, encoding, options) {\n    str = \"\" + (str || \"\"); // Ensure string.\n\n    var encoder = iconv.getCodec(encoding).encoder(options);\n\n    var res = encoder.write(str);\n    var trail = encoder.end();\n    \n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\n}\n\niconv.decode = function decode(buf, encoding, options) {\n    if (typeof buf === 'string') {\n        if (!iconv.skipDecodeWarning) {\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\n            iconv.skipDecodeWarning = true;\n        }\n\n        buf = new Buffer(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\n    }\n\n    var decoder = iconv.getCodec(encoding).decoder(options);\n\n    var res = decoder.write(buf);\n    var trail = decoder.end();\n\n    return (trail && trail.length > 0) ? (res + trail) : res;\n}\n\niconv.encodingExists = function encodingExists(enc) {\n    try {\n        iconv.getCodec(enc);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Legacy aliases to convert functions\niconv.toEncoding = iconv.encode;\niconv.fromEncoding = iconv.decode;\n\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\niconv._codecDataCache = {};\niconv.getCodec = function getCodec(encoding) {\n    if (!iconv.encodings)\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\n    \n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    var enc = (''+encoding).toLowerCase().replace(/[^0-9a-z]|:\\d{4}$/g, \"\");\n\n    // Traverse iconv.encodings to find actual codec.\n    var codecData, codecOptions;\n    while (true) {\n        codecData = iconv._codecDataCache[enc];\n        if (codecData)\n            return codecData;\n\n        var codec = iconv.encodings[enc];\n\n        switch (typeof codec) {\n            case \"string\": // Direct alias to other encoding.\n                enc = codec;\n                break;\n\n            case \"object\": // Alias with options. Can be layered.\n                if (!codecOptions) {\n                    codecOptions = codec;\n                    codecOptions.encodingName = enc;\n                }\n                else {\n                    for (var key in codec)\n                        codecOptions[key] = codec[key];\n                }\n\n                enc = codec.type;\n                break;\n\n            case \"function\": // Codec itself.\n                if (!codecOptions)\n                    codecOptions = { encodingName: enc };\n                codecOptions.iconv = iconv;\n\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\n                // It'll be called only once (for each different options object).\n                codecData = codec.call(iconv.encodings, codecOptions);\n\n                iconv._codecDataCache[codecOptions.encodingName] = codecData; // Save it to be reused later.\n                return codecData;\n\n            default:\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\n        }\n    }\n}\n\n// Load extensions in Node. All of them are omitted in Browserify build via 'browser' field in package.json.\nvar nodeVer = typeof process !== 'undefined' && process.versions && process.versions.node;\nif (nodeVer) {\n\n    // Load streaming support in Node v0.10+\n    var nodeVerArr = nodeVer.split(\".\").map(Number);\n    if (nodeVerArr[0] > 0 || nodeVerArr[1] >= 10) {\n        require(\"./streams\")(iconv);\n    }\n\n    // Load Node primitive extensions.\n    require(\"./extend-node\")(iconv);\n}\n\n\n}).call(this,require('_process'),require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9ub2RlX21vZHVsZXMvaWNvbnYtbGl0ZS9saWIvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiXG52YXIgaWNvbnYgPSBtb2R1bGUuZXhwb3J0cztcblxuLy8gQWxsIGNvZGVjcyBhbmQgYWxpYXNlcyBhcmUga2VwdCBoZXJlLCBrZXllZCBieSBlbmNvZGluZyBuYW1lL2FsaWFzLlxuLy8gVGhleSBhcmUgbGF6eSBsb2FkZWQgaW4gYGljb252LmdldENvZGVjYCBmcm9tIGBlbmNvZGluZ3MvaW5kZXguanNgLlxuaWNvbnYuZW5jb2RpbmdzID0gbnVsbDtcblxuLy8gQ2hhcmFjdGVycyBlbWl0dGVkIGluIGNhc2Ugb2YgZXJyb3IuXG5pY29udi5kZWZhdWx0Q2hhclVuaWNvZGUgPSAn77+9Jztcbmljb252LmRlZmF1bHRDaGFyU2luZ2xlQnl0ZSA9ICc/JztcblxuLy8gUHVibGljIEFQSS5cbmljb252LmVuY29kZSA9IGZ1bmN0aW9uIGVuY29kZShzdHIsIGVuY29kaW5nLCBvcHRpb25zKSB7XG4gICAgc3RyID0gXCJcIiArIChzdHIgfHwgXCJcIik7IC8vIEVuc3VyZSBzdHJpbmcuXG5cbiAgICB2YXIgZW5jb2RlciA9IGljb252LmdldENvZGVjKGVuY29kaW5nKS5lbmNvZGVyKG9wdGlvbnMpO1xuXG4gICAgdmFyIHJlcyA9IGVuY29kZXIud3JpdGUoc3RyKTtcbiAgICB2YXIgdHJhaWwgPSBlbmNvZGVyLmVuZCgpO1xuICAgIFxuICAgIHJldHVybiAodHJhaWwgJiYgdHJhaWwubGVuZ3RoID4gMCkgPyBCdWZmZXIuY29uY2F0KFtyZXMsIHRyYWlsXSkgOiByZXM7XG59XG5cbmljb252LmRlY29kZSA9IGZ1bmN0aW9uIGRlY29kZShidWYsIGVuY29kaW5nLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghaWNvbnYuc2tpcERlY29kZVdhcm5pbmcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ljb252LWxpdGUgd2FybmluZzogZGVjb2RlKCktaW5nIHN0cmluZ3MgaXMgZGVwcmVjYXRlZC4gUmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL2FzaHR1Y2hraW4vaWNvbnYtbGl0ZS93aWtpL1VzZS1CdWZmZXJzLXdoZW4tZGVjb2RpbmcnKTtcbiAgICAgICAgICAgIGljb252LnNraXBEZWNvZGVXYXJuaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1ZiA9IG5ldyBCdWZmZXIoXCJcIiArIChidWYgfHwgXCJcIiksIFwiYmluYXJ5XCIpOyAvLyBFbnN1cmUgYnVmZmVyLlxuICAgIH1cblxuICAgIHZhciBkZWNvZGVyID0gaWNvbnYuZ2V0Q29kZWMoZW5jb2RpbmcpLmRlY29kZXIob3B0aW9ucyk7XG5cbiAgICB2YXIgcmVzID0gZGVjb2Rlci53cml0ZShidWYpO1xuICAgIHZhciB0cmFpbCA9IGRlY29kZXIuZW5kKCk7XG5cbiAgICByZXR1cm4gKHRyYWlsICYmIHRyYWlsLmxlbmd0aCA+IDApID8gKHJlcyArIHRyYWlsKSA6IHJlcztcbn1cblxuaWNvbnYuZW5jb2RpbmdFeGlzdHMgPSBmdW5jdGlvbiBlbmNvZGluZ0V4aXN0cyhlbmMpIHtcbiAgICB0cnkge1xuICAgICAgICBpY29udi5nZXRDb2RlYyhlbmMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8vIExlZ2FjeSBhbGlhc2VzIHRvIGNvbnZlcnQgZnVuY3Rpb25zXG5pY29udi50b0VuY29kaW5nID0gaWNvbnYuZW5jb2RlO1xuaWNvbnYuZnJvbUVuY29kaW5nID0gaWNvbnYuZGVjb2RlO1xuXG4vLyBTZWFyY2ggZm9yIGEgY29kZWMgaW4gaWNvbnYuZW5jb2RpbmdzLiBDYWNoZSBjb2RlYyBkYXRhIGluIGljb252Ll9jb2RlY0RhdGFDYWNoZS5cbmljb252Ll9jb2RlY0RhdGFDYWNoZSA9IHt9O1xuaWNvbnYuZ2V0Q29kZWMgPSBmdW5jdGlvbiBnZXRDb2RlYyhlbmNvZGluZykge1xuICAgIGlmICghaWNvbnYuZW5jb2RpbmdzKVxuICAgICAgICBpY29udi5lbmNvZGluZ3MgPSByZXF1aXJlKFwiLi4vZW5jb2RpbmdzXCIpOyAvLyBMYXp5IGxvYWQgYWxsIGVuY29kaW5nIGRlZmluaXRpb25zLlxuICAgIFxuICAgIC8vIENhbm9uaWNhbGl6ZSBlbmNvZGluZyBuYW1lOiBzdHJpcCBhbGwgbm9uLWFscGhhbnVtZXJpYyBjaGFycyBhbmQgYXBwZW5kZWQgeWVhci5cbiAgICB2YXIgZW5jID0gKCcnK2VuY29kaW5nKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1teMC05YS16XXw6XFxkezR9JC9nLCBcIlwiKTtcblxuICAgIC8vIFRyYXZlcnNlIGljb252LmVuY29kaW5ncyB0byBmaW5kIGFjdHVhbCBjb2RlYy5cbiAgICB2YXIgY29kZWNEYXRhLCBjb2RlY09wdGlvbnM7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgY29kZWNEYXRhID0gaWNvbnYuX2NvZGVjRGF0YUNhY2hlW2VuY107XG4gICAgICAgIGlmIChjb2RlY0RhdGEpXG4gICAgICAgICAgICByZXR1cm4gY29kZWNEYXRhO1xuXG4gICAgICAgIHZhciBjb2RlYyA9IGljb252LmVuY29kaW5nc1tlbmNdO1xuXG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGNvZGVjKSB7XG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6IC8vIERpcmVjdCBhbGlhcyB0byBvdGhlciBlbmNvZGluZy5cbiAgICAgICAgICAgICAgICBlbmMgPSBjb2RlYztcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBcIm9iamVjdFwiOiAvLyBBbGlhcyB3aXRoIG9wdGlvbnMuIENhbiBiZSBsYXllcmVkLlxuICAgICAgICAgICAgICAgIGlmICghY29kZWNPcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVjT3B0aW9ucyA9IGNvZGVjO1xuICAgICAgICAgICAgICAgICAgICBjb2RlY09wdGlvbnMuZW5jb2RpbmdOYW1lID0gZW5jO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIGNvZGVjKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZWNPcHRpb25zW2tleV0gPSBjb2RlY1trZXldO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVuYyA9IGNvZGVjLnR5cGU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJmdW5jdGlvblwiOiAvLyBDb2RlYyBpdHNlbGYuXG4gICAgICAgICAgICAgICAgaWYgKCFjb2RlY09wdGlvbnMpXG4gICAgICAgICAgICAgICAgICAgIGNvZGVjT3B0aW9ucyA9IHsgZW5jb2RpbmdOYW1lOiBlbmMgfTtcbiAgICAgICAgICAgICAgICBjb2RlY09wdGlvbnMuaWNvbnYgPSBpY29udjtcblxuICAgICAgICAgICAgICAgIC8vIFRoZSBjb2RlYyBmdW5jdGlvbiBtdXN0IGxvYWQgYWxsIHRhYmxlcyBhbmQgcmV0dXJuIG9iamVjdCB3aXRoIC5lbmNvZGVyIGFuZCAuZGVjb2RlciBtZXRob2RzLlxuICAgICAgICAgICAgICAgIC8vIEl0J2xsIGJlIGNhbGxlZCBvbmx5IG9uY2UgKGZvciBlYWNoIGRpZmZlcmVudCBvcHRpb25zIG9iamVjdCkuXG4gICAgICAgICAgICAgICAgY29kZWNEYXRhID0gY29kZWMuY2FsbChpY29udi5lbmNvZGluZ3MsIGNvZGVjT3B0aW9ucyk7XG5cbiAgICAgICAgICAgICAgICBpY29udi5fY29kZWNEYXRhQ2FjaGVbY29kZWNPcHRpb25zLmVuY29kaW5nTmFtZV0gPSBjb2RlY0RhdGE7IC8vIFNhdmUgaXQgdG8gYmUgcmV1c2VkIGxhdGVyLlxuICAgICAgICAgICAgICAgIHJldHVybiBjb2RlY0RhdGE7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRW5jb2Rpbmcgbm90IHJlY29nbml6ZWQ6ICdcIiArIGVuY29kaW5nICsgXCInIChzZWFyY2hlZCBhczogJ1wiK2VuYytcIicpXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBMb2FkIGV4dGVuc2lvbnMgaW4gTm9kZS4gQWxsIG9mIHRoZW0gYXJlIG9taXR0ZWQgaW4gQnJvd3NlcmlmeSBidWlsZCB2aWEgJ2Jyb3dzZXInIGZpZWxkIGluIHBhY2thZ2UuanNvbi5cbnZhciBub2RlVmVyID0gdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MudmVyc2lvbnMgJiYgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlO1xuaWYgKG5vZGVWZXIpIHtcblxuICAgIC8vIExvYWQgc3RyZWFtaW5nIHN1cHBvcnQgaW4gTm9kZSB2MC4xMCtcbiAgICB2YXIgbm9kZVZlckFyciA9IG5vZGVWZXIuc3BsaXQoXCIuXCIpLm1hcChOdW1iZXIpO1xuICAgIGlmIChub2RlVmVyQXJyWzBdID4gMCB8fCBub2RlVmVyQXJyWzFdID49IDEwKSB7XG4gICAgICAgIHJlcXVpcmUoXCIuL3N0cmVhbXNcIikoaWNvbnYpO1xuICAgIH1cblxuICAgIC8vIExvYWQgTm9kZSBwcmltaXRpdmUgZXh0ZW5zaW9ucy5cbiAgICByZXF1aXJlKFwiLi9leHRlbmQtbm9kZVwiKShpY29udik7XG59XG5cbiJdfQ==","deps":{"_process":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process/browser.js","buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js","./streams":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve/empty.js","./extend-node":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve/empty.js","../encodings":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/lib/encoding.js":{"source":"(function (Buffer){\n'use strict';\n\nvar iconvLite = require('iconv-lite');\nvar Iconv;\n\ntry {\n    // this is to fool browserify so it doesn't try (in vain) to install iconv.\n    var iconv_package = 'iconv';\n    Iconv = require(iconv_package).Iconv;\n} catch (E) {\n    // node-iconv not present\n}\n\n// Expose to the world\nmodule.exports.convert = convert;\n\n/**\n * Convert encoding of an UTF-8 string or a buffer\n *\n * @param {String|Buffer} str String to be converted\n * @param {String} to Encoding to be converted to\n * @param {String} [from='UTF-8'] Encoding to be converted from\n * @param {Boolean} useLite If set to ture, force to use iconvLite\n * @return {Buffer} Encoded string\n */\nfunction convert(str, to, from, useLite) {\n    from = checkEncoding(from || 'UTF-8');\n    to = checkEncoding(to || 'UTF-8');\n    str = str || '';\n\n    var result;\n\n    if (from != 'UTF-8' && typeof str == 'string') {\n        str = new Buffer(str, 'binary');\n    }\n\n    if (from === to) {\n        if (typeof str === 'string') {\n            result = new Buffer(str);\n        } else {\n            result = str;\n        }\n    } else {\n        if (Iconv && !useLite) {\n            try {\n                result = convertIconv(str, to, from);\n            } catch (E) {\n                console.error(E);\n                try {\n                    result = convertIconvLite(str, to, from);\n                } catch (E) {\n                    console.error(E);\n                    result = str;\n                }\n            }\n        } else {\n            try {\n                result = convertIconvLite(str, to, from);\n            } catch (E) {\n                console.error(E);\n                result = str;\n            }\n        }\n    }\n\n    if (typeof result == 'string') {\n        result = new Buffer(result, 'utf-8');\n    }\n\n    return result;\n}\n\n/**\n * Convert encoding of a string with node-iconv (if available)\n *\n * @param {String|Buffer} str String to be converted\n * @param {String} to Encoding to be converted to\n * @param {String} [from='UTF-8'] Encoding to be converted from\n * @return {Buffer} Encoded string\n */\nfunction convertIconv(str, to, from) {\n    var response, iconv;\n    iconv = new Iconv(from, to + '//TRANSLIT//IGNORE');\n    response = iconv.convert(str);\n    return response.slice(0, response.length);\n}\n\n/**\n * Convert encoding of astring with iconv-lite\n *\n * @param {String|Buffer} str String to be converted\n * @param {String} to Encoding to be converted to\n * @param {String} [from='UTF-8'] Encoding to be converted from\n * @return {Buffer} Encoded string\n */\nfunction convertIconvLite(str, to, from) {\n    if (to == 'UTF-8') {\n        return iconvLite.decode(str, from);\n    } else if (from == 'UTF-8') {\n        return iconvLite.encode(str, to);\n    } else {\n        return iconvLite.encode(iconvLite.decode(str, from), to);\n    }\n}\n\n/**\n * Converts charset name if needed\n *\n * @param {String} name Character set\n * @return {String} Character set name\n */\nfunction checkEncoding(name) {\n    return (name || '').toString().trim().\n    replace(/^latin[\\-_]?(\\d+)$/i, 'ISO-8859-$1').\n    replace(/^win(?:dows)?[\\-_]?(\\d+)$/i, 'WINDOWS-$1').\n    replace(/^utf[\\-_]?(\\d+)$/i, 'UTF-$1').\n    replace(/^ks_c_5601\\-1987$/i, 'CP949').\n    replace(/^us[\\-_]?ascii$/i, 'ASCII').\n    toUpperCase();\n}\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL25vZGVfbW9kdWxlcy9lbmNvZGluZy9saWIvZW5jb2RpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgaWNvbnZMaXRlID0gcmVxdWlyZSgnaWNvbnYtbGl0ZScpO1xudmFyIEljb252O1xuXG50cnkge1xuICAgIC8vIHRoaXMgaXMgdG8gZm9vbCBicm93c2VyaWZ5IHNvIGl0IGRvZXNuJ3QgdHJ5IChpbiB2YWluKSB0byBpbnN0YWxsIGljb252LlxuICAgIHZhciBpY29udl9wYWNrYWdlID0gJ2ljb252JztcbiAgICBJY29udiA9IHJlcXVpcmUoaWNvbnZfcGFja2FnZSkuSWNvbnY7XG59IGNhdGNoIChFKSB7XG4gICAgLy8gbm9kZS1pY29udiBub3QgcHJlc2VudFxufVxuXG4vLyBFeHBvc2UgdG8gdGhlIHdvcmxkXG5tb2R1bGUuZXhwb3J0cy5jb252ZXJ0ID0gY29udmVydDtcblxuLyoqXG4gKiBDb252ZXJ0IGVuY29kaW5nIG9mIGFuIFVURi04IHN0cmluZyBvciBhIGJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEJ1ZmZlcn0gc3RyIFN0cmluZyB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0byBFbmNvZGluZyB0byBiZSBjb252ZXJ0ZWQgdG9cbiAqIEBwYXJhbSB7U3RyaW5nfSBbZnJvbT0nVVRGLTgnXSBFbmNvZGluZyB0byBiZSBjb252ZXJ0ZWQgZnJvbVxuICogQHBhcmFtIHtCb29sZWFufSB1c2VMaXRlIElmIHNldCB0byB0dXJlLCBmb3JjZSB0byB1c2UgaWNvbnZMaXRlXG4gKiBAcmV0dXJuIHtCdWZmZXJ9IEVuY29kZWQgc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGNvbnZlcnQoc3RyLCB0bywgZnJvbSwgdXNlTGl0ZSkge1xuICAgIGZyb20gPSBjaGVja0VuY29kaW5nKGZyb20gfHwgJ1VURi04Jyk7XG4gICAgdG8gPSBjaGVja0VuY29kaW5nKHRvIHx8ICdVVEYtOCcpO1xuICAgIHN0ciA9IHN0ciB8fCAnJztcblxuICAgIHZhciByZXN1bHQ7XG5cbiAgICBpZiAoZnJvbSAhPSAnVVRGLTgnICYmIHR5cGVvZiBzdHIgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgc3RyID0gbmV3IEJ1ZmZlcihzdHIsICdiaW5hcnknKTtcbiAgICB9XG5cbiAgICBpZiAoZnJvbSA9PT0gdG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBuZXcgQnVmZmVyKHN0cik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSBzdHI7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoSWNvbnYgJiYgIXVzZUxpdGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gY29udmVydEljb252KHN0ciwgdG8sIGZyb20pO1xuICAgICAgICAgICAgfSBjYXRjaCAoRSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoRSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gY29udmVydEljb252TGl0ZShzdHIsIHRvLCBmcm9tKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChFKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoRSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHN0cjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGNvbnZlcnRJY29udkxpdGUoc3RyLCB0bywgZnJvbSk7XG4gICAgICAgICAgICB9IGNhdGNoIChFKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihFKTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBzdHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlc3VsdCA9PSAnc3RyaW5nJykge1xuICAgICAgICByZXN1bHQgPSBuZXcgQnVmZmVyKHJlc3VsdCwgJ3V0Zi04Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGVuY29kaW5nIG9mIGEgc3RyaW5nIHdpdGggbm9kZS1pY29udiAoaWYgYXZhaWxhYmxlKVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEJ1ZmZlcn0gc3RyIFN0cmluZyB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0byBFbmNvZGluZyB0byBiZSBjb252ZXJ0ZWQgdG9cbiAqIEBwYXJhbSB7U3RyaW5nfSBbZnJvbT0nVVRGLTgnXSBFbmNvZGluZyB0byBiZSBjb252ZXJ0ZWQgZnJvbVxuICogQHJldHVybiB7QnVmZmVyfSBFbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBjb252ZXJ0SWNvbnYoc3RyLCB0bywgZnJvbSkge1xuICAgIHZhciByZXNwb25zZSwgaWNvbnY7XG4gICAgaWNvbnYgPSBuZXcgSWNvbnYoZnJvbSwgdG8gKyAnLy9UUkFOU0xJVC8vSUdOT1JFJyk7XG4gICAgcmVzcG9uc2UgPSBpY29udi5jb252ZXJ0KHN0cik7XG4gICAgcmV0dXJuIHJlc3BvbnNlLnNsaWNlKDAsIHJlc3BvbnNlLmxlbmd0aCk7XG59XG5cbi8qKlxuICogQ29udmVydCBlbmNvZGluZyBvZiBhc3RyaW5nIHdpdGggaWNvbnYtbGl0ZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEJ1ZmZlcn0gc3RyIFN0cmluZyB0byBiZSBjb252ZXJ0ZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSB0byBFbmNvZGluZyB0byBiZSBjb252ZXJ0ZWQgdG9cbiAqIEBwYXJhbSB7U3RyaW5nfSBbZnJvbT0nVVRGLTgnXSBFbmNvZGluZyB0byBiZSBjb252ZXJ0ZWQgZnJvbVxuICogQHJldHVybiB7QnVmZmVyfSBFbmNvZGVkIHN0cmluZ1xuICovXG5mdW5jdGlvbiBjb252ZXJ0SWNvbnZMaXRlKHN0ciwgdG8sIGZyb20pIHtcbiAgICBpZiAodG8gPT0gJ1VURi04Jykge1xuICAgICAgICByZXR1cm4gaWNvbnZMaXRlLmRlY29kZShzdHIsIGZyb20pO1xuICAgIH0gZWxzZSBpZiAoZnJvbSA9PSAnVVRGLTgnKSB7XG4gICAgICAgIHJldHVybiBpY29udkxpdGUuZW5jb2RlKHN0ciwgdG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpY29udkxpdGUuZW5jb2RlKGljb252TGl0ZS5kZWNvZGUoc3RyLCBmcm9tKSwgdG8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBjaGFyc2V0IG5hbWUgaWYgbmVlZGVkXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgQ2hhcmFjdGVyIHNldFxuICogQHJldHVybiB7U3RyaW5nfSBDaGFyYWN0ZXIgc2V0IG5hbWVcbiAqL1xuZnVuY3Rpb24gY2hlY2tFbmNvZGluZyhuYW1lKSB7XG4gICAgcmV0dXJuIChuYW1lIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKS5cbiAgICByZXBsYWNlKC9ebGF0aW5bXFwtX10/KFxcZCspJC9pLCAnSVNPLTg4NTktJDEnKS5cbiAgICByZXBsYWNlKC9ed2luKD86ZG93cyk/W1xcLV9dPyhcXGQrKSQvaSwgJ1dJTkRPV1MtJDEnKS5cbiAgICByZXBsYWNlKC9edXRmW1xcLV9dPyhcXGQrKSQvaSwgJ1VURi0kMScpLlxuICAgIHJlcGxhY2UoL15rc19jXzU2MDFcXC0xOTg3JC9pLCAnQ1A5NDknKS5cbiAgICByZXBsYWNlKC9edXNbXFwtX10/YXNjaWkkL2ksICdBU0NJSScpLlxuICAgIHRvVXBwZXJDYXNlKCk7XG59Il19","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js","iconv-lite":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/lib/index.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/mimelib.js":{"source":"(function (Buffer){\n\"use strict\";\n\nvar convert = require(\"encoding\").convert,\n    addressparser = require(\"addressparser\");\n\n/**\n * Folds a long line according to the RFC 5322 http://tools.ietf.org/html/rfc5322#section-2.1.1\n *\n * @param {String} str Mime string that might need folding\n * @param {Number} [maxLength=76] max length for a line\n * @param {Boolean} [foldAnywhere] If true, can fold at any location (ie. in base64)\n * @param {Boolean} [afterSpace] If true fold after the space (default is before)\n * @return {String} Folded string\n */\nmodule.exports.foldLine = function(str, maxLength, foldAnywhere, afterSpace, lineMargin) {\n    if (foldAnywhere) {\n        return addBase64SoftLinebreaks(str, maxLength || 76);\n    }\n    return module.exports.mimeFunctions.foldLine(str, maxLength, !! afterSpace, lineMargin);\n};\n\n/**\n * Encodes a string into mime encoded word format http://en.wikipedia.org/wiki/MIME#Encoded-Word\n *\n * @param {String} str String to be encoded\n * @param {String} encoding Encoding Q for quoted printable or B for base64\n * @param {String} [charset=\"UTF-8\"] Charset to be used\n * @param {Number} [maxLength] If set, split on maxLength\n * @return {String} Mime word encoded string\n */\nmodule.exports.encodeMimeWord = function(str, encoding, charset, maxLength) {\n    return module.exports.mimeFunctions.encodeMimeWord(str, encoding, maxLength || 0, charset);\n};\n\n/**\n * Encodes need parts of a string to mime word format\n *\n * @param {String} str String to be encoded\n * @param {String} encoding Encoding Q for quoted printable or B for base64\n * @param {Number} [maxLength] If set, split on maxLength\n * @param {String} [charset=\"UTF-8\"] Charset to be used\n * @return {String} String with possible mime word encoded parts\n */\nmodule.exports.encodeMimeWords = function(str, encoding, maxLength, charset) {\n    return module.exports.mimeFunctions.encodeMimeWords(str, encoding, maxLength || 0, charset);\n};\n\n/**\n * Decodes a string from mime encoded word\n *\n * @param {String} str Mime word encoded string\n * @return {String} Decoded string\n */\nmodule.exports.decodeMimeWord = function(str) {\n    return module.exports.mimeFunctions.decodeMimeWord(str).toString(\"utf-8\");\n};\n\n/**\n * Decodes all mime words from a string to an unencoded string\n *\n * @param {String} str String that may include mime words\n * @return {String} Unencoded string\n */\nmodule.exports.parseMimeWords = function(str) {\n    return module.exports.mimeFunctions.decodeMimeWords(str).toString(\"utf-8\");\n};\n\n/**\n * Encodes a string into Quoted-printable format. Maximum line length for the\n * encoded string is always 76+2 bytes\n *\n * @param {String} str String to be encoded into Quoted-printable\n * @param {Boolean} [mimeWord] legacy parameter, not used\n * @param {String} [charset=\"UTF-8\"] Destination charset\n * @return {String} Quoted printable encoded string\n */\nmodule.exports.encodeQuotedPrintable = function(str, mimeWord, charset) {\n    if (typeof mimeWord == \"string\" && !charset) {\n        charset = mimeWord;\n        mimeWord = undefined;\n    }\n    return module.exports.mimeFunctions.encodeQuotedPrintable(str, charset);\n};\n\n/**\n * Decodes a string from Quoted-printable format\n *\n * @param {String} str String to be decoded from Quoted-printable\n * @param {Boolean} [mimeWord] legacy parameter, not used\n * @param {String} [charset=\"UTF-8\"] Source charset\n * @return {String} Decoded string\n */\nmodule.exports.decodeQuotedPrintable = function(str, mimeWord, charset) {\n    if (typeof mimeWord == \"string\" && !charset) {\n        charset = mimeWord;\n        mimeWord = undefined;\n    }\n    charset = (charset || \"\").toString().toUpperCase().trim();\n    var decodedString = module.exports.mimeFunctions.decodeQuotedPrintable(str, \"utf-8\", charset);\n    return charset == \"BINARY\" ? decodedString : decodedString.toString(\"utf-8\");\n};\n\n/**\n * Encodes a string into Base64 format. Base64 is mime-word safe\n *\n * @param {String} str String to be encoded into Base64\n * @param {String} [charset=\"UTF-8\"] Destination charset\n * @return {String} Base64 encoded string\n */\nmodule.exports.encodeBase64 = function(str, charset) {\n    return module.exports.mimeFunctions.encodeBase64(str, charset);\n};\n\n/**\n * Decodes a string from Base64 format\n *\n * @param {String} str String to be decoded from Base64\n * @param {String} [charset=\"UTF-8\"] Source charset\n * @return {String} Decoded string\n */\nmodule.exports.decodeBase64 = function(str, charset) {\n    return module.exports.mimeFunctions.decodeBase64(str, \"utf-8\", charset).toString(\"utf-8\");\n};\n\n/**\n * Parses names and addresses from a from, to, cc or bcc line\n * For example: 'Andris Reinman <andris@tr.ee>, someone@else.com'\n * will be parsed into: [{name:\"Andris Reinman\", address:\"andris@tr.ee\"}, {address: \"someone@else.com\"}]\n *\n * @param {String|Array} addresses Address line string or an array of strings\n * @return {Array} An array of parsed e-mails addresses in the form of [{name, address}]\n */\nmodule.exports.parseAddresses = function(addresses) {\n    return [].concat.apply([], [].concat(addresses).map(addressparser)).map(function(address) {\n        address.name = module.exports.parseMimeWords(address.name);\n        if (address.group) {\n            address.group.forEach(function(groupAddress) {\n                groupAddress.name = module.exports.parseMimeWords(groupAddress.name);\n            });\n        }\n        return address;\n    });\n};\n\n/**\n * Parses header lines into an array of objects. Output: {'x-header': ['value']}\n *\n * @param {String} headers Full header part to be parsed\n * @return {Object} Parsed headers\n */\nmodule.exports.parseHeaders = function(headers) {\n    return module.exports.mimeFunctions.parseHeaderLines(headers);\n};\n\n/**\n * Parses a header line to search for additional parameters. For example\n *     parseHeaderLine('text/plain; charset=utf-8')\n * will be parsed into\n *     {defaultValue: 'text/plain', charset: 'utf-8'}\n *\n * @param {String} line Single header value without key part to be parsed\n * @return {Object} Parsed value\n */\nmodule.exports.parseHeaderLine = function(line) {\n    if (!line) {\n        return {};\n    }\n\n    var result = {}, parts = line.split(\";\"),\n        pos;\n\n    for (var i = 0, len = parts.length; i < len; i++) {\n        pos = parts[i].indexOf(\"=\");\n        if (pos < 0) {\n            result[!i ? \"defaultValue\" : \"i-\" + i] = parts[i].trim();\n        } else {\n            result[parts[i].substr(0, pos).trim().toLowerCase()] = parts[i].substr(pos + 1).trim();\n        }\n    }\n    return result;\n};\n\nmodule.exports.mimeFunctions = {\n\n    mimeEncode: function(str, toCharset, fromCharset) {\n        toCharset = toCharset || \"UTF-8\";\n        fromCharset = fromCharset || \"UTF-8\";\n\n        var buffer = convert(str || \"\", toCharset, fromCharset),\n            ranges = [\n                [0x09],\n                [0x0A],\n                [0x0D],\n                [0x20],\n                [0x21],\n                [0x23, 0x3C],\n                [0x3E],\n                [0x40, 0x5E],\n                [0x60, 0x7E]\n            ],\n            result = \"\";\n\n        for (var i = 0, len = buffer.length; i < len; i++) {\n            if (checkRanges(buffer[i], ranges)) {\n                result += String.fromCharCode(buffer[i]);\n                continue;\n            }\n            result += \"=\" + (buffer[i] < 0x10 ? \"0\" : \"\") + buffer[i].toString(16).toUpperCase();\n        }\n\n        return result;\n    },\n\n    mimeDecode: function(str, toCharset, fromCharset) {\n        str = (str || \"\").toString();\n        toCharset = toCharset || \"UTF-8\";\n        fromCharset = fromCharset || \"UTF-8\";\n\n        var encodedBytesCount = (str.match(/\\=[\\da-fA-F]{2}/g) || []).length,\n            bufferLength = str.length - encodedBytesCount * 2,\n            chr, hex,\n            buffer = new Buffer(bufferLength),\n            bufferPos = 0;\n\n        for (var i = 0, len = str.length; i < len; i++) {\n            chr = str.charAt(i);\n            if (chr == \"=\" && (hex = str.substr(i + 1, 2)) && /[\\da-fA-F]{2}/.test(hex)) {\n                buffer[bufferPos++] = parseInt(hex, 16);\n                i += 2;\n                continue;\n            }\n            buffer[bufferPos++] = chr.charCodeAt(0);\n        }\n\n        if (fromCharset.toUpperCase().trim() == \"BINARY\") {\n            return buffer;\n        }\n        return convert(buffer, toCharset, fromCharset);\n    },\n\n    encodeBase64: function(str, toCharset, fromCharset) {\n        var buffer = convert(str || \"\", toCharset, fromCharset);\n        return addSoftLinebreaks(buffer.toString(\"base64\"), \"base64\");\n    },\n\n    decodeBase64: function(str, toCharset, fromCharset) {\n        var buffer = new Buffer((str || \"\").toString(), \"base64\");\n        return convert(buffer, toCharset, fromCharset);\n    },\n\n    decodeQuotedPrintable: function(str, toCharset, fromCharset) {\n        str = (str || \"\").toString();\n        str = str.replace(/\\=(?:\\r?\\n|$)/g, \"\");\n        return this.mimeDecode(str, toCharset, fromCharset);\n    },\n\n    encodeQuotedPrintable: function(str, toCharset, fromCharset) {\n        var mimeEncodedStr = this.mimeEncode(str, toCharset, fromCharset);\n\n        // fix line breaks\n        mimeEncodedStr = mimeEncodedStr.replace(/\\r?\\n|\\r/g, function() {\n            return \"\\r\\n\";\n        }).replace(/[\\t ]+$/gm, function(spaces) {\n            return spaces.replace(/ /g, \"=20\").replace(/\\t/g, \"=09\");\n        });\n\n        return addSoftLinebreaks(mimeEncodedStr, \"qp\");\n    },\n\n    encodeMimeWord: function(str, encoding, maxLength, toCharset, fromCharset) {\n        toCharset = (toCharset || \"utf-8\").toString().toUpperCase().trim();\n        encoding = (encoding || \"Q\").toString().toUpperCase().trim().charAt(0);\n        var encodedStr;\n\n        if (maxLength && maxLength > 7 + toCharset.length) {\n            maxLength -= (7 + toCharset.length);\n        }\n\n        if (encoding == \"Q\") {\n            encodedStr = this.mimeEncode(str, toCharset, fromCharset);\n            encodedStr = encodedStr.replace(/[\\r\\n\\t_]/g, function(chr) {\n                var code = chr.charCodeAt(0);\n                return \"=\" + (code < 0x10 ? \"0\" : \"\") + code.toString(16).toUpperCase();\n            }).replace(/\\s/g, \"_\");\n        } else if (encoding == \"B\") {\n            encodedStr = convert(str || \"\", toCharset, fromCharset).toString(\"base64\").trim();\n        }\n\n        if (maxLength && encodedStr.length > maxLength) {\n            if (encoding == \"Q\") {\n                encodedStr = this.splitEncodedString(encodedStr, maxLength).join(\"?= =?\" + toCharset + \"?\" + encoding + \"?\");\n            } else {\n                encodedStr = encodedStr.replace(new RegExp(\".{\" + maxLength + \"}\", \"g\"), \"$&?= =?\" + toCharset + \"?\" + encoding + \"?\");\n                if (encodedStr.substr(-(\" =?\" + toCharset + \"?\" + encoding + \"?=\").length) == \" =?\" + toCharset + \"?\" + encoding + \"?=\") {\n                    encodedStr = encodedStr.substr(0, encodedStr.length - (\" =?\" + toCharset + \"?\" + encoding + \"?=\").length);\n                }\n                if (encodedStr.substr(-(\" =?\" + toCharset + \"?\" + encoding + \"?\").length) == \" =?\" + toCharset + \"?\" + encoding + \"?\") {\n                    encodedStr = encodedStr.substr(0, encodedStr.length - (\" =?\" + toCharset + \"?\" + encoding + \"?\").length);\n                }\n            }\n        }\n\n        return \"=?\" + toCharset + \"?\" + encoding + \"?\" + encodedStr + (encodedStr.substr(-2) == \"?=\" ? \"\" : \"?=\");\n    },\n\n    decodeMimeWord: function(str, toCharset) {\n        str = (str || \"\").toString().trim();\n\n        var fromCharset, encoding, match;\n\n        match = str.match(/^\\=\\?([\\w_\\-]+)\\?([QqBb])\\?([^\\?]*)\\?\\=$/i);\n        if (!match) {\n            return convert(str, toCharset);\n        }\n\n        fromCharset = match[1];\n        encoding = (match[2] || \"Q\").toString().toUpperCase();\n        str = (match[3] || \"\").replace(/_/g, \" \");\n\n        if (encoding == \"B\") {\n            return this.decodeBase64(str, toCharset, fromCharset);\n        } else if (encoding == \"Q\") {\n            return this.mimeDecode(str, toCharset, fromCharset);\n        } else {\n            return str;\n        }\n\n\n    },\n\n    decodeMimeWords: function(str, toCharset) {\n        var curCharset;\n\n        str = (str || \"\").toString().\n        replace(/(=\\?[^?]+\\?[QqBb]\\?[^?]+\\?=)\\s+(?==\\?[^?]+\\?[QqBb]\\?[^?]*\\?=)/g, \"$1\").\n        replace(/\\=\\?([\\w_\\-]+)\\?([QqBb])\\?[^\\?]*\\?\\=/g, (function(mimeWord, charset, encoding) {\n            curCharset = charset + encoding;\n            return this.decodeMimeWord(mimeWord);\n        }).bind(this));\n\n        return convert(str, toCharset);\n    },\n\n    foldLine: function(str, lineLengthMax, afterSpace, lineMargin) {\n        lineLengthMax = lineLengthMax || 76;\n        lineMargin = lineMargin || Math.floor(lineLengthMax / 5);\n        str = (str || \"\").toString().trim();\n\n        var pos = 0,\n            len = str.length,\n            result = \"\",\n            line, match;\n\n        while (pos < len) {\n            line = str.substr(pos, lineLengthMax);\n            if (line.length < lineLengthMax) {\n                result += line;\n                break;\n            }\n            if ((match = line.match(/^[^\\n\\r]*(\\r?\\n|\\r)/))) {\n                line = match[0];\n                result += line;\n                pos += line.length;\n                continue;\n            } else if ((match = line.substr(-lineMargin).match(/(\\s+)[^\\s]*$/))) {\n                line = line.substr(0, line.length - (match[0].length - ( !! afterSpace ? (match[1] || \"\").length : 0)));\n            } else if ((match = str.substr(pos + line.length).match(/^[^\\s]+(\\s*)/))) {\n                line = line + match[0].substr(0, match[0].length - (!afterSpace ? (match[1] || \"\").length : 0));\n            }\n            result += line;\n            pos += line.length;\n            if (pos < len) {\n                result += \"\\r\\n\";\n            }\n        }\n\n        return result;\n    },\n\n    encodeMimeWords: function(value, encoding, maxLength, toCharset, fromCharset) {\n        var decodedValue = convert((value || \"\"), \"utf-8\", fromCharset).toString(\"utf-8\"),\n            encodedValue;\n\n        encodedValue = decodedValue.replace(/([^\\s\\u0080-\\uFFFF]*[\\u0080-\\uFFFF]+[^\\s\\u0080-\\uFFFF]*(?:\\s+[^\\s\\u0080-\\uFFFF]*[\\u0080-\\uFFFF]+[^\\s\\u0080-\\uFFFF]*\\s*)?)+(?=\\s|$)/g, (function(str) {\n            return str.length ? this.encodeMimeWord(str, encoding || \"Q\", maxLength, toCharset) : \"\";\n        }).bind(this));\n\n        return encodedValue;\n    },\n\n    encodeHeaderLine: function(key, value, toCharset, fromCharset) {\n        var encodedValue = this.encodeMimeWords(value, 52, toCharset, fromCharset);\n        return this.foldLine(key + \": \" + encodedValue, 76);\n    },\n\n    parseHeaderLines: function(headers, toCharset) {\n        var lines = headers.split(/\\r?\\n|\\r/),\n            headersObj = {},\n            key, value,\n            header,\n            i, len;\n\n        for (i = lines.length - 1; i >= 0; i--) {\n            if (i && lines[i].match(/^\\s/)) {\n                lines[i - 1] += \"\\r\\n\" + lines[i];\n                lines.splice(i, 1);\n            }\n        }\n\n        for (i = 0, len = lines.length; i < len; i++) {\n            header = this.decodeHeaderLine(lines[i]);\n            key = (header[0] || \"\").toString().toLowerCase().trim();\n            value = header[1] || \"\";\n            if (!toCharset || (toCharset || \"\").toString().trim().match(/^utf[\\-_]?8$/i)) {\n                value = value.toString(\"utf-8\");\n            }\n            if (!headersObj[key]) {\n                headersObj[key] = [value];\n            } else {\n                headersObj[key].push(value);\n            }\n        }\n\n        return headersObj;\n    },\n\n    decodeHeaderLine: function(header, toCharset) {\n        var line = (header || \"\").toString().replace(/(?:\\r?\\n|\\r)[ \\t]*/g, \" \").trim(),\n            match = line.match(/^\\s*([^:]+):(.*)$/),\n            key = (match && match[1] || \"\").trim(),\n            value = (match && match[2] || \"\").trim();\n\n        value = this.decodeMimeWords(value, toCharset);\n        return [key, value];\n    },\n\n    splitEncodedString: function(str, maxlen) {\n        var curLine, match, chr, done,\n            lines = [];\n\n        while (str.length) {\n            curLine = str.substr(0, maxlen);\n\n            // move incomplete escaped char back to main\n            if ((match = curLine.match(/\\=[0-9A-F]?$/i))) {\n                curLine = curLine.substr(0, match.index);\n            }\n\n            done = false;\n            while (!done) {\n                done = true;\n                // check if not middle of a unicode char sequence\n                if ((match = str.substr(curLine.length).match(/^\\=([0-9A-F]{2})/i))) {\n                    chr = parseInt(match[1], 16);\n                    // invalid sequence, move one char back anc recheck\n                    if (chr < 0xC2 && chr > 0x7F) {\n                        curLine = curLine.substr(0, curLine.length - 3);\n                        done = false;\n                    }\n                }\n            }\n\n            if (curLine.length) {\n                lines.push(curLine);\n            }\n            str = str.substr(curLine.length);\n        }\n\n        return lines;\n    },\n\n    parseAddresses: addressparser\n\n};\n\n// Lines can't be longer that 76 + <CR><LF> = 78 bytes\n// http://tools.ietf.org/html/rfc2045#section-6.7\nfunction addSoftLinebreaks(str, encoding) {\n    var lineLengthMax = 76;\n\n    encoding = (encoding || \"base64\").toString().toLowerCase().trim();\n\n    if (encoding == \"qp\") {\n        return addQPSoftLinebreaks(str, lineLengthMax);\n    } else {\n        return addBase64SoftLinebreaks(str, lineLengthMax);\n    }\n}\n\nfunction addBase64SoftLinebreaks(base64EncodedStr, lineLengthMax) {\n    base64EncodedStr = (base64EncodedStr || \"\").toString().trim();\n    return base64EncodedStr.replace(new RegExp(\".{\" + lineLengthMax + \"}\", \"g\"), \"$&\\r\\n\").trim();\n}\n\nfunction addQPSoftLinebreaks(mimeEncodedStr, lineLengthMax) {\n    var pos = 0,\n        len = mimeEncodedStr.length,\n        match, code, line,\n        lineMargin = Math.floor(lineLengthMax / 3),\n        result = \"\";\n\n    // insert soft linebreaks where needed\n    while (pos < len) {\n        line = mimeEncodedStr.substr(pos, lineLengthMax);\n        if ((match = line.match(/\\r\\n/))) {\n            line = line.substr(0, match.index + match[0].length);\n            result += line;\n            pos += line.length;\n            continue;\n        }\n\n        if (line.substr(-1) == \"\\n\") {\n            // nothing to change here\n            result += line;\n            pos += line.length;\n            continue;\n        } else if ((match = line.substr(-lineMargin).match(/\\n.*?$/))) {\n            // truncate to nearest line break\n            line = line.substr(0, line.length - (match[0].length - 1));\n            result += line;\n            pos += line.length;\n            continue;\n        } else if (line.length > lineLengthMax - lineMargin && (match = line.substr(-lineMargin).match(/[ \\t\\.,!\\?][^ \\t\\.,!\\?]*$/))) {\n            // truncate to nearest space\n            line = line.substr(0, line.length - (match[0].length - 1));\n        } else if (line.substr(-1) == \"\\r\") {\n            line = line.substr(0, line.length - 1);\n        } else {\n            if (line.match(/\\=[\\da-f]{0,2}$/i)) {\n\n                // push incomplete encoding sequences to the next line\n                if ((match = line.match(/\\=[\\da-f]{0,1}$/i))) {\n                    line = line.substr(0, line.length - match[0].length);\n                }\n\n                // ensure that utf-8 sequences are not split\n                while (line.length > 3 && line.length < len - pos && !line.match(/^(?:=[\\da-f]{2}){1,4}$/i) && (match = line.match(/\\=[\\da-f]{2}$/ig))) {\n                    code = parseInt(match[0].substr(1, 2), 16);\n                    if (code < 128) {\n                        break;\n                    }\n\n                    line = line.substr(0, line.length - 3);\n\n                    if (code >= 0xC0) {\n                        break;\n                    }\n                }\n\n            }\n        }\n\n        if (pos + line.length < len && line.substr(-1) != \"\\n\") {\n            if (line.length == 76 && line.match(/\\=[\\da-f]{2}$/i)) {\n                line = line.substr(0, line.length - 3);\n            } else if (line.length == 76) {\n                line = line.substr(0, line.length - 1);\n            }\n            pos += line.length;\n            line += \"=\\r\\n\";\n        } else {\n            pos += line.length;\n        }\n\n        result += line;\n    }\n\n    return result;\n}\n\nfunction checkRanges(nr, ranges) {\n    for (var i = ranges.length - 1; i >= 0; i--) {\n        if (!ranges[i].length) {\n            continue;\n        }\n        if (ranges[i].length == 1 && nr == ranges[i][0]) {\n            return true;\n        }\n        if (ranges[i].length == 2 && nr >= ranges[i][0] && nr <= ranges[i][1]) {\n            return true;\n        }\n    }\n    return false;\n}\n\n}).call(this,require(\"buffer\").Buffer)\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9taW1lbGliL2xpYi9taW1lbGliLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgY29udmVydCA9IHJlcXVpcmUoXCJlbmNvZGluZ1wiKS5jb252ZXJ0LFxuICAgIGFkZHJlc3NwYXJzZXIgPSByZXF1aXJlKFwiYWRkcmVzc3BhcnNlclwiKTtcblxuLyoqXG4gKiBGb2xkcyBhIGxvbmcgbGluZSBhY2NvcmRpbmcgdG8gdGhlIFJGQyA1MzIyIGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzUzMjIjc2VjdGlvbi0yLjEuMVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgTWltZSBzdHJpbmcgdGhhdCBtaWdodCBuZWVkIGZvbGRpbmdcbiAqIEBwYXJhbSB7TnVtYmVyfSBbbWF4TGVuZ3RoPTc2XSBtYXggbGVuZ3RoIGZvciBhIGxpbmVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZvbGRBbnl3aGVyZV0gSWYgdHJ1ZSwgY2FuIGZvbGQgYXQgYW55IGxvY2F0aW9uIChpZS4gaW4gYmFzZTY0KVxuICogQHBhcmFtIHtCb29sZWFufSBbYWZ0ZXJTcGFjZV0gSWYgdHJ1ZSBmb2xkIGFmdGVyIHRoZSBzcGFjZSAoZGVmYXVsdCBpcyBiZWZvcmUpXG4gKiBAcmV0dXJuIHtTdHJpbmd9IEZvbGRlZCBzdHJpbmdcbiAqL1xubW9kdWxlLmV4cG9ydHMuZm9sZExpbmUgPSBmdW5jdGlvbihzdHIsIG1heExlbmd0aCwgZm9sZEFueXdoZXJlLCBhZnRlclNwYWNlLCBsaW5lTWFyZ2luKSB7XG4gICAgaWYgKGZvbGRBbnl3aGVyZSkge1xuICAgICAgICByZXR1cm4gYWRkQmFzZTY0U29mdExpbmVicmVha3Moc3RyLCBtYXhMZW5ndGggfHwgNzYpO1xuICAgIH1cbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMubWltZUZ1bmN0aW9ucy5mb2xkTGluZShzdHIsIG1heExlbmd0aCwgISEgYWZ0ZXJTcGFjZSwgbGluZU1hcmdpbik7XG59O1xuXG4vKipcbiAqIEVuY29kZXMgYSBzdHJpbmcgaW50byBtaW1lIGVuY29kZWQgd29yZCBmb3JtYXQgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NSU1FI0VuY29kZWQtV29yZFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHRvIGJlIGVuY29kZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbmNvZGluZyBFbmNvZGluZyBRIGZvciBxdW90ZWQgcHJpbnRhYmxlIG9yIEIgZm9yIGJhc2U2NFxuICogQHBhcmFtIHtTdHJpbmd9IFtjaGFyc2V0PVwiVVRGLThcIl0gQ2hhcnNldCB0byBiZSB1c2VkXG4gKiBAcGFyYW0ge051bWJlcn0gW21heExlbmd0aF0gSWYgc2V0LCBzcGxpdCBvbiBtYXhMZW5ndGhcbiAqIEByZXR1cm4ge1N0cmluZ30gTWltZSB3b3JkIGVuY29kZWQgc3RyaW5nXG4gKi9cbm1vZHVsZS5leHBvcnRzLmVuY29kZU1pbWVXb3JkID0gZnVuY3Rpb24oc3RyLCBlbmNvZGluZywgY2hhcnNldCwgbWF4TGVuZ3RoKSB7XG4gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLm1pbWVGdW5jdGlvbnMuZW5jb2RlTWltZVdvcmQoc3RyLCBlbmNvZGluZywgbWF4TGVuZ3RoIHx8IDAsIGNoYXJzZXQpO1xufTtcblxuLyoqXG4gKiBFbmNvZGVzIG5lZWQgcGFydHMgb2YgYSBzdHJpbmcgdG8gbWltZSB3b3JkIGZvcm1hdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHRvIGJlIGVuY29kZWRcbiAqIEBwYXJhbSB7U3RyaW5nfSBlbmNvZGluZyBFbmNvZGluZyBRIGZvciBxdW90ZWQgcHJpbnRhYmxlIG9yIEIgZm9yIGJhc2U2NFxuICogQHBhcmFtIHtOdW1iZXJ9IFttYXhMZW5ndGhdIElmIHNldCwgc3BsaXQgb24gbWF4TGVuZ3RoXG4gKiBAcGFyYW0ge1N0cmluZ30gW2NoYXJzZXQ9XCJVVEYtOFwiXSBDaGFyc2V0IHRvIGJlIHVzZWRcbiAqIEByZXR1cm4ge1N0cmluZ30gU3RyaW5nIHdpdGggcG9zc2libGUgbWltZSB3b3JkIGVuY29kZWQgcGFydHNcbiAqL1xubW9kdWxlLmV4cG9ydHMuZW5jb2RlTWltZVdvcmRzID0gZnVuY3Rpb24oc3RyLCBlbmNvZGluZywgbWF4TGVuZ3RoLCBjaGFyc2V0KSB7XG4gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLm1pbWVGdW5jdGlvbnMuZW5jb2RlTWltZVdvcmRzKHN0ciwgZW5jb2RpbmcsIG1heExlbmd0aCB8fCAwLCBjaGFyc2V0KTtcbn07XG5cbi8qKlxuICogRGVjb2RlcyBhIHN0cmluZyBmcm9tIG1pbWUgZW5jb2RlZCB3b3JkXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBNaW1lIHdvcmQgZW5jb2RlZCBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gRGVjb2RlZCBzdHJpbmdcbiAqL1xubW9kdWxlLmV4cG9ydHMuZGVjb2RlTWltZVdvcmQgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMubWltZUZ1bmN0aW9ucy5kZWNvZGVNaW1lV29yZChzdHIpLnRvU3RyaW5nKFwidXRmLThcIik7XG59O1xuXG4vKipcbiAqIERlY29kZXMgYWxsIG1pbWUgd29yZHMgZnJvbSBhIHN0cmluZyB0byBhbiB1bmVuY29kZWQgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBTdHJpbmcgdGhhdCBtYXkgaW5jbHVkZSBtaW1lIHdvcmRzXG4gKiBAcmV0dXJuIHtTdHJpbmd9IFVuZW5jb2RlZCBzdHJpbmdcbiAqL1xubW9kdWxlLmV4cG9ydHMucGFyc2VNaW1lV29yZHMgPSBmdW5jdGlvbihzdHIpIHtcbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMubWltZUZ1bmN0aW9ucy5kZWNvZGVNaW1lV29yZHMoc3RyKS50b1N0cmluZyhcInV0Zi04XCIpO1xufTtcblxuLyoqXG4gKiBFbmNvZGVzIGEgc3RyaW5nIGludG8gUXVvdGVkLXByaW50YWJsZSBmb3JtYXQuIE1heGltdW0gbGluZSBsZW5ndGggZm9yIHRoZVxuICogZW5jb2RlZCBzdHJpbmcgaXMgYWx3YXlzIDc2KzIgYnl0ZXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFN0cmluZyB0byBiZSBlbmNvZGVkIGludG8gUXVvdGVkLXByaW50YWJsZVxuICogQHBhcmFtIHtCb29sZWFufSBbbWltZVdvcmRdIGxlZ2FjeSBwYXJhbWV0ZXIsIG5vdCB1c2VkXG4gKiBAcGFyYW0ge1N0cmluZ30gW2NoYXJzZXQ9XCJVVEYtOFwiXSBEZXN0aW5hdGlvbiBjaGFyc2V0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IFF1b3RlZCBwcmludGFibGUgZW5jb2RlZCBzdHJpbmdcbiAqL1xubW9kdWxlLmV4cG9ydHMuZW5jb2RlUXVvdGVkUHJpbnRhYmxlID0gZnVuY3Rpb24oc3RyLCBtaW1lV29yZCwgY2hhcnNldCkge1xuICAgIGlmICh0eXBlb2YgbWltZVdvcmQgPT0gXCJzdHJpbmdcIiAmJiAhY2hhcnNldCkge1xuICAgICAgICBjaGFyc2V0ID0gbWltZVdvcmQ7XG4gICAgICAgIG1pbWVXb3JkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbW9kdWxlLmV4cG9ydHMubWltZUZ1bmN0aW9ucy5lbmNvZGVRdW90ZWRQcmludGFibGUoc3RyLCBjaGFyc2V0KTtcbn07XG5cbi8qKlxuICogRGVjb2RlcyBhIHN0cmluZyBmcm9tIFF1b3RlZC1wcmludGFibGUgZm9ybWF0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0ciBTdHJpbmcgdG8gYmUgZGVjb2RlZCBmcm9tIFF1b3RlZC1wcmludGFibGVcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW21pbWVXb3JkXSBsZWdhY3kgcGFyYW1ldGVyLCBub3QgdXNlZFxuICogQHBhcmFtIHtTdHJpbmd9IFtjaGFyc2V0PVwiVVRGLThcIl0gU291cmNlIGNoYXJzZXRcbiAqIEByZXR1cm4ge1N0cmluZ30gRGVjb2RlZCBzdHJpbmdcbiAqL1xubW9kdWxlLmV4cG9ydHMuZGVjb2RlUXVvdGVkUHJpbnRhYmxlID0gZnVuY3Rpb24oc3RyLCBtaW1lV29yZCwgY2hhcnNldCkge1xuICAgIGlmICh0eXBlb2YgbWltZVdvcmQgPT0gXCJzdHJpbmdcIiAmJiAhY2hhcnNldCkge1xuICAgICAgICBjaGFyc2V0ID0gbWltZVdvcmQ7XG4gICAgICAgIG1pbWVXb3JkID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjaGFyc2V0ID0gKGNoYXJzZXQgfHwgXCJcIikudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLnRyaW0oKTtcbiAgICB2YXIgZGVjb2RlZFN0cmluZyA9IG1vZHVsZS5leHBvcnRzLm1pbWVGdW5jdGlvbnMuZGVjb2RlUXVvdGVkUHJpbnRhYmxlKHN0ciwgXCJ1dGYtOFwiLCBjaGFyc2V0KTtcbiAgICByZXR1cm4gY2hhcnNldCA9PSBcIkJJTkFSWVwiID8gZGVjb2RlZFN0cmluZyA6IGRlY29kZWRTdHJpbmcudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbn07XG5cbi8qKlxuICogRW5jb2RlcyBhIHN0cmluZyBpbnRvIEJhc2U2NCBmb3JtYXQuIEJhc2U2NCBpcyBtaW1lLXdvcmQgc2FmZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHRvIGJlIGVuY29kZWQgaW50byBCYXNlNjRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbY2hhcnNldD1cIlVURi04XCJdIERlc3RpbmF0aW9uIGNoYXJzZXRcbiAqIEByZXR1cm4ge1N0cmluZ30gQmFzZTY0IGVuY29kZWQgc3RyaW5nXG4gKi9cbm1vZHVsZS5leHBvcnRzLmVuY29kZUJhc2U2NCA9IGZ1bmN0aW9uKHN0ciwgY2hhcnNldCkge1xuICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cy5taW1lRnVuY3Rpb25zLmVuY29kZUJhc2U2NChzdHIsIGNoYXJzZXQpO1xufTtcblxuLyoqXG4gKiBEZWNvZGVzIGEgc3RyaW5nIGZyb20gQmFzZTY0IGZvcm1hdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgU3RyaW5nIHRvIGJlIGRlY29kZWQgZnJvbSBCYXNlNjRcbiAqIEBwYXJhbSB7U3RyaW5nfSBbY2hhcnNldD1cIlVURi04XCJdIFNvdXJjZSBjaGFyc2V0XG4gKiBAcmV0dXJuIHtTdHJpbmd9IERlY29kZWQgc3RyaW5nXG4gKi9cbm1vZHVsZS5leHBvcnRzLmRlY29kZUJhc2U2NCA9IGZ1bmN0aW9uKHN0ciwgY2hhcnNldCkge1xuICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cy5taW1lRnVuY3Rpb25zLmRlY29kZUJhc2U2NChzdHIsIFwidXRmLThcIiwgY2hhcnNldCkudG9TdHJpbmcoXCJ1dGYtOFwiKTtcbn07XG5cbi8qKlxuICogUGFyc2VzIG5hbWVzIGFuZCBhZGRyZXNzZXMgZnJvbSBhIGZyb20sIHRvLCBjYyBvciBiY2MgbGluZVxuICogRm9yIGV4YW1wbGU6ICdBbmRyaXMgUmVpbm1hbiA8YW5kcmlzQHRyLmVlPiwgc29tZW9uZUBlbHNlLmNvbSdcbiAqIHdpbGwgYmUgcGFyc2VkIGludG86IFt7bmFtZTpcIkFuZHJpcyBSZWlubWFuXCIsIGFkZHJlc3M6XCJhbmRyaXNAdHIuZWVcIn0sIHthZGRyZXNzOiBcInNvbWVvbmVAZWxzZS5jb21cIn1dXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXl9IGFkZHJlc3NlcyBBZGRyZXNzIGxpbmUgc3RyaW5nIG9yIGFuIGFycmF5IG9mIHN0cmluZ3NcbiAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBwYXJzZWQgZS1tYWlscyBhZGRyZXNzZXMgaW4gdGhlIGZvcm0gb2YgW3tuYW1lLCBhZGRyZXNzfV1cbiAqL1xubW9kdWxlLmV4cG9ydHMucGFyc2VBZGRyZXNzZXMgPSBmdW5jdGlvbihhZGRyZXNzZXMpIHtcbiAgICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBbXS5jb25jYXQoYWRkcmVzc2VzKS5tYXAoYWRkcmVzc3BhcnNlcikpLm1hcChmdW5jdGlvbihhZGRyZXNzKSB7XG4gICAgICAgIGFkZHJlc3MubmFtZSA9IG1vZHVsZS5leHBvcnRzLnBhcnNlTWltZVdvcmRzKGFkZHJlc3MubmFtZSk7XG4gICAgICAgIGlmIChhZGRyZXNzLmdyb3VwKSB7XG4gICAgICAgICAgICBhZGRyZXNzLmdyb3VwLmZvckVhY2goZnVuY3Rpb24oZ3JvdXBBZGRyZXNzKSB7XG4gICAgICAgICAgICAgICAgZ3JvdXBBZGRyZXNzLm5hbWUgPSBtb2R1bGUuZXhwb3J0cy5wYXJzZU1pbWVXb3Jkcyhncm91cEFkZHJlc3MubmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWRkcmVzcztcbiAgICB9KTtcbn07XG5cbi8qKlxuICogUGFyc2VzIGhlYWRlciBsaW5lcyBpbnRvIGFuIGFycmF5IG9mIG9iamVjdHMuIE91dHB1dDogeyd4LWhlYWRlcic6IFsndmFsdWUnXX1cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBGdWxsIGhlYWRlciBwYXJ0IHRvIGJlIHBhcnNlZFxuICogQHJldHVybiB7T2JqZWN0fSBQYXJzZWQgaGVhZGVyc1xuICovXG5tb2R1bGUuZXhwb3J0cy5wYXJzZUhlYWRlcnMgPSBmdW5jdGlvbihoZWFkZXJzKSB7XG4gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzLm1pbWVGdW5jdGlvbnMucGFyc2VIZWFkZXJMaW5lcyhoZWFkZXJzKTtcbn07XG5cbi8qKlxuICogUGFyc2VzIGEgaGVhZGVyIGxpbmUgdG8gc2VhcmNoIGZvciBhZGRpdGlvbmFsIHBhcmFtZXRlcnMuIEZvciBleGFtcGxlXG4gKiAgICAgcGFyc2VIZWFkZXJMaW5lKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXV0Zi04JylcbiAqIHdpbGwgYmUgcGFyc2VkIGludG9cbiAqICAgICB7ZGVmYXVsdFZhbHVlOiAndGV4dC9wbGFpbicsIGNoYXJzZXQ6ICd1dGYtOCd9XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGxpbmUgU2luZ2xlIGhlYWRlciB2YWx1ZSB3aXRob3V0IGtleSBwYXJ0IHRvIGJlIHBhcnNlZFxuICogQHJldHVybiB7T2JqZWN0fSBQYXJzZWQgdmFsdWVcbiAqL1xubW9kdWxlLmV4cG9ydHMucGFyc2VIZWFkZXJMaW5lID0gZnVuY3Rpb24obGluZSkge1xuICAgIGlmICghbGluZSkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IHt9LCBwYXJ0cyA9IGxpbmUuc3BsaXQoXCI7XCIpLFxuICAgICAgICBwb3M7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcGFydHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcG9zID0gcGFydHNbaV0uaW5kZXhPZihcIj1cIik7XG4gICAgICAgIGlmIChwb3MgPCAwKSB7XG4gICAgICAgICAgICByZXN1bHRbIWkgPyBcImRlZmF1bHRWYWx1ZVwiIDogXCJpLVwiICsgaV0gPSBwYXJ0c1tpXS50cmltKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHRbcGFydHNbaV0uc3Vic3RyKDAsIHBvcykudHJpbSgpLnRvTG93ZXJDYXNlKCldID0gcGFydHNbaV0uc3Vic3RyKHBvcyArIDEpLnRyaW0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxubW9kdWxlLmV4cG9ydHMubWltZUZ1bmN0aW9ucyA9IHtcblxuICAgIG1pbWVFbmNvZGU6IGZ1bmN0aW9uKHN0ciwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCkge1xuICAgICAgICB0b0NoYXJzZXQgPSB0b0NoYXJzZXQgfHwgXCJVVEYtOFwiO1xuICAgICAgICBmcm9tQ2hhcnNldCA9IGZyb21DaGFyc2V0IHx8IFwiVVRGLThcIjtcblxuICAgICAgICB2YXIgYnVmZmVyID0gY29udmVydChzdHIgfHwgXCJcIiwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCksXG4gICAgICAgICAgICByYW5nZXMgPSBbXG4gICAgICAgICAgICAgICAgWzB4MDldLFxuICAgICAgICAgICAgICAgIFsweDBBXSxcbiAgICAgICAgICAgICAgICBbMHgwRF0sXG4gICAgICAgICAgICAgICAgWzB4MjBdLFxuICAgICAgICAgICAgICAgIFsweDIxXSxcbiAgICAgICAgICAgICAgICBbMHgyMywgMHgzQ10sXG4gICAgICAgICAgICAgICAgWzB4M0VdLFxuICAgICAgICAgICAgICAgIFsweDQwLCAweDVFXSxcbiAgICAgICAgICAgICAgICBbMHg2MCwgMHg3RV1cbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICByZXN1bHQgPSBcIlwiO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidWZmZXIubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjaGVja1JhbmdlcyhidWZmZXJbaV0sIHJhbmdlcykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZmZXJbaV0pO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ICs9IFwiPVwiICsgKGJ1ZmZlcltpXSA8IDB4MTAgPyBcIjBcIiA6IFwiXCIpICsgYnVmZmVyW2ldLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgbWltZURlY29kZTogZnVuY3Rpb24oc3RyLCB0b0NoYXJzZXQsIGZyb21DaGFyc2V0KSB7XG4gICAgICAgIHN0ciA9IChzdHIgfHwgXCJcIikudG9TdHJpbmcoKTtcbiAgICAgICAgdG9DaGFyc2V0ID0gdG9DaGFyc2V0IHx8IFwiVVRGLThcIjtcbiAgICAgICAgZnJvbUNoYXJzZXQgPSBmcm9tQ2hhcnNldCB8fCBcIlVURi04XCI7XG5cbiAgICAgICAgdmFyIGVuY29kZWRCeXRlc0NvdW50ID0gKHN0ci5tYXRjaCgvXFw9W1xcZGEtZkEtRl17Mn0vZykgfHwgW10pLmxlbmd0aCxcbiAgICAgICAgICAgIGJ1ZmZlckxlbmd0aCA9IHN0ci5sZW5ndGggLSBlbmNvZGVkQnl0ZXNDb3VudCAqIDIsXG4gICAgICAgICAgICBjaHIsIGhleCxcbiAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyTGVuZ3RoKSxcbiAgICAgICAgICAgIGJ1ZmZlclBvcyA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHN0ci5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY2hyID0gc3RyLmNoYXJBdChpKTtcbiAgICAgICAgICAgIGlmIChjaHIgPT0gXCI9XCIgJiYgKGhleCA9IHN0ci5zdWJzdHIoaSArIDEsIDIpKSAmJiAvW1xcZGEtZkEtRl17Mn0vLnRlc3QoaGV4KSkge1xuICAgICAgICAgICAgICAgIGJ1ZmZlcltidWZmZXJQb3MrK10gPSBwYXJzZUludChoZXgsIDE2KTtcbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWZmZXJbYnVmZmVyUG9zKytdID0gY2hyLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZnJvbUNoYXJzZXQudG9VcHBlckNhc2UoKS50cmltKCkgPT0gXCJCSU5BUllcIikge1xuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29udmVydChidWZmZXIsIHRvQ2hhcnNldCwgZnJvbUNoYXJzZXQpO1xuICAgIH0sXG5cbiAgICBlbmNvZGVCYXNlNjQ6IGZ1bmN0aW9uKHN0ciwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gY29udmVydChzdHIgfHwgXCJcIiwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCk7XG4gICAgICAgIHJldHVybiBhZGRTb2Z0TGluZWJyZWFrcyhidWZmZXIudG9TdHJpbmcoXCJiYXNlNjRcIiksIFwiYmFzZTY0XCIpO1xuICAgIH0sXG5cbiAgICBkZWNvZGVCYXNlNjQ6IGZ1bmN0aW9uKHN0ciwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCkge1xuICAgICAgICB2YXIgYnVmZmVyID0gbmV3IEJ1ZmZlcigoc3RyIHx8IFwiXCIpLnRvU3RyaW5nKCksIFwiYmFzZTY0XCIpO1xuICAgICAgICByZXR1cm4gY29udmVydChidWZmZXIsIHRvQ2hhcnNldCwgZnJvbUNoYXJzZXQpO1xuICAgIH0sXG5cbiAgICBkZWNvZGVRdW90ZWRQcmludGFibGU6IGZ1bmN0aW9uKHN0ciwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCkge1xuICAgICAgICBzdHIgPSAoc3RyIHx8IFwiXCIpLnRvU3RyaW5nKCk7XG4gICAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXD0oPzpcXHI/XFxufCQpL2csIFwiXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5taW1lRGVjb2RlKHN0ciwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCk7XG4gICAgfSxcblxuICAgIGVuY29kZVF1b3RlZFByaW50YWJsZTogZnVuY3Rpb24oc3RyLCB0b0NoYXJzZXQsIGZyb21DaGFyc2V0KSB7XG4gICAgICAgIHZhciBtaW1lRW5jb2RlZFN0ciA9IHRoaXMubWltZUVuY29kZShzdHIsIHRvQ2hhcnNldCwgZnJvbUNoYXJzZXQpO1xuXG4gICAgICAgIC8vIGZpeCBsaW5lIGJyZWFrc1xuICAgICAgICBtaW1lRW5jb2RlZFN0ciA9IG1pbWVFbmNvZGVkU3RyLnJlcGxhY2UoL1xccj9cXG58XFxyL2csIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiXFxyXFxuXCI7XG4gICAgICAgIH0pLnJlcGxhY2UoL1tcXHQgXSskL2dtLCBmdW5jdGlvbihzcGFjZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBzcGFjZXMucmVwbGFjZSgvIC9nLCBcIj0yMFwiKS5yZXBsYWNlKC9cXHQvZywgXCI9MDlcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBhZGRTb2Z0TGluZWJyZWFrcyhtaW1lRW5jb2RlZFN0ciwgXCJxcFwiKTtcbiAgICB9LFxuXG4gICAgZW5jb2RlTWltZVdvcmQ6IGZ1bmN0aW9uKHN0ciwgZW5jb2RpbmcsIG1heExlbmd0aCwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCkge1xuICAgICAgICB0b0NoYXJzZXQgPSAodG9DaGFyc2V0IHx8IFwidXRmLThcIikudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgfHwgXCJRXCIpLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKS50cmltKCkuY2hhckF0KDApO1xuICAgICAgICB2YXIgZW5jb2RlZFN0cjtcblxuICAgICAgICBpZiAobWF4TGVuZ3RoICYmIG1heExlbmd0aCA+IDcgKyB0b0NoYXJzZXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBtYXhMZW5ndGggLT0gKDcgKyB0b0NoYXJzZXQubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmNvZGluZyA9PSBcIlFcIikge1xuICAgICAgICAgICAgZW5jb2RlZFN0ciA9IHRoaXMubWltZUVuY29kZShzdHIsIHRvQ2hhcnNldCwgZnJvbUNoYXJzZXQpO1xuICAgICAgICAgICAgZW5jb2RlZFN0ciA9IGVuY29kZWRTdHIucmVwbGFjZSgvW1xcclxcblxcdF9dL2csIGZ1bmN0aW9uKGNocikge1xuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gY2hyLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPVwiICsgKGNvZGUgPCAweDEwID8gXCIwXCIgOiBcIlwiKSArIGNvZGUudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB9KS5yZXBsYWNlKC9cXHMvZywgXCJfXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGVuY29kaW5nID09IFwiQlwiKSB7XG4gICAgICAgICAgICBlbmNvZGVkU3RyID0gY29udmVydChzdHIgfHwgXCJcIiwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCkudG9TdHJpbmcoXCJiYXNlNjRcIikudHJpbSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1heExlbmd0aCAmJiBlbmNvZGVkU3RyLmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGVuY29kaW5nID09IFwiUVwiKSB7XG4gICAgICAgICAgICAgICAgZW5jb2RlZFN0ciA9IHRoaXMuc3BsaXRFbmNvZGVkU3RyaW5nKGVuY29kZWRTdHIsIG1heExlbmd0aCkuam9pbihcIj89ID0/XCIgKyB0b0NoYXJzZXQgKyBcIj9cIiArIGVuY29kaW5nICsgXCI/XCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbmNvZGVkU3RyID0gZW5jb2RlZFN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoXCIue1wiICsgbWF4TGVuZ3RoICsgXCJ9XCIsIFwiZ1wiKSwgXCIkJj89ID0/XCIgKyB0b0NoYXJzZXQgKyBcIj9cIiArIGVuY29kaW5nICsgXCI/XCIpO1xuICAgICAgICAgICAgICAgIGlmIChlbmNvZGVkU3RyLnN1YnN0cigtKFwiID0/XCIgKyB0b0NoYXJzZXQgKyBcIj9cIiArIGVuY29kaW5nICsgXCI/PVwiKS5sZW5ndGgpID09IFwiID0/XCIgKyB0b0NoYXJzZXQgKyBcIj9cIiArIGVuY29kaW5nICsgXCI/PVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuY29kZWRTdHIgPSBlbmNvZGVkU3RyLnN1YnN0cigwLCBlbmNvZGVkU3RyLmxlbmd0aCAtIChcIiA9P1wiICsgdG9DaGFyc2V0ICsgXCI/XCIgKyBlbmNvZGluZyArIFwiPz1cIikubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGVuY29kZWRTdHIuc3Vic3RyKC0oXCIgPT9cIiArIHRvQ2hhcnNldCArIFwiP1wiICsgZW5jb2RpbmcgKyBcIj9cIikubGVuZ3RoKSA9PSBcIiA9P1wiICsgdG9DaGFyc2V0ICsgXCI/XCIgKyBlbmNvZGluZyArIFwiP1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGVuY29kZWRTdHIgPSBlbmNvZGVkU3RyLnN1YnN0cigwLCBlbmNvZGVkU3RyLmxlbmd0aCAtIChcIiA9P1wiICsgdG9DaGFyc2V0ICsgXCI/XCIgKyBlbmNvZGluZyArIFwiP1wiKS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBcIj0/XCIgKyB0b0NoYXJzZXQgKyBcIj9cIiArIGVuY29kaW5nICsgXCI/XCIgKyBlbmNvZGVkU3RyICsgKGVuY29kZWRTdHIuc3Vic3RyKC0yKSA9PSBcIj89XCIgPyBcIlwiIDogXCI/PVwiKTtcbiAgICB9LFxuXG4gICAgZGVjb2RlTWltZVdvcmQ6IGZ1bmN0aW9uKHN0ciwgdG9DaGFyc2V0KSB7XG4gICAgICAgIHN0ciA9IChzdHIgfHwgXCJcIikudG9TdHJpbmcoKS50cmltKCk7XG5cbiAgICAgICAgdmFyIGZyb21DaGFyc2V0LCBlbmNvZGluZywgbWF0Y2g7XG5cbiAgICAgICAgbWF0Y2ggPSBzdHIubWF0Y2goL15cXD1cXD8oW1xcd19cXC1dKylcXD8oW1FxQmJdKVxcPyhbXlxcP10qKVxcP1xcPSQvaSk7XG4gICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0KHN0ciwgdG9DaGFyc2V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZyb21DaGFyc2V0ID0gbWF0Y2hbMV07XG4gICAgICAgIGVuY29kaW5nID0gKG1hdGNoWzJdIHx8IFwiUVwiKS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHN0ciA9IChtYXRjaFszXSB8fCBcIlwiKS5yZXBsYWNlKC9fL2csIFwiIFwiKTtcblxuICAgICAgICBpZiAoZW5jb2RpbmcgPT0gXCJCXCIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJhc2U2NChzdHIsIHRvQ2hhcnNldCwgZnJvbUNoYXJzZXQpO1xuICAgICAgICB9IGVsc2UgaWYgKGVuY29kaW5nID09IFwiUVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5taW1lRGVjb2RlKHN0ciwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9XG5cblxuICAgIH0sXG5cbiAgICBkZWNvZGVNaW1lV29yZHM6IGZ1bmN0aW9uKHN0ciwgdG9DaGFyc2V0KSB7XG4gICAgICAgIHZhciBjdXJDaGFyc2V0O1xuXG4gICAgICAgIHN0ciA9IChzdHIgfHwgXCJcIikudG9TdHJpbmcoKS5cbiAgICAgICAgcmVwbGFjZSgvKD1cXD9bXj9dK1xcP1tRcUJiXVxcP1teP10rXFw/PSlcXHMrKD89PVxcP1teP10rXFw/W1FxQmJdXFw/W14/XSpcXD89KS9nLCBcIiQxXCIpLlxuICAgICAgICByZXBsYWNlKC9cXD1cXD8oW1xcd19cXC1dKylcXD8oW1FxQmJdKVxcP1teXFw/XSpcXD9cXD0vZywgKGZ1bmN0aW9uKG1pbWVXb3JkLCBjaGFyc2V0LCBlbmNvZGluZykge1xuICAgICAgICAgICAgY3VyQ2hhcnNldCA9IGNoYXJzZXQgKyBlbmNvZGluZztcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZU1pbWVXb3JkKG1pbWVXb3JkKTtcbiAgICAgICAgfSkuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbnZlcnQoc3RyLCB0b0NoYXJzZXQpO1xuICAgIH0sXG5cbiAgICBmb2xkTGluZTogZnVuY3Rpb24oc3RyLCBsaW5lTGVuZ3RoTWF4LCBhZnRlclNwYWNlLCBsaW5lTWFyZ2luKSB7XG4gICAgICAgIGxpbmVMZW5ndGhNYXggPSBsaW5lTGVuZ3RoTWF4IHx8IDc2O1xuICAgICAgICBsaW5lTWFyZ2luID0gbGluZU1hcmdpbiB8fCBNYXRoLmZsb29yKGxpbmVMZW5ndGhNYXggLyA1KTtcbiAgICAgICAgc3RyID0gKHN0ciB8fCBcIlwiKS50b1N0cmluZygpLnRyaW0oKTtcblxuICAgICAgICB2YXIgcG9zID0gMCxcbiAgICAgICAgICAgIGxlbiA9IHN0ci5sZW5ndGgsXG4gICAgICAgICAgICByZXN1bHQgPSBcIlwiLFxuICAgICAgICAgICAgbGluZSwgbWF0Y2g7XG5cbiAgICAgICAgd2hpbGUgKHBvcyA8IGxlbikge1xuICAgICAgICAgICAgbGluZSA9IHN0ci5zdWJzdHIocG9zLCBsaW5lTGVuZ3RoTWF4KTtcbiAgICAgICAgICAgIGlmIChsaW5lLmxlbmd0aCA8IGxpbmVMZW5ndGhNYXgpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgKz0gbGluZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgobWF0Y2ggPSBsaW5lLm1hdGNoKC9eW15cXG5cXHJdKihcXHI/XFxufFxccikvKSkpIHtcbiAgICAgICAgICAgICAgICBsaW5lID0gbWF0Y2hbMF07XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IGxpbmU7XG4gICAgICAgICAgICAgICAgcG9zICs9IGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgobWF0Y2ggPSBsaW5lLnN1YnN0cigtbGluZU1hcmdpbikubWF0Y2goLyhcXHMrKVteXFxzXSokLykpKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3Vic3RyKDAsIGxpbmUubGVuZ3RoIC0gKG1hdGNoWzBdLmxlbmd0aCAtICggISEgYWZ0ZXJTcGFjZSA/IChtYXRjaFsxXSB8fCBcIlwiKS5sZW5ndGggOiAwKSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgobWF0Y2ggPSBzdHIuc3Vic3RyKHBvcyArIGxpbmUubGVuZ3RoKS5tYXRjaCgvXlteXFxzXSsoXFxzKikvKSkpIHtcbiAgICAgICAgICAgICAgICBsaW5lID0gbGluZSArIG1hdGNoWzBdLnN1YnN0cigwLCBtYXRjaFswXS5sZW5ndGggLSAoIWFmdGVyU3BhY2UgPyAobWF0Y2hbMV0gfHwgXCJcIikubGVuZ3RoIDogMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0ICs9IGxpbmU7XG4gICAgICAgICAgICBwb3MgKz0gbGluZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocG9zIDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ICs9IFwiXFxyXFxuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBlbmNvZGVNaW1lV29yZHM6IGZ1bmN0aW9uKHZhbHVlLCBlbmNvZGluZywgbWF4TGVuZ3RoLCB0b0NoYXJzZXQsIGZyb21DaGFyc2V0KSB7XG4gICAgICAgIHZhciBkZWNvZGVkVmFsdWUgPSBjb252ZXJ0KCh2YWx1ZSB8fCBcIlwiKSwgXCJ1dGYtOFwiLCBmcm9tQ2hhcnNldCkudG9TdHJpbmcoXCJ1dGYtOFwiKSxcbiAgICAgICAgICAgIGVuY29kZWRWYWx1ZTtcblxuICAgICAgICBlbmNvZGVkVmFsdWUgPSBkZWNvZGVkVmFsdWUucmVwbGFjZSgvKFteXFxzXFx1MDA4MC1cXHVGRkZGXSpbXFx1MDA4MC1cXHVGRkZGXStbXlxcc1xcdTAwODAtXFx1RkZGRl0qKD86XFxzK1teXFxzXFx1MDA4MC1cXHVGRkZGXSpbXFx1MDA4MC1cXHVGRkZGXStbXlxcc1xcdTAwODAtXFx1RkZGRl0qXFxzKik/KSsoPz1cXHN8JCkvZywgKGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIHN0ci5sZW5ndGggPyB0aGlzLmVuY29kZU1pbWVXb3JkKHN0ciwgZW5jb2RpbmcgfHwgXCJRXCIsIG1heExlbmd0aCwgdG9DaGFyc2V0KSA6IFwiXCI7XG4gICAgICAgIH0pLmJpbmQodGhpcykpO1xuXG4gICAgICAgIHJldHVybiBlbmNvZGVkVmFsdWU7XG4gICAgfSxcblxuICAgIGVuY29kZUhlYWRlckxpbmU6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIHRvQ2hhcnNldCwgZnJvbUNoYXJzZXQpIHtcbiAgICAgICAgdmFyIGVuY29kZWRWYWx1ZSA9IHRoaXMuZW5jb2RlTWltZVdvcmRzKHZhbHVlLCA1MiwgdG9DaGFyc2V0LCBmcm9tQ2hhcnNldCk7XG4gICAgICAgIHJldHVybiB0aGlzLmZvbGRMaW5lKGtleSArIFwiOiBcIiArIGVuY29kZWRWYWx1ZSwgNzYpO1xuICAgIH0sXG5cbiAgICBwYXJzZUhlYWRlckxpbmVzOiBmdW5jdGlvbihoZWFkZXJzLCB0b0NoYXJzZXQpIHtcbiAgICAgICAgdmFyIGxpbmVzID0gaGVhZGVycy5zcGxpdCgvXFxyP1xcbnxcXHIvKSxcbiAgICAgICAgICAgIGhlYWRlcnNPYmogPSB7fSxcbiAgICAgICAgICAgIGtleSwgdmFsdWUsXG4gICAgICAgICAgICBoZWFkZXIsXG4gICAgICAgICAgICBpLCBsZW47XG5cbiAgICAgICAgZm9yIChpID0gbGluZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChpICYmIGxpbmVzW2ldLm1hdGNoKC9eXFxzLykpIHtcbiAgICAgICAgICAgICAgICBsaW5lc1tpIC0gMV0gKz0gXCJcXHJcXG5cIiArIGxpbmVzW2ldO1xuICAgICAgICAgICAgICAgIGxpbmVzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGxpbmVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBoZWFkZXIgPSB0aGlzLmRlY29kZUhlYWRlckxpbmUobGluZXNbaV0pO1xuICAgICAgICAgICAga2V5ID0gKGhlYWRlclswXSB8fCBcIlwiKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICAgICAgICAgICAgdmFsdWUgPSBoZWFkZXJbMV0gfHwgXCJcIjtcbiAgICAgICAgICAgIGlmICghdG9DaGFyc2V0IHx8ICh0b0NoYXJzZXQgfHwgXCJcIikudG9TdHJpbmcoKS50cmltKCkubWF0Y2goL151dGZbXFwtX10/OCQvaSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKFwidXRmLThcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWhlYWRlcnNPYmpba2V5XSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnNPYmpba2V5XSA9IFt2YWx1ZV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhlYWRlcnNPYmpba2V5XS5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBoZWFkZXJzT2JqO1xuICAgIH0sXG5cbiAgICBkZWNvZGVIZWFkZXJMaW5lOiBmdW5jdGlvbihoZWFkZXIsIHRvQ2hhcnNldCkge1xuICAgICAgICB2YXIgbGluZSA9IChoZWFkZXIgfHwgXCJcIikudG9TdHJpbmcoKS5yZXBsYWNlKC8oPzpcXHI/XFxufFxccilbIFxcdF0qL2csIFwiIFwiKS50cmltKCksXG4gICAgICAgICAgICBtYXRjaCA9IGxpbmUubWF0Y2goL15cXHMqKFteOl0rKTooLiopJC8pLFxuICAgICAgICAgICAga2V5ID0gKG1hdGNoICYmIG1hdGNoWzFdIHx8IFwiXCIpLnRyaW0oKSxcbiAgICAgICAgICAgIHZhbHVlID0gKG1hdGNoICYmIG1hdGNoWzJdIHx8IFwiXCIpLnRyaW0oKTtcblxuICAgICAgICB2YWx1ZSA9IHRoaXMuZGVjb2RlTWltZVdvcmRzKHZhbHVlLCB0b0NoYXJzZXQpO1xuICAgICAgICByZXR1cm4gW2tleSwgdmFsdWVdO1xuICAgIH0sXG5cbiAgICBzcGxpdEVuY29kZWRTdHJpbmc6IGZ1bmN0aW9uKHN0ciwgbWF4bGVuKSB7XG4gICAgICAgIHZhciBjdXJMaW5lLCBtYXRjaCwgY2hyLCBkb25lLFxuICAgICAgICAgICAgbGluZXMgPSBbXTtcblxuICAgICAgICB3aGlsZSAoc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgY3VyTGluZSA9IHN0ci5zdWJzdHIoMCwgbWF4bGVuKTtcblxuICAgICAgICAgICAgLy8gbW92ZSBpbmNvbXBsZXRlIGVzY2FwZWQgY2hhciBiYWNrIHRvIG1haW5cbiAgICAgICAgICAgIGlmICgobWF0Y2ggPSBjdXJMaW5lLm1hdGNoKC9cXD1bMC05QS1GXT8kL2kpKSkge1xuICAgICAgICAgICAgICAgIGN1ckxpbmUgPSBjdXJMaW5lLnN1YnN0cigwLCBtYXRjaC5pbmRleCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRvbmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHdoaWxlICghZG9uZSkge1xuICAgICAgICAgICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIG5vdCBtaWRkbGUgb2YgYSB1bmljb2RlIGNoYXIgc2VxdWVuY2VcbiAgICAgICAgICAgICAgICBpZiAoKG1hdGNoID0gc3RyLnN1YnN0cihjdXJMaW5lLmxlbmd0aCkubWF0Y2goL15cXD0oWzAtOUEtRl17Mn0pL2kpKSkge1xuICAgICAgICAgICAgICAgICAgICBjaHIgPSBwYXJzZUludChtYXRjaFsxXSwgMTYpO1xuICAgICAgICAgICAgICAgICAgICAvLyBpbnZhbGlkIHNlcXVlbmNlLCBtb3ZlIG9uZSBjaGFyIGJhY2sgYW5jIHJlY2hlY2tcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNociA8IDB4QzIgJiYgY2hyID4gMHg3Rikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VyTGluZSA9IGN1ckxpbmUuc3Vic3RyKDAsIGN1ckxpbmUubGVuZ3RoIC0gMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJMaW5lLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2goY3VyTGluZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyKGN1ckxpbmUubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsaW5lcztcbiAgICB9LFxuXG4gICAgcGFyc2VBZGRyZXNzZXM6IGFkZHJlc3NwYXJzZXJcblxufTtcblxuLy8gTGluZXMgY2FuJ3QgYmUgbG9uZ2VyIHRoYXQgNzYgKyA8Q1I+PExGPiA9IDc4IGJ5dGVzXG4vLyBodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMyMDQ1I3NlY3Rpb24tNi43XG5mdW5jdGlvbiBhZGRTb2Z0TGluZWJyZWFrcyhzdHIsIGVuY29kaW5nKSB7XG4gICAgdmFyIGxpbmVMZW5ndGhNYXggPSA3NjtcblxuICAgIGVuY29kaW5nID0gKGVuY29kaW5nIHx8IFwiYmFzZTY0XCIpLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS50cmltKCk7XG5cbiAgICBpZiAoZW5jb2RpbmcgPT0gXCJxcFwiKSB7XG4gICAgICAgIHJldHVybiBhZGRRUFNvZnRMaW5lYnJlYWtzKHN0ciwgbGluZUxlbmd0aE1heCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGFkZEJhc2U2NFNvZnRMaW5lYnJlYWtzKHN0ciwgbGluZUxlbmd0aE1heCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRCYXNlNjRTb2Z0TGluZWJyZWFrcyhiYXNlNjRFbmNvZGVkU3RyLCBsaW5lTGVuZ3RoTWF4KSB7XG4gICAgYmFzZTY0RW5jb2RlZFN0ciA9IChiYXNlNjRFbmNvZGVkU3RyIHx8IFwiXCIpLnRvU3RyaW5nKCkudHJpbSgpO1xuICAgIHJldHVybiBiYXNlNjRFbmNvZGVkU3RyLnJlcGxhY2UobmV3IFJlZ0V4cChcIi57XCIgKyBsaW5lTGVuZ3RoTWF4ICsgXCJ9XCIsIFwiZ1wiKSwgXCIkJlxcclxcblwiKS50cmltKCk7XG59XG5cbmZ1bmN0aW9uIGFkZFFQU29mdExpbmVicmVha3MobWltZUVuY29kZWRTdHIsIGxpbmVMZW5ndGhNYXgpIHtcbiAgICB2YXIgcG9zID0gMCxcbiAgICAgICAgbGVuID0gbWltZUVuY29kZWRTdHIubGVuZ3RoLFxuICAgICAgICBtYXRjaCwgY29kZSwgbGluZSxcbiAgICAgICAgbGluZU1hcmdpbiA9IE1hdGguZmxvb3IobGluZUxlbmd0aE1heCAvIDMpLFxuICAgICAgICByZXN1bHQgPSBcIlwiO1xuXG4gICAgLy8gaW5zZXJ0IHNvZnQgbGluZWJyZWFrcyB3aGVyZSBuZWVkZWRcbiAgICB3aGlsZSAocG9zIDwgbGVuKSB7XG4gICAgICAgIGxpbmUgPSBtaW1lRW5jb2RlZFN0ci5zdWJzdHIocG9zLCBsaW5lTGVuZ3RoTWF4KTtcbiAgICAgICAgaWYgKChtYXRjaCA9IGxpbmUubWF0Y2goL1xcclxcbi8pKSkge1xuICAgICAgICAgICAgbGluZSA9IGxpbmUuc3Vic3RyKDAsIG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lO1xuICAgICAgICAgICAgcG9zICs9IGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGluZS5zdWJzdHIoLTEpID09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgIC8vIG5vdGhpbmcgdG8gY2hhbmdlIGhlcmVcbiAgICAgICAgICAgIHJlc3VsdCArPSBsaW5lO1xuICAgICAgICAgICAgcG9zICs9IGxpbmUubGVuZ3RoO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAoKG1hdGNoID0gbGluZS5zdWJzdHIoLWxpbmVNYXJnaW4pLm1hdGNoKC9cXG4uKj8kLykpKSB7XG4gICAgICAgICAgICAvLyB0cnVuY2F0ZSB0byBuZWFyZXN0IGxpbmUgYnJlYWtcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cigwLCBsaW5lLmxlbmd0aCAtIChtYXRjaFswXS5sZW5ndGggLSAxKSk7XG4gICAgICAgICAgICByZXN1bHQgKz0gbGluZTtcbiAgICAgICAgICAgIHBvcyArPSBsaW5lLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2UgaWYgKGxpbmUubGVuZ3RoID4gbGluZUxlbmd0aE1heCAtIGxpbmVNYXJnaW4gJiYgKG1hdGNoID0gbGluZS5zdWJzdHIoLWxpbmVNYXJnaW4pLm1hdGNoKC9bIFxcdFxcLiwhXFw/XVteIFxcdFxcLiwhXFw/XSokLykpKSB7XG4gICAgICAgICAgICAvLyB0cnVuY2F0ZSB0byBuZWFyZXN0IHNwYWNlXG4gICAgICAgICAgICBsaW5lID0gbGluZS5zdWJzdHIoMCwgbGluZS5sZW5ndGggLSAobWF0Y2hbMF0ubGVuZ3RoIC0gMSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGxpbmUuc3Vic3RyKC0xKSA9PSBcIlxcclwiKSB7XG4gICAgICAgICAgICBsaW5lID0gbGluZS5zdWJzdHIoMCwgbGluZS5sZW5ndGggLSAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChsaW5lLm1hdGNoKC9cXD1bXFxkYS1mXXswLDJ9JC9pKSkge1xuXG4gICAgICAgICAgICAgICAgLy8gcHVzaCBpbmNvbXBsZXRlIGVuY29kaW5nIHNlcXVlbmNlcyB0byB0aGUgbmV4dCBsaW5lXG4gICAgICAgICAgICAgICAgaWYgKChtYXRjaCA9IGxpbmUubWF0Y2goL1xcPVtcXGRhLWZdezAsMX0kL2kpKSkge1xuICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zdWJzdHIoMCwgbGluZS5sZW5ndGggLSBtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIGVuc3VyZSB0aGF0IHV0Zi04IHNlcXVlbmNlcyBhcmUgbm90IHNwbGl0XG4gICAgICAgICAgICAgICAgd2hpbGUgKGxpbmUubGVuZ3RoID4gMyAmJiBsaW5lLmxlbmd0aCA8IGxlbiAtIHBvcyAmJiAhbGluZS5tYXRjaCgvXig/Oj1bXFxkYS1mXXsyfSl7MSw0fSQvaSkgJiYgKG1hdGNoID0gbGluZS5tYXRjaCgvXFw9W1xcZGEtZl17Mn0kL2lnKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZSA9IHBhcnNlSW50KG1hdGNoWzBdLnN1YnN0cigxLCAyKSwgMTYpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA8IDEyOCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gbGluZS5zdWJzdHIoMCwgbGluZS5sZW5ndGggLSAzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29kZSA+PSAweEMwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBvcyArIGxpbmUubGVuZ3RoIDwgbGVuICYmIGxpbmUuc3Vic3RyKC0xKSAhPSBcIlxcblwiKSB7XG4gICAgICAgICAgICBpZiAobGluZS5sZW5ndGggPT0gNzYgJiYgbGluZS5tYXRjaCgvXFw9W1xcZGEtZl17Mn0kL2kpKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3Vic3RyKDAsIGxpbmUubGVuZ3RoIC0gMyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmUubGVuZ3RoID09IDc2KSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IGxpbmUuc3Vic3RyKDAsIGxpbmUubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgKz0gbGluZS5sZW5ndGg7XG4gICAgICAgICAgICBsaW5lICs9IFwiPVxcclxcblwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcG9zICs9IGxpbmUubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0ICs9IGxpbmU7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gY2hlY2tSYW5nZXMobnIsIHJhbmdlcykge1xuICAgIGZvciAodmFyIGkgPSByYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgaWYgKCFyYW5nZXNbaV0ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmFuZ2VzW2ldLmxlbmd0aCA9PSAxICYmIG5yID09IHJhbmdlc1tpXVswXSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJhbmdlc1tpXS5sZW5ndGggPT0gMiAmJiBuciA+PSByYW5nZXNbaV1bMF0gJiYgbnIgPD0gcmFuZ2VzW2ldWzFdKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4iXX0=","deps":{"buffer":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js","addressparser":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser/src/addressparser.js","encoding":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/lib/encoding.js"}},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/index.js":{"source":"\"use strict\";\n\nmodule.exports = require(\"./lib/mimelib\");\nmodule.exports.contentTypes = require(\"./lib/content-types\");\nmodule.exports.contentTypesReversed = require(\"./lib/content-types-reversed\");","deps":{"./lib/content-types-reversed":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/content-types-reversed.js","./lib/content-types":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/content-types.js","./lib/mimelib":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/mimelib.js"}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/manifest.js":{"source":"'use strict';\n\nvar mimelib = require('mimelib');\n\nmodule.exports = /*@ngInject*/function (contacts, utils, crypto) {\n\tfunction ManifestPart(manifestPart) {\n\t\tvar self = this;\n\n\t\tthis.id = manifestPart.id;\n\t\tthis.size = manifestPart.size;\n\t\tthis.filename = manifestPart.filename;\n\t\tthis.hash = manifestPart.hash;\n\n\t\tthis.isValid = function (body) {\n\t\t\treturn body.length == self.size && crypto.hash(body) == self.hash;\n\t\t};\n\n\t\t// todo: hack, there should be just one content type, blocked: https://github.com/lavab/mailer/issues/33\n\t\tvar contentType = manifestPart.content_type || manifestPart['content-type'];\n\t\tif (contentType) {\n\t\t\tthis.contentType = (contentType.defaultValue ? contentType.defaultValue : contentType).toLowerCase();\n\t\t\tthis.charset = (contentType.charset ? contentType.charset : 'utf-8').toLowerCase();\n\t\t} else {\n\t\t\tthis.contentType = 'text/plain';\n\t\t\tthis.charset = 'utf-8';\n\t\t}\n\n\t\tthis.isHtml = function () {\n\t\t\treturn self.contentType.includes('/html');\n\t\t};\n\t}\n\n\tfunction Manifest(manifest) {\n\t\tvar self = this;\n\n\t\tthis.from = Manifest.parseAddresses(manifest.headers.from);\n\t\tthis.to = Manifest.parseAddresses(manifest.headers.to);\n\t\tthis.cc = Manifest.parseAddresses(manifest.headers.cc);\n\t\tthis.bcc = Manifest.parseAddresses(manifest.headers.bcc);\n\n\t\tthis.subject = manifest.headers.subject;\n\n\t\tthis.getDestinationEmails = function () {\n\t\t\tvar emails = utils.uniq([].concat(babelHelpers.toConsumableArray(self.to.map(function (e) {\n\t\t\t\treturn e.address;\n\t\t\t})), babelHelpers.toConsumableArray(self.cc.map(function (e) {\n\t\t\t\treturn e.address;\n\t\t\t})), babelHelpers.toConsumableArray(self.bcc.map(function (e) {\n\t\t\t\treturn e.address;\n\t\t\t}))));\n\n\t\t\treturn [].concat(babelHelpers.toConsumableArray(emails));\n\t\t};\n\n\t\tthis.getFileById = function (id) {\n\t\t\treturn manifest.parts.find(function (p) {\n\t\t\t\treturn p.id == id;\n\t\t\t});\n\t\t};\n\n\t\tthis.setBody = function (data, contentType) {\n\t\t\tmanifest.parts.push({\n\t\t\t\tid: 'body',\n\t\t\t\thash: crypto.hash(data),\n\t\t\t\tcontent_type: contentType\n\t\t\t});\n\t\t};\n\n\t\tthis.getPart = function () {\n\t\t\tvar id = arguments[0] === undefined ? 'body' : arguments[0];\n\t\t\treturn new ManifestPart(manifest.parts.find(function (p) {\n\t\t\t\treturn p.id == id;\n\t\t\t}));\n\t\t};\n\n\t\tthis.files = manifest.parts.filter(function (p) {\n\t\t\treturn p.id != 'body';\n\t\t}).map(function (p) {\n\t\t\treturn new ManifestPart(p);\n\t\t});\n\n\t\tthis.addAttachment = function (id, data, fileName, contentType) {\n\t\t\tmanifest.parts.push({\n\t\t\t\tid: id,\n\t\t\t\thash: crypto.hash(data),\n\t\t\t\tfilename: fileName,\n\t\t\t\tcontent_type: contentType ? contentType : 'application/octet-stream',\n\t\t\t\tcharset: 'utf-8',\n\t\t\t\tsize: data.length\n\t\t\t});\n\t\t};\n\n\t\tthis.isValid = function () {\n\t\t\treturn !!manifest.parts.find(function (p) {\n\t\t\t\treturn p.id == 'body';\n\t\t\t});\n\t\t};\n\n\t\tthis.stringify = function () {\n\t\t\treturn JSON.stringify(manifest);\n\t\t};\n\t}\n\n\tManifest.parseAddresses = function (src) {\n\t\tif (!src) return [];\n\n\t\treturn (angular.isArray(src) ? src : [src]).map(function (e) {\n\t\t\treturn Manifest.formatAddress(e);\n\t\t});\n\t};\n\n\tManifest.formatAddress = function (fromAddress) {\n\t\tif (!fromAddress.address) fromAddress = mimelib.parseAddresses(fromAddress)[0];\n\n\t\tvar address = fromAddress.address ? fromAddress.address : fromAddress;\n\t\tvar fromContact = contacts.getContactByEmail(address);\n\t\tvar name = fromAddress.name ? fromAddress.name : fromContact ? fromContact.getFullName() : '';\n\t\treturn {\n\t\t\taddress: address,\n\t\t\tname: name,\n\t\t\tcontactPrettyName: fromContact ? fromContact.getFullName() : name ? '' + name + ' <' + address + '>' : address,\n\t\t\tprettyName: address + (name ? ' (' + name + ')' : '')\n\t\t};\n\t};\n\n\tManifest.defaultVersion = '1.0.0';\n\n\tManifest.create = function (_ref) {\n\t\tvar fromEmail = _ref.fromEmail;\n\t\tvar to = _ref.to;\n\t\tvar cc = _ref.cc;\n\t\tvar bcc = _ref.bcc;\n\t\tvar subject = _ref.subject;\n\n\t\tvar manifest = {\n\t\t\tversion: Manifest.defaultVersion,\n\t\t\theaders: {\n\t\t\t\tfrom: fromEmail,\n\t\t\t\tto: to,\n\t\t\t\tsubject: subject\n\t\t\t},\n\t\t\tparts: []\n\t\t};\n\n\t\tif (cc && cc.length > 0) manifest.headers.cc = cc;\n\n\t\tif (bcc && bcc.length > 0) manifest.headers.bcc = bcc;\n\n\t\treturn new Manifest(manifest);\n\t};\n\n\tManifest.createFromJson = function (manifest) {\n\t\tvar rawManifest = undefined;\n\t\ttry {\n\t\t\trawManifest = JSON.parse(manifest);\n\t\t} catch (error) {\n\t\t\tthrow new Error('invalid manifest format!');\n\t\t}\n\t\treturn new Manifest(rawManifest);\n\t};\n\n\treturn Manifest;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2ZhY3Rvcmllcy9tYW5pZmVzdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQzs7QUFFbkMsTUFBTSxDQUFDLE9BQU8sZ0JBQWdCLFVBQUMsUUFBUSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUs7QUFDMUQsVUFBUyxZQUFZLENBQUUsWUFBWSxFQUFFO0FBQ3BDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQzs7QUFFbEIsTUFBSSxDQUFDLEVBQUUsR0FBRyxZQUFZLENBQUMsRUFBRSxDQUFDO0FBQzFCLE1BQUksQ0FBQyxJQUFJLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQztBQUM5QixNQUFJLENBQUMsUUFBUSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUM7QUFDdEMsTUFBSSxDQUFDLElBQUksR0FBRyxZQUFZLENBQUMsSUFBSSxDQUFDOztBQUU5QixNQUFJLENBQUMsT0FBTyxHQUFHLFVBQUMsSUFBSTtVQUFLLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxJQUFJO0dBQUEsQ0FBQzs7O0FBR3BGLE1BQU0sV0FBVyxHQUFHLFlBQVksQ0FBQyxZQUFZLElBQUksWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzlFLE1BQUksV0FBVyxFQUFFO0FBQ2hCLE9BQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxXQUFXLENBQUMsWUFBWSxHQUFHLFdBQVcsQ0FBQyxZQUFZLEdBQUcsV0FBVyxDQUFBLENBQUUsV0FBVyxFQUFFLENBQUM7QUFDckcsT0FBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLFdBQVcsQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDLE9BQU8sR0FBRyxPQUFP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QUFDLE9BQU8sQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDOztBQUU1QixTQUFPLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0VBQzlCLENBQUM7O0FBRUYsU0FBUSxDQUFDLGNBQWMsR0FBRyxVQUFDLFFBQVEsRUFBSztBQUN2QyxNQUFJLFdBQVcsWUFBQSxDQUFDO0FBQ2hCLE1BQUk7QUFDSCxjQUFXLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztHQUNuQyxDQUFDLE9BQU8sS0FBSyxFQUFFO0FBQ2YsU0FBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0dBQzVDO0FBQ0QsU0FBTyxJQUFJLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztFQUNqQyxDQUFDOztBQUVGLFFBQU8sUUFBUSxDQUFDO0NBQ2hCLENBQUMiLCJmaWxlIjoiL1VzZXJzL3BpZ2d5c2xhc2hlci9TaXRlcy9sYXZhYm9vbS13ZWIvc3JjL2pzL2FwcHMvQXBwTGF2YWJvb20vZmFjdG9yaWVzL21hbmlmZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgbWltZWxpYiA9IHJlcXVpcmUoJ21pbWVsaWInKTtcblxubW9kdWxlLmV4cG9ydHMgPSAvKkBuZ0luamVjdCovKGNvbnRhY3RzLCB1dGlscywgY3J5cHRvKSA9PiB7XG5cdGZ1bmN0aW9uIE1hbmlmZXN0UGFydCAobWFuaWZlc3RQYXJ0KSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0XHR0aGlzLmlkID0gbWFuaWZlc3RQYXJ0LmlkO1xuXHRcdHRoaXMuc2l6ZSA9IG1hbmlmZXN0UGFydC5zaXplO1xuXHRcdHRoaXMuZmlsZW5hbWUgPSBtYW5pZmVzdFBhcnQuZmlsZW5hbWU7XG5cdFx0dGhpcy5oYXNoID0gbWFuaWZlc3RQYXJ0Lmhhc2g7XG5cblx0XHR0aGlzLmlzVmFsaWQgPSAoYm9keSkgPT4gYm9keS5sZW5ndGggPT0gc2VsZi5zaXplICYmIGNyeXB0by5oYXNoKGJvZHkpID09IHNlbGYuaGFzaDtcblxuXHRcdC8vIHRvZG86IGhhY2ssIHRoZXJlIHNob3VsZCBiZSBqdXN0IG9uZSBjb250ZW50IHR5cGUsIGJsb2NrZWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9sYXZhYi9tYWlsZXIvaXNzdWVzLzMzXG5cdFx0Y29uc3QgY29udGVudFR5cGUgPSBtYW5pZmVzdFBhcnQuY29udGVudF90eXBlIHx8IG1hbmlmZXN0UGFydFsnY29udGVudC10eXBlJ107XG5cdFx0aWYgKGNvbnRlbnRUeXBlKSB7XG5cdFx0XHR0aGlzLmNvbnRlbnRUeXBlID0gKGNvbnRlbnRUeXBlLmRlZmF1bHRWYWx1ZSA/IGNvbnRlbnRUeXBlLmRlZmF1bHRWYWx1ZSA6IGNvbnRlbnRUeXBlKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0dGhpcy5jaGFyc2V0ID0gKGNvbnRlbnRUeXBlLmNoYXJzZXQgPyBjb250ZW50VHlwZS5jaGFyc2V0IDogJ3V0Zi04JykudG9Mb3dlckNhc2UoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5jb250ZW50VHlwZSA9ICd0ZXh0L3BsYWluJztcblx0XHRcdHRoaXMuY2hhcnNldCA9ICd1dGYtOCc7XG5cdFx0fVxuXG5cdFx0dGhpcy5pc0h0bWwgPSAoKSA9PiBzZWxmLmNvbnRlbnRUeXBlLmluY2x1ZGVzKCcvaHRtbCcpO1xuXHR9XG5cblx0ZnVuY3Rpb24gTWFuaWZlc3QgKG1hbmlmZXN0KSB7XG5cdFx0Y29uc3Qgc2VsZiA9IHRoaXM7XG5cblx0XHR0aGlzLmZyb20gPSBNYW5pZmVzdC5wYXJzZUFkZHJlc3NlcyhtYW5pZmVzdC5oZWFkZXJzLmZyb20pO1xuXHRcdHRoaXMudG8gPSBNYW5pZmVzdC5wYXJzZUFkZHJlc3NlcyhtYW5pZmVzdC5oZWFkZXJzLnRvKTtcblx0XHR0aGlzLmNjID0gTWFuaWZlc3QucGFyc2VBZGRyZXNzZXMobWFuaWZlc3QuaGVhZGVycy5jYyk7XG5cdFx0dGhpcy5iY2MgPSBNYW5pZmVzdC5wYXJzZUFkZHJlc3NlcyhtYW5pZmVzdC5oZWFkZXJzLmJjYyk7XG5cblx0XHR0aGlzLnN1YmplY3QgPSBtYW5pZmVzdC5oZWFkZXJzLnN1YmplY3Q7XG5cblx0XHR0aGlzLmdldERlc3RpbmF0aW9uRW1haWxzID0gKCkgPT4ge1xuXHRcdFx0Y29uc3QgZW1haWxzID0gdXRpbHMudW5pcShbXG5cdFx0XHRcdC4uLnNlbGYudG8ubWFwKGUgPT4gZS5hZGRyZXNzKSxcblx0XHRcdFx0Li4uc2VsZi5jYy5tYXAoZSA9PiBlLmFkZHJlc3MpLFxuXHRcdFx0XHQuLi5zZWxmLmJjYy5tYXAoZSA9PiBlLmFkZHJlc3MpXG5cdFx0XHRdKTtcblxuXHRcdFx0cmV0dXJuIFsuLi5lbWFpbHNdO1xuXHRcdH07XG5cblx0XHR0aGlzLmdldEZpbGVCeUlkID0gKGlkKSA9PiBtYW5pZmVzdC5wYXJ0cy5maW5kKHAgPT4gcC5pZCA9PSBpZCk7XG5cdFx0XG5cdFx0dGhpcy5zZXRCb2R5ID0gKGRhdGEsIGNvbnRlbnRUeXBlKSA9PiB7XG5cdFx0XHRtYW5pZmVzdC5wYXJ0cy5wdXNoKHtcblx0XHRcdFx0aWQ6ICdib2R5Jyxcblx0XHRcdFx0aGFzaDogY3J5cHRvLmhhc2goZGF0YSksXG5cdFx0XHRcdGNvbnRlbnRfdHlwZTogY29udGVudFR5cGVcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHR0aGlzLmdldFBhcnQgPSAoaWQgPSAnYm9keScpID0+IG5ldyBNYW5pZmVzdFBhcnQobWFuaWZlc3QucGFydHMuZmluZChwID0+IHAuaWQgPT0gaWQpKTtcblxuXHRcdHRoaXMuZmlsZXMgPSBtYW5pZmVzdC5wYXJ0cy5maWx0ZXIocCA9PiBwLmlkICE9ICdib2R5JykubWFwKHAgPT4gbmV3IE1hbmlmZXN0UGFydChwKSk7XG5cblx0XHR0aGlzLmFkZEF0dGFjaG1lbnQgPSAoaWQsIGRhdGEsIGZpbGVOYW1lLCBjb250ZW50VHlwZSkgPT4ge1xuXHRcdFx0bWFuaWZlc3QucGFydHMucHVzaCh7XG5cdFx0XHRcdGlkOiBpZCxcblx0XHRcdFx0aGFzaDogY3J5cHRvLmhhc2goZGF0YSksXG5cdFx0XHRcdGZpbGVuYW1lOiBmaWxlTmFtZSxcblx0XHRcdFx0Y29udGVudF90eXBlOiBjb250ZW50VHlwZSA/IGNvbnRlbnRUeXBlIDogJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScsXG5cdFx0XHRcdGNoYXJzZXQ6ICd1dGYtOCcsXG5cdFx0XHRcdHNpemU6IGRhdGEubGVuZ3RoXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0dGhpcy5pc1ZhbGlkID0gKCkgPT4gISFtYW5pZmVzdC5wYXJ0cy5maW5kKHAgPT4gcC5pZCA9PSAnYm9keScpO1xuXG5cdFx0dGhpcy5zdHJpbmdpZnkgPSAoKSA9PiBKU09OLnN0cmluZ2lmeShtYW5pZmVzdCk7XG5cdH1cblxuXHRNYW5pZmVzdC5wYXJzZUFkZHJlc3NlcyA9IChzcmMpID0+IHtcblx0XHRpZiAoIXNyYylcblx0XHRcdHJldHVybiBbXTtcblxuXHRcdHJldHVybiAoYW5ndWxhci5pc0FycmF5KHNyYykgPyBzcmMgOiBbc3JjXSlcblx0XHRcdC5tYXAoZSA9PiBNYW5pZmVzdC5mb3JtYXRBZGRyZXNzKGUpKTtcblx0fTtcblxuXHRNYW5pZmVzdC5mb3JtYXRBZGRyZXNzID0gKGZyb21BZGRyZXNzKSA9PiB7XG5cdFx0aWYgKCFmcm9tQWRkcmVzcy5hZGRyZXNzKVxuXHRcdFx0ZnJvbUFkZHJlc3MgPSBtaW1lbGliLnBhcnNlQWRkcmVzc2VzKGZyb21BZGRyZXNzKVswXTtcblxuXHRcdGNvbnN0IGFkZHJlc3MgPSBmcm9tQWRkcmVzcy5hZGRyZXNzID8gZnJvbUFkZHJlc3MuYWRkcmVzcyA6IGZyb21BZGRyZXNzO1xuXHRcdGNvbnN0IGZyb21Db250YWN0ID0gY29udGFjdHMuZ2V0Q29udGFjdEJ5RW1haWwoYWRkcmVzcyk7XG5cdFx0Y29uc3QgbmFtZSA9IGZyb21BZGRyZXNzLm5hbWUgPyBmcm9tQWRkcmVzcy5uYW1lIDogKGZyb21Db250YWN0ID8gZnJvbUNvbnRhY3QuZ2V0RnVsbE5hbWUoKSA6ICcnKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0YWRkcmVzcyxcblx0XHRcdG5hbWUsXG5cdFx0XHRjb250YWN0UHJldHR5TmFtZTogZnJvbUNvbnRhY3QgPyBmcm9tQ29udGFjdC5nZXRGdWxsTmFtZSgpIDogKFxuXHRcdFx0XHRuYW1lID8gYCR7bmFtZX0gPCR7YWRkcmVzc30+YCA6IGFkZHJlc3Ncblx0XHRcdCksXG5cdFx0XHRwcmV0dHlOYW1lOiBhZGRyZXNzICsgKG5hbWUgPyBgICgke25hbWV9KWAgOiAnJylcblx0XHR9O1xuXHR9O1xuXG5cdE1hbmlmZXN0LmRlZmF1bHRWZXJzaW9uID0gJzEuMC4wJztcblxuXHRNYW5pZmVzdC5jcmVhdGUgPSAoe2Zyb21FbWFpbCwgdG8sIGNjLCBiY2MsIHN1YmplY3R9KSA9PiB7XG5cdFx0Y29uc3QgbWFuaWZlc3QgPSB7XG5cdFx0XHR2ZXJzaW9uOiBNYW5pZmVzdC5kZWZhdWx0VmVyc2lvbixcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0ZnJvbTogZnJvbUVtYWlsLFxuXHRcdFx0XHR0byxcblx0XHRcdFx0c3ViamVjdDogc3ViamVjdFxuXHRcdFx0fSxcblx0XHRcdHBhcnRzOiBbXVxuXHRcdH07XG5cblx0XHRpZiAoY2MgJiYgY2MubGVuZ3RoID4gMClcblx0XHRcdG1hbmlmZXN0LmhlYWRlcnMuY2MgPSBjYztcblxuXHRcdGlmIChiY2MgJiYgYmNjLmxlbmd0aCA+IDApXG5cdFx0XHRtYW5pZmVzdC5oZWFkZXJzLmJjYyA9IGJjYztcblxuXHRcdHJldHVybiBuZXcgTWFuaWZlc3QobWFuaWZlc3QpO1xuXHR9O1xuXG5cdE1hbmlmZXN0LmNyZWF0ZUZyb21Kc29uID0gKG1hbmlmZXN0KSA9PiB7XG5cdFx0bGV0IHJhd01hbmlmZXN0O1xuXHRcdHRyeSB7XG5cdFx0XHRyYXdNYW5pZmVzdCA9IEpTT04ucGFyc2UobWFuaWZlc3QpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgbWFuaWZlc3QgZm9ybWF0IScpO1xuXHRcdH1cblx0XHRyZXR1cm4gbmV3IE1hbmlmZXN0KHJhd01hbmlmZXN0KTtcblx0fTtcblxuXHRyZXR1cm4gTWFuaWZlc3Q7XG59OyJdfQ==","deps":{"mimelib":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/index.js"}},"./src/js/apps/appLavaboom.js":{"source":"'use strict';\n\n\n\nvar AngularApplication = require('../helpers/angularApplication');\nvar application = new AngularApplication({\n\tapplicationName: 'AppLavaboom',\n\tdependencies: ['utils', 'lavaboom.api', 'ngSanitize', 'ui.router', 'ui.bootstrap', 'ui.select', 'textAngular', 'pascalprecht.translate', 'infinite-scroll', 'angular-co', 'ngAutodisable', 'cfp.hotkeys', 'yaru22.angular-timeago', 'dialogs.main', 'ngMessages'],\n\tproductionOnlyDependencies: ['templates']\n});\n\napplication.registerBulks(({\"configs\":({\"cfgHotkeys\":require(\"./AppLavaboom/configs/cfgHotkeys.js\"),\"cfgNavigation\":require(\"./AppLavaboom/configs/cfgNavigation.js\")}),\"controllers\":({\"CtrlThreadList\":require(\"./AppLavaboom/controllers/CtrlThreadList.js\"),\"ctrlCompose\":require(\"./AppLavaboom/controllers/ctrlCompose.js\"),\"ctrlComposeEmail\":require(\"./AppLavaboom/controllers/ctrlComposeEmail.js\"),\"ctrlContactList\":require(\"./AppLavaboom/controllers/ctrlContactList.js\"),\"ctrlContactProfile\":require(\"./AppLavaboom/controllers/ctrlContactProfile.js\"),\"ctrlContactProfileEmail\":require(\"./AppLavaboom/controllers/ctrlContactProfileEmail.js\"),\"ctrlDownload\":require(\"./AppLavaboom/controllers/ctrlDownload.js\"),\"ctrlEmailList\":require(\"./AppLavaboom/controllers/ctrlEmailList.js\"),\"ctrlHotkeys\":require(\"./AppLavaboom/controllers/ctrlHotkeys.js\"),\"ctrlLavaboom\":require(\"./AppLavaboom/controllers/ctrlLavaboom.js\"),\"ctrlLsOff\":require(\"./AppLavaboom/controllers/ctrlLsOff.js\"),\"ctrlNavigation\":require(\"./AppLavaboom/controllers/ctrlNavigation.js\"),\"ctrlSettings\":require(\"./AppLavaboom/controllers/ctrlSettings.js\"),\"ctrlSettingsGeneral\":require(\"./AppLavaboom/controllers/ctrlSettingsGeneral.js\"),\"ctrlSettingsList\":require(\"./AppLavaboom/controllers/ctrlSettingsList.js\"),\"ctrlSettingsPersonal\":require(\"./AppLavaboom/controllers/ctrlSettingsPersonal.js\"),\"ctrlSettingsPlan\":require(\"./AppLavaboom/controllers/ctrlSettingsPlan.js\"),\"ctrlSettingsSecurity\":require(\"./AppLavaboom/controllers/ctrlSettingsSecurity.js\"),\"ctrlSettingsSecurityKey\":require(\"./AppLavaboom/controllers/ctrlSettingsSecurityKey.js\")}),\"decorators\":({\"$sanitize\":require(\"./AppLavaboom/decorators/$sanitize.js\"),\"contacts\":require(\"./AppLavaboom/decorators/contacts.js\"),\"inbox\":require(\"./AppLavaboom/decorators/inbox.js\"),\"taOptions\":require(\"./AppLavaboom/decorators/taOptions.js\"),\"taTools\":require(\"./AppLavaboom/decorators/taTools.js\")}),\"directives\":({\"customDropZone\":require(\"./AppLavaboom/directives/customDropZone.js\"),\"emailBody\":require(\"./AppLavaboom/directives/emailBody.js\"),\"emailBuilder\":require(\"./AppLavaboom/directives/emailBuilder.js\"),\"emailContextMenu\":require(\"./AppLavaboom/directives/emailContextMenu.js\"),\"ngRightClick\":require(\"./AppLavaboom/directives/ngRightClick.js\"),\"openFile\":require(\"./AppLavaboom/directives/openFile.js\"),\"openRawFile\":require(\"./AppLavaboom/directives/openRawFile.js\"),\"tagOnFocusLoss\":require(\"./AppLavaboom/directives/tagOnFocusLoss.js\"),\"textAngularFocus\":require(\"./AppLavaboom/directives/textAngularFocus.js\")}),\"factories\":({\"attachment\":require(\"./AppLavaboom/factories/attachment.js\"),\"contact\":require(\"./AppLavaboom/factories/contact.js\"),\"contactEmail\":require(\"./AppLavaboom/factories/contactEmail.js\"),\"email\":require(\"./AppLavaboom/factories/email.js\"),\"key\":require(\"./AppLavaboom/factories/key.js\"),\"label\":require(\"./AppLavaboom/factories/label.js\"),\"manifest\":require(\"./AppLavaboom/factories/manifest.js\"),\"thread\":require(\"./AppLavaboom/factories/thread.js\")}),\"filters\":({\"defaultValue\":require(\"./AppLavaboom/filters/defaultValue.js\"),\"fileExtension\":require(\"./AppLavaboom/filters/fileExtension.js\"),\"fileName\":require(\"./AppLavaboom/filters/fileName.js\"),\"filesize\":require(\"./AppLavaboom/filters/filesize.js\"),\"lavadate\":require(\"./AppLavaboom/filters/lavadate.js\"),\"members\":require(\"./AppLavaboom/filters/members.js\"),\"unread\":require(\"./AppLavaboom/filters/unread.js\")}),\"runs\":({\"rootScopeHelpers\":require(\"./AppLavaboom/runs/rootScopeHelpers.js\")}),\"services\":({\"composeHelpers\":require(\"./AppLavaboom/services/composeHelpers.js\"),\"contacts\":require(\"./AppLavaboom/services/contacts.js\"),\"hotkey\":require(\"./AppLavaboom/services/hotkey.js\"),\"inbox\":require(\"./AppLavaboom/services/inbox.js\"),\"router\":require(\"./AppLavaboom/services/router.js\"),\"textAngularHelpers\":require(\"./AppLavaboom/services/textAngularHelpers.js\")})}));\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL2FwcExhdmFib29tLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDOztBQUU1QyxJQUFNLGtCQUFrQixHQUFHLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQ3BFLElBQU0sV0FBVyxHQUFHLElBQUksa0JBQWtCLENBQUM7QUFDMUMsZ0JBQWUsRUFBRSxhQUFhO0FBQzlCLGFBQVksRUFBRSxDQUNiLE9BQU8sRUFDUCxjQUFjLEVBQ2QsWUFBWSxFQUNaLFdBQVcsRUFDWCxjQUFjLEVBQ2QsV0FBVyxFQUNYLGFBQWEsRUFDYix3QkFBd0IsRUFDeEIsaUJBQWlCLEVBQ2pCLFlBQVksRUFDWixlQUFlLEVBQ2YsYUFBYSxFQUNiLHdCQUF3QixFQUN4QixjQUFjLEVBQ2QsWUFBWSxDQUNaO0FBQ0QsMkJBQTBCLEVBQUUsQ0FDM0IsV0FBVyxDQUNYO0NBQ0QsQ0FBQyxDQUFDOztBQUVILFdBQVcsQ0FBQyxhQUFhLENBQ3hCLFdBQVcsQ0FBQyxTQUFTLEdBQUcsZUFBZSxFQUFFLFNBQVMsQ0FBQyxDQUNuRCxDQUFDIiwiZmlsZSI6Ii9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL2FwcExhdmFib29tLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnVsa1JlcXVpcmUgPSByZXF1aXJlKCdidWxrLXJlcXVpcmUnKTtcclxuXHJcbmNvbnN0IEFuZ3VsYXJBcHBsaWNhdGlvbiA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYW5ndWxhckFwcGxpY2F0aW9uJyk7XHJcbmNvbnN0IGFwcGxpY2F0aW9uID0gbmV3IEFuZ3VsYXJBcHBsaWNhdGlvbih7XHJcblx0YXBwbGljYXRpb25OYW1lOiAnQXBwTGF2YWJvb20nLFxyXG5cdGRlcGVuZGVuY2llczogW1xyXG5cdFx0J3V0aWxzJyxcclxuXHRcdCdsYXZhYm9vbS5hcGknLFxyXG5cdFx0J25nU2FuaXRpemUnLFxyXG5cdFx0J3VpLnJvdXRlcicsXHJcblx0XHQndWkuYm9vdHN0cmFwJyxcclxuXHRcdCd1aS5zZWxlY3QnLFxyXG5cdFx0J3RleHRBbmd1bGFyJyxcclxuXHRcdCdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJyxcclxuXHRcdCdpbmZpbml0ZS1zY3JvbGwnLFxyXG5cdFx0J2FuZ3VsYXItY28nLFxyXG5cdFx0J25nQXV0b2Rpc2FibGUnLFxyXG5cdFx0J2NmcC5ob3RrZXlzJyxcclxuXHRcdCd5YXJ1MjIuYW5ndWxhci10aW1lYWdvJyxcclxuXHRcdCdkaWFsb2dzLm1haW4nLFxyXG5cdFx0J25nTWVzc2FnZXMnXHJcblx0XSxcclxuXHRwcm9kdWN0aW9uT25seURlcGVuZGVuY2llczogW1xyXG5cdFx0J3RlbXBsYXRlcydcclxuXHRdXHJcbn0pO1xyXG5cclxuYXBwbGljYXRpb24ucmVnaXN0ZXJCdWxrcyhcclxuXHRidWxrUmVxdWlyZShfX2Rpcm5hbWUgKyAnL0FwcExhdmFib29tLycsICcqKi8qLmpzJylcclxuKTsiXX0=","deps":{"./AppLavaboom/configs/cfgHotkeys.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/configs/cfgHotkeys.js","./AppLavaboom/configs/cfgNavigation.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/configs/cfgNavigation.js","./AppLavaboom/controllers/CtrlThreadList.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/CtrlThreadList.js","./AppLavaboom/controllers/ctrlCompose.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlCompose.js","./AppLavaboom/controllers/ctrlComposeEmail.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlComposeEmail.js","./AppLavaboom/controllers/ctrlContactList.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlContactList.js","./AppLavaboom/controllers/ctrlContactProfile.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlContactProfile.js","./AppLavaboom/controllers/ctrlContactProfileEmail.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlContactProfileEmail.js","./AppLavaboom/controllers/ctrlDownload.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlDownload.js","./AppLavaboom/controllers/ctrlEmailList.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlEmailList.js","./AppLavaboom/controllers/ctrlHotkeys.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlHotkeys.js","./AppLavaboom/controllers/ctrlLsOff.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlLsOff.js","./AppLavaboom/controllers/ctrlNavigation.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlNavigation.js","./AppLavaboom/controllers/ctrlSettings.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettings.js","./AppLavaboom/controllers/ctrlSettingsGeneral.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsGeneral.js","./AppLavaboom/controllers/ctrlSettingsList.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsList.js","./AppLavaboom/controllers/ctrlSettingsPersonal.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsPersonal.js","./AppLavaboom/controllers/ctrlSettingsPlan.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsPlan.js","./AppLavaboom/controllers/ctrlSettingsSecurity.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsSecurity.js","./AppLavaboom/controllers/ctrlSettingsSecurityKey.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlSettingsSecurityKey.js","./AppLavaboom/decorators/$sanitize.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/$sanitize.js","./AppLavaboom/decorators/contacts.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/contacts.js","./AppLavaboom/decorators/inbox.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/inbox.js","./AppLavaboom/decorators/taOptions.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/taOptions.js","./AppLavaboom/decorators/taTools.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/decorators/taTools.js","./AppLavaboom/directives/customDropZone.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/customDropZone.js","./AppLavaboom/directives/emailBody.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/emailBody.js","./AppLavaboom/directives/emailBuilder.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/emailBuilder.js","./AppLavaboom/directives/emailContextMenu.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/emailContextMenu.js","./AppLavaboom/directives/ngRightClick.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/ngRightClick.js","./AppLavaboom/directives/openFile.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/openFile.js","./AppLavaboom/directives/openRawFile.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/openRawFile.js","./AppLavaboom/directives/tagOnFocusLoss.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/tagOnFocusLoss.js","./AppLavaboom/directives/textAngularFocus.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/directives/textAngularFocus.js","./AppLavaboom/factories/attachment.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/attachment.js","./AppLavaboom/factories/contact.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/contact.js","./AppLavaboom/factories/contactEmail.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/contactEmail.js","./AppLavaboom/factories/email.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/email.js","./AppLavaboom/factories/key.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/key.js","./AppLavaboom/factories/label.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/label.js","./AppLavaboom/factories/manifest.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/manifest.js","./AppLavaboom/factories/thread.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/factories/thread.js","./AppLavaboom/filters/defaultValue.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/defaultValue.js","./AppLavaboom/filters/fileExtension.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/fileExtension.js","./AppLavaboom/filters/fileName.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/fileName.js","./AppLavaboom/filters/filesize.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/filesize.js","./AppLavaboom/filters/lavadate.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/lavadate.js","./AppLavaboom/filters/members.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/members.js","./AppLavaboom/filters/unread.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/filters/unread.js","./AppLavaboom/runs/rootScopeHelpers.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/runs/rootScopeHelpers.js","./AppLavaboom/services/composeHelpers.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/composeHelpers.js","./AppLavaboom/services/contacts.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/contacts.js","./AppLavaboom/services/hotkey.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/hotkey.js","./AppLavaboom/services/inbox.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/inbox.js","./AppLavaboom/services/router.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/router.js","./AppLavaboom/services/textAngularHelpers.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/services/textAngularHelpers.js","../helpers/angularApplication":"/Users/piggyslasher/Sites/lavaboom-web/src/js/helpers/angularApplication.js","./AppLavaboom/controllers/ctrlLavaboom.js":"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlLavaboom.js"}},"/Users/piggyslasher/Sites/lavaboom-web/src/js/apps/AppLavaboom/controllers/ctrlLavaboom.js":{"source":"'use strict';\n\nmodule.exports = /*@ngInject*/function ($rootScope, $timeout, $scope, $state, $translate, notifications, tests, utils, LavaboomAPI, co, translate, crypto, user, inbox, contacts, hotkey, loader, timeAgo) {\n\tvar translations = {\n\t\tLB_INITIALIZING_I18N: '',\n\t\tLB_INITIALIZING_OPENPGP: '',\n\t\tLB_AUTHENTICATING: '',\n\t\tLB_DECRYPTING: '',\n\t\tLB_LOADING: '',\n\t\tLB_INITIALIZATION_FAILED: '',\n\t\tLB_SUCCESS: ''\n\t};\n\n\t$scope.ddEventFilter = function (name, event) {\n\t\treturn event.target.id.startsWith('taTextElement');\n\t};\n\n\t$scope.tooltipDelay = function () {\n\t\treturn window.getComputedStyle(document.getElementById('compose-action')).display === 'none' ? true : 1000000;\n\t};\n\n\t$scope.showLeftPanel = false;\n\t$scope.toggleLeftPanel = function () {\n\t\t$scope.showLeftPanel = !$scope.showLeftPanel;\n\t\tconsole.log('left panel triggered');\n\t};\n\n\t$scope.showDetails = false;\n\t$scope.toggleShowDetails = function () {\n\t\t$scope.showDetails = !$scope.showDetails;\n\t\tconsole.log('showDetails triggered');\n\t};\n\n\tvar initializeTimeAgo = function initializeTimeAgo() {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar datesTranslations;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tdatesTranslations = {\n\t\t\t\t\t\t\tPREFIX_AGO: '',\n\t\t\t\t\t\t\tPREFIX_FROM_NOW: '',\n\t\t\t\t\t\t\tSUFFIX_AGO: '',\n\t\t\t\t\t\t\tSUFFIX_FROM_NOW: '',\n\t\t\t\t\t\t\tSECONDS: '',\n\t\t\t\t\t\t\tMINUTE: '',\n\t\t\t\t\t\t\tMINUTES: '',\n\t\t\t\t\t\t\tHOUR: '',\n\t\t\t\t\t\t\tHOURS: '',\n\t\t\t\t\t\t\tDAY: '',\n\t\t\t\t\t\t\tDAYS: '',\n\t\t\t\t\t\t\tMONTH: '',\n\t\t\t\t\t\t\tMONTHS: '',\n\t\t\t\t\t\t\tYEAR: '',\n\t\t\t\t\t\t\tYEARS: ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tcontext$3$0.next = 3;\n\t\t\t\t\t\treturn $translate.bindAsObject(datesTranslations, 'DATES.TIMEAGO', null, function () {\n\t\t\t\t\t\t\tvar fullLangCode = $translate.instant('LANG.FULL_CODE');\n\t\t\t\t\t\t\tvar settings = timeAgo.settings.strings[fullLangCode];\n\n\t\t\t\t\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\t\t\t\t\tvar _didIteratorError = false;\n\t\t\t\t\t\t\tvar _iteratorError = undefined;\n\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tfor (var _iterator = Object.keys(datesTranslations)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\t\t\t\t\tvar k = _step.value;\n\n\t\t\t\t\t\t\t\t\tdatesTranslations[k] = datesTranslations[k].trim();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t\t\t\t_iteratorError = err;\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator['return']) {\n\t\t\t\t\t\t\t\t\t\t_iterator['return']();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (datesTranslations.PREFIX_AGO) settings.prefixAgo = datesTranslations.PREFIX_AGO;\n\t\t\t\t\t\t\tif (datesTranslations.PREFIX_FROM_NOW) settings.prefixFromNow = datesTranslations.PREFIX_FROM_NOW;\n\t\t\t\t\t\t\tif (datesTranslations.SUFFIX_AGO) settings.suffixAgo = datesTranslations.SUFFIX_AGO;\n\t\t\t\t\t\t\tif (datesTranslations.SUFFIX_FROM_NOW) settings.suffixFromNow = datesTranslations.SUFFIX_FROM_NOW;\n\t\t\t\t\t\t\tif (datesTranslations.SECONDS) settings.seconds = datesTranslations.SECONDS;\n\t\t\t\t\t\t\tif (datesTranslations.MINUTE) settings.minute = datesTranslations.MINUTE;\n\t\t\t\t\t\t\tif (datesTranslations.MINUTES) settings.minutes = datesTranslations.MINUTES;\n\t\t\t\t\t\t\tif (datesTranslations.HOUR) settings.hour = datesTranslations.HOUR;\n\t\t\t\t\t\t\tif (datesTranslations.HOURS) settings.hours = datesTranslations.HOURS;\n\t\t\t\t\t\t\tif (datesTranslations.DAY) settings.day = datesTranslations.DAY;\n\t\t\t\t\t\t\tif (datesTranslations.DAYS) settings.days = datesTranslations.DAYS;\n\t\t\t\t\t\t\tif (datesTranslations.MONTH) settings.month = datesTranslations.MONTH;\n\t\t\t\t\t\t\tif (datesTranslations.MONTHS) settings.months = datesTranslations.MONTHS;\n\t\t\t\t\t\t\tif (datesTranslations.YEAR) settings.year = datesTranslations.YEAR;\n\t\t\t\t\t\t\tif (datesTranslations.YEARS) settings.years = datesTranslations.YEARS;\n\t\t\t\t\t\t});\n\n\t\t\t\t\tcase 3:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this);\n\t\t}));\n\t};\n\n\t$scope.initializeApplication = function () {\n\t\treturn co(regeneratorRuntime.mark(function callee$2$0() {\n\t\t\tvar connectionPromise;\n\t\t\treturn regeneratorRuntime.wrap(function callee$2$0$(context$3$0) {\n\t\t\t\twhile (1) switch (context$3$0.prev = context$3$0.next) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tcontext$3$0.prev = 0;\n\t\t\t\t\t\tconnectionPromise = LavaboomAPI.connect();\n\t\t\t\t\t\tcontext$3$0.next = 4;\n\t\t\t\t\t\treturn translate.initialize();\n\n\t\t\t\t\tcase 4:\n\t\t\t\t\t\tif ($rootScope.isInitialized) {\n\t\t\t\t\t\t\tcontext$3$0.next = 8;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 7;\n\t\t\t\t\t\treturn $translate.bindAsObject(translations, 'LOADER');\n\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\tinitializeTimeAgo();\n\n\t\t\t\t\tcase 8:\n\n\t\t\t\t\t\tloader.incProgress(translations.LB_INITIALIZING_OPENPGP, 1);\n\n\t\t\t\t\t\tcrypto.initialize();\n\n\t\t\t\t\t\tcontext$3$0.next = 12;\n\t\t\t\t\t\treturn connectionPromise;\n\n\t\t\t\t\tcase 12:\n\t\t\t\t\t\tcontext$3$0.next = 14;\n\t\t\t\t\t\treturn tests.initialize();\n\n\t\t\t\t\tcase 14:\n\n\t\t\t\t\t\tloader.incProgress(translations.LB_AUTHENTICATING, 5);\n\t\t\t\t\t\tcontext$3$0.next = 17;\n\t\t\t\t\t\treturn user.gatherUserInformation();\n\n\t\t\t\t\tcase 17:\n\n\t\t\t\t\t\tloader.incProgress(translations.LB_LOADING, 5);\n\t\t\t\t\t\tcontext$3$0.next = 20;\n\t\t\t\t\t\treturn [inbox.initialize(), contacts.initialize()];\n\n\t\t\t\t\tcase 20:\n\t\t\t\t\t\tcontext$3$0.next = 22;\n\t\t\t\t\t\treturn tests.performCompatibilityChecks();\n\n\t\t\t\t\tcase 22:\n\t\t\t\t\t\tif (!($state.current.name == 'empty')) {\n\t\t\t\t\t\t\tcontext$3$0.next = 25;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontext$3$0.next = 25;\n\t\t\t\t\t\treturn $state.go('main.inbox.label', { labelName: 'Inbox', threadId: null }, { reload: true });\n\n\t\t\t\t\tcase 25:\n\n\t\t\t\t\t\t$rootScope.isInitialized = true;\n\n\t\t\t\t\t\thotkey.initialize(user.settings.isHotkeyEnabled);\n\t\t\t\t\t\treturn context$3$0.abrupt('return', { lbDone: translations.LB_SUCCESS });\n\n\t\t\t\t\tcase 30:\n\t\t\t\t\t\tcontext$3$0.prev = 30;\n\t\t\t\t\t\tcontext$3$0.t54 = context$3$0['catch'](0);\n\t\t\t\t\t\tthrow { message: translations.LB_INITIALIZATION_FAILED, error: context$3$0.t54 };\n\n\t\t\t\t\tcase 33:\n\t\t\t\t\tcase 'end':\n\t\t\t\t\t\treturn context$3$0.stop();\n\t\t\t\t}\n\t\t\t}, callee$2$0, this, [[0, 30]]);\n\t\t}));\n\t};\n\n\t$scope.onApplicationReady = function () {\n\t\t$rootScope.$broadcast('initialization-completed');\n\t};\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9waWdneXNsYXNoZXIvU2l0ZXMvbGF2YWJvb20td2ViL3NyYy9qcy9hcHBzL0FwcExhdmFib29tL2NvbnRyb2xsZXJzL2N0cmxMYXZhYm9vbS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLGdCQUFnQixVQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQ3JFLGFBQWEsRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUMzQixXQUFXLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUs7QUFDaEcsS0FBTSxZQUFZLEdBQUc7QUFDcEIsc0JBQW9CLEVBQUcsRUFBRTtBQUN6Qix5QkFBdUIsRUFBRyxFQUFFO0FBQzVCLG1CQUFpQixFQUFHLEVBQUU7QUFDdEIsZUFBYSxFQUFHLEVBQUU7QUFDbEIsWUFBVSxFQUFHLEVBQUU7QUFDZiwwQkFBd0IsRUFBRyxFQUFFO0FBQzdCLFlBQVUsRUFBRyxFQUFFO0VBQ2YsQ0FBQzs7QUFFRixPQUFNLENBQUMsYUFBYSxHQUFHLFVBQUMsSUFBSSxFQUFFLEtBQUs7U0FBSyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDO0VBQUEsQ0FBQzs7QUFFcEYsT0FBTSxDQUFDLFlBQVksR0FBRztTQUFNLEFBQUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLE9BQU8sS0FBRyxNQUFNLEdBQUksSUFBSSxHQUFHLE9BQU87RUFBQSxDQUFDOztBQUVuSSxPQUFNLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FBQztBQUM3QixPQUFNLENBQUMsZUFBZSxHQUFHLFlBQU07QUFDOUIsUUFBTSxDQUFDLGFBQWEsR0FBRyxDQUFDLE1B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LEtBQUssQ0FBQyxVQUFVLEVBQUUsRUFBRSxRQUFRLENBQUMsVUFBVSxFQUFFLENBQUM7Ozs7YUFFM0MsS0FBSyxDQUFDLDBCQUEwQixFQUFFOzs7WUFFcEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFBOzs7Ozs7YUFDM0IsTUFBTSxDQUFDLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxFQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBQyxFQUFFLEVBQUMsTUFBTSxFQUFFLElBQUksRUFBQyxDQUFDOzs7O0FBRTFGLGdCQUFVLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQzs7QUFFaEMsWUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDOzBDQUMxQyxFQUFDLE1BQU0sRUFBRSxZQUFZLENBQUMsVUFBVSxFQUFDOzs7OztZQUVsQyxFQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsd0JBQXdCLEVBQUUsS0FBSyxpQkFBTyxFQUFDOzs7Ozs7O0dBRXJFLEVBQUM7RUFBQSxDQUFDOztBQUVILE9BQU0sQ0FBQyxrQkFBa0IsR0FBRyxZQUFNO0FBQ2pDLFlBQVUsQ0FBQyxVQUFVLENBQUMsMEJBQTBCLENBQUMsQ0FBQztFQUNsRCxDQUFDO0NBQ0YsQ0FBQyIsImZpbGUiOiIvVXNlcnMvcGlnZ3lzbGFzaGVyL1NpdGVzL2xhdmFib29tLXdlYi9zcmMvanMvYXBwcy9BcHBMYXZhYm9vbS9jb250cm9sbGVycy9jdHJsTGF2YWJvb20uanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IC8qQG5nSW5qZWN0Ki8oJHJvb3RTY29wZSwgJHRpbWVvdXQsICRzY29wZSwgJHN0YXRlLCAkdHJhbnNsYXRlLFxyXG5cdFx0XHRcdFx0XHRcdCAgIG5vdGlmaWNhdGlvbnMsIHRlc3RzLCB1dGlscyxcclxuXHRcdFx0XHRcdFx0XHQgICBMYXZhYm9vbUFQSSwgY28sIHRyYW5zbGF0ZSwgY3J5cHRvLCB1c2VyLCBpbmJveCwgY29udGFjdHMsIGhvdGtleSwgbG9hZGVyLCB0aW1lQWdvKSA9PiB7XHJcblx0Y29uc3QgdHJhbnNsYXRpb25zID0ge1xyXG5cdFx0TEJfSU5JVElBTElaSU5HX0kxOE4gOiAnJyxcclxuXHRcdExCX0lOSVRJQUxJWklOR19PUEVOUEdQIDogJycsXHJcblx0XHRMQl9BVVRIRU5USUNBVElORyA6ICcnLFxyXG5cdFx0TEJfREVDUllQVElORyA6ICcnLFxyXG5cdFx0TEJfTE9BRElORyA6ICcnLFxyXG5cdFx0TEJfSU5JVElBTElaQVRJT05fRkFJTEVEIDogJycsXHJcblx0XHRMQl9TVUNDRVNTIDogJydcclxuXHR9O1xyXG5cclxuXHQkc2NvcGUuZGRFdmVudEZpbHRlciA9IChuYW1lLCBldmVudCkgPT4gZXZlbnQudGFyZ2V0LmlkLnN0YXJ0c1dpdGgoJ3RhVGV4dEVsZW1lbnQnKTtcclxuXHJcblx0JHNjb3BlLnRvb2x0aXBEZWxheSA9ICgpID0+ICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcG9zZS1hY3Rpb24nKSkuZGlzcGxheT09PSdub25lJykgPyB0cnVlIDogMTAwMDAwMDtcclxuXHJcblx0JHNjb3BlLnNob3dMZWZ0UGFuZWwgPSBmYWxzZTtcclxuXHQkc2NvcGUudG9nZ2xlTGVmdFBhbmVsID0gKCkgPT4ge1xyXG5cdFx0JHNjb3BlLnNob3dMZWZ0UGFuZWwgPSAhJHNjb3BlLnNob3dMZWZ0UGFuZWw7XHJcblx0XHRjb25zb2xlLmxvZygnbGVmdCBwYW5lbCB0cmlnZ2VyZWQnKTtcclxuXHR9XHJcblxyXG5cdCRzY29wZS5zaG93RGV0YWlscyA9IGZhbHNlO1xyXG5cdCRzY29wZS50b2dnbGVTaG93RGV0YWlscyA9ICgpID0+IHtcclxuXHRcdCRzY29wZS5zaG93RGV0YWlscyA9ICEkc2NvcGUuc2hvd0RldGFpbHM7XHJcblx0XHRjb25zb2xlLmxvZygnc2hvd0RldGFpbHMgdHJpZ2dlcmVkJyk7XHJcblx0fVxyXG5cclxuXHRjb25zdCBpbml0aWFsaXplVGltZUFnbyA9ICgpID0+IGNvKGZ1bmN0aW9uICooKXtcclxuXHRcdGNvbnN0IGRhdGVzVHJhbnNsYXRpb25zID0ge1xyXG5cdFx0XHRQUkVGSVhfQUdPOiAnJyxcclxuXHRcdFx0UFJFRklYX0ZST01fTk9XOiAnJyxcclxuXHRcdFx0U1VGRklYX0FHTzogJycsXHJcblx0XHRcdFNVRkZJWF9GUk9NX05PVzogJycsXHJcblx0XHRcdFNFQ09ORFM6ICcnLFxyXG5cdFx0XHRNSU5VVEU6ICcnLFxyXG5cdFx0XHRNSU5VVEVTOiAnJyxcclxuXHRcdFx0SE9VUjogJycsXHJcblx0XHRcdEhPVVJTOiAnJyxcclxuXHRcdFx0REFZOiAnJyxcclxuXHRcdFx0REFZUzogJycsXHJcblx0XHRcdE1PTlRIOiAnJyxcclxuXHRcdFx0TU9OVEhTOiAnJyxcclxuXHRcdFx0WUVBUjogJycsXHJcblx0XHRcdFlFQVJTOiAnJ1xyXG5cdFx0fTtcclxuXHJcblx0XHR5aWVsZCAkdHJhbnNsYXRlLmJpbmRBc09iamVjdChkYXRlc1RyYW5zbGF0aW9ucywgJ0RBVEVTLlRJTUVBR08nLCBudWxsLCAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IGZ1bGxMYW5nQ29kZSA9ICR0cmFuc2xhdGUuaW5zdGFudCgnTEFORy5GVUxMX0NPREUnKTtcclxuXHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aW1lQWdvLnNldHRpbmdzLnN0cmluZ3NbZnVsbExhbmdDb2RlXTtcclxuXHJcblx0XHRcdGZvcihsZXQgayBvZiBPYmplY3Qua2V5cyhkYXRlc1RyYW5zbGF0aW9ucykpXHJcblx0XHRcdFx0ZGF0ZXNUcmFuc2xhdGlvbnNba10gPSBkYXRlc1RyYW5zbGF0aW9uc1trXS50cmltKCk7XHJcblxyXG5cdFx0XHRpZiAoZGF0ZXNUcmFuc2xhdGlvbnMuUFJFRklYX0FHTylcclxuXHRcdFx0XHRzZXR0aW5ncy5wcmVmaXhBZ28gPSBkYXRlc1RyYW5zbGF0aW9ucy5QUkVGSVhfQUdPO1xyXG5cdFx0XHRpZiAoZGF0ZXNUcmFuc2xhdGlvbnMuUFJFRklYX0ZST01fTk9XKVxyXG5cdFx0XHRcdHNldHRpbmdzLnByZWZpeEZyb21Ob3cgPSBkYXRlc1RyYW5zbGF0aW9ucy5QUkVGSVhfRlJPTV9OT1c7XHJcblx0XHRcdGlmIChkYXRlc1RyYW5zbGF0aW9ucy5TVUZGSVhfQUdPKVxyXG5cdFx0XHRcdHNldHRpbmdzLnN1ZmZpeEFnbyA9IGRhdGVzVHJhbnNsYXRpb25zLlNVRkZJWF9BR087XHJcblx0XHRcdGlmIChkYXRlc1RyYW5zbGF0aW9ucy5TVUZGSVhfRlJPTV9OT1cpXHJcblx0XHRcdFx0c2V0dGluZ3Muc3VmZml4RnJvbU5vdyA9IGRhdGVzVHJhbnNsYXRpb25zLlNVRkZJWF9GUk9NX05PVztcclxuXHRcdFx0aWYgKGRhdGVzVHJhbnNsYXRpb25zLlNFQ09ORFMpXHJcblx0XHRcdFx0c2V0dGluZ3Muc2Vjb25kcyA9IGRhdGVzVHJhbnNsYXRpb25zLlNFQ09ORFM7XHJcblx0XHRcdGlmIChkYXRlc1RyYW5zbGF0aW9ucy5NSU5VVEUpXHJcblx0XHRcdFx0c2V0dGluZ3MubWludXRlID0gZGF0ZXNUcmFuc2xhdGlvbnMuTUlOVVRFO1xyXG5cdFx0XHRpZiAoZGF0ZXNUcmFuc2xhdGlvbnMuTUlOVVRFUylcclxuXHRcdFx0XHRzZXR0aW5ncy5taW51dGVzID0gZGF0ZXNUcmFuc2xhdGlvbnMuTUlOVVRFUztcclxuXHRcdFx0aWYgKGRhdGVzVHJhbnNsYXRpb25zLkhPVVIpXHJcblx0XHRcdFx0c2V0dGluZ3MuaG91ciA9IGRhdGVzVHJhbnNsYXRpb25zLkhPVVI7XHJcblx0XHRcdGlmIChkYXRlc1RyYW5zbGF0aW9ucy5IT1VSUylcclxuXHRcdFx0XHRzZXR0aW5ncy5ob3VycyA9IGRhdGVzVHJhbnNsYXRpb25zLkhPVVJTO1xyXG5cdFx0XHRpZiAoZGF0ZXNUcmFuc2xhdGlvbnMuREFZKVxyXG5cdFx0XHRcdHNldHRpbmdzLmRheSA9IGRhdGVzVHJhbnNsYXRpb25zLkRBWTtcclxuXHRcdFx0aWYgKGRhdGVzVHJhbnNsYXRpb25zLkRBWVMpXHJcblx0XHRcdFx0c2V0dGluZ3MuZGF5cyA9IGRhdGVzVHJhbnNsYXRpb25zLkRBWVM7XHJcblx0XHRcdGlmIChkYXRlc1RyYW5zbGF0aW9ucy5NT05USClcclxuXHRcdFx0XHRzZXR0aW5ncy5tb250aCA9IGRhdGVzVHJhbnNsYXRpb25zLk1PTlRIO1xyXG5cdFx0XHRpZiAoZGF0ZXNUcmFuc2xhdGlvbnMuTU9OVEhTKVxyXG5cdFx0XHRcdHNldHRpbmdzLm1vbnRocyA9IGRhdGVzVHJhbnNsYXRpb25zLk1PTlRIUztcclxuXHRcdFx0aWYgKGRhdGVzVHJhbnNsYXRpb25zLllFQVIpXHJcblx0XHRcdFx0c2V0dGluZ3MueWVhciA9IGRhdGVzVHJhbnNsYXRpb25zLllFQVI7XHJcblx0XHRcdGlmIChkYXRlc1RyYW5zbGF0aW9ucy5ZRUFSUylcclxuXHRcdFx0XHRzZXR0aW5ncy55ZWFycyA9IGRhdGVzVHJhbnNsYXRpb25zLllFQVJTO1xyXG5cdFx0fSk7XHJcblx0fSk7XHJcblxyXG5cdCRzY29wZS5pbml0aWFsaXplQXBwbGljYXRpb24gPSAoKSA9PiBjbyhmdW5jdGlvbiAqKCl7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRsZXQgY29ubmVjdGlvblByb21pc2UgPSBMYXZhYm9vbUFQSS5jb25uZWN0KCk7XHJcblxyXG5cdFx0XHR5aWVsZCB0cmFuc2xhdGUuaW5pdGlhbGl6ZSgpO1xyXG5cclxuXHRcdFx0aWYgKCEkcm9vdFNjb3BlLmlzSW5pdGlhbGl6ZWQpIHtcclxuXHRcdFx0XHR5aWVsZCAkdHJhbnNsYXRlLmJpbmRBc09iamVjdCh0cmFuc2xhdGlvbnMsICdMT0FERVInKTtcclxuXHRcdFx0XHRpbml0aWFsaXplVGltZUFnbygpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRsb2FkZXIuaW5jUHJvZ3Jlc3ModHJhbnNsYXRpb25zLkxCX0lOSVRJQUxJWklOR19PUEVOUEdQLCAxKTtcclxuXHJcblx0XHRcdGNyeXB0by5pbml0aWFsaXplKCk7XHJcblxyXG5cdFx0XHR5aWVsZCBjb25uZWN0aW9uUHJvbWlzZTtcclxuXHJcblx0XHRcdHlpZWxkIHRlc3RzLmluaXRpYWxpemUoKTtcclxuXHJcblx0XHRcdGxvYWRlci5pbmNQcm9ncmVzcyh0cmFuc2xhdGlvbnMuTEJfQVVUSEVOVElDQVRJTkcsIDUpO1xyXG5cdFx0XHR5aWVsZCB1c2VyLmdhdGhlclVzZXJJbmZvcm1hdGlvbigpO1xyXG5cclxuXHRcdFx0bG9hZGVyLmluY1Byb2dyZXNzKHRyYW5zbGF0aW9ucy5MQl9MT0FESU5HLCA1KTtcclxuXHRcdFx0eWllbGQgW2luYm94LmluaXRpYWxpemUoKSwgY29udGFjdHMuaW5pdGlhbGl6ZSgpXTtcclxuXHJcblx0XHRcdHlpZWxkIHRlc3RzLnBlcmZvcm1Db21wYXRpYmlsaXR5Q2hlY2tzKCk7XHJcblxyXG5cdFx0XHRpZiAoJHN0YXRlLmN1cnJlbnQubmFtZSA9PSAnZW1wdHknKVxyXG5cdFx0XHRcdHlpZWxkICRzdGF0ZS5nbygnbWFpbi5pbmJveC5sYWJlbCcsIHtsYWJlbE5hbWU6ICdJbmJveCcsIHRocmVhZElkOiBudWxsfSwge3JlbG9hZDogdHJ1ZX0pO1xyXG5cclxuXHRcdFx0JHJvb3RTY29wZS5pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdGhvdGtleS5pbml0aWFsaXplKHVzZXIuc2V0dGluZ3MuaXNIb3RrZXlFbmFibGVkKTtcclxuXHRcdFx0cmV0dXJuIHtsYkRvbmU6IHRyYW5zbGF0aW9ucy5MQl9TVUNDRVNTfTtcclxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XHJcblx0XHRcdHRocm93IHttZXNzYWdlOiB0cmFuc2xhdGlvbnMuTEJfSU5JVElBTElaQVRJT05fRkFJTEVELCBlcnJvcjogZXJyb3J9O1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkc2NvcGUub25BcHBsaWNhdGlvblJlYWR5ID0gKCkgPT4ge1xyXG5cdFx0JHJvb3RTY29wZS4kYnJvYWRjYXN0KCdpbml0aWFsaXphdGlvbi1jb21wbGV0ZWQnKTtcclxuXHR9O1xyXG59OyJdfQ==","deps":{}}},"packageCache":{"/src/js/apps/package.json":false,"/src/js/package.json":false,"/src/package.json":false,"./src/js/apps/appLavaboom.js":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process/package.json":{"author":{"name":"Roman Shtylman","email":"shtylman@gmail.com"},"name":"process","description":"process information for node.js and browsers","keywords":["process"],"version":"0.10.1","repository":{"type":"git","url":"git://github.com/shtylman/node-process.git"},"browser":"./browser.js","main":"./index.js","engines":{"node":">= 0.6.0"},"gitHead":"b723f82028b12e94abfe732e9f432a3fb2b5cece","bugs":{"url":"https://github.com/shtylman/node-process/issues"},"homepage":"https://github.com/shtylman/node-process","_id":"process@0.10.1","scripts":{},"_shasum":"842457cc51cfed72dc775afeeafb8c6034372725","_from":"process@>=0.10.0 <0.11.0","_npmVersion":"2.6.1","_nodeVersion":"0.10.35","_npmUser":{"name":"shtylman","email":"shtylman@gmail.com"},"maintainers":[{"name":"coolaj86","email":"coolaj86@gmail.com"},{"name":"shtylman","email":"shtylman@gmail.com"}],"dist":{"shasum":"842457cc51cfed72dc775afeeafb8c6034372725","tarball":"http://registry.npmjs.org/process/-/process-0.10.1.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/process/-/process-0.10.1.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process/browser.js":{"author":{"name":"Roman Shtylman","email":"shtylman@gmail.com"},"name":"process","description":"process information for node.js and browsers","keywords":["process"],"version":"0.10.1","repository":{"type":"git","url":"git://github.com/shtylman/node-process.git"},"browser":"./browser.js","main":"./index.js","engines":{"node":">= 0.6.0"},"gitHead":"b723f82028b12e94abfe732e9f432a3fb2b5cece","bugs":{"url":"https://github.com/shtylman/node-process/issues"},"homepage":"https://github.com/shtylman/node-process","_id":"process@0.10.1","scripts":{},"_shasum":"842457cc51cfed72dc775afeeafb8c6034372725","_from":"process@>=0.10.0 <0.11.0","_npmVersion":"2.6.1","_nodeVersion":"0.10.35","_npmUser":{"name":"shtylman","email":"shtylman@gmail.com"},"maintainers":[{"name":"coolaj86","email":"coolaj86@gmail.com"},{"name":"shtylman","email":"shtylman@gmail.com"}],"dist":{"shasum":"842457cc51cfed72dc775afeeafb8c6034372725","tarball":"http://registry.npmjs.org/process/-/process-0.10.1.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/process/-/process-0.10.1.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/process"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/package.json":{"name":"buffer","description":"Node.js Buffer API, for the browser","version":"3.2.2","author":{"name":"Feross Aboukhadijeh","email":"feross@feross.org","url":"http://feross.org"},"bugs":{"url":"https://github.com/feross/buffer/issues"},"contributors":[{"name":"Romain Beauxis","email":"toots@rastageeks.org"},{"name":"James Halliday","email":"mail@substack.net"}],"dependencies":{"base64-js":"0.0.8","ieee754":"^1.1.4","is-array":"^1.0.1"},"devDependencies":{"benchmark":"^1.0.0","browserify":"^10.1.0","concat-stream":"^1.4.7","hyperquest":"^1.0.1","is-nan":"^1.0.1","split":"^0.3.2","standard":"^3.6.1","tape":"^4.0.0","through2":"^0.6.3","zuul":"^3.0.0"},"homepage":"https://github.com/feross/buffer","keywords":["buffer","browserify","compatible","browser","arraybuffer","uint8array","dataview"],"license":"MIT","main":"index.js","repository":{"type":"git","url":"git://github.com/feross/buffer.git"},"scripts":{"test":"standard && node ./bin/test.js","test-browser":"zuul -- test/*.js test/node/*.js","test-browser-local":"zuul --local -- test/*.js test/node/*.js","test-node":"tape test/*.js test/node/*.js test/es6/*.js && OBJECT_IMPL=true tape test/*.js test/node/*.js","perf":"browserify --debug perf/bracket-notation.js > perf/bundle.js && open perf/index.html","perf-node":"node perf/bracket-notation.js && node perf/concat.js && node perf/copy-big.js && node perf/copy.js && node perf/new-big.js && node perf/new.js && node perf/readDoubleBE.js && node perf/readFloatBE.js && node perf/readUInt32LE.js && node perf/slice.js && node perf/writeFloatBE.js","size":"browserify -r ./ | uglifyjs -c -m | gzip | wc -c"},"standard":{"ignore":["test/node/*.js","test/es6/*.js","test/_polyfill.js","perf/*.js"]},"testling":{"files":"test/*.js","browsers":["ie/6..latest","chrome/4..latest","firefox/3..latest","safari/5.1..latest","opera/12.0..latest","iphone/6","ipad/6","android-browser/latest"]},"gitHead":"0b25bfb16c0b4dfb0656fe1d2daa09a3c15c6dcd","_id":"buffer@3.2.2","_shasum":"15d3ead5b994e8170e228540d7ff1286c25aa53b","_from":"buffer@>=3.0.0 <4.0.0","_npmVersion":"2.7.4","_nodeVersion":"0.12.2","_npmUser":{"name":"feross","email":"feross@feross.org"},"maintainers":[{"name":"feross","email":"feross@feross.org"}],"dist":{"shasum":"15d3ead5b994e8170e228540d7ff1286c25aa53b","tarball":"http://registry.npmjs.org/buffer/-/buffer-3.2.2.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/buffer/-/buffer-3.2.2.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/index.js":{"name":"buffer","description":"Node.js Buffer API, for the browser","version":"3.2.2","author":{"name":"Feross Aboukhadijeh","email":"feross@feross.org","url":"http://feross.org"},"bugs":{"url":"https://github.com/feross/buffer/issues"},"contributors":[{"name":"Romain Beauxis","email":"toots@rastageeks.org"},{"name":"James Halliday","email":"mail@substack.net"}],"dependencies":{"base64-js":"0.0.8","ieee754":"^1.1.4","is-array":"^1.0.1"},"devDependencies":{"benchmark":"^1.0.0","browserify":"^10.1.0","concat-stream":"^1.4.7","hyperquest":"^1.0.1","is-nan":"^1.0.1","split":"^0.3.2","standard":"^3.6.1","tape":"^4.0.0","through2":"^0.6.3","zuul":"^3.0.0"},"homepage":"https://github.com/feross/buffer","keywords":["buffer","browserify","compatible","browser","arraybuffer","uint8array","dataview"],"license":"MIT","main":"index.js","repository":{"type":"git","url":"git://github.com/feross/buffer.git"},"scripts":{"test":"standard && node ./bin/test.js","test-browser":"zuul -- test/*.js test/node/*.js","test-browser-local":"zuul --local -- test/*.js test/node/*.js","test-node":"tape test/*.js test/node/*.js test/es6/*.js && OBJECT_IMPL=true tape test/*.js test/node/*.js","perf":"browserify --debug perf/bracket-notation.js > perf/bundle.js && open perf/index.html","perf-node":"node perf/bracket-notation.js && node perf/concat.js && node perf/copy-big.js && node perf/copy.js && node perf/new-big.js && node perf/new.js && node perf/readDoubleBE.js && node perf/readFloatBE.js && node perf/readUInt32LE.js && node perf/slice.js && node perf/writeFloatBE.js","size":"browserify -r ./ | uglifyjs -c -m | gzip | wc -c"},"standard":{"ignore":["test/node/*.js","test/es6/*.js","test/_polyfill.js","perf/*.js"]},"testling":{"files":"test/*.js","browsers":["ie/6..latest","chrome/4..latest","firefox/3..latest","safari/5.1..latest","opera/12.0..latest","iphone/6","ipad/6","android-browser/latest"]},"gitHead":"0b25bfb16c0b4dfb0656fe1d2daa09a3c15c6dcd","_id":"buffer@3.2.2","_shasum":"15d3ead5b994e8170e228540d7ff1286c25aa53b","_from":"buffer@>=3.0.0 <4.0.0","_npmVersion":"2.7.4","_nodeVersion":"0.12.2","_npmUser":{"name":"feross","email":"feross@feross.org"},"maintainers":[{"name":"feross","email":"feross@feross.org"}],"dist":{"shasum":"15d3ead5b994e8170e228540d7ff1286c25aa53b","tarball":"http://registry.npmjs.org/buffer/-/buffer-3.2.2.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/buffer/-/buffer-3.2.2.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/string_decoder/package.json":{"name":"string_decoder","version":"0.10.31","description":"The string_decoder module from Node core","main":"index.js","dependencies":{},"devDependencies":{"tap":"~0.4.8"},"scripts":{"test":"tap test/simple/*.js"},"repository":{"type":"git","url":"git://github.com/rvagg/string_decoder.git"},"homepage":"https://github.com/rvagg/string_decoder","keywords":["string","decoder","browser","browserify"],"license":"MIT","readme":"**string_decoder.js** (`require('string_decoder')`) from Node.js core\n\nCopyright Joyent, Inc. and other Node contributors. See LICENCE file for details.\n\nVersion numbers match the versions found in Node core, e.g. 0.10.24 matches Node 0.10.24, likewise 0.11.10 matches Node 0.11.10. **Prefer the stable version over the unstable.**\n\nThe *build/* directory contains a build script that will scrape the source from the [joyent/node](https://github.com/joyent/node) repo given a specific Node version.","readmeFilename":"README.md","bugs":{"url":"https://github.com/rvagg/string_decoder/issues"},"_id":"string_decoder@0.10.31","_from":"string_decoder@>=0.10.0 <0.11.0","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/string_decoder"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/string_decoder/index.js":{"name":"string_decoder","version":"0.10.31","description":"The string_decoder module from Node core","main":"index.js","dependencies":{},"devDependencies":{"tap":"~0.4.8"},"scripts":{"test":"tap test/simple/*.js"},"repository":{"type":"git","url":"git://github.com/rvagg/string_decoder.git"},"homepage":"https://github.com/rvagg/string_decoder","keywords":["string","decoder","browser","browserify"],"license":"MIT","readme":"**string_decoder.js** (`require('string_decoder')`) from Node.js core\n\nCopyright Joyent, Inc. and other Node contributors. See LICENCE file for details.\n\nVersion numbers match the versions found in Node core, e.g. 0.10.24 matches Node 0.10.24, likewise 0.11.10 matches Node 0.11.10. **Prefer the stable version over the unstable.**\n\nThe *build/* directory contains a build script that will scrape the source from the [joyent/node](https://github.com/joyent/node) repo given a specific Node version.","readmeFilename":"README.md","bugs":{"url":"https://github.com/rvagg/string_decoder/issues"},"_id":"string_decoder@0.10.31","_from":"string_decoder@>=0.10.0 <0.11.0","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/string_decoder"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/package.json":{"name":"mimelib","description":"MIME functions to encode/decode e-mails etc.","version":"0.2.19","author":{"name":"Andris Reinman"},"homepage":"http://github.com/andris9/mimelib","maintainers":[{"name":"andris","email":"andris@node.ee"}],"contributors":[{"name":"Swift","email":"theycallmeswift@gmail.com"}],"repository":{"type":"git","url":"http://github.com/andris9/mimelib.git"},"scripts":{"test":"nodeunit test/"},"main":"index.js","licenses":[{"type":"MIT","url":"http://github.com/andris9/mimelib/blob/master/LICENSE"}],"dependencies":{"encoding":"~0.1.7","addressparser":"~0.3.2"},"devDependencies":{"nodeunit":"*"},"keywords":["e-mail","mime","email"],"gitHead":"411230aa03a547185391e8be3bdf2ba84b5c08e8","bugs":{"url":"https://github.com/andris9/mimelib/issues"},"_id":"mimelib@0.2.19","_shasum":"37ec90a6ac7d00954851d0b2c31618f0a49da0ee","_from":"mimelib@>=0.2.19 <0.3.0","_npmVersion":"2.5.1","_nodeVersion":"0.12.0","_npmUser":{"name":"andris","email":"andris@kreata.ee"},"dist":{"shasum":"37ec90a6ac7d00954851d0b2c31618f0a49da0ee","tarball":"http://registry.npmjs.org/mimelib/-/mimelib-0.2.19.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/mimelib/-/mimelib-0.2.19.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/index.js":{"name":"mimelib","description":"MIME functions to encode/decode e-mails etc.","version":"0.2.19","author":{"name":"Andris Reinman"},"homepage":"http://github.com/andris9/mimelib","maintainers":[{"name":"andris","email":"andris@node.ee"}],"contributors":[{"name":"Swift","email":"theycallmeswift@gmail.com"}],"repository":{"type":"git","url":"http://github.com/andris9/mimelib.git"},"scripts":{"test":"nodeunit test/"},"main":"index.js","licenses":[{"type":"MIT","url":"http://github.com/andris9/mimelib/blob/master/LICENSE"}],"dependencies":{"encoding":"~0.1.7","addressparser":"~0.3.2"},"devDependencies":{"nodeunit":"*"},"keywords":["e-mail","mime","email"],"gitHead":"411230aa03a547185391e8be3bdf2ba84b5c08e8","bugs":{"url":"https://github.com/andris9/mimelib/issues"},"_id":"mimelib@0.2.19","_shasum":"37ec90a6ac7d00954851d0b2c31618f0a49da0ee","_from":"mimelib@>=0.2.19 <0.3.0","_npmVersion":"2.5.1","_nodeVersion":"0.12.0","_npmUser":{"name":"andris","email":"andris@kreata.ee"},"dist":{"shasum":"37ec90a6ac7d00954851d0b2c31618f0a49da0ee","tarball":"http://registry.npmjs.org/mimelib/-/mimelib-0.2.19.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/mimelib/-/mimelib-0.2.19.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/lib/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser/src/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/lib/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/ieee754/package.json":{"name":"ieee754","version":"1.1.5","description":"Read/write IEEE754 floating point numbers from/to a Buffer or array-like object","main":"index.js","dependencies":{},"devDependencies":{"standard":"^3.7.3","tape":"^4.0.0","zuul":"^3.0.0"},"repository":{"type":"git","url":"git://github.com/feross/ieee754.git"},"keywords":["ieee754","IEEE 754","floating point","buffer","convert"],"author":{"name":"Feross Aboukhadijeh","email":"feross@feross.org","url":"http://feross.org/"},"contributors":[{"name":"Romain Beauxis","email":"toots@rastageeks.org"}],"scripts":{"test":"standard && npm run test-node && npm run test-browser","test-browser":"zuul -- test/*.js","test-browser-local":"zuul --local -- test/*.js","test-node":"tape test/*.js"},"license":"MIT","gitHead":"a92e12057e5005f2b8903872a181f020ac5ba01c","bugs":{"url":"https://github.com/feross/ieee754/issues"},"homepage":"https://github.com/feross/ieee754","_id":"ieee754@1.1.5","_shasum":"2ddd7b4e3e48bcc67a32eed6abe9eeb18c5159e8","_from":"ieee754@>=1.1.4 <2.0.0","_npmVersion":"2.7.4","_nodeVersion":"0.12.2","_npmUser":{"name":"feross","email":"feross@feross.org"},"maintainers":[{"name":"feross","email":"feross@feross.org"}],"dist":{"shasum":"2ddd7b4e3e48bcc67a32eed6abe9eeb18c5159e8","tarball":"http://registry.npmjs.org/ieee754/-/ieee754-1.1.5.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/ieee754/-/ieee754-1.1.5.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/ieee754"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/ieee754/index.js":{"name":"ieee754","version":"1.1.5","description":"Read/write IEEE754 floating point numbers from/to a Buffer or array-like object","main":"index.js","dependencies":{},"devDependencies":{"standard":"^3.7.3","tape":"^4.0.0","zuul":"^3.0.0"},"repository":{"type":"git","url":"git://github.com/feross/ieee754.git"},"keywords":["ieee754","IEEE 754","floating point","buffer","convert"],"author":{"name":"Feross Aboukhadijeh","email":"feross@feross.org","url":"http://feross.org/"},"contributors":[{"name":"Romain Beauxis","email":"toots@rastageeks.org"}],"scripts":{"test":"standard && npm run test-node && npm run test-browser","test-browser":"zuul -- test/*.js","test-browser-local":"zuul --local -- test/*.js","test-node":"tape test/*.js"},"license":"MIT","gitHead":"a92e12057e5005f2b8903872a181f020ac5ba01c","bugs":{"url":"https://github.com/feross/ieee754/issues"},"homepage":"https://github.com/feross/ieee754","_id":"ieee754@1.1.5","_shasum":"2ddd7b4e3e48bcc67a32eed6abe9eeb18c5159e8","_from":"ieee754@>=1.1.4 <2.0.0","_npmVersion":"2.7.4","_nodeVersion":"0.12.2","_npmUser":{"name":"feross","email":"feross@feross.org"},"maintainers":[{"name":"feross","email":"feross@feross.org"}],"dist":{"shasum":"2ddd7b4e3e48bcc67a32eed6abe9eeb18c5159e8","tarball":"http://registry.npmjs.org/ieee754/-/ieee754-1.1.5.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/ieee754/-/ieee754-1.1.5.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/ieee754"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/is-array/package.json":{"name":"is-array","repository":{"type":"git","url":"https://github.com/retrofox/is-array"},"description":"Check if the given value is an Array","version":"1.0.1","keywords":["isArray","es5","array"],"dependencies":{},"license":"MIT","readme":"<a href=\"https://jepso-ci.com/yields/isArray\">\n  <img src=\"https://jepso-ci.com/yields/isArray.svg\" align=\"right\" alt=\"jepso-ci status\" />\n</a>\n# isArray\n\n  Check if the given `value` is an `Array`.\n\n## Installation\n\n    $ component install yields/isArray\n\n## API\n\n### isArray(val)\n\n```javascript\nisArray(arguments);\n// > false\nisArray();\n// > false\nisArray([]);\n// > true\n```\n\n## License\n\n  MIT\n","readmeFilename":"Readme.md","bugs":{"url":"https://github.com/retrofox/is-array/issues"},"homepage":"https://github.com/retrofox/is-array","_id":"is-array@1.0.1","_from":"is-array@>=1.0.1 <2.0.0","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/is-array"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/is-array/index.js":{"name":"is-array","repository":{"type":"git","url":"https://github.com/retrofox/is-array"},"description":"Check if the given value is an Array","version":"1.0.1","keywords":["isArray","es5","array"],"dependencies":{},"license":"MIT","readme":"<a href=\"https://jepso-ci.com/yields/isArray\">\n  <img src=\"https://jepso-ci.com/yields/isArray.svg\" align=\"right\" alt=\"jepso-ci status\" />\n</a>\n# isArray\n\n  Check if the given `value` is an `Array`.\n\n## Installation\n\n    $ component install yields/isArray\n\n## API\n\n### isArray(val)\n\n```javascript\nisArray(arguments);\n// > false\nisArray();\n// > false\nisArray([]);\n// > true\n```\n\n## License\n\n  MIT\n","readmeFilename":"Readme.md","bugs":{"url":"https://github.com/retrofox/is-array/issues"},"homepage":"https://github.com/retrofox/is-array","_id":"is-array@1.0.1","_from":"is-array@>=1.0.1 <2.0.0","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/is-array"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js/package.json":{"author":{"name":"T. Jameson Little","email":"t.jameson.little@gmail.com"},"name":"base64-js","description":"Base64 encoding/decoding in pure JS","version":"0.0.8","repository":{"type":"git","url":"git://github.com/beatgammit/base64-js.git"},"main":"lib/b64.js","scripts":{"test":"tape test/*.js"},"testling":{"files":"test/*.js","browsers":["ie/6..latest","chrome/4..latest","firefox/3..latest","safari/5.1..latest","opera/11.0..latest","iphone/6","ipad/6"]},"engines":{"node":">= 0.4"},"license":"MIT","dependencies":{},"devDependencies":{"tape":"~2.3.2"},"gitHead":"b4a8a5fa9b0caeddb5ad94dd1108253d8f2a315f","bugs":{"url":"https://github.com/beatgammit/base64-js/issues"},"homepage":"https://github.com/beatgammit/base64-js","_id":"base64-js@0.0.8","_shasum":"1101e9544f4a76b1bc3b26d452ca96d7a35e7978","_from":"base64-js@0.0.8","_npmVersion":"2.1.16","_nodeVersion":"0.10.35","_npmUser":{"name":"feross","email":"feross@feross.org"},"maintainers":[{"name":"beatgammit","email":"t.jameson.little@gmail.com"},{"name":"feross","email":"feross@feross.org"}],"dist":{"shasum":"1101e9544f4a76b1bc3b26d452ca96d7a35e7978","tarball":"http://registry.npmjs.org/base64-js/-/base64-js-0.0.8.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/base64-js/-/base64-js-0.0.8.tgz","readme":"base64-js\n=========\n\n`base64-js` does basic base64 encoding/decoding in pure JS.\n\n[![build status](https://secure.travis-ci.org/beatgammit/base64-js.png)](http://travis-ci.org/beatgammit/base64-js)\n\n[![testling badge](https://ci.testling.com/beatgammit/base64-js.png)](https://ci.testling.com/beatgammit/base64-js)\n\nMany browsers already have base64 encoding/decoding functionality, but it is for text data, not all-purpose binary data.\n\nSometimes encoding/decoding binary data in the browser is useful, and that is what this module does.\n\n## install\n\nWith [npm](https://npmjs.org) do:\n\n`npm install base64-js`\n\n## methods\n\n`var base64 = require('base64-js')`\n\n`base64` has two exposed functions, `toByteArray` and `fromByteArray`, which both take a single argument.\n\n* `toByteArray` - Takes a base64 string and returns a byte array\n* `fromByteArray` - Takes a byte array and returns a base64 string\n\n## license\n\nMIT","readmeFilename":"README.md","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js/lib/b64.js":{"author":{"name":"T. Jameson Little","email":"t.jameson.little@gmail.com"},"name":"base64-js","description":"Base64 encoding/decoding in pure JS","version":"0.0.8","repository":{"type":"git","url":"git://github.com/beatgammit/base64-js.git"},"main":"lib/b64.js","scripts":{"test":"tape test/*.js"},"testling":{"files":"test/*.js","browsers":["ie/6..latest","chrome/4..latest","firefox/3..latest","safari/5.1..latest","opera/11.0..latest","iphone/6","ipad/6"]},"engines":{"node":">= 0.4"},"license":"MIT","dependencies":{},"devDependencies":{"tape":"~2.3.2"},"gitHead":"b4a8a5fa9b0caeddb5ad94dd1108253d8f2a315f","bugs":{"url":"https://github.com/beatgammit/base64-js/issues"},"homepage":"https://github.com/beatgammit/base64-js","_id":"base64-js@0.0.8","_shasum":"1101e9544f4a76b1bc3b26d452ca96d7a35e7978","_from":"base64-js@0.0.8","_npmVersion":"2.1.16","_nodeVersion":"0.10.35","_npmUser":{"name":"feross","email":"feross@feross.org"},"maintainers":[{"name":"beatgammit","email":"t.jameson.little@gmail.com"},{"name":"feross","email":"feross@feross.org"}],"dist":{"shasum":"1101e9544f4a76b1bc3b26d452ca96d7a35e7978","tarball":"http://registry.npmjs.org/base64-js/-/base64-js-0.0.8.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/base64-js/-/base64-js-0.0.8.tgz","readme":"base64-js\n=========\n\n`base64-js` does basic base64 encoding/decoding in pure JS.\n\n[![build status](https://secure.travis-ci.org/beatgammit/base64-js.png)](http://travis-ci.org/beatgammit/base64-js)\n\n[![testling badge](https://ci.testling.com/beatgammit/base64-js.png)](https://ci.testling.com/beatgammit/base64-js)\n\nMany browsers already have base64 encoding/decoding functionality, but it is for text data, not all-purpose binary data.\n\nSometimes encoding/decoding binary data in the browser is useful, and that is what this module does.\n\n## install\n\nWith [npm](https://npmjs.org) do:\n\n`npm install base64-js`\n\n## methods\n\n`var base64 = require('base64-js')`\n\n`base64` has two exposed functions, `toByteArray` and `fromByteArray`, which both take a single argument.\n\n* `toByteArray` - Takes a base64 string and returns a byte array\n* `fromByteArray` - Takes a byte array and returns a base64 string\n\n## license\n\nMIT","readmeFilename":"README.md","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/buffer/node_modules/base64-js"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser/package.json":{"name":"addressparser","version":"0.3.2","description":"Parse e-mail addresses","main":"src/addressparser.js","repository":{"type":"git","url":"https://github.com/andris9/addressparser.git"},"author":{"name":"Andris Reinman"},"license":"MIT","scripts":{"test":"grunt"},"devDependencies":{"chai":"^1.10.0","grunt":"^0.4.5","grunt-contrib-jshint":"^0.10.0","grunt-mocha-test":"^0.12.4","mocha":"^2.1.0"},"bugs":{"url":"https://github.com/andris9/addressparser/issues"},"homepage":"https://github.com/andris9/addressparser","_id":"addressparser@0.3.2","dist":{"shasum":"59873f35e8fcf6c7361c10239261d76e15348bb2","tarball":"http://registry.npmjs.org/addressparser/-/addressparser-0.3.2.tgz"},"_from":"addressparser@>=0.3.2 <0.4.0","_npmVersion":"1.4.3","_npmUser":{"name":"andris","email":"andris@node.ee"},"maintainers":[{"name":"andris","email":"andris@node.ee"}],"directories":{},"_shasum":"59873f35e8fcf6c7361c10239261d76e15348bb2","_resolved":"https://registry.npmjs.org/addressparser/-/addressparser-0.3.2.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser/src/addressparser.js":{"name":"addressparser","version":"0.3.2","description":"Parse e-mail addresses","main":"src/addressparser.js","repository":{"type":"git","url":"https://github.com/andris9/addressparser.git"},"author":{"name":"Andris Reinman"},"license":"MIT","scripts":{"test":"grunt"},"devDependencies":{"chai":"^1.10.0","grunt":"^0.4.5","grunt-contrib-jshint":"^0.10.0","grunt-mocha-test":"^0.12.4","mocha":"^2.1.0"},"bugs":{"url":"https://github.com/andris9/addressparser/issues"},"homepage":"https://github.com/andris9/addressparser","_id":"addressparser@0.3.2","dist":{"shasum":"59873f35e8fcf6c7361c10239261d76e15348bb2","tarball":"http://registry.npmjs.org/addressparser/-/addressparser-0.3.2.tgz"},"_from":"addressparser@>=0.3.2 <0.4.0","_npmVersion":"1.4.3","_npmUser":{"name":"andris","email":"andris@node.ee"},"maintainers":[{"name":"andris","email":"andris@node.ee"}],"directories":{},"_shasum":"59873f35e8fcf6c7361c10239261d76e15348bb2","_resolved":"https://registry.npmjs.org/addressparser/-/addressparser-0.3.2.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/addressparser"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/package.json":{"name":"encoding","version":"0.1.11","description":"Convert encodings, uses iconv by default and fallbacks to iconv-lite if needed","main":"lib/encoding.js","scripts":{"test":"nodeunit test"},"repository":{"type":"git","url":"https://github.com/andris9/encoding.git"},"author":{"name":"Andris Reinman"},"license":"MIT","dependencies":{"iconv-lite":"~0.4.4"},"devDependencies":{"nodeunit":"~0.8.1"},"gitHead":"b1f9ea063c33c70daa4b66662ef8374117306645","bugs":{"url":"https://github.com/andris9/encoding/issues"},"homepage":"https://github.com/andris9/encoding","_id":"encoding@0.1.11","_shasum":"52c65ac15aab467f1338451e2615f988eccc0258","_from":"encoding@>=0.1.7 <0.2.0","_npmVersion":"1.4.28","_npmUser":{"name":"andris","email":"andris@node.ee"},"maintainers":[{"name":"andris","email":"andris@node.ee"}],"dist":{"shasum":"52c65ac15aab467f1338451e2615f988eccc0258","tarball":"http://registry.npmjs.org/encoding/-/encoding-0.1.11.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/encoding/-/encoding-0.1.11.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/lib/encoding.js":{"name":"encoding","version":"0.1.11","description":"Convert encodings, uses iconv by default and fallbacks to iconv-lite if needed","main":"lib/encoding.js","scripts":{"test":"nodeunit test"},"repository":{"type":"git","url":"https://github.com/andris9/encoding.git"},"author":{"name":"Andris Reinman"},"license":"MIT","dependencies":{"iconv-lite":"~0.4.4"},"devDependencies":{"nodeunit":"~0.8.1"},"gitHead":"b1f9ea063c33c70daa4b66662ef8374117306645","bugs":{"url":"https://github.com/andris9/encoding/issues"},"homepage":"https://github.com/andris9/encoding","_id":"encoding@0.1.11","_shasum":"52c65ac15aab467f1338451e2615f988eccc0258","_from":"encoding@>=0.1.7 <0.2.0","_npmVersion":"1.4.28","_npmUser":{"name":"andris","email":"andris@node.ee"},"maintainers":[{"name":"andris","email":"andris@node.ee"}],"dist":{"shasum":"52c65ac15aab467f1338451e2615f988eccc0258","tarball":"http://registry.npmjs.org/encoding/-/encoding-0.1.11.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/encoding/-/encoding-0.1.11.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/lib/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/package.json":{"name":"iconv-lite","description":"Convert character encodings in pure javascript.","version":"0.4.8","license":"MIT","keywords":["iconv","convert","charset","icu"],"author":{"name":"Alexander Shtuchkin","email":"ashtuchkin@gmail.com"},"contributors":[{"name":"Jinwu Zhan","url":"https://github.com/jenkinv"},{"name":"Adamansky Anton","url":"https://github.com/adamansky"},{"name":"George Stagas","url":"https://github.com/stagas"},{"name":"Mike D Pilsbury","url":"https://github.com/pekim"},{"name":"Niggler","url":"https://github.com/Niggler"},{"name":"wychi","url":"https://github.com/wychi"},{"name":"David Kuo","url":"https://github.com/david50407"},{"name":"ChangZhuo Chen","url":"https://github.com/czchen"},{"name":"Lee Treveil","url":"https://github.com/leetreveil"},{"name":"Brian White","url":"https://github.com/mscdex"},{"name":"Mithgol","url":"https://github.com/Mithgol"},{"name":"Nazar Leush","url":"https://github.com/nleush"}],"main":"./lib/index.js","homepage":"https://github.com/ashtuchkin/iconv-lite","bugs":{"url":"https://github.com/ashtuchkin/iconv-lite/issues"},"repository":{"type":"git","url":"git://github.com/ashtuchkin/iconv-lite.git"},"engines":{"node":">=0.8.0"},"scripts":{"coverage":"istanbul cover _mocha -- --grep .","coverage-open":"open coverage/lcov-report/index.html","test":"mocha --reporter spec --grep ."},"browser":{"./extend-node":false,"./streams":false},"devDependencies":{"mocha":"*","request":"2.47","unorm":"*","errto":"*","async":"*","istanbul":"*","iconv":"2.1.4"},"gitHead":"3dc7d0cb0e223b29634ecb7bff46910c8107ab3d","_id":"iconv-lite@0.4.8","_shasum":"c6019a7595f2cefca702eab694a010bcd9298d20","_from":"iconv-lite@>=0.4.4 <0.5.0","_npmVersion":"2.7.4","_nodeVersion":"0.12.2","_npmUser":{"name":"ashtuchkin","email":"ashtuchkin@gmail.com"},"maintainers":[{"name":"ashtuchkin","email":"ashtuchkin@gmail.com"}],"dist":{"shasum":"c6019a7595f2cefca702eab694a010bcd9298d20","tarball":"http://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.8.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.8.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/lib/index.js":{"name":"iconv-lite","description":"Convert character encodings in pure javascript.","version":"0.4.8","license":"MIT","keywords":["iconv","convert","charset","icu"],"author":{"name":"Alexander Shtuchkin","email":"ashtuchkin@gmail.com"},"contributors":[{"name":"Jinwu Zhan","url":"https://github.com/jenkinv"},{"name":"Adamansky Anton","url":"https://github.com/adamansky"},{"name":"George Stagas","url":"https://github.com/stagas"},{"name":"Mike D Pilsbury","url":"https://github.com/pekim"},{"name":"Niggler","url":"https://github.com/Niggler"},{"name":"wychi","url":"https://github.com/wychi"},{"name":"David Kuo","url":"https://github.com/david50407"},{"name":"ChangZhuo Chen","url":"https://github.com/czchen"},{"name":"Lee Treveil","url":"https://github.com/leetreveil"},{"name":"Brian White","url":"https://github.com/mscdex"},{"name":"Mithgol","url":"https://github.com/Mithgol"},{"name":"Nazar Leush","url":"https://github.com/nleush"}],"main":"./lib/index.js","homepage":"https://github.com/ashtuchkin/iconv-lite","bugs":{"url":"https://github.com/ashtuchkin/iconv-lite/issues"},"repository":{"type":"git","url":"git://github.com/ashtuchkin/iconv-lite.git"},"engines":{"node":">=0.8.0"},"scripts":{"coverage":"istanbul cover _mocha -- --grep .","coverage-open":"open coverage/lcov-report/index.html","test":"mocha --reporter spec --grep ."},"browser":{"./extend-node":false,"./streams":false},"devDependencies":{"mocha":"*","request":"2.47","unorm":"*","errto":"*","async":"*","istanbul":"*","iconv":"2.1.4"},"gitHead":"3dc7d0cb0e223b29634ecb7bff46910c8107ab3d","_id":"iconv-lite@0.4.8","_shasum":"c6019a7595f2cefca702eab694a010bcd9298d20","_from":"iconv-lite@>=0.4.4 <0.5.0","_npmVersion":"2.7.4","_nodeVersion":"0.12.2","_npmUser":{"name":"ashtuchkin","email":"ashtuchkin@gmail.com"},"maintainers":[{"name":"ashtuchkin","email":"ashtuchkin@gmail.com"}],"dist":{"shasum":"c6019a7595f2cefca702eab694a010bcd9298d20","tarball":"http://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.8.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.8.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/mimelib/node_modules/encoding/node_modules/iconv-lite/encodings/tables/package.json":false,"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve/package.json":{"name":"browser-resolve","version":"1.8.2","description":"resolve which handles browser field support in package.json","main":"index.js","scripts":{"test":"mocha --reporter list test/*.js"},"repository":{"type":"git","url":"git://github.com/shtylman/node-browser-resolve.git"},"keywords":["resolve","browser"],"author":{"name":"Roman Shtylman","email":"shtylman@gmail.com"},"license":"MIT","dependencies":{"resolve":"1.1.6"},"devDependencies":{"mocha":"1.14.0"},"gitHead":"5c8476c23332fd2e97329557fb075ace65c8fb23","bugs":{"url":"https://github.com/shtylman/node-browser-resolve/issues"},"homepage":"https://github.com/shtylman/node-browser-resolve","_id":"browser-resolve@1.8.2","_shasum":"a00b06c871bee21b50d450ff94c2a423bc787729","_from":"browser-resolve@>=1.3.0 <2.0.0","_npmVersion":"2.7.3","_nodeVersion":"0.10.35","_npmUser":{"name":"shtylman","email":"shtylman@gmail.com"},"maintainers":[{"name":"shtylman","email":"shtylman@gmail.com"},{"name":"substack","email":"mail@substack.net"}],"dist":{"shasum":"a00b06c871bee21b50d450ff94c2a423bc787729","tarball":"http://registry.npmjs.org/browser-resolve/-/browser-resolve-1.8.2.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/browser-resolve/-/browser-resolve-1.8.2.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve"},"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve/empty.js":{"name":"browser-resolve","version":"1.8.2","description":"resolve which handles browser field support in package.json","main":"index.js","scripts":{"test":"mocha --reporter list test/*.js"},"repository":{"type":"git","url":"git://github.com/shtylman/node-browser-resolve.git"},"keywords":["resolve","browser"],"author":{"name":"Roman Shtylman","email":"shtylman@gmail.com"},"license":"MIT","dependencies":{"resolve":"1.1.6"},"devDependencies":{"mocha":"1.14.0"},"gitHead":"5c8476c23332fd2e97329557fb075ace65c8fb23","bugs":{"url":"https://github.com/shtylman/node-browser-resolve/issues"},"homepage":"https://github.com/shtylman/node-browser-resolve","_id":"browser-resolve@1.8.2","_shasum":"a00b06c871bee21b50d450ff94c2a423bc787729","_from":"browser-resolve@>=1.3.0 <2.0.0","_npmVersion":"2.7.3","_nodeVersion":"0.10.35","_npmUser":{"name":"shtylman","email":"shtylman@gmail.com"},"maintainers":[{"name":"shtylman","email":"shtylman@gmail.com"},{"name":"substack","email":"mail@substack.net"}],"dist":{"shasum":"a00b06c871bee21b50d450ff94c2a423bc787729","tarball":"http://registry.npmjs.org/browser-resolve/-/browser-resolve-1.8.2.tgz"},"directories":{},"_resolved":"https://registry.npmjs.org/browser-resolve/-/browser-resolve-1.8.2.tgz","readme":"ERROR: No README data found!","__dirname":"/Users/piggyslasher/Sites/lavaboom-web/node_modules/browserify/node_modules/browser-resolve"}}}